function ba(a){throw a;}var h=void 0,i=null;function n(){return function(){}}function ca(a){return function(b){this[a]=b}}function da(a){return function(){return this[a]}}function q(a){return function(){return a}}var r,u=this;function ea(a){for(var a=a.split("."),b=u,c;c=a.shift();)if(b[c]!=i)b=b[c];else return i;return b}function ia(){}
function ja(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function v(a){return a!==h}function ka(a){return ja(a)=="array"}function la(a){var b=ja(a);return b=="array"||b=="object"&&typeof a.length=="number"}function ma(a){return typeof a=="string"}function na(a){return ja(a)=="function"}function ra(a){a=ja(a);return a=="object"||a=="array"||a=="function"}function sa(a){return a[ta]||(a[ta]=++ua)}var ta="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ua=0;
function va(a){return a.call.apply(a.bind,arguments)}function wa(a,b){var c=b||u;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}else return function(){return a.apply(c,arguments)}}function xa(){xa=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?va:wa;return xa.apply(i,arguments)}var ya=Date.now||function(){return+new Date};
function y(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&v(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function za(a,b){function c(){}c.prototype=b.prototype;a.Ge=b.prototype;a.prototype=new c;a.prototype.constructor=a};var z=0,B=1,Aa=2,Ba=3,Ca=4,Da=5,Ea=6,Fa=7,Ga=8,Ha=9,Ia=10,Ja=11,Ka=12,La=13,Ma=14,Na=15,Oa=16,Pa=17,Qa=18,Ra=19,Sa=20,Ta=21,Ua=22,Va=23,Wa=24,Xa=65533,Ya=65534,Za=25,$a=26,ab=65535;y("OG_OBJECT_CONTEXT",z);y("OG_OBJECT_SCENE",B);y("OG_OBJECT_WORLD",Aa);y("OG_OBJECT_IMAGELAYER",Ba);y("OG_OBJECT_ELEVATIONLAYER",Ca);y("OG_OBJECT_WAYPOINTLAYER",Da);y("OG_OBJECT_GEOMETRYLAYER",Fa);y("OG_OBJECT_POILAYER",Ea);y("OG_OBJECT_VOXELLAYER",Ga);y("OG_OBJECT_VECTORLAYER",Ha);y("OG_OBJECT_IMAGE",Ia);
y("OG_OBJECT_TEXTURE",Ja);y("OG_OBJECT_PIXELBUFFER",Ka);y("OG_OBJECT_GEOMETRY",La);y("OG_OBJECT_MESH",Ma);y("OG_OBJECT_SURFACE",Na);y("OG_OBJECT_VECTOR",Oa);y("OG_OBJECT_CAMERA",Pa);y("OG_OBJECT_TEXT",Qa);y("OG_OBJECT_BINARYDATA",Ra);y("OG_OBJECT_LIGHT",Sa);y("OG_OBJECT_NAVIGATIONCONTROLLER",Ta);y("OG_OBJECT_POI",Ua);y("OG_OBJECT_BILLBOARD",Va);y("OG_OBJECT_BILLBOARDLAYER",Wa);y("OG_OBJECT_AOEIMAGELAYER",Xa);y("OG_OBJECT_AOEIMAGE",Ya);y("OG_OBJECT_POINTSPRITE",Za);y("OG_OBJECT_EARTHPOLYLINE",$a);
y("OG_OBJECT_INVALID",ab);y("OG_RENDEREFFECT_RGB",0);y("OG_RENDEREFFECT_CHROMADEPTH",1);var bb=1,cb=2,db=3,eb=4;y("OG_SCENE_3D_ELLIPSOID_WGS84",bb);y("OG_SCENE_3D_FLAT_CARTESIAN",cb);y("OG_SCENE_2D_SCREEN",db);y("OG_SCENE_CUSTOM",eb);var fb=1,gb=2;y("OG_OBJECT_READY",fb);y("OG_OBJECT_BUSY",gb);y("OG_OBJECT_FAILED",3);var hb=[];function C(a){if(a==-1)return i;for(var b=0;b<hb.length;b++)if(hb[b].id==a)return hb[b];return i}function D(){this.parent=i;this.name="ogObject";this.type=ab;this.id=-1;this.status=fb;this.O=this.P=i}D.prototype.Ka=n();function E(a){for(var a=a.id,b=0;b<hb.length;b++)if(hb[b].id==a){hb[b].Ka();hb.splice(b,1);break}}D.prototype.wa=n();function ib(a,b){for(var c in a)b.call(h,a[c],c,a)}function jb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var kb=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function lb(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<kb.length;e++)b=kb[e],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}};function mb(a){this.stack=Error().stack||"";if(a)this.message=String(a)}za(mb,Error);mb.prototype.name="CustomError";function nb(a){for(var b=1;b<arguments.length;b++)var c=String(arguments[b]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,c);return a}function ob(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function pb(a){if(!qb.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(rb,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(sb,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(tb,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(ub,"&quot;"));return a}var rb=/&/g,sb=/</g,tb=/>/g,ub=/\"/g,qb=/[&<>\"]/;
function vb(a){return ob(a.replace(/  /g," &#160;"),h)}
function wb(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var j=d[g]||"",k=e[g]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var p=l.exec(j)||["","",""],o=m.exec(k)||["","",""];if(p[0].length==0&&o[0].length==0)break;c=xb(p[1].length==0?0:parseInt(p[1],10),o[1].length==0?0:parseInt(o[1],10))||xb(p[2].length==0,o[2].length==0)||xb(p[2],o[2])}while(c==
0)}return c}function xb(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function yb(a,b){b.unshift(a);mb.call(this,nb.apply(i,b));b.shift();this.Gp=a}za(yb,mb);yb.prototype.name="AssertionError";function zb(a){ba(new yb("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var Ab=Array.prototype,Bb=Ab.indexOf?function(a,b,c){return Ab.indexOf.call(a,b,c)}:function(a,b,c){c=c==i?0:c<0?Math.max(0,a.length+c):c;if(ma(a)){if(!ma(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Cb=Ab.forEach?function(a,b,c){Ab.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function Db(){return Ab.concat.apply(Ab,arguments)}
function Eb(a){if(ka(a))return Db(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}function Fb(a,b,c){return arguments.length<=2?Ab.slice.call(a,b):Ab.slice.call(a,b,c)};var Gb="StopIteration"in u?u.StopIteration:Error("StopIteration");function Hb(){}Hb.prototype.next=function(){ba(Gb)};Hb.prototype.aj=function(){return this};function Ib(a){if(a instanceof Hb)return a;if(typeof a.aj=="function")return a.aj(!1);if(la(a)){var b=0,c=new Hb;c.next=function(){for(;;)if(b>=a.length&&ba(Gb),b in a)return a[b++];else b++};return c}ba(Error("Not implemented"))}
function Jb(a,b){if(la(a))try{Cb(a,b,h)}catch(c){c!==Gb&&ba(c)}else{a=Ib(a);try{for(;;)b.call(h,a.next(),h,a)}catch(d){d!==Gb&&ba(d)}}};function Kb(a){this.Wb={};this.Va=[];var b=arguments.length;if(b>1){b%2&&ba(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.set(arguments[c],arguments[c+1])}else if(a){if(a instanceof Kb)b=a.Rh(),c=a.Lj();else{var b=jb(a),d=[],e=0;for(c in a)d[e++]=a[c];c=d}for(d=0;d<b.length;d++)this.set(b[d],c[d])}}r=Kb.prototype;r.xa=0;r.yi=0;r.ne=da("xa");r.Lj=function(){Lb(this);for(var a=[],b=0;b<this.Va.length;b++)a.push(this.Wb[this.Va[b]]);return a};r.Rh=function(){Lb(this);return this.Va.concat()};
r.h=function(a,b){if(this===a)return!0;if(this.xa!=a.ne())return!1;var c=b||Mb;Lb(this);for(var d,e=0;d=this.Va[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Mb(a,b){return a===b}r.clear=function(){this.Wb={};this.yi=this.xa=this.Va.length=0};
function Lb(a){if(a.xa!=a.Va.length){for(var b=0,c=0;b<a.Va.length;){var d=a.Va[b];Object.prototype.hasOwnProperty.call(a.Wb,d)&&(a.Va[c++]=d);b++}a.Va.length=c}if(a.xa!=a.Va.length){for(var e={},c=b=0;b<a.Va.length;)d=a.Va[b],Object.prototype.hasOwnProperty.call(e,d)||(a.Va[c++]=d,e[d]=1),b++;a.Va.length=c}}r.get=function(a,b){if(Object.prototype.hasOwnProperty.call(this.Wb,a))return this.Wb[a];return b};
r.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Wb,a)||(this.xa++,this.Va.push(a),this.yi++);this.Wb[a]=b};r.aj=function(a){Lb(this);var b=0,c=this.Va,d=this.Wb,e=this.yi,f=this,g=new Hb;g.next=function(){for(;;){e!=f.yi&&ba(Error("The map has changed since the iterator was created"));b>=c.length&&ba(Gb);var g=c[b++];return a?g:d[g]}};return g};function Nb(a){return Ob(a||arguments.callee.caller,[])}
function Ob(a,b){var c=[];if(Bb(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(Pb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Pb(f))?f:"[fn]";break;default:f=typeof f}f.length>40&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Ob(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Pb(a){a=String(a);if(!Qb[a]){var b=/function ([^\(]+)/.exec(a);Qb[a]=b?b[1]:"[Anonymous]"}return Qb[a]}var Qb={};function Rb(a,b,c,d,e){this.reset(a,b,c,d,e)}Rb.prototype.Jo=0;Rb.prototype.Aj=i;Rb.prototype.zj=i;var Sb=0;Rb.prototype.reset=function(a,b,c,d,e){this.Jo=typeof e=="number"?e:Sb++;this.Om=d||ya();this.md=a;this.cm=b;this.Wl=c;delete this.Aj;delete this.zj};Rb.prototype.fi=ca("md");function Tb(a){this.uo=a}Tb.prototype.bi=i;Tb.prototype.md=i;Tb.prototype.vj=i;Tb.prototype.og=i;function Ub(a,b){this.name=a;this.value=b}Ub.prototype.toString=da("name");var Vb=new Ub("SHOUT",1200),Wb=new Ub("SEVERE",1E3),Xb=new Ub("WARNING",900),Yb=new Ub("INFO",800),Zb=new Ub("CONFIG",700),$b=[new Ub("OFF",Infinity),Vb,Wb,Xb,Yb,Zb,new Ub("FINE",500),new Ub("FINER",400),new Ub("FINEST",300),new Ub("ALL",0)],ac=i;
function bc(a){if(!ac){ac={};for(var b=0,c;c=$b[b];b++)ac[c.value]=c,ac[c.name]=c}return ac[a]||i}r=Tb.prototype;r.getParent=da("bi");r.fi=ca("md");function cc(a){if(a.md)return a.md;if(a.bi)return cc(a.bi);zb("Root logger has no level set.");return i}r.log=function(a,b,c){if(a.value>=cc(this).value){a=this.no(a,b,c);this.Vl("log:"+a.cm);for(b=this;b;){var c=b,d=a;if(c.og)for(var e=0,f=h;f=c.og[e];e++)f(d);b=b.getParent()}}};
r.no=function(a,b,c){var d=new Rb(a,String(b),this.uo);if(c){d.Aj=c;var e;var f=arguments.callee.caller;try{var g;var j=ea("window.location.href");if(ma(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,l,m=!1;try{k=c.lineNumber||c.Dp||"Not available"}catch(p){k="Not available",m=!0}try{l=c.fileName||c.filename||c.sourceURL||j}catch(o){l="Not available",m=!0}g=m||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:l,stack:c.stack||"Not available"}:c}e="Message: "+pb(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+pb(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+pb(Nb(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.zj=e}return d};function F(a,b){a.log(Xb,b,h)}r.info=function(a,b){this.log(Yb,a,b)};r.Vl=function(a){u.console&&u.console.markTimeline&&u.console.markTimeline(a)};
var dc={},ec=i;function fc(){ec||(ec=new Tb(""),dc[""]=ec,ec.fi(Zb))}function G(a){fc();var b;if(!(b=dc[a])){b=new Tb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=G(a.substr(0,c));if(!c.vj)c.vj={};c.vj[d]=b;b.bi=c;dc[a]=b}return b};function gc(){this.name="ogTexture";this.type=Ja;this.g=i;this.Mm="";this.status=gb}gc.prototype=new D;
gc.prototype.wa=function(a){if(a==i)F(G("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==i)F(G("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=B)F(G("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.g=this.parent.parent.c.si.Jk(a.url,function(){b.status=fb;b.P&&b.P(b.id)},function(){b.status=3;b.O&&b.O(b.id)},!1);this.Mm=a.url}};
gc.prototype.Ka=function(){if(this.g)this.parent.parent.c.si.Lk(this.Mm),this.g=i,this.status=3};gc.prototype.w=function(a,b,c){this.status==fb&&this.g&&(c!=i?this.g.w(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.g.w(a,b))};var hc=6378137,ic=0.006694379990197,jc=0.006739496742,H=1.1920930376163766E-7;function I(a){return a*0.017453292519943295}function kc(a){return a*57.29577951308232}function lc(a){for(var b=1;a>b;)b*=2;return b};function mc(){this.name="ogCamera";this.type=Pa;this.ac=this.pitch=this.Ha=this.Fc=this.Hc=this.Ic=0}mc.prototype=new D;r=mc.prototype;r.Ka=function(){this.ac=this.pitch=this.Ha=this.Fc=this.Hc=this.Ic=0};r.sa=function(a,b,c){this.Ic=a;this.Hc=b;this.Fc=c;this.parent.ee==this&&nc(this).sa(a,b,c)};r.Zd=function(){var a={};a.longitude=this.Ic;a.latitude=this.Hc;a.elevation=this.Fc;return a};r.Te=function(a,b,c){this.Ha=a;this.pitch=b;this.ac=c;this==this.parent.ee&&nc(this).Te(I(a),I(b),I(c))};
r.Hf=function(){var a={};a.yaw=this.Ha;a.pitch=this.pitch;a.roll=this.ac;return a};r.mh=function(a,b,c,d){this==this.parent.ee&&nc(this).mh(a,b,c,d)};function nc(a){var b=i,a=a.parent.parent.c;if(a.f&&a.f.wb)b=a.f.wb;return b}function oc(a){var b=nc(a),c=b.Zd(),b=b.Hf();a.Ic=c.longitude;a.Hc=c.latitude;a.Fc=c.elevation;a.Ha=kc(b.Ha);a.pitch=kc(b.pitch);a.ac=kc(b.ac)};function J(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.Bb=new Float32Array([a,b,c])}r=J.prototype;r.u=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};r.Ja=function(){this.Bb[0]=this.a[0];this.Bb[1]=this.a[1];this.Bb[2]=this.a[2];return this.Bb};r.Gf=da("a");r.Bf=function(){var a=new J;a.u(this.a[0],this.a[1],this.a[2]);return a};r.fn=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};r.$i=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
r.yn=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};r.jn=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function pc(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}r.kn=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
r.Mi=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return Math.sqrt(a+b+c)};r.xn=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return a+b+c};r.gc=function(){var a=this.Mi();a!=0&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};r.un=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};r.Ue=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};y("Cross",pc);y("vec3",J);J.prototype.Add=J.prototype.fn;
J.prototype.Cross=J.prototype.jn;J.prototype.Dot=J.prototype.kn;J.prototype.Get=J.prototype.Gf;J.prototype.Length=J.prototype.Mi;J.prototype.Neg=J.prototype.un;J.prototype.Normalize=J.prototype.gc;J.prototype.Set=J.prototype.u;J.prototype.SquaredLength=J.prototype.xn;J.prototype.Subtract=J.prototype.yn;J.prototype.Sub=J.prototype.$i;J.prototype.ToString=J.prototype.Ue;function K(){this.a=Array(16);this.$g();this.Bb=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}r=K.prototype;r.zd=function(a){if(a.length==16)for(var b=0;b<16;b++)this.a[b]=a[b]};r.Ja=function(){for(var a=0;a<16;a++)this.Bb[a]=this.a[a];return this.Bb};r.Gf=da("a");r.Bf=function(){for(var a=new K,b=0;b<16;b++)a.a[b]=this.a[b];return a};r.Y=function(a){for(var b=0;b<16;b++)this.a[b]=a.a[b]};
r.$g=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.zn=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Xc=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.Uk=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};r.yd=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return!0};
r.Xi=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};r.Xk=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
r.Yk=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
r.tn=function(a,b,c,d,e,f,g,j,k){var l,m,p,o,d=a-d,e=b-e,f=c-f;o=1/Math.sqrt(d*d+e*e+f*f);d*=o;e*=o;f*=o;l=j*f-k*e;k=k*d-g*f;g=g*e-j*d;(o=Math.sqrt(l*l+k*k+g*g))?(o=1/o,l*=o,k*=o,g*=o):g=k=l=0;j=e*g-f*k;m=f*l-d*g;p=d*k-e*l;(o=Math.sqrt(j*j+m*m+p*p))?(o=1/o,j*=o,m*=o,p*=o):p=m=j=0;this.a[0]=l;this.a[4]=k;this.a[8]=g;this.a[12]=-(l*a+k*b+g*c);this.a[1]=j;this.a[5]=m;this.a[9]=p;this.a[13]=-(j*a+m*b+p*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
r.V=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],k=a.a[6],l=a.a[7],m=a.a[8],p=a.a[9],o=a.a[10],s=a.a[11],t=a.a[12],w=a.a[13],x=a.a[14],fa=a.a[15],ga=b.a[0],P=b.a[1],aa=b.a[2],U=b.a[3],V=b.a[4],W=b.a[5],oa=b.a[6],pa=b.a[7],qa=b.a[8],A=b.a[9],X=b.a[10],ha=b.a[11],Y=b.a[12],Z=b.a[13],Q=b.a[14],Hc=b.a[15];this.a[0]=ga*c+P*g+aa*m+U*t;this.a[1]=ga*d+P*j+aa*p+U*w;this.a[2]=ga*e+P*k+aa*o+U*x;this.a[3]=ga*f+P*l+aa*s+U*fa;this.a[4]=V*c+W*g+oa*m+pa*t;this.a[5]=V*d+W*j+oa*p+pa*w;this.a[6]=
V*e+W*k+oa*o+pa*x;this.a[7]=V*f+W*l+oa*s+pa*fa;this.a[8]=qa*c+A*g+X*m+ha*t;this.a[9]=qa*d+A*j+X*p+ha*w;this.a[10]=qa*e+A*k+X*o+ha*x;this.a[11]=qa*f+A*l+X*s+ha*fa;this.a[12]=Y*c+Z*g+Q*m+Hc*t;this.a[13]=Y*d+Z*j+Q*p+Hc*w;this.a[14]=Y*e+Z*k+Q*o+Hc*x;this.a[15]=Y*f+Z*l+Q*s+Hc*fa};r.Ve=function(){for(var a=this.Bf(),b=0;b<4;b++)for(var c=0;c<4;c++)this.a[4*b+c]=a.a[4*c+b]};
r.Ia=function(a){var b=new J;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
r.nn=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=e*2/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=e*2/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/k;this.a[14]=-(f*e*2)/k;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
r.Vk=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
r.Sk=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/k;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/k;this.a[15]=1};r.Tk=function(a,b,c,d){this.Sk(a,b,c,d,-1,1)};
r.Xd=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.hn=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Ek=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Ei=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.ln=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],j=this.a[10];Math.abs(b)<1.0E-6&&Math.abs(d)<1.0E-6?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,j))};
r.Wg=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.Fk=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.mn=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,j=d*d;this.a[0]=e+f-g-j;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-j;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+j;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Xg=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,j=a*b,k=a*c,l=b*c;a*=d;b*=d;c*=d;this.a[0]=1-2*f-2*g;this.a[4]=2*j+2*c;this.a[8]=2*k-2*b;this.a[12]=0;this.a[1]=2*j-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*l+2*a;this.a[13]=0;this.a[2]=2*k+2*b;this.a[6]=2*l-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.vn=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],j=this.a[6],k=this.a[10],l=a+e+k;l>0?(l=Math.sqrt(l+1)*2,a=0.25*l,e=(j-f)/l,k=(c-g)/l,b=(d-b)/l):a>e&a>k?(l=Math.sqrt(1+a-e-k)*2,a=(j-f)/l,e=0.25*l,k=(b+d)/l,b=(c+g)/l):e>k?(l=Math.sqrt(1+e-a-k)*2,a=(c-g)/l,e=(b+d)/l,k=0.25*l,b=(f+j)/l):(l=Math.sqrt(1+k-a-e)*2,a=(d-b)/l,e=(c+g)/l,k=(f+j)/l,b=0.25*l);return[e,k,b,a]};
r.Ne=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],k=a.a[7],l=a.a[8],m=a.a[9],p=a.a[10],o=a.a[11],s=a.a[12],t=a.a[13],w=a.a[14],a=a.a[15],x=1/(b*g*p*a+b*j*o*t+b*k*m*w+c*f*o*w+c*j*l*a+c*k*p*s+d*f*m*a+d*g*o*s+d*k*l*t+e*f*p*t+e*g*l*w+e*j*m*s-b*g*o*w-b*j*m*a-b*k*p*t-c*f*p*a-c*j*o*s-c*k*l*w-d*f*o*t-d*g*l*a-d*k*m*s-e*f*m*w-e*g*p*s-e*j*l*t);this.a[0]=(g*p*a+j*o*t+k*m*w-g*o*w-j*m*a-k*p*t)*x;this.a[4]=(f*o*w+j*l*a+k*p*s-f*p*a-j*o*s-k*l*w)*x;this.a[8]=(f*m*a+g*o*s+k*l*t-f*o*
t-g*l*a-k*m*s)*x;this.a[12]=(f*p*t+g*l*w+j*m*s-f*m*w-g*p*s-j*l*t)*x;this.a[1]=(c*o*w+d*m*a+e*p*t-c*p*a-d*o*t-e*m*w)*x;this.a[5]=(b*p*a+d*o*s+e*l*w-b*o*w-d*l*a-e*p*s)*x;this.a[9]=(b*o*t+c*l*a+e*m*s-b*m*a-c*o*s-e*l*t)*x;this.a[13]=(b*m*w+c*p*s+d*l*t-b*p*t-c*l*w-d*m*s)*x;this.a[2]=(c*j*a+d*k*t+e*g*w-c*k*w-d*g*a-e*j*t)*x;this.a[6]=(b*k*w+d*f*a+e*j*s-b*j*a-d*k*s-e*f*w)*x;this.a[10]=(b*g*a+c*k*s+e*f*t-b*k*t-c*f*a-e*g*s)*x;this.a[14]=(b*j*t+c*f*w+d*g*s-b*g*w-c*j*s-d*f*t)*x;this.a[3]=(c*k*p+d*g*o+e*j*m-c*
j*o-d*k*m-e*g*p)*x;this.a[7]=(b*j*o+d*k*l+e*f*p-b*k*p-d*f*o-e*j*l)*x;this.a[11]=(b*k*m+c*f*o+e*g*l-b*g*o-c*k*l-e*f*m)*x;this.a[15]=(b*g*p+c*j*l+d*f*m-b*j*m-c*f*p-d*g*l)*x};r.Ue=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};y("mat4",K);K.prototype.CalcBodyFrame=K.prototype.Ei;
K.prototype.CalcNavigationFrame=K.prototype.Xd;K.prototype.Cami3d=K.prototype.Wg;K.prototype.CopyFrom=K.prototype.Y;K.prototype.Copy=K.prototype.Bf;K.prototype.Frustum=K.prototype.nn;K.prototype.Get=K.prototype.Gf;K.prototype.Identity=K.prototype.$g;K.prototype.Inverse=K.prototype.Ne;K.prototype.LookAt=K.prototype.tn;K.prototype.Multiply=K.prototype.V;K.prototype.MultiplyVec3=K.prototype.Ia;K.prototype.Ortho2D=K.prototype.Tk;K.prototype.Ortho=K.prototype.Sk;K.prototype.OverwriteTranslation=K.prototype.Uk;
K.prototype.Perspective=K.prototype.Vk;K.prototype.RotationX=K.prototype.Xi;K.prototype.RotationY=K.prototype.Xk;K.prototype.RotationZ=K.prototype.Yk;K.prototype.Scale=K.prototype.yd;K.prototype.SetFromArray=K.prototype.zd;K.prototype.ToString=K.prototype.Ue;K.prototype.Translation=K.prototype.Xc;K.prototype.Transpose=K.prototype.Ve;K.prototype.Zero=K.prototype.zn;K.prototype.CalcNavigationFrame2=K.prototype.hn;K.prototype.CalcNavigationFrameZUp=K.prototype.Ek;K.prototype.ExtractEulerAngles=K.prototype.ln;
K.prototype.CamViewFrustum=K.prototype.Fk;K.prototype.FromQuaternion=K.prototype.mn;K.prototype.FromQuaternionComponents=K.prototype.Xg;K.prototype.Rot2Quat=K.prototype.vn;function qc(){this.bh=[];this.ah=[];this.Oe=[];this.jb={};this.jb.x=0;this.jb.y=0;this.jb.j=0;this.Ub={};this.Ub.longitude=0;this.Ub.latitude=0;this.Ub.elevation=0;this.cf=!1;this.mc=[0,0];this.Kc=-1;this.qm=0;this.Ya=rc;this.Fa=0}var rc=0,sc=1,tc=2,uc=3,vc=4,wc=5;qc.prototype.sa=function(a,b,c){this.jb.x=a;this.jb.y=b;this.jb.j=c};qc.prototype.Zd=da("jb");function xc(){this.result={};this.result.v=0;this.result.ec=0;this.result.Rc=0;this.kb={};this.kb.x=0;this.kb.y=0;this.kb.j=0;this.lb={};this.lb.x=0;this.lb.y=0;this.lb.j=0;this.Pa={};this.Pa.x=0;this.Pa.y=0;this.Pa.j=0;this.rb={};this.rb.x=0;this.rb.y=0;this.rb.j=0;this.sb={};this.sb.x=0;this.sb.y=0;this.Vh=this.Jd=this.sb.j=0;this.Nk=2.220446049250313E-16}
xc.prototype.Ki=function(a,b,c,d,e,f,g,j,k,l,m,p,o,s,t){this.kb.x=l-g;this.kb.y=m-j;this.kb.j=p-k;this.lb.x=o-g;this.lb.y=s-j;this.lb.j=t-k;this.rb.x=e*this.lb.j-f*this.lb.y;this.rb.y=f*this.lb.x-d*this.lb.j;this.rb.j=d*this.lb.y-e*this.lb.x;this.Jd=this.kb.x*this.rb.x+this.kb.y*this.rb.y+this.kb.j*this.rb.j;this.Pa.x=a-g;this.Pa.y=b-j;this.Pa.j=c-k;this.Vh=1/this.Jd;this.sb.x=this.Pa.y*this.kb.j-this.Pa.j*this.kb.y;this.sb.y=this.Pa.j*this.kb.x-this.Pa.x*this.kb.j;this.sb.j=this.Pa.x*this.kb.y-this.Pa.y*
this.kb.x;if(this.Jd>this.Nk){this.result.ec=this.Pa.x*this.rb.x+this.Pa.y*this.rb.y+this.Pa.j*this.rb.j;if(this.result.ec<0||this.result.ec>this.Jd)return i;this.result.Rc=d*this.sb.x+e*this.sb.y+f*this.sb.j;if(this.result.Rc<0||this.result.ec+this.result.Rc>this.Jd)return i}else if(this.Jd<-this.Nk){this.result.ec=this.Pa.x*this.rb.x+this.Pa.y*this.rb.y+this.Pa.j*this.rb.j;if(this.result.ec>0||this.result.ec<this.Jd)return i;this.result.Rc=d*this.sb.x+e*this.sb.y+f*this.sb.j;if(this.result.Rc>0||
this.result.ec+this.result.Rc<this.Jd)return i}else return i;this.result.v=this.lb.x*this.sb.x+this.lb.y*this.sb.y+this.lb.j*this.sb.j;this.result.ec*=this.Vh;this.result.Rc*=this.Vh;this.result.v*=this.Vh;return this.result};y("TriangleIntersector",xc);xc.prototype.IntersectTriangle=xc.prototype.Ki;function yc(){this.Lg=this.Mg=this.Jg=this.Kg=0;this.Oh=1;this.result={Td:0,Sd:0}}
yc.prototype.If=function(a,b,c,d,e,f,g,j,k,l,m,p){this.Oh=1;d>=0?(this.result.Td=(g-a)/d,this.result.Sd=(l-a)/d):(this.result.Td=(l-a)/d,this.result.Sd=(g-a)/d);e>=0?(this.Kg=(j-b)/e,this.Jg=(m-b)/e):(this.Kg=(m-b)/e,this.Jg=(j-b)/e);if(this.result.Td>this.Jg||this.Kg>this.result.Sd)this.Oh=-1;if(this.Kg>this.result.Td)this.result.Td=this.Kg;if(this.Jg<this.result.Sd)this.result.Sd=this.Jg;f>=0?(this.Mg=(k-c)/f,this.Lg=(p-c)/f):(this.Mg=(p-c)/f,this.Lg=(k-c)/f);if(this.result.Td>this.Lg||this.Mg>
this.result.Sd)this.Oh=-1;if(this.Mg>this.result.Td)this.result.Td=this.Mg;if(this.Lg<this.result.Sd)this.result.Sd=this.Lg;return this.Oh>0?this.result:i};y("AABB",yc);yc.prototype.HitBox=yc.prototype.If;function zc(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.Bb=new Float32Array([a,b,c,d])}zc.prototype.u=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};zc.prototype.Ja=function(){this.Bb[0]=this.a[0];this.Bb[1]=this.a[1];this.Bb[2]=this.a[2];this.Bb[3]=this.a[3];return this.Bb};zc.prototype.Gf=da("a");zc.prototype.Ue=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};y("vec4",zc);zc.prototype.Get=zc.prototype.Gf;zc.prototype.Set=zc.prototype.u;function Ac(a){var a=String(a),b;b=/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""));if(b)try{return eval("("+a+")")}catch(c){}ba(Error("Invalid JSON string: "+a))};function L(a){this.c=a;this.b=a.b;this.p=this.g=this.nb=this.S=i;this.mode="";this.xb=this.qf=0;this.hd=this.I=i;this.ra=!1;this.yl=this.jd=this.K=i;this.El=new zc;this.El.u(1,1,1,1);this.Fl=new zc;this.Fl.u(1,1,1,1);this.rd=new zc;this.rd.u(1,0,0,1);this.Ol=new xc;this.pa=this.da=this.N=i;this.$n=0;this.Ah=new yc;this.ha=i;this.yg=this.J=0;this.r={};this.$c=Array(3);this.Zc=Array(3);this.od=new K;this.Yh=!1;this.Vb=-1}function Bc(a,b){if(b.length%3==0)a.p=new Float32Array(b),a.mode="p",a.J=3}
function Cc(a,b){if(b.length%8==0)a.p=new Float32Array(b),a.mode="pnt",a.J=8}function Dc(a,b){if(b.length%7==0)a.p=new Float32Array(b),a.mode="pc",a.J=7}function Ec(a,b){if(b.length%5==0)a.p=new Float32Array(b),a.mode="pt",a.J=5}function Fc(a,b){if(b.length%12==0)a.p=new Float32Array(b),a.mode="pnct",a.J=12}function Gc(a,b){if(b.length%5==0)a.p=new Float32Array(b),a.mode="poi",a.J=5}
function Ic(a,b,c){a.I=new Uint16Array(b);a.hd=c;a.xb=b.length;a.ra=!0;switch(c){case "TRIANGLES":a.yg=b.length/3;break;case "TRIANGLESTRIP":a.yg=b.length-2}}r=L.prototype;r.Qb=ca("g");r.Cd=function(){this.S=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S);this.b.bufferData(this.b.ARRAY_BUFFER,this.p,this.b.STATIC_DRAW);this.nb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.nb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.I,this.b.STATIC_DRAW)};
r.k=function(){if(this.S)this.b.deleteBuffer(this.S),this.S=i;if(this.nb)this.b.deleteBuffer(this.nb),this.nb=i;this.Yh?this.g.k():this.g=i;this.p=i;this.mode="";this.xb=this.qf=0;this.hd=this.I=i};
r.ba=function(a,b,c,d,e){if(this.ra){b=b||0;c=c||0;this.S==i&&this.Cd();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.nb);this.ha&&(this.c.hc(),this.od.V(this.ha,this.c.vb),this.c.ic(this.od));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,12,0);Jc(this.c.Oa,this.c.ga,this.rd);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,!1,32,24);var d=this.c.Oa,e=this.c.Sj,f=this.c.tg,g=this.c.oc;d.qb&&(d.b.useProgram(d.qb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.qb,"matModelView"),!1,f.Ja()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.qb,"matProjection"),!1,g.Ja()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.qb,"matNormal"),!1,e.Ja()),d.b.uniform1i(d.b.getUniformLocation(d.qb,
"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);Kc(this.c.Oa,this.c.ga);break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.Oa;e=this.c.ga;d.$b&&(d.b.useProgram(d.$b),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.$b,
"matMVP"),!1,e.Ja()),d.b.uniform1i(d.b.getUniformLocation(d.$b,"uTexture"),0));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,!1,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,!1,48,40);d=this.c.Oa;e=this.c.ga;d.Jb&&(d.b.useProgram(d.Jb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Jb,
"matMVP"),!1,e.Ja()));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(d==i)d=this.El;e=this.c.Oa;f=this.c.ga;e.Xb&&(e.b.useProgram(e.Xb),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.Xb,"matMVP"),!1,f.Ja()),e.b.uniform4fv(e.b.getUniformLocation(e.Xb,"uColor"),d.Ja()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(e==i)e=this.Fl;d=this.c.Oa;f=this.c.ga;d.Yb&&(d.b.useProgram(d.Yb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Yb,"matMVP"),!1,f.Ja()),d.b.uniform4fv(d.b.getUniformLocation(d.Yb,"uColor"),e.Ja()));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,
12);d=this.c.Oa;e=this.c.ga;f=this.c.vb;d.Kb&&(d.b.useProgram(d.Kb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Kb,"matM"),!1,f.Ja()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Kb,"matMVP"),!1,e.Ja()),d.b.uniform1i(d.b.getUniformLocation(d.Kb,"uTexture"),0));break;default:alert("unknown surface mode!!")}if(this.g)d=this.g,d.tb&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,d.g));switch(this.hd){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,
c):this.b.drawElements(this.b.TRIANGLES,this.xb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.xb,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.xb,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.xb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,
c):this.b.drawElements(this.b.TRIANGLE_FAN,this.xb,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.ha&&this.c.Vc();if(this.g)a=this.g,a.tb&&a.b.bindTexture(a.b.TEXTURE_2D,i);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
r.wc=function(a,b,c,d){d||(d=this);if(c)this.lc=c;if(b)this.cd=b;if(a.BoundingBox)d.N=a.BoundingBox[0],d.da=a.BoundingBox[1];if(a.Offset)d.pa=a.Offset;if(a.CurtainIndex)d.$n=a.CurtainIndex;switch(a.VertexSemantic){case "p":d.qf=a.Vertices.length/3;Bc(d,a.Vertices);d.mode="p";break;case "pnt":d.qf=a.Vertices.length/8;Cc(d,a.Vertices);d.mode="pnt";break;case "pc":d.qf=a.Vertices.length/7;d.mode="pc";Dc(d,a.Vertices);break;case "pt":d.qf=a.Vertices.length/5;d.mode="pt";Ec(d,a.Vertices);break;case "pnct":d.qf=
a.Vertices.length/12;d.mode="p";Fc(d,a.Vertices);break;default:alert("unknown surface mode!!")}Ic(d,a.Indices,a.IndexSemantic);if(a.DiffuseMap)d.g=new M(d.c),d.g.repeat=!0,N(d.g,a.DiffuseMap,function(){var a=d;a.tb=!0;a.cd&&a.cd(a)},function(){var a=d;F(G("owg.Mesh"),"Downloading Error: Texture not found...");a.lc&&a.lc(a)},!0),d.Yh=!0;a.Center&&d.kh(a.Center[0],a.Center[1],a.Center[2]);d.xb=a.Indices.length;if(!d.Yh)d.tb=!0;d.yl&&d.yl();d.cd&&!d.Yh&&d.cd(d)};
function Lc(a,b,c,d){b==i?alert("invalid json-url"):(a.jd=b,a.K=new window.XMLHttpRequest,a.K.open("GET",a.jd,!0),a.cd=c,a.lc=d,a.K.onreadystatechange=function(){if(a.K.readyState==4)if(a.K.status==404)a.lc&&a.lc(a);else{var b=Ac(a.K.responseText);a.wc(b,i,i,a)}},a.K.send())}
r.Bd=function(a,b,c,d,e,f){var g=!1,j,k,l,m;k=j=0;l=1.0E20;for(var p=0;p<this.yg;p++){var o;o=p;switch(this.hd){case "TRIANGLES":this.r.Ng=this.p[this.I[o*3]*this.J];this.r.Og=this.p[this.I[o*3]*this.J+1];this.r.Pg=this.p[this.I[o*3]*this.J+2];this.r.Qg=this.p[this.I[o*3+1]*this.J];this.r.Rg=this.p[this.I[o*3+1]*this.J+1];this.r.Sg=this.p[this.I[o*3+1]*this.J+2];this.r.vi=this.p[this.I[o*3+2]*this.J];this.r.wi=this.p[this.I[o*3+2]*this.J+1];this.r.xi=this.p[this.I[o*3+2]*this.J+2];break;case "TRIANGLESTRIP":o%
2==0?(this.r.Ng=this.p[this.I[o]*this.J],this.r.Og=this.p[this.I[o]*this.J+1],this.r.Pg=this.p[this.I[o]*this.J+2],this.r.Qg=this.p[this.I[o+1]*this.J],this.r.Rg=this.p[this.I[o+1]*this.J+1],this.r.Sg=this.p[this.I[o+1]*this.J+2]):(this.r.Ng=this.p[this.I[o+1]*this.J],this.r.Og=this.p[this.I[o+1]*this.J+1],this.r.Pg=this.p[this.I[o+1]*this.J+2],this.r.Qg=this.p[this.I[o]*this.J],this.r.Rg=this.p[this.I[o]*this.J+1],this.r.Sg=this.p[this.I[o]*this.J+2]);this.r.vi=this.p[this.I[o+2]*this.J];this.r.wi=
this.p[this.I[o+2]*this.J+1];this.r.xi=this.p[this.I[o+2]*this.J+2];break;default:F(G("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.pa&&(this.r.Ng+=this.pa[0],this.r.Og+=this.pa[1],this.r.Pg+=this.pa[2],this.r.Qg+=this.pa[0],this.r.Rg+=this.pa[1],this.r.Sg+=this.pa[2],this.r.vi+=this.pa[0],this.r.wi+=this.pa[1],this.r.xi+=this.pa[2]);o=this.I[o]==this.I[o+1]||this.I[o]==this.I[o+2]||this.I[o+1]==this.I[o+2]?!1:!0;if(o){if(this.ha){o=new K;
o.Y(this.od);var s=new J;s.u(this.r.Ng,this.r.Og,this.r.Pg);var t=new J;t.u(this.r.Qg,this.r.Rg,this.r.Sg);var w=new J;w.u(this.r.vi,this.r.wi,this.r.xi);s=o.Ia(s);t=o.Ia(t);o=o.Ia(w);o=this.Ol.Ki(a,b,c,d,e,f,s.a[0],s.a[1],s.a[2],t.a[0],t.a[1],t.a[2],o.a[0],o.a[1],o.a[2])}else o=this.Ol.Ki(a,b,c,d,e,f,this.r.Ng,this.r.Og,this.r.Pg,this.r.Qg,this.r.Rg,this.r.Sg,this.r.vi,this.r.wi,this.r.xi);if(o&&(g=!0,o.v<l&&o.v>0))l=o.v,j=o.ec,k=o.Rc,m=p}}if(g)return a={},a.v=l,a.ec=j,a.Rc=k,a.Um=m,a;return i};
function Mc(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,j,k,l,m=0;m<a.p.length;m++)j=a.p[m*a.J],k=a.p[m*a.J+1],l=a.p[m*a.J+2],j>e&&(e=j),k>f&&(f=k),l>g&&(g=l),j<b&&(b=j),k<c&&(c=k),l<d&&(d=l);a.ha&&(m=new J(b,c,d),l=new J(e,c,d),j=new J(e,f,d),d=new J(b,f,d),k=new J(b,c,g),c=new J(b,f,g),e=new J(e,f,g),g=new J(b,f,g),b=a.ha.Ia(m),f=a.ha.Ia(l),j=a.ha.Ia(j),d=a.ha.Ia(d),k=a.ha.Ia(k),c=a.ha.Ia(c),l=a.ha.Ia(e),m=a.ha.Ia(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],k.a[0],c.a[0],l.a[0],m.a[0]],
g=[b.a[1],f.a[1],j.a[1],d.a[1],k.a[1],c.a[1],l.a[1],m.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],k.a[2],c.a[2],l.a[2],m.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.pa&&(b+=a.pa[0],c+=a.pa[1],d+=a.pa[2],e+=a.pa[0],f+=a.pa[1],g+=a.pa[2]);if(a.N===i)a.N=Array(3);if(a.da===i)a.da=Array(3);a.N[0]=b;a.N[1]=c;a.N[2]=d;a.da[0]=e;a.da[1]=f;a.da[2]=g}
r.kl=function(a,b,c,d,e,f){return this.Ah.If(a,b,c,d,e,f,this.N[0],this.N[1],this.N[2],this.da[0],this.da[1],this.da[2])};r.Rf=function(a,b,c,d,e,f){var g=this.c.eb.a,j=new K;this.$c[0]=a;this.$c[1]=b;this.$c[2]=c;this.Zc[0]=d||0;this.Zc[1]=e||0;this.Zc[2]=f||0;j.zd([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.$c[0],this.$c[1],this.$c[2],1]);a=new K;a.Xc(this.Zc[0],this.Zc[1],this.Zc[2]);b=new K;b.V(j,a);this.ha=b};
function Nc(a){a.Rf(a.$c[0],a.$c[1],a.$c[2],a.Zc[0],a.Zc[1],a.Zc[2])}
r.kh=function(a,b,c,d,e,f){var g=new O(a,b,c),c=Array(3);g.ia(c);(new K).Xc(c[0],c[1],c[2]);g=new K;g.Xd(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new K;b.zd(a);a=new K;a.yd(H,H,H);c=new K;c.V(b,a);b=new K;g=new K;a=new K;d?b.Xi(e*Math.PI/180):b.Xi(-1.57079633);e&&g.Xk(d*Math.PI/180+1.57079633);f&&a.Yk(f*Math.PI/180);d=new K;d.V(b,g);e=new K;e.V(d,a);
d=new K;d.V(c,e);this.ha=d;Mc(this)};r.Y=function(a){this.Qb(a.g);this.p=a.p;this.mode=a.mode;this.J=a.J;this.I=a.I;this.hd=a.hd;this.xb=a.xb;this.ra=a.ra;this.yg=a.yg;this.S=a.S;this.nb=a.nb;this.ha=a.ha;this.hd=a.hd};y("Surface",L);L.prototype.Draw=L.prototype.ba;L.prototype.CopyFrom=L.prototype.Y;L.prototype.SetAsBillboard=L.prototype.Rf;L.prototype.SetTexture=L.prototype.Qb;L.prototype.TestBoundingBoxIntersection=L.prototype.kl;L.prototype.TestRayIntersection=L.prototype.Bd;var R="art/";function M(a,b,c,d,e){this.c=a;this.b=a.b;this.g=i;this.Nh=this.tb=!1;this.Ua=i;this.height=this.width=0;this.Lp=i;this.Jl=this.Wm=!1;b&&Oc(this,c||0,d||0,e||!1);this.repeat=!1}
function Oc(a,b,c,d){Pc(a);a.Mb=a.b.createFramebuffer();a.b.bindFramebuffer(a.b.FRAMEBUFFER,a.Mb);a.Mb.width=b;a.Mb.height=c;a.g=a.b.createTexture();a.b.bindTexture(a.b.TEXTURE_2D,a.g);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MAG_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MIN_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_S,a.b.CLAMP_TO_EDGE);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_T,a.b.CLAMP_TO_EDGE);a.b.texImage2D(a.b.TEXTURE_2D,0,a.b.RGBA,
a.Mb.width,a.Mb.height,0,a.b.RGBA,a.b.UNSIGNED_BYTE,i);a.di=a.b.createRenderbuffer();a.b.bindRenderbuffer(a.b.RENDERBUFFER,a.di);d&&a.b.renderbufferStorage(a.b.RENDERBUFFER,a.b.DEPTH_STENCIL,a.Mb.width,a.Mb.height);a.b.framebufferTexture2D(a.b.FRAMEBUFFER,a.b.COLOR_ATTACHMENT0,a.b.TEXTURE_2D,a.g,0);d&&a.b.framebufferRenderbuffer(a.b.FRAMEBUFFER,a.b.DEPTH_STENCIL_ATTACHMENT,a.b.RENDERBUFFER,a.di);a.b.bindTexture(a.b.TEXTURE_2D,i);a.b.bindRenderbuffer(a.b.RENDERBUFFER,i);a.b.bindFramebuffer(a.b.FRAMEBUFFER,
i);a.tb=!0;a.Wm=!0;a.width=b;a.height=c}function Pc(a){if(a.Mb!=i&&(a.b.deleteRenderbuffer(a.di),a.di=i,a.b.deleteFramebuffer(a.Mb),a.Mb=i,a.b.deleteTexture(a.g),a.g=i,a.Ua))a.Ua.k(),a.Ua=i}
function N(a,b,c,d,e){a.Jl=v(e)?e:!1;a.g=a.b.createTexture();var f=a.g,g=a.b;a.g.Nd=new Image;a.g.Nd.crossOrigin="anonymous";a.g.Nd.onload=function(){g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,a.Jl);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.Nd);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);a.repeat?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_WRAP_T,g.REPEAT)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE));g.bindTexture(g.TEXTURE_2D,i);a.width=f.Nd.width;a.height=f.Nd.height;c!=i&&c(a);a.tb=!0};a.g.Nd.onerror=function(){F(G("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.Nh=!0;d&&d(a)};a.g.Nd.src=b}r=M.prototype;
r.w=function(a,b,c,d,e,f,g,j,k,l){c=c||0;d=d||0;e=e||1;f=f||1;g=g||!1;j=j||!1;k=k||1;if(this.tb){var m=this.width,p=this.height,o=this.width/2,s=this.height/2;this.c.hc();this.c.Yi();var d=I(d),t=new K;d>0?t.zd([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*o+Math.sin(d)*e*s+e*o+a,-Math.cos(d)*f*s-Math.sin(d)*f*o+f*s+b,c,1]):(t.Xc(a,b,c),a=new K,a.yd(e,f,1),t.V(t,a));this.c.ic(t);if(this.Ua===i)this.Ua=new L(this.c),j?Gc(this.Ua,[0,0,0,0,0,m,0,0,1,0,m,p,0,
1,1,0,p,0,0,1]):Gc(this.Ua,[0,0,0,0,1,m,0,0,1,1,m,p,0,1,0,0,p,0,0,0]),Ic(this.Ua,[0,1,2,0,2,3],"TRIANGLES"),this.Ua.Qb(this);g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);k<1&&(this.c.b.blendColor(0,0,0,k),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Ua.ba(i,i,i,i,l);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.Vc()}};r.k=function(){this.g.Nd=i;this.c.b.deleteTexture(this.g);this.g=i;this.Nh=this.tb=!1;if(this.Ua)this.Ua.k(),this.Ua=i;Pc(this)};r.Vf=function(){this.Wm&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Mb),this.b.viewport(0,0,this.Mb.width,this.Mb.height))};r.ll=function(){this.b.bindTexture(this.b.TEXTURE_2D,i);this.b.bindFramebuffer(this.b.FRAMEBUFFER,i);this.b.viewport(0,0,this.c.width,this.c.height)};
r.Y=function(a){this.g=a.g;this.tb=a.tb;this.Nh=a.Nh;this.height=this.width=this.Ua=a.Ua};y("Texture",M);M.prototype.CopyFrom=M.prototype.Y;M.prototype.Blit=M.prototype.w;M.prototype._EnableRenderToTexture=M.prototype.Vf;M.prototype._DisableRenderToTexture=M.prototype.ll;function O(a,b,c){this.F=new Float32Array([a,b,c])}O.prototype.u=function(a,b,c){this.F[0]=a;this.F[1]=b;this.F[2]=c};O.prototype.ia=function(a){var b=Math.sin(I(this.F[1])),c=Math.cos(I(this.F[1])),d=Math.sin(I(this.F[0])),e=hc/Math.sqrt(1-ic*b*b);a[0]=(e+this.F[2])*c*Math.cos(I(this.F[0]));a[1]=(e+this.F[2])*c*d;a[2]=(0.993305620011365*e+this.F[2])*b;a[0]*=H;a[1]*=H;a[2]*=H};
O.prototype.yc=function(a,b,c){var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0;a*=8388607;b*=8388607;c*=8388607;for(var k=0;k<10;k++)g=Math.sin(e),g*=g,j=Math.cos(e),g=hc/Math.sqrt(1-ic*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*ic/(g+f));this.F[0]=kc(d);this.F[1]=kc(e);this.F[2]=f};O.prototype.Ue=function(){return" Longitude: "+this.F[0].toPrecision(17)+" Latitude: "+this.F[1].toPrecision(17)+" Elevation: "+this.F[2].toPrecision(17)};y("GeoCoord",O);
O.prototype.FromCartesian=O.prototype.yc;O.prototype.ToCartesian=O.prototype.ia;O.prototype.ToString=O.prototype.Ue;function Qc(a){this.c=a;this.b=a.b;this.ha=this.S=this.qd=i;this.od=new K;this.ck=[];this.ui=this.$h=this.pa=0}r=Qc.prototype;r.nh=function(a){this.$h+=a.length/7;if(this.ui==0)this.ui=this.$h*70;this.qd=i;this.qd=new Float32Array(a);this.Cd()};r.k=function(){if(this.S)this.b.deleteBuffer(this.S),this.S=i;this.S=this.qd=i};
r.kh=function(a,b,c){var d=new O(a,b,c),c=Array(3);d.ia(c);(new K).Xc(c[0],c[1],c[2]);d=new K;d.Ek(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new K;b.zd(a);a=new K;a.yd(H,H,H);c=new K;c.V(b,a);a=new K;b=new K;b.V(c,a);this.ha=b};
r.ba=function(){if(this.qd!=i){this.S||this.Cd();this.ha&&(this.c.hc(),this.od.V(this.ha,this.c.vb),this.c.ic(this.od));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);var a=new K;a.Ne(this.c.ga);var b=this.c.Oa,c=this.c.ga;b.Zb&&(b.b.useProgram(b.Zb),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Zb,"matMVP"),!1,c.Ja()),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Zb,
"matInvMVP"),!1,a.Ja()));this.b.drawArrays(this.b.POINTS,0,this.$h);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.ha&&this.c.Vc()}};
r.Cd=function(){this.S===i?(this.S=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S),this.b.bufferData(this.b.ARRAY_BUFFER,this.ui,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.qd)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.pa,this.qd));this.pa+=this.qd.length*4};var Rc,Sc,Tc,Uc,Vc;function Wc(){return u.navigator?u.navigator.userAgent:i}Uc=Tc=Sc=Rc=!1;var Xc;if(Xc=Wc()){var Yc=u.navigator;Rc=Xc.indexOf("Opera")==0;Sc=!Rc&&Xc.indexOf("MSIE")!=-1;Tc=!Rc&&Xc.indexOf("WebKit")!=-1;Uc=!Rc&&!Tc&&Yc.product=="Gecko"}var Zc=Rc,$c=Sc,ad=Uc,bd=Tc,cd,dd=u.navigator;cd=dd&&dd.platform||"";Vc=cd.indexOf("Mac")!=-1;var ed=cd.indexOf("Win")!=-1,fd;
a:{var gd="",hd;if(Zc&&u.opera)var id=u.opera.version,gd=typeof id=="function"?id():id;else if(ad?hd=/rv\:([^\);]+)(\)|;)/:$c?hd=/MSIE\s+([^\);]+)(\)|;)/:bd&&(hd=/WebKit\/(\S+)/),hd)var jd=hd.exec(Wc()),gd=jd?jd[1]:"";if($c){var kd,ld=u.document;kd=ld?ld.documentMode:h;if(kd>parseFloat(gd)){fd=String(kd);break a}}fd=gd}var md={};function nd(a){return md[a]||(md[a]=wb(fd,a)>=0)};var od;var pd="dblclick",qd="mousedown",rd="mouseup",sd="mousemove",td="keydown",ud="keyup";var vd=!$c||nd("9"),wd=$c&&!nd("8");function xd(){yd&&(zd[sa(this)]=this)}var yd=!1,zd={};xd.prototype.Hl=!1;xd.prototype.hg=function(){if(!this.Hl&&(this.Hl=!0,this.Ec(),yd)){var a=sa(this);zd.hasOwnProperty(a)||ba(Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call"));delete zd[a]}};xd.prototype.Ec=n();function Ad(a,b){xd.call(this);this.type=a;this.currentTarget=this.target=b}za(Ad,xd);r=Ad.prototype;r.Ec=function(){delete this.type;delete this.target;delete this.currentTarget};r.Ce=!1;r.Gg=!0;r.stopPropagation=function(){this.Ce=!0};r.preventDefault=function(){this.Gg=!1};var Bd=new Function("a","return a");function Cd(a,b){a&&this.Gc(a,b)}za(Cd,Ad);var Dd=0,Ed=1,Fd=2,Gd=[1,4,2];r=Cd.prototype;r.target=i;r.relatedTarget=i;r.offsetX=0;r.offsetY=0;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.button=0;r.keyCode=0;r.charCode=0;r.ctrlKey=!1;r.altKey=!1;r.shiftKey=!1;r.metaKey=!1;r.Bo=!1;r.gd=i;
r.Gc=function(a,b){var c=this.type=a.type;Ad.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(ad)try{Bd(d.nodeName)}catch(e){d=i}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||
0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.Bo=Vc?a.metaKey:a.ctrlKey;this.state=a.state;this.gd=a;delete this.Gg;delete this.Ce};function Hd(a,b){return vd?a.gd.button==b:a.type=="click"?b==Dd:!!(a.gd.button&Gd[b])}
r.stopPropagation=function(){Cd.Ge.stopPropagation.call(this);this.gd.stopPropagation?this.gd.stopPropagation():this.gd.cancelBubble=!0};r.preventDefault=function(){Cd.Ge.preventDefault.call(this);var a=this.gd;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,wd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};r.Ec=function(){Cd.Ge.Ec.call(this);this.relatedTarget=this.currentTarget=this.target=this.gd=i};function Id(){}var Jd=0;r=Id.prototype;r.key=0;r.tf=!1;r.xl=!1;r.Gc=function(a,b,c,d,e,f){na(a)?this.Ql=!0:a&&a.handleEvent&&na(a.handleEvent)?this.Ql=!1:ba(Error("Invalid listener argument"));this.sg=a;this.zm=b;this.src=c;this.type=d;this.capture=!!e;this.Mj=f;this.xl=!1;this.key=++Jd;this.tf=!1};r.handleEvent=function(a){if(this.Ql)return this.sg.call(this.Mj||this.src,a);return this.sg.handleEvent.call(this.sg,a)};var Kd,Ld=(Kd="ScriptEngine"in u&&u.ScriptEngine()=="JScript")?u.ScriptEngineMajorVersion()+"."+u.ScriptEngineMinorVersion()+"."+u.ScriptEngineBuildVersion():"0";function Md(a,b){xd.call(this);this.Xl=b;this.me=[];a>this.Xl&&ba(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.me.push(this.dg())}za(Md,xd);r=Md.prototype;r.le=i;r.Gl=i;r.getObject=function(){if(this.me.length)return this.me.pop();return this.dg()};function Nd(a,b){a.me.length<a.Xl?a.me.push(b):a.wj(b)}r.dg=function(){return this.le?this.le():{}};r.wj=function(a){if(this.Gl)this.Gl(a);else if(ra(a))if(na(a.hg))a.hg();else for(var b in a)delete a[b]};
r.Ec=function(){Md.Ge.Ec.call(this);for(var a=this.me;a.length;)this.wj(a.pop());delete this.me};var Od,Pd,Qd,Rd,Sd,Td,Ud,Vd,Wd,Xd,Yd;
(function(){function a(){return{xa:0,tc:0}}function b(){return[]}function c(){function a(b){return g.call(a.src,a.key,b)}return a}function d(){return new Id}function e(){return new Cd}var f=Kd&&!(wb(Ld,"5.7")>=0),g;Td=function(a){g=a};if(f){Od=function(){return j.getObject()};Pd=function(a){Nd(j,a)};Qd=function(){return k.getObject()};Rd=function(a){Nd(k,a)};Sd=function(){return l.getObject()};Ud=function(){Nd(l,c())};Vd=function(){return m.getObject()};Wd=function(a){Nd(m,a)};Xd=function(){return p.getObject()};
Yd=function(a){Nd(p,a)};var j=new Md(0,600);j.le=a;var k=new Md(0,600);k.le=b;var l=new Md(0,600);l.le=c;var m=new Md(0,600);m.le=d;var p=new Md(0,600);p.le=e}else Od=a,Pd=ia,Qd=b,Rd=ia,Sd=c,Ud=ia,Vd=d,Wd=ia,Xd=e,Yd=ia})();var Zd={},$d={},ae={},be={};
function S(a,b,c,d,e){if(b)if(ka(b)){for(var f=0;f<b.length;f++)S(a,b[f],c,d,e);return i}else{var d=!!d,g=$d;b in g||(g[b]=Od());g=g[b];d in g||(g[d]=Od(),g.xa++);var g=g[d],j=sa(a),k;g.tc++;if(g[j]){k=g[j];for(f=0;f<k.length;f++)if(g=k[f],g.sg==c&&g.Mj==e){if(g.tf)break;return k[f].key}}else k=g[j]=Qd(),g.xa++;f=Sd();f.src=a;g=Vd();g.Gc(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);Zd[c]=g;ae[j]||(ae[j]=Qd());ae[j].push(g);a.addEventListener?(a==u||!a.Dl)&&a.addEventListener(b,f,d):a.attachEvent(ce(b),
f);return c}else ba(Error("Invalid event type"))}function de(a,b,c,d,e){if(ka(b))for(var f=0;f<b.length;f++)de(a,b[f],c,d,e);else{d=!!d;a:{f=$d;if(b in f&&(f=f[b],d in f&&(f=f[d],a=sa(a),f[a]))){a=f[a];break a}a=i}if(a)for(f=0;f<a.length;f++)if(a[f].sg==c&&a[f].capture==d&&a[f].Mj==e){ee(a[f].key);break}}}
function ee(a){if(Zd[a]){var b=Zd[a];if(!b.tf){var c=b.src,d=b.type,e=b.zm,f=b.capture;c.removeEventListener?(c==u||!c.Dl)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(ce(d),e);c=sa(c);e=$d[d][f][c];if(ae[c]){var g=ae[c],j=Bb(g,b);j>=0&&Ab.splice.call(g,j,1);g.length==0&&delete ae[c]}b.tf=!0;e.rm=!0;fe(d,f,c,e);delete Zd[a]}}}
function fe(a,b,c,d){if(!d.Xh&&d.rm){for(var e=0,f=0;e<d.length;e++)if(d[e].tf){var g=d[e].zm;g.src=i;Ud(g);Wd(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.rm=!1;f==0&&(Rd(d),delete $d[a][b][c],$d[a][b].xa--,$d[a][b].xa==0&&(Pd($d[a][b]),delete $d[a][b],$d[a].xa--),$d[a].xa==0&&(Pd($d[a]),delete $d[a]))}}
function ge(a){var b,c=0,d=b==i;b=!!b;if(a==i)ib(ae,function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)ee(f.key),c++}});else if(a=sa(a),ae[a])for(var a=ae[a],e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)ee(f.key),c++}}function ce(a){if(a in be)return be[a];return be[a]="on"+a}
function he(a,b,c,d,e){var f=1,b=sa(b);if(a[b]){a.tc--;a=a[b];a.Xh?a.Xh++:a.Xh=1;try{for(var g=a.length,j=0;j<g;j++){var k=a[j];k&&!k.tf&&(f&=ie(k,e)!==!1)}}finally{a.Xh--,fe(c,d,b,a)}}return Boolean(f)}function ie(a,b){var c=a.handleEvent(b);a.xl&&ee(a.key);return c}
Td(function(a,b){if(!Zd[a])return!0;var c=Zd[a],d=c.type,e=$d;if(!(d in e))return!0;var e=e[d],f,g;od===h&&(od=$c&&!u.addEventListener);if(od){f=b||ea("window.event");var j=!0 in e,k=!1 in e;if(j){if(f.keyCode<0||f.returnValue!=h)return!0;a:{var l=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(m){l=!0}if(l||f.returnValue==h)f.returnValue=!0}}l=Xd();l.Gc(f,this);f=!0;try{if(j){for(var p=Qd(),o=l.currentTarget;o;o=o.parentNode)p.push(o);g=e[!0];g.tc=g.xa;for(var s=p.length-1;!l.Ce&&s>=0&&g.tc;s--)l.currentTarget=
p[s],f&=he(g,p[s],d,!0,l);if(k){g=e[!1];g.tc=g.xa;for(s=0;!l.Ce&&s<p.length&&g.tc;s++)l.currentTarget=p[s],f&=he(g,p[s],d,!1,l)}}else f=ie(c,l)}finally{if(p)p.length=0,Rd(p);l.hg();Yd(l)}return f}d=new Cd(b,this);try{f=ie(c,d)}finally{d.hg()}return f});function je(){this.mg=[];this.$j=new Kb;this.Qm=this.Rm=this.Sm=this.Hm=0;this.Oc=new Kb;this.zl=this.Pm=0;this.vo=1;this.xj=new Md(0,4E3);this.xj.dg=function(){return new ke};this.Im=new Md(0,50);this.Im.dg=function(){return new le};var a=this;this.Oj=new Md(0,2E3);this.Oj.dg=function(){return String(a.vo++)};this.Oj.wj=n();this.fo=3}function le(){this.mk=this.Nm=this.count=0}
le.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(this.Nm*10)/10," ms)");this.mk&&a.push(" [VarAlloc = ",this.mk,"]");return a.join("")};function ke(){}function me(a,b,c,d){var e=[];c==-1?e.push("    "):e.push(ne(a.Il-c));e.push(" ",oe(a.Il-b));a.yj==0?e.push(" Start        "):a.yj==1?(e.push(" Done "),e.push(ne(a.Op-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);a.Ro>0&&e.push("[VarAlloc ",a.Ro,"] ");return e.join("")}
ke.prototype.toString=function(){return this.type==i?this.Zn:"["+this.type+"] "+this.Zn};je.prototype.reset=function(a){this.fo=a;for(a=0;a<this.mg.length;a++){var b=this.xj.id;b&&Nd(this.Oj,b);Nd(this.xj,this.mg[a])}this.mg.length=0;this.$j.clear();this.Hm=ya();this.zl=this.Pm=this.Qm=this.Rm=this.Sm=0;b=this.Oc.Rh();for(a=0;a<b.length;a++){var c=this.Oc.get(b[a]);c.count=0;c.Nm=0;c.mk=0;Nd(this.Im,c)}this.Oc.clear()};
je.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.mg.length;d++){var e=this.mg[d];e.yj==1&&c.pop();a.push(" ",me(e,this.Hm,b,c.join("")));b=e.Il;a.push("\n");e.yj==0&&c.push("|  ")}if(this.$j.ne()!=0){var f=ya();a.push(" Unstopped timers:\n");Jb(this.$j,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",oe(b.startTime),")\n")})}b=this.Oc.Rh();for(d=0;d<b.length;d++)c=this.Oc.get(b[d]),c.count>1&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Pm,"\n","Total comments created ",
this.zl,"\n","Overhead start: ",this.Sm," ms\n","Overhead end: ",this.Rm," ms\n","Overhead comment: ",this.Qm," ms\n");return a.join("")};je.prototype.Vl=function(a){u.console&&u.console.markTimeline&&u.console.markTimeline(a)};function ne(a){var a=Math.round(a),b="";a<1E3&&(b=" ");a<100&&(b="  ");a<10&&(b="   ");return b+a}function oe(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new je;new Md(0,100);var pe=0;function qe(){this.$o=pe;pe++;this.Tc=n();this.Uc=n();this.Sc=n();this.Qe=n();this.Pe=n();this.Re=n();this.Se=n();this.ap=this.c=i;this.Qp=[]}function re(a){a.Re(a.c.R);a.Qe()}qe.prototype.xd=function(){this.Pe()};function se(){xd.call(this)}za(se,xd);r=se.prototype;r.Dl=!0;r.ak=i;r.addEventListener=function(a,b,c,d){S(this,a,b,c,d)};r.removeEventListener=function(a,b,c,d){de(this,a,b,c,d)};
r.dispatchEvent=function(a){var b=a.type||a,c=$d;if(b in c){if(ma(a))a=new Ad(a,this);else if(a instanceof Ad)a.target=a.target||this;else{var d=a,a=new Ad(b,this);lb(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.ak)e.push(f);f=c[!0];f.tc=f.xa;for(var g=e.length-1;!a.Ce&&g>=0&&f.tc;g--)a.currentTarget=e[g],d&=he(f,e[g],a.type,!0,a)&&a.Gg!=!1}if(!1 in c)if(f=c[!1],f.tc=f.xa,b)for(g=0;!a.Ce&&g<e.length&&f.tc;g++)a.currentTarget=e[g],d&=he(f,e[g],a.type,!1,a)&&a.Gg!=!1;else for(e=this;!a.Ce&&
e&&f.tc;e=e.ak)a.currentTarget=e,d&=he(f,e,a.type,!1,a)&&a.Gg!=!1;a=Boolean(d)}else a=!0;return a};r.Ec=function(){se.Ge.Ec.call(this);ge(this);this.ak=i};function te(){this.hi=this.ri=this.pi=this.qi=this.oi=this.mi=this.ni=this.li=this.ji=this.ki=this.ii=this.xf=this.yf=this.Je=this.wf=this.Hh=this.Gh=this.Ep=i;this.Wj=this.Vj=0;this.Cb=!1;this.elevation=this.latitude=this.longitude=this.Ha=0;this.Kc=-1;this.Ea=this.Na=0;this.Q=ue;this.ef=0;this.nc=48;this.bc=this.gi=this.td=this.zb=this.Af=this.ub=this.Eb=this.Wa=0;this.ul=!1;this.Cl=this.Bl=0;this.Th=new zc(0.7,0.9,1,1);this.Sc=n();this.Ab=function(a){for(;a>360;)a-=360;for(;a<0;)a+=360;return a};
this.Tc=function(){if(this.Kc==0)this.Cb&&(this.Hh.w(this.Vj-64,this.Wj-64,0,this.Ha,1,1,!0,!1),this.Gh.w(this.Vj-64,this.Wj-64,0,0,1,1,!0,!1)),this.c.vd("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(this.Kc==1){this.ul&&this.hi.w(this.Bl-16,this.Cl-16,0,0,1,1,!0,!1,0.75);var a=this.c.width-1-64-this.ef,b=this.c.height-1-this.nc,c=this.Ab(this.Af+this.gi);this.Q==ve?this.xf.w(a-64,b-64,0,c,1,1,!0,!1,1,this.Th):this.Q==
we?this.xf.w(a-64,b-64,0,c,1,1,!0,!1,1,this.Th):this.xf.w(a-64,b-64,0,c,1,1,!0,!1);this.Q==xe?(this.yf.w(a-32,b-32,0,0,1,1,!0,!1),this.Je.w(a-32,b-32,0,this.ub,1,1,!0,!1,0.5)):this.Q==ye?(this.yf.w(a-32,b-32,0,0,1,1,!0,!1),this.Je.w(a-32,b-32,0,this.ub,1,1,!0,!1,0.5)):this.yf.w(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-this.nc;this.Q==ze?(this.wf.w(a-32,b-32,0,0,1,1,!0),this.Je.w(a-32,b-32,0,this.Wa,1,1,!0,!1,0.5)):this.Q==Ae?(this.wf.w(a-32,b-32,0,0,1,1,!0),this.Je.w(a-32,b-32,0,this.Wa,1,1,
!0,!1,0.5)):this.wf.w(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.nc;this.ri.w(a-8,b-64,0,0,1,1,!0,!1);b=this.c.height-1-82-64-this.nc;this.Q==Be?this.ni.w(a-16,b-16,0,0,1,1,!0,!1):this.Q==Ce?this.mi.w(a-16,b-16,0,0,1,1,!0,!1):this.li.w(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-64-this.nc;this.Q==De?this.ki.w(a-16,b-16,0,0,1,1,!0,!1):this.Q==Ee?this.ji.w(a-16,b-16,0,0,1,1,!0,!1):this.ii.w(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.bc-this.nc;this.Q==Fe?this.qi.w(a-16,
b-16,0,0,1,1,!0,!1):this.Q==Ge?this.pi.w(a-16,b-16,0,0,1,1,!0,!1):this.oi.w(a-16,b-16,0,0,1,1,!0,!1)}};this.Uc=function(a){this.Kc=a.Kc;this.Ha=a.Al*57.29577951308232;this.longitude=a.Ub.longitude;this.latitude=a.Ub.latitude;this.elevation=a.Ub.elevation;this.ul=a.cf;this.Bl=a.mc[0];this.Cl=this.c.height-a.mc[1]-1;if(this.Q!=ve)this.gi=this.Ha,this.Af=0;if(this.Q==Ce)a.Ya=sc,a.Fa=1;else if(this.Q==Ee)a.Ya=tc,a.Fa=1;else if(this.Q==Ge)if(this.bc>0)a.Ya=tc,a.Fa=Math.sqrt(this.bc)/4;else{if(this.bc<
0)a.Fa=Math.sqrt(-this.bc)/4,a.Ya=sc}else this.Q==Ae?(a.Ya=uc,a.Fa=this.Eb):this.Q==ve?(a.Ya=vc,a.Fa=this.gi+this.Af,a.Fa=this.Ab(a.Fa),a.Fa*=Math.PI/180):this.Q==xe?(a.Ya=wc,a.Fa=Math.PI*this.ub/180):a.Ya=rc;a.qm=this.Q==ue?0:1};this.Qe=function(){this.Gh=new M(this.c);N(this.Gh,R+"flightnavigation/cmpbg.png");this.Hh=new M(this.c);N(this.Hh,R+"flightnavigation/cmpr.png");this.wf=new M(this.c);N(this.wf,R+"globenavigation/MoveWheel.png");this.yf=new M(this.c);N(this.yf,R+"globenavigation/YawPitchWheel.png");
this.xf=new M(this.c);N(this.xf,R+"globenavigation/yaw_pitch_adjust.png");this.Je=new M(this.c);N(this.Je,R+"globenavigation/movewheel_marker.png",i,i,!0);this.ii=new M(this.c);N(this.ii,R+"globenavigation/minus.png");this.ki=new M(this.c);N(this.ki,R+"globenavigation/minus_over.png");this.ji=new M(this.c);N(this.ji,R+"globenavigation/minus_clicked.png");this.li=new M(this.c);N(this.li,R+"globenavigation/plus.png");this.ni=new M(this.c);N(this.ni,R+"globenavigation/plus_over.png");this.mi=new M(this.c);
N(this.mi,R+"globenavigation/plus_clicked.png");this.oi=new M(this.c);N(this.oi,R+"globenavigation/slider.png");this.qi=new M(this.c);N(this.qi,R+"globenavigation/slider_over.png");this.pi=new M(this.c);N(this.pi,R+"globenavigation/slider_clicked.png");this.ri=new M(this.c);N(this.ri,R+"globenavigation/slider_rail.png");this.hi=new M(this.c);N(this.hi,R+"globenavigation/crosshair.png")};this.Pe=function(){this.Gh.k();this.Hh.k();this.wf.k();this.yf.k();this.xf.k();this.Je.k();this.ii.k();this.ki.k();
this.ji.k();this.li.k();this.ni.k();this.mi.k();this.oi.k();this.qi.k();this.pi.k();this.ri.k();this.hi.k()};this.Re=function(a){S(a,qd,this.Kf,!1,this);S(a,rd,this.Mf,!1,this);S(a,sd,this.Lf,!1,this);S(a,pd,this.Si,!1,this)};this.Kf=function(a){if(Hd(a,Dd)){var b=a.offsetX-this.c.R.offsetLeft,a=a.offsetY-this.c.R.offsetTop;this.Vj=b;this.Wj=this.c.height-a-1;this.Na=b;this.Ea=this.c.height-a-1;this.Cb=!0;this.Kc==1&&this.Ji(0)}};this.Mf=function(a){if(Hd(a,Dd)){var b=a.offsetY-this.c.R.offsetTop;
this.Na=a.offsetX-this.c.R.offsetLeft;this.Ea=this.c.height-b-1;this.Cb=!1;this.Kc==1&&this.Ji(0);this.bc=0}};this.Lf=function(a){var b=a.offsetY-this.c.R.offsetTop,c=this.c.height-b-1-this.Ea;this.Na=a.offsetX-this.c.R.offsetLeft;this.Ea=this.c.height-b-1;this.Kc==1&&this.Ji(c)};this.Si=function(){this.Q==we&&He(this.c.La,this.longitude,this.latitude,this.elevation,0,-90,0)};this.Ji=function(a){var b=this.c.width-1-64-this.ef-8,c=this.c.height-1-82-64-this.nc+8,d=this.c.width-1-64-this.ef-8,e=this.c.height-
1-82-128-64-this.nc+8,f=this.c.width-1-64-this.ef-8,g=this.c.height-1-82-128-this.bc-this.nc+8,j=this.c.width-1-64-this.ef,k=this.c.height-1-82-this.nc,l=Math.abs(this.Na-j);l*=l;var m=Math.abs(this.Ea-k);m*=m;var p=this.c.width-1-64-this.ef,o=this.c.height-1-this.nc,s=Math.abs(this.Na-p);s*=s;var t=Math.abs(this.Ea-o);t*=t;if(this.Cb&&this.Q==Ge)if(this.bc-=a,this.bc<-40)this.bc=-40;else{if(this.bc>40)this.bc=40}else if(this.Cb&&this.Q==Ae)a=this.Na-j,k=this.Ea-k,this.Eb=this.Wa=180*Math.atan2(Math.abs(k),
a)/Math.PI,k<0?this.Wa=360-this.Wa:this.Eb=360-this.Eb,this.Wa+=90,this.Eb+=90,this.Wa=this.Ab(this.Wa),this.Eb=this.Ab(this.Eb);else if(this.Cb&&this.Q==ve){a=this.Na-p;k=this.Ea-o;this.zb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.zb=360-this.zb;this.zb-=90;this.zb=this.Ab(this.zb);this.Af=this.Ab(this.zb-this.td)}else if(this.Cb&&this.Q==xe){a=this.Na-p;k=this.Ea-o;this.ub=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.ub=360-this.ub;this.ub+=90;this.ub=this.Ab(this.ub)}else{this.Q=0;
if(this.Na>b&&this.Ea>c-16&&this.Na<b+16&&this.Ea<c)this.Q=this.Cb?Ce:Be;if(this.Na>d&&this.Ea>e-16&&this.Na<d+16&&this.Ea<e)this.Q=this.Cb?Ee:De;if(this.Na>f&&this.Ea>g-16&&this.Na<f+16&&this.Ea<g)this.Q=this.Cb?Ge:Fe;l+m<=729?this.Cb?this.Q=Ae:(this.Q=ze,a=this.Na-j,k=this.Ea-k,this.Eb=this.Wa=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.Wa=360-this.Wa:this.Eb=360-this.Eb,this.Wa+=90,this.Eb+=90,this.Wa=this.Ab(this.Wa),this.Eb=this.Ab(this.Eb)):this.Wa=0;if(s+t<=625){this.Q=this.Cb?xe:ye;a=this.Na-
p;k=this.Ea-o;this.ub=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.ub=360-this.ub;this.ub+=90;this.ub=this.Ab(this.ub)}else if(s+t<=1600)if(this.Cb){this.Q=ve;a=this.Na-p;k=this.Ea-o;this.zb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.zb=360-this.zb;this.zb-=90;this.zb=this.Ab(this.zb);this.Af=this.Ab(this.zb-this.td);this.gi=this.Ha}else{this.Q=we;a=this.Na-p;k=this.Ea-o;this.td=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.td=360-this.td;this.td-=90;this.td-=this.Af;this.td=this.Ab(this.td)}}}}
var ue=0,Be=1,Ce=2,De=3,Ee=4,Fe=5,Ge=6,ze=7,Ae=8,we=9,ve=10,ye=11,xe=12;te.prototype=new qe;function Ie(){this.name="ogAoeImage";this.type=Ya;this.cb=-1;this.C=!1;this.options=i;this.qe=-1;this.re=-180;this.pe=-90;this.jf=180;this.hf=90;this.Cp="";this.tb=!1;this.g=this.qo=i;this.lf=[];this.df=[]}Ie.prototype=new D;r=Ie.prototype;r.wa=function(a){this.options=a;this.re=a.longitude0;this.pe=a.latitude0;this.jf=a.longitude1;this.hf=a.latitude1;this.oo=a.url;a=this.parent.parent.c;this.qo=new M(a,!0,256,256);this.g=new M(a);this.g.parent=this;N(this.g,this.oo,Je,Ke,!0);this.cb=Le(this).Ai(this)};
r.Ka=function(){Le(this).Ui(this.cb)};function Le(a){var b=i,a=a.parent.parent.c;if(a.f&&a.f.D)b=a.f.D.mj;return b}r.U=n();r.W=n();
r.Sa=function(){var a=this.parent.parent.c;if(this.tb!=!1){var b=a.f.D.Ma.A.length,c,d,e,f,g=i;this.df=i;this.df=[];for(var j=0;j<b;j++)if(g=a.f.D.Ma.A[j],!(g.i.length<1)&&!g.Bp&&(c=g.re,d=g.pe,e=g.jf,f=g.hf,!(this.re>e|this.jf<c|this.pe>f|this.hf<d)&&(this.df[g.i]=this.lf[g.i],!this.lf[g.i]))){var k=new L(g.c);k.Y(g.n);var l=g.g,m=new M(g.c,!0,256,256),p=m;a.be.push(p);p.Vf();l.w(0,0,0,0,1,1,!0,!0,1);this.g.w((this.re-c)*256/(e-c),(this.pe-d)*256/(f-d),0,0,(this.jf-this.re)/this.g.width/((e-c)/256),
(this.hf-this.pe)/this.g.height/((f-d)/256),!0,!0,1);Me(a);k.Qb(m);k.Uo=g.na[0];k.Vo=g.na[1];k.Wo=g.na[2];this.lf[g.i]=k;this.df[g.i]=k}}for(var o in this.df)a=this.df[o],b=new K,b.Y(a.c.vb),b.a[12]+=a.Uo,b.a[13]+=a.Vo,b.a[14]+=a.Wo,a.c.hc(),a.c.ic(b),a.ba(),a.c.Vc()};function Je(a){a.parent.tb=!0;a.P&&a.P(a.i,a,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i}function Ke(a){a.O&&a.O(a.i,a.caller,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i};function Ne(a){this.c=a;this.Zf=[]}Ne.prototype.Sa=function(){for(var a=0;a<this.Zf.length;a++)this.Zf[a].Sa()};Ne.prototype.Ai=function(a){this.Zf.push(a);return this.Zf.length-1};Ne.prototype.Ui=function(a){this.Zf.splice(a,1)};function Oe(a){this.c=a;this.za=[];this.Ld=new Pe}Oe.prototype.Sa=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.Ld.sh(b);for(var k=0;k<this.za.length;k++){var l=this.za[k];l.C||(this.Ld.rh(l.ze,l.Ae,l.Be,l.ze+0.0010,l.Ae+0.0010,l.Be+0.0010),f=l.ze-c,g=l.Ae-d,j=l.Be-e,f=f*f+g*g+j*j,g=l.qk*l.qk,l.pk*l.pk>f&&g<f&&l.ba())}};Oe.prototype.Pf=function(a,b){for(var c=0;c<this.za.length;c++)if(this.za[c].Nf(a,b))return this.za[c];return i};function Qe(a){this.c=a;this.Ba=[]}Qe.prototype.Sa=function(){for(var a=0;a<this.Ba.length;a++){var b=this.Ba[a];b.C||b.ba()}};Qe.prototype.Bi=function(a){this.Ba.push(a)};Qe.prototype.Vi=function(a){for(var b=0;b<this.Ba.length;b++)if(this.Ba[b]==a){this.Ba.splice(b,1);break}};Qe.prototype.Of=function(a,b){for(var c=0;c<this.Ba.length;c++){var d=this.Ba[c].Nf(a,b);if(d)return d}return i};function Re(){this.j=this.y=this.x=0}function Pe(){this.B=Array(6);this.B[0]=new Se;this.B[1]=new Se;this.B[2]=new Se;this.B[3]=new Se;this.B[4]=new Se;this.B[5]=new Se;this.L=Array(8);this.L[0]=new Re;this.L[1]=new Re;this.L[2]=new Re;this.L[3]=new Re;this.L[4]=new Re;this.L[5]=new Re;this.L[6]=new Re;this.L[7]=new Re}function Se(){this.Nc=this.Mc=this.Lc=this.ud=0}
Se.prototype.gc=function(){var a=Math.sqrt(this.Lc*this.Lc+this.Mc*this.Mc+this.Nc*this.Nc);this.Lc/=a;this.Mc/=a;this.Nc/=a;this.ud/=a};
Pe.prototype.rh=function(a,b,c,d,e,f){this.L[0].x=a;this.L[0].y=b;this.L[0].j=c;this.L[1].x=d;this.L[1].y=b;this.L[1].j=c;this.L[2].x=d;this.L[2].y=e;this.L[2].j=c;this.L[3].x=a;this.L[3].y=e;this.L[3].j=c;this.L[4].x=a;this.L[4].y=b;this.L[4].j=f;this.L[5].x=a;this.L[5].y=e;this.L[5].j=f;this.L[6].x=d;this.L[6].y=e;this.L[6].j=f;this.L[7].x=d;this.L[7].y=b;this.L[7].j=f;for(a=0;a<6;a++){b=8;for(c=0;c<8;c++)this.B[a].Lc*this.L[c].x+this.B[a].Mc*this.L[c].y+this.B[a].Nc*this.L[c].j+this.B[a].ud<0&&
--b;if(b==0)return!1}return!0};
Pe.prototype.sh=function(a){this.Ip=a;this.fb=a.a;this.dm=this.fb[0];this.hm=this.fb[1];this.lm=this.fb[2];this.mf=this.fb[3];this.em=this.fb[4];this.im=this.fb[5];this.mm=this.fb[6];this.nf=this.fb[7];this.fm=this.fb[8];this.jm=this.fb[9];this.nm=this.fb[10];this.of=this.fb[11];this.gm=this.fb[12];this.km=this.fb[13];this.om=this.fb[14];this.pf=this.fb[15];this.B[0].Lc=this.mf+this.dm;this.B[0].Mc=this.nf+this.em;this.B[0].Nc=this.of+this.fm;this.B[0].ud=this.pf+this.gm;this.B[0].gc();this.B[1].Lc=
this.mf-this.dm;this.B[1].Mc=this.nf-this.em;this.B[1].Nc=this.of-this.fm;this.B[1].ud=this.pf-this.gm;this.B[1].gc();this.B[2].Lc=this.mf-this.hm;this.B[2].Mc=this.nf-this.im;this.B[2].Nc=this.of-this.jm;this.B[2].ud=this.pf-this.km;this.B[2].gc();this.B[3].Lc=this.mf+this.hm;this.B[3].Mc=this.nf+this.im;this.B[3].Nc=this.of+this.jm;this.B[3].ud=this.pf+this.km;this.B[3].gc();this.B[4].Lc=this.mf+this.lm;this.B[4].Mc=this.nf+this.mm;this.B[4].Nc=this.of+this.nm;this.B[4].ud=this.pf+this.om;this.B[4].gc();
this.B[5].Lc=this.mf-this.lm;this.B[5].Mc=this.nf-this.mm;this.B[5].Nc=this.of-this.nm;this.B[5].ud=this.pf-this.om;this.B[5].gc()};y("ViewFrustum",Pe);Pe.prototype.TestBox=Pe.prototype.rh;Pe.prototype.Update=Pe.prototype.sh;function Te(){this.$f=this.ag=!1;this.version=this.Rd=this.To=this.Xm=this.De=this.Xo=this.pm=this.ro=this.so=this.Xa=this.Qa=this.to=this.Go=this.Ho=i}
Te.prototype.Ff=function(a){this.K=new XMLHttpRequest;this.K.open("GET",a,!0);var b=this;this.K.onreadystatechange=function(){a:if(b.K.readyState==4)if(b.K.status==200){var a=b.K.responseText,d;try{d=Ac(a)}catch(e){alert(e);break a}if(d.extent)if(b.version=1,b.Mp=d.name,b.Xa=d.maxlod,b.pm=256,a=d.extent,b.Qa=a,b.Xm=[b.Xa,a[0],a[1],a[2],a[3]],d.type=="image")d.format=="png"?(b.De="image/png",b.Rd=".png"):d.format=="jpg"?(b.De="image/jpg",b.Rd=".jpg"):b.De="image/png";else{if(d.type=="elevation")b.Rd=
".json"}else if(b.version=0,b.Ho=d.layer,b.Go=d.copyright,b.to=d.srs,b.Qa=d.boundingbox,b.Xa=d.levelofdetail,b.so=d.imagewidth,b.ro=d.imageheight,b.pm=d.tilesize,b.Xo=d.tilelayout,b.De=d.tileformat,b.Xm=d.bounds,b.To=d.center,b.De=="image/png")b.Rd=".png";else if(b.De=="image/jpg")b.Rd=".jpg";else if(b.De=="elevation/json")b.Rd=".json";b.ag=!0}else F(G("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.$f=!0};this.K.send()};y("DatasetInfo",Te);Te.prototype.Download=Te.prototype.Ff;function Ue(){}Ue.prototype.Qf=function(a,b){this.Wk(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};Ue.prototype.Wk=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
Ue.prototype.Ac=function(a,b){b.x=0;b.y=0;b.Vb=a.length;for(var c,d=b.Vb;d>0;d--)switch(c=1<<d-1,a[b.Vb-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};y("MercatorQuadtree",Ue);Ue.prototype.QuadKeyToMercatorCoord=Ue.prototype.Qf;Ue.prototype.QuadKeyToNormalizedCoord=Ue.prototype.Wk;Ue.prototype.QuadKeyToTileCoord=Ue.prototype.Ac;var Ve={Pi:function(a){for(var b="",c=0;c<a.length;c++)c%2==0&&c>0&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};y("GlobeUtils",Ve);y("GlobeUtils.MakeHierarchicalFilename",Ve.Pi);function We(){this.ra=q(!1);this.xc=q(!1);this.Pb=n();this.wd=q(0);this.Ob=q(0);this.Le=this.Me=-1;this.vc=q(!1)};function Xe(){this.t=new Te;this.m=this.uf=i;this.ka=new Ue;this.coords=Array(4);this.sd=1;this.ra=function(){return this.t.ag};this.xc=function(){return this.t.$f};this.Pb=function(a,b,c,d,e,f){if(this.ra()){var g=this.uf+"/"+this.m+"/"+Ve.Pi(b+this.t.Rd),a=new M(a);a.i=b;a.m=c;a.P=d;a.O=e;a.caller=f;a.sd=this.sd;N(a,g,Ye,Ze,!0)}};this.wd=q(0);this.Ob=function(){return this.t.Xa?this.t.Xa:0};this.vc=function(a){if(a.length>this.t.Xa)return!1;this.ka.Qf(a,this.coords);var a=this.coords[0],b=this.coords[1],
c=this.coords[2],d=this.coords[3],e=this.t.Qa[0],f=this.t.Qa[1],g=this.t.Qa[2],j=this.t.Qa[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.gb=function(a,b,c){this.sd=c==i?1:c;this.uf=a;this.m=b;this.t.Ff(a+"/"+b+".json")}}Xe.prototype=new We;function Ye(a){a.P(a.i,a,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i}function Ze(a){a.O(a.i,a.caller,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i}y("i3dImageLayer",Xe);Xe.prototype.Failed=Xe.prototype.xc;Xe.prototype.Ready=Xe.prototype.ra;
Xe.prototype.RequestTile=Xe.prototype.Pb;Xe.prototype.Setup=Xe.prototype.gb;function $e(){this.m=this.$a=i;this.ka=new Ue;this.ma=0;this.ra=q(!0);this.xc=q(!1);this.Pb=function(a,b,c,d,e,f){var g={};this.ka.Ac(b,g);g=this.$a[this.ma]+"/"+g.Vb+"/"+g.x+"/"+g.y+".png";a=new M(a);a.i=b;a.m=c;a.P=d;a.O=e;a.caller=f;N(a,g,af,bf,!0);this.ma++;if(this.ma>=this.$a.length)this.ma=0};this.wd=q(0);this.Ob=q(16);this.vc=function(a){if(a.length<17)return!0;return!1};this.gb=ca("$a")}$e.prototype=new We;function af(a){a.P(a.i,a,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i}
function bf(a){a.O(a.i,a.caller,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i};function cf(){this.ra=q(!1);this.xc=q(!1);this.Pb=n();this.wd=q(0);this.Ob=q(0);this.vc=q(!1)};function df(){this.t=new Te;this.m=this.uf=i;this.ka=new Ue;this.coords=Array(4);this.ra=function(){return this.t.ag};this.xc=function(){return this.t.$f};this.Pb=function(a,b,c,d,e,f){if(this.ra()){var g=this.uf+"/"+this.m+"_JSON/"+(Ve.Pi(b+".jso")+"n"),a=new L(a);a.i=b;a.m=c;a.P=d;a.O=e;a.caller=f;Lc(a,g,ef,ff)}};this.wd=q(0);this.Ob=function(){return this.t.Xa?this.t.Xa:0};this.vc=function(a){if(a.length>this.t.Xa)return!1;this.ka.Qf(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.t.Qa[0],f=this.t.Qa[1],g=this.t.Qa[2],j=this.t.Qa[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.gb=function(a,b){this.uf=a;this.m=b;this.t.Ff(a+"/"+b+".json")}}df.prototype=new cf;function ef(a){a.P(a.i,a,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i}function ff(a){a.O(a.i,a.caller,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i};function gf(){this.m=this.$a=i;this.ka=new Ue;this.ma=0;this.ra=q(!0);this.xc=q(!1);this.Pb=function(a,b,c,d,e,f){var g={};this.ka.Ac(b,g);var j=Math.pow(2,g.Vb),g=this.$a[this.ma]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.Vb)+"&key=[KEY]",a=new M(a);a.i=b;a.m=c;a.P=d;a.O=e;a.caller=f;N(a,g,hf,jf,!0);this.ma++;if(this.ma>=this.$a.length)this.ma=0};this.wd=q(0);this.Ob=q(16);this.vc=function(a){if(a.length<17)return!0;return!1};this.gb=ca("$a")}$e.prototype=new We;
function hf(a){a.P(a.i,a,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i}function jf(a){a.O(a.i,a.caller,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i};function kf(){this.t=new Te;this.m=this.uf=i;this.ka=new Ue;this.coords=Array(4);this.ma=0;this.ra=function(){return this.t.ag};this.xc=function(){return this.t.$f};this.Pb=function(a,b,c,d,e,f){if(this.ra()){var g={};this.ka.Ac(b,g);g=this.$a[this.ma]+"/"+this.m+"/tiles/"+g.Vb+"/"+g.x+"/"+g.y+".json";a=new L(a);a.i=b;a.m=c;a.P=d;a.O=e;a.caller=f;Lc(a,g,lf,mf);this.ma++;if(this.ma>=this.$a.length)this.ma=0}};this.wd=q(0);this.Ob=function(){return this.t.Xa?this.t.Xa:0};this.vc=function(a){if(a.length>
this.t.Xa)return!1;for(var b=a,c=a,d=0;d<this.t.Xa-a.length;d++)b+="0",c+="3";d={};this.ka.Ac(b,d);b=d.x;a=d.y;this.ka.Ac(c,d);var c=d.x,d=d.y,e=this.t.Qa[0],f=this.t.Qa[1],g=this.t.Qa[3];return!(b>this.t.Qa[2]||c<e||a>g||d<f)};this.gb=function(a,b){this.$a=a;this.m=b;this.t.Ff(a[0]+"/"+b+"/layersettings.json")}}kf.prototype=new cf;function lf(a){a.P(a.i,a,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i}function mf(a){a.O(a.i,a.caller,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i};function nf(){this.m=this.$a=i;this.ka=new Ue;this.sub=this.ma=0;this.Qo=["Galile","Galil","Gali","Gal","Ga","G"];this.ra=q(!0);this.xc=q(!1);this.Pb=function(a,b,c,d,e,f){var g={};this.ka.Ac(b,g);g=this.$a[this.ma]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.Vb+"&s="+this.Qo[this.sub];this.sub++;if(this.sub==5)this.sub=0;a=new M(a);a.i=b;a.m=c;a.P=d;a.O=e;a.caller=f;N(a,g,af,bf,!0);this.ma++;if(this.ma>=this.$a.length)this.ma=0};this.wd=q(0);this.Ob=q(19);this.vc=function(a){if(a.length<20)return!0;return!1};
this.gb=ca("$a")}nf.prototype=new $e;function of(a,b){this.te=a||-1;this.bo=b||!1;this.Pd={};this.xa=0;this.Am=Math.round(this.te*0.75);this.Oc={};this.Oc.hits=0;this.Oc.misses=0;pf(this,"Initialized cache with size "+a)}of.prototype.getItem=function(a){var b=this.Pd[a];if(b!=i)qf(b)?(rf(this,a),b=i):b.Wh=(new Date).getTime();(b=b?b.value:i)?(this.Oc.hits++,pf(this,"Cache HIT for key "+a)):(this.Oc.misses++,pf(this,"Cache MISS for key "+a));return b};
of.prototype.setItem=function(a,b,c){this.Pd[a]!=i&&rf(this,a);sf(this,new function(a,b,c){(a==i||a=="")&&ba(Error("key cannot be null or empty"));this.key=a;this.value=b;c==i&&(c={});if(c.Mh!=i)c.Mh=c.Mh.getTime();if(c.Eg==i)c.Eg=2;this.options=c;this.Wh=(new Date).getTime()}(a,b,c));pf(this,"Setting key "+a);if(this.te>0&&this.xa>this.te){var d=this;setTimeout(function(){d.Fo.call(d)},0)}};of.prototype.clear=function(){for(var a in this.Pd)rf(this,a);pf(this,"Cache cleared")};
of.prototype.Fo=function(){var a=[],b;for(b in this.Pd){var c=this.Pd[b];qf(c)?rf(this,b):a.push(c)}if(a.length>this.Am)for(a=a.sort(function(a,b){return a.options.Eg!=b.options.Eg?b.options.Eg-a.options.Eg:b.Wh-a.Wh});a.length>this.Am;)rf(this,a.pop().key);pf(this,"Purged cached")};function sf(a,b){a.Pd[b.key]=b;a.xa++}
function rf(a,b){var c=a.Pd[b];delete a.Pd[b];a.xa--;pf(a,"removed key "+b);c.options.On!=i&&setTimeout(function(){c.options.On.call(i,c.key,c.value)},0);c.k!=i&&setTimeout(function(){c.k()},0)}function qf(a){var b=(new Date).getTime(),c=!1;a.options.Mh&&a.options.Mh<b&&(c=!0);!c&&a.options.jo&&a.Wh+a.options.jo*1E3<b&&(c=!0);return c}function pf(a,b){a.bo&&G("owg.Cache").info(b)};function tf(a,b,c){a=I(a)-0;b=Math.log(Math.tan(Math.PI/4+I(b)/2));a/=Math.PI;b/=Math.PI;c[0]=a;c[1]=b}function uf(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=kc(b);for(a=kc(a/1+0);a>180;)a-=180;for(;a<-180;)a+=180;for(;b>90;)b-=180;for(;b<-90;)b+=180;c[0]=a;c[1]=b};function vf(a,b,c){this.c=a;this.i=b;this.ka=c;this.g=i;this.Rb=!1;this.n=i;this.Ml=!0;this.na=[];this.Ga=Array(5);this.Ga[0]=new J;this.Ga[1]=new J;this.Ga[2]=new J;this.Ga[3]=new J;this.Ga[4]=new J;this.ff=0;this.images=i;this.nj=!1;this.Kh=0;this.zh=new J;this.Pc=new K;this.re=-180;this.pe=-90;this.jf=180;this.hf=90;var d=Array(4),e=Array(2);this.ka.Qf(this.i,d);var a=Array(3),b=Array(3),c=Array(3),f,g,j=new O;f=d[0];g=d[1];uf(f,g,e);f=e[0];g=e[1];this.re=f;this.hf=g;j.u(f,g,0);j.ia(a);f=d[2];
g=d[1];uf(f,g,e);f=e[0];g=e[1];j.u(f,g,0);j.ia(b);f=d[2];g=d[3];uf(f,g,e);f=e[0];g=e[1];this.jf=f;this.pe=g;j.u(f,g,0);j.ia(c);d=new J;e=new J;d.u(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.u(c[0]-a[0],c[1]-a[1],c[2]-a[2]);pc(this.zh,d,e);this.zh.gc()}var wf=0;
function xf(a){if(a.ff==0&&a.Kh==0){var b=0,c=0;if(a.images!==i)for(var d=0;d<a.images.length;d++)a.images[d]!=i&&(b++,c=d);b==0?(a.g=a.c.Zj,a.n===i&&yf(a),a.n.Qb(a.g),a.Rb=!0,a.images=i):b==1?(a.g=a.images[c],a.n===i&&yf(a),a.n.Qb(a.g),a.Rb=!0,a.images=i):(a.nj=!0,a.n===i&&yf(a),a.Rb=!0)}}function zf(a,b,c){a=b.caller;a.images[c]=b;a.ff-=1;xf(a);wf--}function Af(a,b,c){c>=0?(b.images[c]=i,b.ff-=1):(b.images=i,b.ff=0);xf(b);wf--}
function Bf(a,b){var c=b.caller;c.n=b;c.n.Vb=c.i.length;c.na=b.pa;c.Ga[0].u(b.N[0],b.N[1],b.N[2]);c.Ga[1].u(b.da[0],b.N[1],b.N[2]);c.Ga[2].u(b.da[0],b.da[1],b.N[2]);c.Ga[3].u(b.N[0],b.da[1],b.N[2]);c.Ga[4].u(0.5*(b.da[0]-b.N[0]),0.5*(b.da[1]-b.N[1]),0.5*(b.da[2]-b.N[2]));c.Kh-=1;xf(c);wf--}function Cf(a,b){b.n=i;b.Kh-=1;xf(b);wf--}vf.prototype.k=function(){this.g&&this.g.k();this.n&&this.n.k()};
function yf(a){a.Ml=!1;a.n=new L(a.c);a.n.Vb=a.i.length;var b;b=a.i.length<3?2:a.i.length<6?9:5;for(var c=Array(2*b*b),d=1/(b-1),e=0;e<b;e++)for(var f=0;f<b;f++)c[2*(e*b+f)+0]=f*d,c[2*(e*b+f)+1]=1-e*d;var f=[],g,j,d=Array(4),k=Array(2),l=Array(3);a.ka.Qf(a.i,d);g=d[0];j=d[1];for(var m=(d[3]-j)/(b-1),p=(d[2]-g)/(b-1),o,s,t,w=new O,d=0;d<b;d++)for(e=0;e<b;e++){o=g+e*p;s=j+d*m;uf(o,s,k);w.u(k[0],k[1],0);w.ia(l);o=l[0];s=l[1];t=l[2];if(e==0&&d==0)a.na=[o,s,t];e==0&&d==0?a.Ga[0].u(o,s,t):e==b-1&&d==0?
a.Ga[1].u(o,s,t):e==b-1&&d==b-1?a.Ga[2].u(o,s,t):e==0&&d==b-1?a.Ga[3].u(o,s,t):e==(b-1)/2&&d==(b-1)/2&&a.Ga[4].u(o,s,t);f.push(o-a.na[0]);f.push(s-a.na[1]);f.push(t-a.na[2])}g=Array(5*b*b);for(d=0;d<b*b;d++)g[5*d+0]=f[3*d+0],g[5*d+1]=f[3*d+1],g[5*d+2]=f[3*d+2],g[5*d+3]=c[2*d+0],g[5*d+4]=c[2*d+1];for(var c=[],x,e=j=f=0;e<=b-2;e+=1){for(d=0;d<=b-1;d+=1)k=e,x=e+1,m=j%2==0?l=b-1-d:l=d,x+=m*b,c[f++]=k+l*b,c[f++]=x;c[f++]=x;j+=1}Ec(a.n,g);Ic(a.n,c,"TRIANGLESTRIP");a.n.Qb(a.g);a.n.pa=a.na;Mc(a.n)}
vf.prototype.Sa=function(a){if(!(this.i.length<3)){if(a){if(this.Pc.Y(this.c.vb),this.Pc.a[12]+=this.na[0],this.Pc.a[13]+=this.na[1],this.Pc.a[14]+=this.na[2],this.c.hc(),this.c.ic(this.Pc),a=this.n,a.ra){a.S==i&&a.Cd();a.b.bindBuffer(a.b.ARRAY_BUFFER,a.S);a.b.bindBuffer(a.b.ELEMENT_ARRAY_BUFFER,a.nb);a.ha&&(a.c.hc(),a.od.V(a.ha,a.c.vb),a.c.ic(a.od));switch(a.mode){case "p":a.b.enableVertexAttribArray(0);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,12,0);Jc(a.c.Oa,a.c.ga,a.rd);break;case "pnt":a.b.enableVertexAttribArray(0);
a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,32,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,!1,32,12);a.b.vertexAttribPointer(2,2,a.b.FLOAT,!1,32,24);Jc(a.c.Oa,a.c.ga,a.rd);break;case "pc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,28,0);a.b.vertexAttribPointer(1,4,a.b.FLOAT,!1,28,12);Jc(a.c.Oa,a.c.ga,a.rd);break;case "pt":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);
a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,20,0);a.b.vertexAttribPointer(1,2,a.b.FLOAT,!1,20,12);Jc(a.c.Oa,a.c.ga,a.rd);break;case "pnct":a.b.enableVertexAttribArray(0),a.b.enableVertexAttribArray(1),a.b.enableVertexAttribArray(2),a.b.enableVertexAttribArray(3),a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,48,0),a.b.vertexAttribPointer(1,3,a.b.FLOAT,!1,48,12),a.b.vertexAttribPointer(2,4,a.b.FLOAT,!1,48,24),a.b.vertexAttribPointer(3,2,a.b.FLOAT,!1,48,40),Jc(a.c.Oa,a.c.ga,a.rd)}switch(a.hd){case "TRIANGLES":a.b.drawElements(a.b.TRIANGLES,
a.xb,a.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a.b.drawElements(a.b.TRIANGLE_STRIP,a.xb,a.b.UNSIGNED_SHORT,0)}a.b.disableVertexAttribArray(0);a.b.disableVertexAttribArray(1);a.b.disableVertexAttribArray(2);a.b.disableVertexAttribArray(3)}}else{if(this.nj){this.nj=!1;a=this.g=new M(this.c,!0,256,256);this.c.be.push(a);a.Vf();for(a=0;a<this.images.length;a++)this.images[a]!=i&&(this.images[a].sd<1?this.images[a].w(0,0,0,0,1,1,!0,!0,this.images[a].sd):this.images[a].w(0,0,0,0,1,1,!0,!0,1));Me(this.c);
for(a=0;a<this.images.length;a++)this.images[a]!=i&&this.images[a].k();this.images=i;this.n.Qb(this.g)}this.Pc.Y(this.c.vb);this.Pc.a[12]+=this.na[0];this.Pc.a[13]+=this.na[1];this.Pc.a[14]+=this.na[2];this.c.hc();this.c.ic(this.Pc);if(this.c.f.D.Ma.fk==Df)this.n.mode="pt";else if(this.c.f.D.Ma.fk==Ef)this.n.mode="pt_chroma";this.n.ba()}this.c.Vc()}};function Ff(a,b,c,d,e){this.c=a;this.ua=b;this.mb=c;this.ka=d;this.Dh=new of(e,!1);this.jk={};this.jk.sm=0}Ff.prototype.k=function(){this.ka=this.mb=this.ua=this.c=i;this.Dh.clear();this.Dh=i};Ff.prototype.Rk=function(){if(!this.ua)return!1;if(this.ua.length==0)return!1;for(var a=0;a<this.ua.length;a++)if(!this.ua[a].ra())return!1;if(this.mb)for(a=0;a<this.mb.length;a++)if(!this.mb[a].ra())return!1;return!0};
Ff.prototype.Wc=function(a){var b=this.Dh.getItem(a);if(b==i){this.jk.sm++;var c=b=new vf(this.c,a,this.ka),d=this.ua,e=this.mb;if(c.i.length<3)Af(0,c,-1);else{if(d.length>0){c.ff=d.length;c.images=Array(c.ff);for(var f=0;f<d.length;f++){c.images[f]=i;var g=c.i.length,g=(g<=d[f].Le||d[f].Le==-1)&&(g>=d[f].Me||d[f].Me==-1);d[f].vc(c.i)&&g?(d[f].Pb(c.c,c.i,f,zf,Af,c),wf++):Af(0,c,f)}}if(e&&e.length>0&&c.i.length>8&&e[0].vc(c.i))c.Kh=1,e[0].Pb(c.c,c.i,0,Bf,Cf,c),wf++}this.Dh.setItem(a,b)}return b};
Ff.prototype.Ob=function(){var a=0,b=0;if(this.mb.length>0)for(var c=0;c<this.mb.length;c++)b=Math.max(b,this.mb[c].Ob());for(c=0;c<this.ua.length;c++)a=Math.max(a,this.ua[c].Ob());if(b>0)return Math.min(b,a);return a};y("GlobeCache",Ff);Ff.prototype.IsReady=Ff.prototype.Rk;Ff.prototype.RequestBlock=Ff.prototype.Wc;function Gf(){this.t=new Te;this.m=i;this.ka=new Ue;this.coords=Array(4);this.sd=1;this.ma=0;this.ra=function(){return this.t.ag};this.xc=function(){return this.t.$f};this.Pb=function(a,b,c,d,e,f){if(this.ra()){var g={};this.ka.Ac(b,g);g=this.$a[this.ma]+"/"+this.m+"/tiles/"+g.Vb+"/"+g.x+"/"+g.y+this.t.Rd;a=new M(a);a.i=b;a.m=c;a.P=d;a.O=e;a.caller=f;a.sd=this.sd;N(a,g,Hf,If,!0);this.ma++;if(this.ma>=this.$a.length)this.ma=0}};this.wd=q(0);this.Ob=function(){return this.t.Xa?this.t.Xa:0};this.vc=
function(a){if(a.length>this.t.Xa)return!1;for(var b=a,c=a,d=0;d<this.t.Xa-a.length;d++)b+="0",c+="3";d={};this.ka.Ac(b,d);b=d.x;a=d.y;this.ka.Ac(c,d);var c=d.x,d=d.y,e=this.t.Qa[0],f=this.t.Qa[1],g=this.t.Qa[3];return!(b>this.t.Qa[2]||c<e||a>g||d<f)};this.gb=function(a,b,c){this.sd=c==i?1:c;this.$a=a;this.m=b;this.t.Ff(a[0]+"/"+b+"/layersettings.json")}}Gf.prototype=new We;function Hf(a){a.P(a.i,a,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i}
function If(a){a.O(a.i,a.caller,a.m);a.P=i;a.O=i;a.i=i;a.caller=i;a.m=i}y("owgImageLayer",Gf);Gf.prototype.Failed=Gf.prototype.xc;Gf.prototype.Ready=Gf.prototype.ra;Gf.prototype.RequestTile=Gf.prototype.Pb;Gf.prototype.Setup=Gf.prototype.gb;function Jf(a){this.c=a;this.ua=[];this.mb=[];this.ka=new Ue;this.Nn=1E3;this.Da=i;this.A=[];this.Sl=0;this.qg={};this.qg.Fh=0;this.bg=i;this.Uj=0;this.Bm=1;this.Ld=new Pe;this.ea=Array(3);this.Tj=new K;this.ve=new L(this.c);this.Ee=new L(this.c);this.we=[8/255,24/255,58/255];this.Fe=[1,1,1];this.ek=1;this.fk=Df;this.Dm={}}r=Jf.prototype;r.k=function(){if(this.Da)this.Da.k(),this.Da=i;if(this.ve)this.ve.k(),this.ve=i;if(this.Ee)this.Ee.k(),this.Ee=i};
r.Di=function(a){var b=-1;if(v(a.service))if(a.service=="i3d"){if(v(a.url)&&v(a.layer)&&a.url.length>0){var b=a.url[0],c=a.layer,d=new Xe;if(v(a.minlod))d.Me=a.minlod;if(v(a.maxlod))d.Le=a.maxlod;d.gb(b,c,a.transparency);b=this.ua.length;this.ua.push(d);Kf(this)}}else if(a.service=="osm"){if(v(a.url)&&a.url.length>0){d=new $e;if(v(a.minlod))d.Me=a.minlod;if(v(a.maxlod))d.Le=a.maxlod;d.gb(a.url);b=this.ua.length;this.ua.push(d);Kf(this)}}else if(a.service=="owg"){if(v(a.url)&&a.url.length>0){c=a.layer;
d=new Gf;if(v(a.minlod))d.Me=a.minlod;if(v(a.maxlod))d.Le=a.maxlod;d.gb(a.url,c,a.transparency);b=this.ua.length;this.ua.push(d);Kf(this)}}else if(a.service=="goo"){if(v(a.url)&&a.url.length>0){d=new nf;if(v(a.minlod))d.Me=a.minlod;if(v(a.maxlod))d.Le=a.maxlod;d.gb(a.url);b=this.ua.length;this.ua.push(d);Kf(this)}}else if(a.service=="oym"&&v(a.url)&&a.url.length>0){d=new gf;if(v(a.minlod))d.Me=a.minlod;if(v(a.maxlod))d.Le=a.maxlod;d.gb(a.url);b=this.ua.length;this.ua.push(d);Kf(this)}return b};
r.Ci=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new df;c.gb(a.url[0],b);b=this.mb.length;this.mb.push(c);Kf(this)}}else if(a.service=="owg"&&a.url&&a.layer&&a.url.length>0){var d=a.url,b=a.layer,c=new kf;c.gb(d,b);b=this.mb.length;this.mb.push(c);Kf(this)}return b};r.ih=function(a){a<0||a>=this.ua.length||(this.ua.splice(a,1),Kf(this))};function Kf(a){if(a.Da)a.Da.k(),a.Da=i;a.Da=new Ff(a.c,a.ua,a.mb,a.ka,a.Nn)}
r.Sa=function(a,b){this.Da.jk.sm=0;this.Tj.Y(b);this.Ld.sh(b);this.bg=a;if(this.Da&&this.Da.Rk()){this.Uj=this.Da.Ob();var c=this.Da.Wc("0"),d=this.Da.Wc("1"),e=this.Da.Wc("2"),f=this.Da.Wc("3");if(c.Rb&&d.Rb&&e.Rb&&f.Rb){this.A=[];this.A.push(c);this.A.push(d);this.A.push(e);this.A.push(f);for(this.qg.Fh=0;this.qg.Fh!=this.A.length;)a:{c=this.qg.Fh;if(this.A[c].i.length!=this.Uj&&this.A[c].Rb&&Lf(this,c)){var g=this.A[c].i,d=this.Da.Wc(g+"0"),e=this.Da.Wc(g+"1"),f=this.Da.Wc(g+"2"),g=this.Da.Wc(g+
"3");if(d.Rb&&e.Rb&&f.Rb&&g.Rb){this.A.splice(c,1);this.A.push(d);this.A.push(e);this.A.push(f);this.A.push(g);break a}}this.qg.Fh++}for(c=0;c<this.A.length;)e=this.A[c],d=e.Ga[4].a,e=e.zh.a,f=this.bg.a,this.ea[0]=f[0]-d[0],this.ea[1]=f[1]-d[1],this.ea[2]=f[2]-d[2],(this.ea[0]*e[0]+this.ea[1]*e[1]+this.ea[2]*e[2])/Math.sqrt(this.ea[0]*this.ea[0]+this.ea[1]*this.ea[1]+this.ea[2]*this.ea[2])>=0.4?this.A.splice(c,1):c++;for(c=0;c<this.A.length;c++)this.A[c].Sa(!1);d=[];e=[];for(c=0;c<this.A.length;c++){var f=
this.A[c].i,g=0,j=f.charAt(0);if(j=="0"||j=="1")g=1;if(j=="2"||j=="3")g=2;for(var k=1;k<f.length;k++){j=f.charAt(k);if((j=="0"||j=="1")&&g=="2"){g=0;break}if((j=="2"||j=="3")&&g=="1"){g=0;break}}g==1&&d.push(this.A[c]);g==2&&e.push(this.A[c])}d.length>3&&Mf(this,d);e.length>3&&Nf(this,e)}}};
function Lf(a,b){var c=!0,d=a.A[b],e=d.i.length;if(e>a.Uj)return!1;if(e<3)return!0;c=a.Ld.rh(d.n.N[0],d.n.N[1],d.n.N[2],d.n.da[0],d.n.da[1],d.n.da[2]);if(!c)return!1;var f=d.Ga[4].a,g=d.zh.a,e=a.bg.a;a.ea[0]=e[0]-f[0];a.ea[1]=e[1]-f[1];a.ea[2]=e[2]-f[2];f=Math.sqrt(a.ea[0]*a.ea[0]+a.ea[1]*a.ea[1]+a.ea[2]*a.ea[2]);f>0&&(a.ea[0]/=f,a.ea[1]/=f,a.ea[2]/=f);a.ea[0]*g[0]+a.ea[1]*g[1]+a.ea[2]*g[2]>0.4&&(c=!1);if(!c)return!1;for(var c=[0,0,0],g=0,f=1.0E20,j=d.n.p.length/d.n.J,k=0;k<j;k++)c[0]=e[0]-(d.n.p[5*
k]+d.na[0]),c[1]=e[1]-(d.n.p[5*k+1]+d.na[1]),c[2]=e[2]-(d.n.p[5*k+2]+d.na[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.Bm;g=d.Ga[0].Bf();g.$i(d.Ga[1]);return c*g.Mi()/e>1}
r.$d=function(a,b,c){for(var b=this.c.Yd(a,b,this.Tj,!0),d=[],e=a=0;e<this.A.length;e++){var f=this.A[e].n.N,g=this.A[e].n.da;this.A[e].n.Ah.If(b.x,b.y,b.j,b.dd,b.ed,b.fd,f[0],f[1],f[2],g[0],g[1],g[2])&&d.push(this.A[e])}f=1.0E20;c.hit=!1;c.numhits=d.length;for(e=0;e<d.length;e++)if((g=d[e].n.Bd(b.x,b.y,b.j,b.dd,b.ed,b.fd))&&g.v<f)c.hit=!0,f=g.v,a=d[e].Ml?0:1;c.tmin=f;if(c.hit)c.x=b.x+f*b.dd,c.y=b.y+f*b.ed,c.z=b.j+f*b.fd,b=new O(0,0,0),b.yc(c.x,c.y,c.z),c.lng=b.F[0],c.lat=b.F[1],c.elv=b.F[2],a==1&&
(c.elv=0)};r.hh=function(a,b,c,d){if(d)if(d={},this.$d(a,b,d),d.hit)this.ek=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.Yd(a,b,this.Tj,!0);c.hit=!1;var f=e.x,b=e.y,a=e.j,g=e.dd,d=e.ed,e=e.fd,j=g*g+d*d+e*e,k=f*g+b*d+a*e,l=k*k-j*(f*f+b*b+a*a-this.ek*this.ek);if(!(l<=0))j=(0-k-Math.sqrt(l))/j,f+=g*j,b+=d*j,a+=e*j,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=!0,c.x=f*d,c.y=b*d,c.z=a*d,a=new O(0,0,0),a.yc(c.x,c.y,c.z),c.lng=a.F[0],c.lat=a.F[1],c.elv=a.F[2]};
r.Yg=function(a,b){var c={hasvalue:!1,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new O(a,b,0);f.ia(e);f.u(a,b,-1);f.ia(d);var g,j,f=d[0];g=d[1];j=d[2];var k=e[0]-d[0],l=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(k*k+l*l+d*d);k/=e;l/=e;d/=e;for(var e=[],m=0;m<this.A.length;m++){var p=this.A[m].n.N,o=this.A[m].n.da;this.A[m].n.Ah.If(f,g,j,k,l,d,p[0],p[1],p[2],o[0],o[1],o[2])&&e.push(this.A[m])}p=1.0E20;for(m=0;m<e.length;m++)if((o=e[m].n.Bd(f,g,j,k,l,d))&&o.v<p)c.hasvalue=!0,c.lod=e[m].n.Vb,p=o.v;if(c.hasvalue)c.x=
f+p*k,c.y=g+p*l,c.z=j+p*d,f=new O(0,0,0),f.yc(c.x,c.y,c.z),c.lng=f.F[0],c.lat=f.F[1],c.elevation=f.F[2];return c};
function Mf(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].i.length>c)c=b[d].i.length;for(d=0;d<b.length;d++)for(b[d].Fb=b[d].i;b[d].Fb.length<c;)b[d].Fb+="0";b.sort(function(a,b){return parseInt(a.Fb,2)-parseInt(b.Fb,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.we[0],a.we[1],a.we[2],1],e=[],d=0;d<b.length;d++)for(var f=2;b[d].n.p[f]==0;)c.push(b[d].na[0]+b[d].n.p[f-2]),c.push(b[d].na[1]+b[d].n.p[f-1]),c.push(b[d].na[2]+b[d].n.p[f]),c.push(a.we[0]),c.push(a.we[1]),c.push(a.we[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.ve.k();a.ve=new L(a.c);a.ve.wc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},i,i);a.ve.ba()}
function Nf(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].i.length>c)c=b[d].i.length;for(d=0;d<b.length;d++){b[d].Fb=b[d].i;b[d].Fb=b[d].Fb.replace(/2/g,"0");for(b[d].Fb=b[d].Fb.replace(/3/g,"1");b[d].Fb.length<c;)b[d].Fb+="0"}b.sort(function(a,b){return parseInt(b.Fb,2)-parseInt(a.Fb,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.Fe[0],a.Fe[1],a.Fe[2],1],e=[],d=0;d<b.length;d++){var f=b[d].n.p.length;for(f-=1;b[d].n.p[f]==0;)c.push(b[d].na[0]+b[d].n.p[f-4]),c.push(b[d].na[1]+b[d].n.p[f-
3]),c.push(b[d].na[2]+b[d].n.p[f-2]),c.push(a.Fe[0]),c.push(a.Fe[1]),c.push(a.Fe[2]),c.push(1),f-=5}for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.Ee.k();a.Ee=new L(a.c);a.Ee.wc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},i,i);a.Ee.ba()}
r.Vg=function(){if(!this.bg)return NaN;var a=[],b=this.bg.a,c=new J;if(this.mb.length==0)return c=new O,c.yc(b[0],b[1],b[2]),c.F[2];c.u(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.A.length;d++){var e=this.A[d].n.N,f=this.A[d].n.da;this.A[d].n.Ah.If(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.A[d])}e=1.0E20;f=!1;for(d=0;d<a.length;d++){var g=a[d].n.Bd(b[0],b[1],b[2],c[0],c[1],c[2]);if(g&&g.v<e)f=!0,e=g.v}if(f)return b=e*c[0],a=e*c[1],c=e*c[2],b=Math.sqrt(b*b+a*a+c*c)*
8388607,e<0&&(b=-b),this.Sl=b;return this.Sl};r.oh=ca("fk");var Df=0,Ef=1;function Of(a){this.c=a;this.fa=[]}
Of.prototype.Sa=function(){for(var a=0;a<this.fa.length;a++){var b=this.fa[a],c=this.fa[a],d=this.c.b;d.colorMask(!1,!1,!1,!1);d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(!1);d.depthFunc(d.GEQUAL);d.enable(d.STENCIL_TEST);d.stencilFunc(d.ALWAYS,0,0);d.stencilOp(d.KEEP,d.KEEP,d.INCR);d.cullFace(d.FRONT);for(var e=0;e<b.length;e++)b[e].ba();d.stencilOp(d.KEEP,d.KEEP,d.DECR);d.cullFace(d.BACK);for(e=0;e<b.length;e++)b[e].ba();d.depthMask(!0);d.colorMask(!0,!0,!0,!0);d.cullFace(d.FRONT);
d.stencilFunc(d.NOTEQUAL,0,1);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);d.enable(d.BLEND);d.depthMask(!0);for(e=0;e<c.length;e++)c[e].ba();d.stencilFunc(d.NOTEQUAL,0,2);for(e=0;e<c.length;e++)c[e].ba();d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.enable(d.CULL_FACE);d.cullFace(d.BACK);d.depthFunc(d.LESS);d.disable(d.STENCIL_TEST)}};Of.prototype.Dk=function(a){this.fa.push(a);return this.fa.length-1};Of.prototype.jh=function(a){this.fa.splice(a,1)};function Pf(){this.name="ogGeometry";this.type=La;this.Db=[];this.lf=[];this.cb=-1;this.C=!1;this.jd="";this.options=this.lc=this.cd=i;this.qe=-1;this.um=this.Qd=i}Pf.prototype=new D;r=Pf.prototype;r.wa=function(a){this.options=a;a.url&&Qf(this,a.url);a.jsonobject&&this.wc(a.jsonobject);if(a.type=="EarthPolyline")this.um=T($a,this,this.options),this.cb=Rf(this).Wd(this.um.Kd)};
r.Ka=function(){Rf(this).Wi(this.cb);if(this.Qd!=i)E(this.Qd);else{for(var a=0;a<this.Db.length;a++)E(this.Db[a]);this.aa=i}};function Rf(a){var b=i,a=a.parent.parent.c;if(a.f&&a.f.D)b=a.f.D.Qh;return b}r.Ad=function(a,b,c,d,e,f){for(var g=0;g<this.Db.length;g++)this.Db[g].Ad(a,b,c,d,e,f)};r.Sf=function(a,b,c,d){for(var e=0;e<this.Db.length;e++)this.Db[e].Sf(a,b,c,d)};r.U=function(){if(this.Qd!=i)this.Qd.U();else for(var a=0;a<this.Db.length;a++)this.Db[a].U()};
r.W=function(){if(this.Qd!=i)this.Qd.W();else for(var a=0;a<this.Db.length;a++)this.Db[a].W()};r.dj=function(){this.K.readyState==4&&(this.K.status==404?this.lc&&this.lc(this.id):this.wc(Ac(this.K.responseText)))};
r.wc=function(a){if(a.Type=="pointcloud")this.options=a,this.Qd=T(Za,this,this.options),a=Rf(this),this.cb=a.Wd(this.Qd.pc);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=T(Ma,this,this.options);this.Db.push(c);this.lf.push(c.He)}this.cd&&this.cd(this.id);a=Rf(this);this.cb=a.Wd(this.lf)}};function Qf(a,b){b==i?alert("invalid json-url"):(a.jd=b,a.K=new window.XMLHttpRequest,a.K.open("GET",a.jd,!0),a.K.onreadystatechange=function(){a.dj()},a.K.send())};function Sf(a){this.c=a;this.aa=[];this.Ld=new Pe;this.Sp=1E5*H*1E5*H}
Sf.prototype.Sa=function(a,b){this.Ld.sh(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.aa.length;f++)if(this.aa[f]instanceof Qc){var g=this.aa[f];g.C||g.ba()}else if(this.aa[f]instanceof Tf)g=this.aa[f],g.C||g.ba();else for(var g=this.aa[f],j=0;j<g.length;j++)for(var k=g[j],l=0;l<k.length;l++){var m=k[l];if(!m.C){var p=m.N[0]-c,o=m.N[1]-d,s=m.N[2]-e,p=p*p+o*o+s*s,o=m.$m*m.$m;this.Ld.rh(m.N[0],m.N[1],m.N[2],m.da[0],m.da[1],m.da[2])&&!(p>o)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),
this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),m.ba(),this.c.b.disable(this.c.b.BLEND))}}};Sf.prototype.Wd=function(a){this.aa.push(a);return this.aa.length-1};Sf.prototype.Wi=function(a){this.aa.splice(a,1)};
Sf.prototype.ae=function(a,b){for(var c=this.c.Yd(a,b,this.c.ga,!0),d=1E4,e=i,f=0;f<this.aa.length;f++)for(var g=this.aa[f],j=0;j<g.length;j++)for(var k=g[j],l=0;l<k.length;l++){var m=k[l];if(!m.C){m.kl(c.x,c.y,c.j,c.dd,c.ed,c.fd);var p=m.Bd(c.x,c.y,c.j,c.dd,c.ed,c.fd);if(p&&p.v<d)d=p.v,e=m}}if(e)return e.yo;return-1};function Uf(){this.Ma=i;this.jb=new J;this.nk=this.mj=this.Ch=this.Qh=this.ci=i;this.oj=!0;this.g=i;this.kk=0;this.Sc=n();this.Tc=function(){if(this.oj){var a=this.g;this.c.be.push(a);a.Vf();a=this.c.b;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.enable(a.DEPTH_TEST);a.disable(a.CULL_FACE)}this.Ma.Sa(this.jb,this.c.ga);this.nk.Sa(this.jb,this.c.ga);this.ci.Sa(this.jb,this.c.ga);this.Qh.Sa(this.jb,this.c.ga);this.Ch.Sa(this.jb,this.c.ga);this.mj.Sa(this.jb,
this.c.ga);if(this.oj){Me(this.c);var a=this.g.width/(this.g.width+10),b=this.g.height/(this.g.height+10);this.kk==0?(this.g.w(10,10,0,0,a,b,!0,!0,1),this.g.w(0,0,0,0,1,1,!0,!0,1)):this.kk==1?(this.g.w(10,this.g.height/2+5,0,0,a,b/2,!0,!0,1),this.g.w(0,this.g.height/2,0,0,1,0.5,!0,!0,1)):this.kk==2&&(this.g.w(10,5,0,0,a,b/2,!0,!0,1),this.g.w(0,0,0,0,1,0.5,!0,!0,1))}};this.Uc=function(a){a=a.Zd();this.jb.u(a.x,a.y,a.j)};this.Qe=function(){this.Ma=new Jf(this.c);this.nk=new Of(this.c);this.ci=new Oe(this.c);
this.Qh=new Sf(this.c);this.Ch=new Qe(this.c);this.mj=new Ne(this.c)};this.Pe=function(){this.Ma.k();this.Ma=i};this.Mk=function(a,b){if(this.oj)this.g==i?this.g=new M(this.c,!0,a,b,!0):Oc(this.g,a,b,!0)};this.Re=n()}Uf.prototype=new qe;function Vf(a){xd.call(this);this.ho=a;this.Ul=S(this.ho,ad?"DOMMouseScroll":"mousewheel",this)}za(Vf,se);var Wf="mousewheel";
Vf.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.gd;if(a.type=="mousewheel"){c=1;if($c||bd&&(ed||nd("532.0")))c=40;d=bd&&Vc&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;v(a.wheelDeltaX)?(b=bd&&Vc&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=bd&&Vc&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),v(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;typeof this.Yl=="number"&&(b=Math.min(Math.max(b,-this.Yl),this.Yl));typeof this.Zl==
"number"&&(c=Math.min(Math.max(c,-this.Zl),this.Zl));b=new Xf(d,a,b,c);try{this.dispatchEvent(b)}finally{b.hg()}};Vf.prototype.Ec=function(){Vf.Ge.Ec.call(this);ee(this.Ul);delete this.Ul};function Xf(a,b,c,d){b&&this.Gc(b,h);this.type=Wf;this.detail=a;this.yp=c;this.Jh=d}za(Xf,Cd);function Yf(){this.ao=this.Qj=0;this.eb=new K;this.Yf=new J;this.Yf.u(1,0,0);this.ca=0;this.ja=-0.03;this.jc=0;this.Z=7.616;this.T=45.9088;this.G=17E3;this.Ze=this.Ye=this.Gn=this.xh=this.yh=0;this.fp=!1;this.Fn=this.Hn=0;this.ej=this.Cn=this.Xf=this.pl=this.ol=this.Yc=1;this.In=this.Jn=this.Bc=this.Cc=0;this.An=!1;this.bp=0.0010;this.hp=-0.4;this.de=!1;this.bb=this.ab=this.Bn=0;this.nl=!1;this.$e=new J;this.lj=this.kj=0;this.uh=this.ce=!1;this.$=Array(3);this.ye=new O(0,0,0);this.kf=new K;this.wg=
new K;this.ug=new K;this.se=new K;this.eb=new K;this.nd=new K;this.vg=new K;this.se.Wg();this.Jc=100;this.pb=i;this.Oi=ca("uh");this.Sc=function(){this.c.Zi(this.eb)};this.Tc=n();this.Uc=function(a){a.Kc=0;this.ye.u(this.Z,this.T,this.G);this.ye.ia(this.$);this.Yf.u(this.$[0],this.$[1],this.$[2]);this.wg.Xc(this.$[0],this.$[1],this.$[2]);this.ug.Xd(this.Z,this.T);this.kf.Ei(this.ca,this.ja,this.jc);this.nd.V(this.wg,this.ug);this.vg.V(this.nd,this.kf);this.nd.V(this.vg,this.se);this.eb.Ne(this.nd);
a.Al=this.ca;a.sa(this.$[0],this.$[1],this.$[2]);var b=this.T,c=this.G;a.Ub.longitude=this.Z;a.Ub.latitude=b;a.Ub.elevation=c;if(this.pb)this.pb.Ic=this.Z,this.pb.Hc=this.T,this.pb.Fc=this.G,this.pb.pitch=this.ja*57.29577951308232,this.pb.Ha=this.ca*57.29577951308232,this.pb.ac=this.jc*57.29577951308232};this.Qe=n();this.Pe=n();this.Re=function(a){S(window,td,this.Qi,!1,this);S(window,ud,this.Ri,!1,this);S(a,qd,this.Kf,!1,this);S(a,rd,this.Mf,!1,this);S(a,sd,this.Lf,!1,this);a=new Vf(a);S(a,Wf,this.Ti,
!1,this)};this.Ti=function(a){a.Jh>0?this.Bc>0?this.Cc=this.Bc=0:this.Cc+=0.05:this.Cc>0?this.Bc=this.Cc=0:this.Bc+=0.05};this.Qi=function(a){if(a.keyCode==81)this.Ze=this.Yc*this.ej;else if(a.keyCode==65)this.Ze=-this.Yc*this.ej;else if(a.keyCode==83)this.Ye=0.5*this.Xf;else if(a.keyCode==88)this.Ye=-0.5*this.Xf;this.Qj=a.keyCode};this.Ri=function(a){if(a.keyCode==81)this.Ze=0;else if(a.keyCode==65)this.Ze=0;else if(a.keyCode==83)this.Ye=0;else if(a.keyCode==88)this.Ye=0;this.Qj=0};this.Kf=function(a){if(Hd(a,
Dd))this.fj=0,this.$e.u(0,0,0),this.kj=a.offsetX,this.lj=a.offsetY,this.nl=this.ce=!0;this.ab=a.offsetX;this.bb=a.offsetY;if(Hd(a,Ed))return!1};this.Mf=function(a){if(Hd(a,Dd))this.ce=this.nl=!1;this.ab=a.offsetX;this.bb=a.offsetY;this.yh=this.xh=this.fj=0;if(Hd(a,Ed))return!1};this.Lf=function(a){this.ab=a.offsetX;this.bb=a.offsetY;if(this.ce){var b=(this.kj-a.offsetX)/this.c.width,c=(this.lj-a.offsetY)/this.c.height;b*=b;c*=c;this.fj=Math.sqrt(b+c);this.$e.u(a.offsetX-this.kj,this.c.height-1-a.offsetY-
(this.c.height-1-this.lj),0);this.$e.gc();var a=this.$e.a[0],d=this.$e.a[1],e=0,f=0;a>0?e=1:a<0&&(e=-1);d>0?f=1:d<0&&(f=-1);this.xh=this.Yc*this.ol*c*f;this.yh=this.pl*b*e}};this.Se=function(a){var b=this.Ye*a/500,c=this.yh*a/500,d=this.Ze*a,e=0,e=0,f=this.G/5E5*(this.G/5E5);f>10?f=10:f<0.0010&&(f=0.0010);var g=f*this.xh*a/250;if(this.Cc>0){var j=0.5*this.Xf*a/1E3;this.ja+=j;this.Cc-=j;if(this.Cc<0)this.ja+=this.Cc,this.Cc=0;this.de=!0}if(this.Bc>0){j=0.5*this.Xf*a/1E3;this.ja-=j;this.Bc-=j;if(this.Bc<
0)this.ja-=this.Bc,this.Bc=0;this.de=!0}if(b)this.ja+=b,this.de=!0;if(c){this.ca+=c;this.ca>2*Math.PI&&(this.ca-=2*Math.PI);if(this.ca<0)this.ca=2*Math.PI-this.ca;this.de=!0}if(this.de&&(e=this.c.Vg(),isNaN(e)))e=this.Jc;if(d&&(a=1E3*d*f,this.G+=a,e+=a,this.G>7E6))this.G=7E6;if(g){a=this.T*0.017453292519943295;d=Math.sin(a);f=Math.cos(a);c=this.ca;b=this.Z*0.017453292519943295;d=hc/Math.sqrt(1-ic*d*d);f=hc/(d/(1+jc*f*f))*g*Math.cos(c);j=hc/d*g*Math.sin(c)/Math.cos(a);g=hc/d*g*Math.sin(c)*Math.tan(a)+
c;this.Z=57.29577951308232*(j+b);this.T=57.29577951308232*(f+a);for(this.ca=g;this.Z>180;)this.Z-=360;for(;this.Z<-180;)this.Z+=360;for(;this.T>90;)this.T=180-this.T;for(;this.T<-90;)this.T=-180-this.T;this.de=!0}e<this.Jc&&this.de&&(this.G+=this.Jc-e);if(this.pb)this.pb.Ic=this.Z,this.pb.Hc=this.T,this.pb.Fc=this.G,this.pb.pitch=this.ja*57.29577951308232,this.pb.Ha=this.ca*57.29577951308232,this.pb.ac=this.jc*57.29577951308232}}Yf.prototype=new qe;r=Yf.prototype;
r.sa=function(a,b,c){this.Z=a;this.T=b;this.G=c};r.Zd=function(){return{longitude:this.Z,latitude:this.T,elevation:this.G}};r.Te=function(a,b,c){this.ca=a;this.ja=b;this.jc=c};r.mh=n();r.Hf=function(){return{Ha:this.ca,pitch:this.ja,ac:this.jc}};function Zf(){this.ao=this.Qj=0;this.eb=new K;this.uh=this.Dd=!1;this.Yf=new J;this.Yf.u(1,0,0);this.ca=0;this.ja=-1.5707963267948966;this.jc=0;this.Z=7.77442050946391;this.T=47.472720418012834;this.G=75E5;this.Ed=$f;this.hj=this.gj=this.X=0;this.gp=!0;this.Fn=this.Hn=this.Ze=this.Ye=this.Gn=this.xh=this.yh=this.ij=this.jj=0;this.ej=this.Cn=this.Xf=this.pl=this.ol=this.Yc=1;this.In=this.Jn=this.Bc=this.Cc=0;this.An=!1;this.Bn=0;this.kp=new K;this.En=this.Dn=this.bb=this.ab=0;this.$e=new J;this.cj=
this.vh=this.ce=!1;this.ip=this.jp=this.fj=0;this.$=Array(3);this.ye=new O(0,0,0);this.kf=new K;this.wg=new K;this.ug=new K;this.se=new K;this.eb=new K;this.nd=new K;this.vg=new K;this.se.Wg();this.wh=!1;this.tl=this.sl=this.rl=0;this.ql=1;this.Xe=!1;this.cp=this.dp=this.ep=0;this.ib={};this.hb={};this.bj=new K;this.ml=new K;this.th=new K;this.lp=new K;this.mp=new K;this.Jc=50;this.Zh=1E7;this.Ya=rc;this.Fa=0;this.cf=!1;this.mc=[0,0];this.Id=0;this.Bh=this.Dc=!1;this.up=0;this.Oi=function(a){if(!a)this.Dd=
!1;this.uh=a};this.Sc=function(){this.c.Zi(this.eb)};this.Tc=n();this.Uc=function(a){this.G<2E3?(this.c.f.Gb.Yj=1.0E-7,this.c.f.Gb.Bj=1.2):(this.c.f.Gb.Yj=1.0E-5,this.c.f.Gb.Bj=10);this.Ya=a.Ya;this.Fa=a.Fa;a.cf=this.cf;a.mc[0]=this.mc[0];a.mc[1]=this.mc[1];a.Kc=1;this.Dd=this.uh?!0:a.qm!=0?!0:!1;if(this.Ed==ag&&!this.Dd&&!this.c.La.Od){if(this.vh)this.vh=!1,this.Mn(this.ab,this.bb);if(this.ce&&this.cj)this.cj=!1,this.Ln(this.ab,this.bb)}this.ye.u(this.Z,this.T,this.G);this.ye.ia(this.$);this.Yf.u(this.$[0],
this.$[1],this.$[2]);this.wg.Xc(this.$[0],this.$[1],this.$[2]);this.ug.Xd(this.Z,this.T);this.wh?(this.kf.Xg(this.rl,this.sl,this.tl,this.ql),this.se.Fk()):this.kf.Ei(this.ca,this.ja,this.jc);this.nd.V(this.wg,this.ug);this.vg.V(this.nd,this.kf);this.nd.V(this.vg,this.se);this.eb.Ne(this.nd);a.Al=this.ca;a.sa(this.$[0],this.$[1],this.$[2]);var b=this.T,c=this.G;a.Ub.longitude=this.Z;a.Ub.latitude=b;a.Ub.elevation=c};this.Qe=n();this.Pe=n();this.Re=function(a){S(window,td,this.Qi,!1,this);S(window,
ud,this.Ri,!1,this);S(a,qd,this.Kf,!1,this);S(a,sd,this.Lf,!1,this);S(a,rd,this.Mf,!1,this);S(a,pd,this.Si,!1,this);a=new Vf(a);S(a,Wf,this.Ti,!1,this)};this.Wf=function(){var a=$f;(this.X&bg)==cg&&((this.X&dg)==0?a=ag:(this.X&dg)==eg?a=fg:(this.X&dg)==gg&&(a=hg));(this.X&bg)==ig&&(a=hg);if(a!=this.Ed){if(this.Ed==hg)this.ca=this.jj+45*Math.PI*this.Yc*(this.ab-this.gj)/(180*this.c.height),this.ja=this.ij+45*Math.PI*this.Yc*(this.hj-this.bb)/(180*this.c.height);this.Ed=a;if(this.Ed==hg)this.gj=this.ab,
this.hj=this.bb,this.jj=this.ca,this.ij=this.ja}if(this.Ed==hg)this.ca=this.jj+45*Math.PI*this.Yc*(this.ab-this.gj)/(180*this.c.height),this.ja=this.ij+45*Math.PI*this.Yc*(this.hj-this.bb)/(180*this.c.height)};this.Ti=function(a){if(this.Dd||this.c.La.Od)this.Id=0;else{if(this.Ed==$f)if((this.X&dg)==0){var b={},c,d;this.Id>0?(c=this.mc[0],d=this.mc[1]):(c=this.ab,d=this.bb);this.c.$d(c,d,b);if(b.hit){this.mc=[c,d];this.Id=500;this.ye.u(this.Z,this.T,this.G);this.ye.ia(this.$);c=this.$[0]-b.x;d=this.$[1]-
b.y;b=this.$[2]-b.z;a.Jh>0?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,b*=-0.2);var e=new O(0,0,0);e.yc(this.$[0]+c,this.$[1]+d,this.$[2]+b);this.Z=e.F[0];this.T=e.F[1];if(this.Bh){if(e.F[2]>this.G)this.G=e.F[2]}else this.G=e.F[2];this.Dc=!0;if(this.G<this.Jc)this.G=this.Jc,this.Dc=!0;else if(this.G>this.Zh)this.G=this.Zh,this.Dc=!0}}else(this.X&dg)==eg&&(this.ja+=5*a.Jh*Math.PI*this.Yc/180);return this.Ta(a)}};this.Qi=function(a){if(!this.Dd&&!this.c.La.Od){if(a.keyCode==66)this.wh=!1;if(a.keyCode==
16)return this.X|=eg,this.Ta(a);else if(a.keyCode==17)return this.X|=gg,this.Ta(a);else if(a.keyCode==37||a.keyCode==65)return this.X|=jg,this.Ta(a);else if(a.keyCode==38||a.keyCode==87)return this.X|=kg,this.Ta(a);else if(a.keyCode==39||a.keyCode==68)return this.X|=lg,this.Ta(a);else if(a.keyCode==40||a.keyCode==83)return this.X|=mg,this.Ta(a);this.Wf();return!0}};this.Ri=function(a){if(a.keyCode==16)return this.X&=~eg,this.Ta(a);else if(a.keyCode==17)return this.X&=~gg,this.Ta(a);else if(a.keyCode==
37||a.keyCode==65)return this.X&=~jg,this.Ta(a);else if(a.keyCode==38||a.keyCode==87)return this.X&=~kg,this.Ta(a);else if(a.keyCode==39||a.keyCode==68)return this.X&=~lg,this.Ta(a);else if(a.keyCode==40||a.keyCode==83)return this.X&=~mg,this.Ta(a);this.Wf();return!0};this.Si=function(a){if(!this.Dd&&!this.c.La.Od){var b={};this.c.$d(this.ab,this.bb,b);if(b.hit){this.c.lh(2E3);var c=this.G;c>1E6?He(this.c.La,b.lng,b.lat,1E6,h,h,h):c>25E4?He(this.c.La,b.lng,b.lat,25E4,h,h,h):c>5E4?He(this.c.La,b.lng,
b.lat,5E4,h,h,h):(c=b.elv+5E3,He(this.c.La,b.lng,b.lat,c,0,-90,0));this.mc=[this.ab,this.bb];this.Id=2500}return this.Ta(a)}};this.Kf=function(a){if(!this.Dd&&!this.c.La.Od){this.ab=a.offsetX-this.c.R.offsetLeft;this.bb=a.offsetY-this.c.R.offsetTop;if(Hd(a,Dd))this.X|=cg,document.body.style.cursor="move",this.vh=!0;else if(Hd(a,Ed))return!1;else Hd(a,Fd)&&(this.X|=ig);this.Wf();return this.Ta(a)}};this.Mf=function(a){this.ce=!0;this.ab=a.offsetX-this.c.R.offsetLeft;this.bb=a.offsetY-this.c.R.offsetTop;
if(Hd(a,Dd))this.X&=~cg,this.Xe=!1,document.body.style.cursor="default",this.vh=!1;else if(Hd(a,Ed))return!1;else Hd(a,Fd)&&(this.X&=~ig);this.Wf();return this.Ta(a)};this.Lf=function(a){if(!this.Dd&&!this.c.La.Od)return this.ce=this.Ed==ag,this.cj=!0,this.Dn=a.offsetX-this.c.R.offsetLeft-this.ab,this.En=a.offsetY-this.c.R.offsetTop-this.bb,this.ab=a.offsetX-this.c.R.offsetLeft,this.bb=a.offsetY-this.c.R.offsetTop,this.Wf(),this.Ta(a)};this.Se=function(a){if(this.Ya==sc){var b=this.Fa*this.G/5E3;
this.Bh||(this.G-=a*b);if(this.G<this.Jc)this.G=this.Jc;this.Dc=!0}else if(this.Ya==tc){b=this.Fa*this.G/5E3;this.G+=a*b;if(this.G>this.Zh)this.G=this.Zh;this.Dc=!0}else if(this.Ya==vc)this.ca=this.Fa;else if(this.Ya==wc)if(b=Math.sin(this.Fa),this.ja+=a/5E3*-Math.cos(this.Fa),this.ca+=a/5E3*b,this.ja<-Math.PI/2)this.ja=-Math.PI/2;else if(this.ja>0)this.ja=0;if(this.Id>0&&(this.cf=!0,this.Id-=a,this.Id<=0))this.Id=0,this.cf=!1;if((this.X&ng||this.Ya==uc)&&(this.X&dg)==0){b=0;this.X&kg&&(b+=1);this.X&
mg&&(b-=1);var c=0;this.X&jg&&(c-=1);this.X&lg&&(c+=1);var d;d=this.Ya==uc?Math.PI*this.Fa/180:Math.atan2(c,b);b=this.G/5E5;b>10?b=10:b<0.0010&&(b=0.0010);var a=b*a/5E4,b=Math.PI*this.T/180,e=Math.sin(b),c=Math.cos(b),f=this.ca+d;d=Math.PI*this.Z/180;var g=hc/Math.sqrt(1-ic*e*e),e=hc/g*a*Math.sin(f)/Math.cos(b),a=hc/(g/(1+jc*c*c))*a*Math.cos(f)+b;this.Z=180*(e+d)/Math.PI;this.T=180*a/Math.PI}for(;this.Z>180;)this.Z-=180;for(;this.Z<-180;)this.Z+=180;for(;this.T>90;)this.T-=180;for(;this.T<-90;)this.T+=
180;if(this.Dc)if(this.Dc=!1,a=this.c.Yg(this.Z,this.T),a.hasvalue){if(this.G-this.Jc<a.elevation)this.G=a.elevation+this.Jc,this.Dc=!0;this.Bh=!1}else if(this.G<5E3)this.Dc=this.Bh=!0};this.Te=function(a,b,c){this.wh=!1;this.se.Wg();this.ca=a;this.ja=b;this.jc=c};this.mh=function(a,b,c,d){this.wh=!0;this.rl=a;this.sl=b;this.tl=c;this.ql=d;var e=a,a=b,b=e,e=a*b+c*d;if(e>0.499)this.ca=2*Math.atan2(a,d),this.ja=Math.PI/2,this.jc=0;else if(e<-0.499)this.ca=-2*Math.atan2(a,d),this.ja=-Math.PI/2,this.jc=
0;else{var f=c*c;this.ca=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.ja=Math.asin(2*e);this.jc=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.np=function(a,b,c){a.a[0]=b.a[0]*c.a[0]+b.a[1]*c.a[4]+b.a[2]*c.a[8];a.a[1]=b.a[0]*c.a[1]+b.a[1]*c.a[5]+b.a[2]*c.a[9];a.a[2]=b.a[0]*c.a[2]+b.a[1]*c.a[6]+b.a[2]*c.a[10];a.a[4]=b.a[4]*c.a[0]+b.a[5]*c.a[4]+b.a[6]*c.a[8];a.a[5]=b.a[4]*c.a[1]+b.a[5]*c.a[5]+b.a[6]*c.a[9];a.a[6]=b.a[4]*c.a[2]+b.a[5]*c.a[6]+b.a[6]*c.a[10];a.a[8]=b.a[8]*c.a[0]+b.a[9]*c.a[4]+b.a[10]*c.a[8];a.a[9]=
b.a[8]*c.a[1]+b.a[9]*c.a[5]+b.a[10]*c.a[9];a.a[10]=b.a[8]*c.a[2]+b.a[9]*c.a[6]+b.a[10]*c.a[10]};this.Mn=function(a,b){this.bj.Y(this.th);var c={};this.c.hh(a,b,c,!0);c.hit?(this.ib.x=c.x,this.ib.y=c.y,this.ib.j=c.z,this.Xe=!0):this.Xe=!1};this.Ln=function(a,b){if(this.Xe){var c={};this.c.hh(a,b,c,!1);if(c.hit)if(this.hb.x=c.x,this.hb.y=c.y,this.hb.j=c.z,this.Xe=!0,this.hb.x==this.ib.x&&this.hb.y==this.ib.y&&this.hb.j==this.ib.j)this.th.Y(this.bj);else{var d=this.ib.x*this.hb.x+this.ib.y*this.hb.y+
this.ib.j*this.hb.j,c=Math.sqrt((1-d)*0.5),d=Math.sqrt((1+d)*0.5),e={};e.x=this.ib.y*this.hb.j-this.ib.j*this.hb.y;e.y=this.hb.x*this.ib.j-this.ib.x*this.hb.j;e.j=this.ib.x*this.hb.y-this.ib.y*this.hb.x;c/=Math.sqrt(e.x*e.x+e.y*e.y+e.j*e.j);e.x*=c;e.y*=c;e.j*=c;this.ml.Xg(e.x,e.y,e.j,d);this.th.V(this.bj,this.ml);c=[];(new O(this.Z,this.T,this.G)).ia(c);c=this.th.Ia(new J(c[0],c[1],c[2]));d=new O(0,0,0);d.yc(c.a[0],c.a[1],c.a[2]);this.Z=d.F[0];this.T=d.F[1];this.Dc=!0}else this.Xe=!1}};this.Ta=function(a){a=
a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1}}za(Zf,Yf);var cg=1,ig=4,bg=7,jg=16,kg=32,lg=64,mg=128,ng=240,eg=256,gg=512,dg=768,$f=0,ag=1,hg=2,fg=3;function og(){this.oc=new K;this.Yj=1.0E-5;this.Bj=10;this.Kl=45;this.Zo=da("Kl");this.Sc=function(){this.c.gl(this.oc)};this.Tc=n();this.Uc=function(a){this.oc.Vk(this.Kl,this.c.width/this.c.height,this.Yj,this.Bj);a.Oe[a.Oe.length-1].Y(this.oc)};this.Qe=n();this.Pe=n();this.Re=n()}og.prototype=new qe;function pg(a){this.c=a;this.Xj=new Zf;this.Xj.c=a;re(this.Xj);this.wb=this.Xj;this.Gb=new og;this.D=new Uf;this.pd=new te;this.Gb.c=a;re(this.Gb);this.D.c=a;re(this.D);this.pd.c=a;re(this.pd);this.Qc=new qc;this.vb=new K;this.eb=new K;this.po=new K}pg.prototype.Sa=function(){this.wb.Sc();this.wb.Tc();this.Gb.Sc();this.Gb.Tc();this.D.Sc();this.D.Tc();this.pd.Sc();this.pd.Tc()};
pg.prototype.k=function(){if(this.wb)this.wb.xd(),this.wb=i;if(this.Gb)this.Gb.xd(),this.Gb=i;if(this.D)this.D.xd(),this.D=i;if(this.pd)this.pd.xd(),this.pd=i};function qg(a){this.b=a;this.Gc=!1;this.Kj=this.zk=this.Kb=this.Ij=this.xk=this.Zb=this.Hj=this.wk=this.Yb=this.Cj=this.rk=this.Xb=this.Fj=this.uk=this.Jb=this.Jj=this.yk=this.$b=this.Ej=this.tk=this.rc=this.Gj=this.vk=this.qb=this.Dj=this.sk=this.qc=i}function Jc(a,b,c){a.qc&&(a.b.useProgram(a.qc),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.qc,"matMVP"),!1,b.Ja()),a.b.uniform4fv(a.b.getUniformLocation(a.qc,"uColor"),c.Ja()))}
function Kc(a,b){a.rc&&(a.b.useProgram(a.rc),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.rc,"matMVP"),!1,b.Ja()))}
function rg(a){a.Gc=!0;a.sk=sg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.Dj=sg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");if(a.sk&&a.Dj)a.qc=a.b.createProgram(),a.b.attachShader(a.qc,a.sk),a.b.attachShader(a.qc,a.Dj),a.b.bindAttribLocation(a.qc,0,"aPosition"),a.b.linkProgram(a.qc),a.b.getProgramParameter(a.qc,
a.b.LINK_STATUS)||alert("Shader Link: "+a.b.getProgramInfoLog(a.qc));a.vk=sg(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.Gj=sg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");if(a.vk&&a.Gj)a.qb=a.b.createProgram(),a.b.attachShader(a.qb,a.vk),a.b.attachShader(a.qb,a.Gj),a.b.bindAttribLocation(a.qb,0,
"aPosition"),a.b.bindAttribLocation(a.qb,1,"aNormal"),a.b.bindAttribLocation(a.qb,2,"aTexCoord"),a.b.linkProgram(a.qb),a.b.getProgramParameter(a.qb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.qb));a.tk=sg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.Ej=sg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");
if(a.tk&&a.Ej)a.rc=a.b.createProgram(),a.b.attachShader(a.rc,a.tk),a.b.attachShader(a.rc,a.Ej),a.b.bindAttribLocation(a.rc,0,"aPosition"),a.b.bindAttribLocation(a.rc,1,"aColor"),a.b.linkProgram(a.rc),a.b.getProgramParameter(a.rc,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.rc));a.yk=sg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Jj=sg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord);\n}\n\n");if(a.yk&&a.Jj)a.$b=a.b.createProgram(),a.b.attachShader(a.$b,a.yk),a.b.attachShader(a.$b,a.Jj),a.b.bindAttribLocation(a.$b,0,"aPosition"),a.b.bindAttribLocation(a.$b,1,"aTexCoord"),a.b.linkProgram(a.$b),a.b.getProgramParameter(a.$b,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.$b));a.uk=sg(a,
a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.Fj=sg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.uk&&a.Fj)a.Jb=a.b.createProgram(),a.b.attachShader(a.Jb,a.uk),a.b.attachShader(a.Jb,a.Fj),a.b.bindAttribLocation(a.Jb,0,"aPosition"),a.b.bindAttribLocation(a.Jb,1,"aNormal"),a.b.bindAttribLocation(a.Jb,2,"aTexCoord"),a.b.bindAttribLocation(a.Jb,3,"aColor"),a.b.linkProgram(a.Jb),a.b.getProgramParameter(a.Jb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Jb));a.rk=sg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Cj=sg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");if(a.rk&&a.Cj)a.Xb=a.b.createProgram(),a.b.attachShader(a.Xb,a.rk),a.b.attachShader(a.Xb,a.Cj),a.b.bindAttribLocation(a.Xb,0,"aPosition"),a.b.bindAttribLocation(a.Xb,1,"aTexCoord"),a.b.linkProgram(a.Xb),a.b.getProgramParameter(a.Xb,a.b.LINK_STATUS)||alert("font shader: "+
a.b.getProgramInfoLog(a.Xb));a.wk=sg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.Hj=sg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.wk&&a.Hj)a.Yb=a.b.createProgram(),a.b.attachShader(a.Yb,a.wk),a.b.attachShader(a.Yb,a.Hj),a.b.bindAttribLocation(a.Yb,0,"aPosition"),a.b.bindAttribLocation(a.Yb,1,"aTexCoord"),a.b.linkProgram(a.Yb),a.b.getProgramParameter(a.Yb,a.b.LINK_STATUS)||alert("poi shader: "+a.b.getProgramInfoLog(a.Yb));a.xk=sg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.Ij=sg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");if(a.xk&&a.Ij)a.Zb=a.b.createProgram(),a.b.attachShader(a.Zb,a.xk),a.b.attachShader(a.Zb,a.Ij),a.b.bindAttribLocation(a.Zb,0,"aPosition"),a.b.bindAttribLocation(a.Zb,1,"aColor"),a.b.linkProgram(a.Zb),a.b.getProgramParameter(a.Zb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Zb));a.zk=sg(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.Kj=sg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
if(a.zk&&a.Kj)a.Kb=a.b.createProgram(),a.b.attachShader(a.Kb,a.zk),a.b.attachShader(a.Kb,a.Kj),a.b.bindAttribLocation(a.Kb,0,"aPosition"),a.b.bindAttribLocation(a.Kb,1,"aTexCoord"),a.b.linkProgram(a.Kb),a.b.getProgramParameter(a.Kb,a.b.LINK_STATUS)||alert(a.b.getProgramInfoLog(a.Kb))}
function sg(a,b,c){var d=a.b.createShader(b);if(!d)return i;a.b.shaderSource(d,c);a.b.compileShader(d);if(!a.b.getShaderParameter(d,a.b.COMPILE_STATUS))return b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),i;return d};function tg(a){this.c=a;this.ti=[];this.sc=[]}y("TextureManager",tg);tg.prototype.Jk=function(a,b,c,d){var e=this.ti[a];e?(this.sc[a]+=1,b(e)):(e=new M(this.c),N(e,a,b,c,d),this.sc[a]=1,this.ti[a]=e);return e};tg.prototype.CreateTexture=tg.prototype.Jk;tg.prototype.Lk=function(a){this.sc[a]-=1;this.sc[a]==0&&(this.ti[a].k(),delete this.ti[a],delete this.sc[a])};tg.prototype.DestroyTexture=tg.prototype.Lk;var ug=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function vg(a){this.c=a;this.b=a.b;var b=0,c=0;this.Ph=new L(this.c);for(var a=[],d=[],e=0;e<16;e++)for(var f=0;f<16;f++){var b=e*0.0625,g=f*0.0625;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=c*4;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.Ph;if(a.length%5==0)c.p=new Float32Array(a),c.mode="font",c.J=5;Ic(this.Ph,d,"TRIANGLES");a=new M(this.c);N(a,R+"font.png");this.Ph.Qb(a);this.Hp=new K;this.Po=0}
vg.prototype.vd=function(a,b,c,d,e){d==i&&(d=1);this.c.hc();this.c.Yi();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new K,g=0,j=0,k=0;k<a.length;k++)g=a.charCodeAt(k),j+=ug[g]/2*d,f.yd(d,d,1),f.Uk(f,b+j,c,0),this.c.ic(f),this.Ph.ba(!0,6,g*12,e),j+=ug[g]/2*d;this.c.Vc();this.c.b.disable(this.c.b.BLEND);this.Po=b-b};vg.prototype.Ok=function(a){for(var b=0,c=0;c<a.length;c++)b+=ug[a.charCodeAt(c)];return b};
vg.prototype.pn=q(32);y("Font",vg);vg.prototype.DrawText=vg.prototype.vd;vg.prototype.GetStringHeight=vg.prototype.pn;vg.prototype.GetStringWidth=vg.prototype.Ok;function wg(a){this.c=a;this.b=a.b;this.xe=!1;this.ok=this.Ib=this.q=i;this.o=this.l=0}
wg.prototype.Ef=function(a,b){this.Ie=document.createElement("canvas");this.H=this.Ie.getContext("2d");this.Ca=new M(this.c);this.Ca.g=this.b.createTexture();this.text=a;this.H.save();this.H.font=b.fontString;this.H.textAlign="left";this.H.textBaseline="top";this.H.lineWidth=b.lineWidth;this.H.strokeStyle=b.strokeStyle;var c=this.H.measureText(this.text),c=Math.round(c.width);this.H.restore();this.l=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.o=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.dc=lc(this.l);this.cc=lc(this.o);this.Ca.width=this.dc;this.Ca.height=this.cc;this.H.canvas.width=this.dc;this.H.canvas.height=this.cc;this.H.fillStyle=b.backgroundColor;this.H.fillRect(0,0,this.l,this.o);this.H.shadowOffsetX=b.shadowOffsetX;this.H.shadowOffsetY=b.shadowOffsetY;this.H.shadowBlur=b.shadowBlur;this.H.shadowColor=b.shadowColor;this.H.fillStyle=b.fontColor;this.H.font=b.fontString;this.H.textAlign=
"left";this.H.textBaseline="middle";this.H.lineWidth=b.lineWidth;this.H.strokeStyle=b.strokeStyle;this.H.strokeText(a,b.lineWidth,this.o/2);this.H.fillText(a,b.lineWidth,this.o/2);this.Uf();this.q=new L(this.c);this.q.Qb(this.Ca);c=[];c.push(-this.l/2,this.o/2,0,0,0);c.push(-this.l/2,-this.o/2,0,0,1/this.cc*this.o);c.push(this.l/2,-this.o/2,0,1/this.dc*this.l,1/this.cc*this.o);c.push(this.l/2,this.o/2,0,1/this.dc*this.l,0);Gc(this.q,c);Ic(this.q,[0,1,2,0,2,3],"TRIANGLES");this.q.l=this.l;this.q.o=
this.o;return this.q};
wg.prototype.Cf=function(a,b){this.Ie=document.createElement("canvas");this.H=this.Ie.getContext("2d");this.Ca=new M(this.c);this.Ca.g=this.b.createTexture();xg(this,a,b);this.q=new L(this.c);this.q.Qb(this.Ca);var c=[];c.push(-this.l/2,this.o/2,0,0,0);c.push(-this.l/2,-this.o/2,0,0,1/this.cc*this.o);c.push(this.l/2,-this.o/2,0,1/this.dc*this.l,1/this.cc*this.o);c.push(this.l/2,this.o/2,0,1/this.dc*this.l,0);Gc(this.q,c);Ic(this.q,[0,1,2,0,2,3],"TRIANGLES");this.q.N=[-this.l/2,-this.o/2,0];this.q.da=
[this.l/2,this.o/2,0];this.q.l=this.l;this.q.o=this.o;return this.q};
function xg(a,b,c){a.l=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.o=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.dc=lc(a.l);a.cc=lc(a.o);a.Ca.width=a.dc;a.Ca.height=a.cc;a.H.canvas.width=a.dc;a.H.canvas.height=a.cc;a.H.fillStyle=c.backgroundColor;a.H.fillRect(0,0,a.l,a.o);a.H.shadowOffsetX=c.shadowOffsetX;a.H.shadowOffsetY=c.shadowOffsetY;a.H.shadowBlur=c.shadowBlur;a.H.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.H.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.Uf()};d.src=b}
wg.prototype.Uf=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Ca.g);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.Ie);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,i);this.Ca.tb=!0};wg.prototype.k=function(){if(this.q)this.q.k(),this.q=i;if(this.Ib)this.Ib.k(),this.Ib=i;if(this.ok)this.ok.k(),this.ok=i;if(this.Ca)this.Ca.k(),this.Ca=i;if(this.Ie)document.removeChild(this.Ie),this.Ie=i};function yg(a){this.c=a;this.b=a.b;this.Fc=this.Ic=this.Hc=0;this.Np=i;this.xe=!1;this.Aa=this.ta=this.Ib=i;this.scale=20;this.text=this.gf="";this.cg=new wg(a);this.Ag=this.Dg=0;this.xm=this.ym=1;this.wm=0;this.vm=1;this.qk=0;this.pk=Infinity;this.bk=new zc(1,1,1,1);this.Uh={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.Ig={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",
fontColor:"rgba(255,255,255,1.0)",lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"}}r=yg.prototype;r.wn=function(a,b,c,d){this.gf=c?c:"";if(b)this.Ig=b;this.text=a;if(d)this.Uh=d;if(c)this.ta=this.cg.Cf(this.gf,this.Uh);this.cg=new wg(this.c);if(a)this.Aa=this.cg.Ef(a,this.Ig)};
r.sa=function(a,b,c,d){if(this.ta&&this.Aa)this.Dg=this.ta.l+this.Aa.l,this.Ag=this.ta.o;else if(this.ta)this.Dg=this.ta.l,this.Ag=this.ta.o;else if(this.Aa)this.Dg=this.Aa.l,this.Ag=this.Aa.o;this.ta&&this.ta.Rf(a,b,c,-(this.ta.l/2+(this.Dg/2-this.ta.l))*H*this.scale,this.Ag/2*H*this.scale,0);this.Aa&&this.Aa.Rf(a,b,c,(this.Aa.l/2+(this.Dg/2-this.Aa.l))*H*this.scale,this.Ag/2*H*this.scale,0);this.ze=a;this.Ae=b;this.Be=c;if(d!=i){this.xe=!0;var d=this.cg,e=this.ym,f=this.xm,g=this.wm,j=this.vm;d.Ib=
new L(d.c);var k=[];k.push(a,b,c,e,f,g,j);k.push(0,0,0,e,f,g,j);Dc(d.Ib,k);Ic(d.Ib,[0,1],"LINES");this.Ib=d.Ib}};r.ba=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.xe&&this.Ib.ba();this.ta&&Nc(this.ta);this.Aa&&Nc(this.Aa);this.c.hc();var a=new K;a.yd(H*this.scale,H*this.scale,1);this.c.ic(a);this.ta&&this.ta.ba(!1,0,0,i,this.bk);this.Aa&&this.Aa.ba(!1,0,0,i,this.bk);this.c.Vc();this.c.b.disable(this.c.b.BLEND)};
r.ph=function(a){this.scale=a;this.xe?this.sa(this.ze,this.Ae,this.Be,0):this.sa(this.ze,this.Ae,this.Be,i)};r.Nf=function(a,b){var c=!1,d=!1;if(this.ta)var e=this.c.Yd(a,b,this.c.ga,!0),c=this.ta.Bd(e.x,e.y,e.j,e.dd,e.ed,e.fd);this.Aa&&(e=this.c.Yd(a,b,this.c.ga,!0),d=this.Aa.Bd(e.x,e.y,e.j,e.dd,e.ed,e.fd));return c||d};r.k=function(){this.cg=i;this.Fc=this.Ic=this.Hc=0;this.ta&&this.ta.k();this.Aa&&this.Aa.k();this.Ib&&this.Ib.k();this.xe=!1;this.Ib=i;this.scale=0};y("Poi",yg);
yg.prototype.Draw=yg.prototype.ba;yg.prototype.SetContent=yg.prototype.wn;yg.prototype.SetPosition=yg.prototype.sa;yg.prototype.SetSize=yg.prototype.ph;yg.prototype.Destroy=yg.prototype.k;function zg(a){this.c=a;this.Bg=[];this.sc=[];this.af=i;this.Cg=[];this.Fg=[]}r=zg.prototype;r.Ik=function(a,b,c,d){var e=new yg(this.c);if(b)e.Ig=b;e.text=a;if(d)e.Uh=d;if(c)e.gf=c,e.ta=this.Cf(c,e.Uh);if(a)e.Aa=this.Ef(a,e.Ig);return e};r.Kk=function(a){a.ta&&Ag(this,a.gf);a.Aa&&Bg(this,a.text,a.Ig)};r.Cf=function(a,b){var c=this.Bg[a];if(c){this.sc[a]+=1;var d=new L(this.c);d.Y(c);d.l=c.l;d.o=c.o;this.Bg[a]=d}else this.af=new wg(this.c),d=this.af.Cf(a,b),this.sc[a]=1,this.Bg[a]=d,this.af=i;return d};
function Ag(a,b){a.sc[b]-=1;a.sc[b]==0&&(a.Bg[b].g.k(),delete a.Bg[b],delete a.sc[b])}r.Ef=function(a,b){var c=this.Cg[a+b.id];if(c){this.Fg[a+b.id]+=1;var d=new L(this.c);d.Y(c);d.l=c.l;d.o=c.o;this.Cg[a+b.id]=d}else this.af=new wg(this.c),d=this.af.Ef(a,b),this.Fg[a+b.id]=1,this.Cg[a+b.id]=d,this.af=i;return d};function Bg(a,b,c){a.Fg[b+c.id]-=1;a.Fg[b+c.id]==0&&(a.Cg[b+c.id].g.k(),delete a.Cg[b+c.id],delete a.Fg[b+c.id])}
r.Gk=function(a,b,c){a.ta=this.Cf(b,c);a.sa(a.ze,a.Ae,a.Be,i);Ag(this,a.gf);a.gf=b};r.Hk=function(a,b,c){a.Aa=this.Ef(b,c);a.sa(a.ze,a.Ae,a.Be,i);Bg(this,a.text,c);a.text=b};y("PoiManager",zg);zg.prototype.CreatePoi=zg.prototype.Ik;zg.prototype.DestroyPoi=zg.prototype.Kk;zg.prototype.ChangePoiIcon=zg.prototype.Gk;zg.prototype.ChangePoiText=zg.prototype.Hk;var Cg=new Date,Dg=new Date,Eg=[],Fg=0,Gg=i,Hg=i;function Ig(){for(var a=0;a<Eg.length;a++){var b=Eg[a];if(b.vl)b.Ak>0&&b.Nj>0?(b.R.width=window.innerWidth-b.Ak,b.R.height=window.innerHeight-b.Nj):(b.R.width=window.innerWidth,b.R.height=window.innerHeight);Jg(b,b.R.width,b.R.height)}}
function $(){this.bd=this.Tn=this.Sn=this.ad=this.Vn=this.Wn=this.Un=this.Gd=this.Hd=this.Fd=i;this.Gc=!1;this.vp="";this.height=this.width=0;this.vl=!1;this.Oa=this.R=this.b=i;this.sj=0.670588;this.rj=0.921569;this.pj=this.qj=1;this.an=this.bn=this.dn=this.cn=0;this.Ug=this.Tg=20;this.vb=new K;this.eb=new K;this.oc=new K;this.tg=new K;this.ga=new K;this.Sj=new K;this.be=[];this.We=new qc;this.Ym=[];this.Zm=[];Eg[Fg]=this;Fg++;this.Zj=this.f=this.vf=i;this.Vd=1;this.La=this.si=this.sf=i;this.Nj=this.Ak=
0}
function Kg(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),i;var c=Lg(a);c===i&&b('It doesn\'t appear your browser supports WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>');return c}
function Lg(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=i,d=0;d<b.length;++d){try{c=a.getContext(b[d],{sp:!1})}catch(e){}if(c)break}return c}r=$.prototype;
r.Pk=function(a,b){var c=document.getElementById(a);if(this.b=Kg(c)){this.R=c;if(b)this.Ug=this.Tg=0,c.width=window.innerWidth-this.Tg,c.height=window.innerHeight-this.Ug,this.vl=!0;for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}this.b?(Jg(this,this.R.width,this.R.height),this.b.clearColor(0,0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.Oa=new qg(this.b),rg(this.Oa),
this.vf=new vg(this),this.Zj=new M(this),N(this.Zj,R+"nodata.png"),this.sf=new zg(this),this.si=new tg(this),this.La=new Mg(this),this.Fd&&this.Fd(this),S(window,"resize",Ig,!1,this),Dg=new Date,typeof window!="undefined"&&window.Em(Ng,this.R),this.R.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1},S(window,"unload",this.xd,!1,this)):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
r.xd=function(){this.bd=this.Tn=this.Sn=this.ad=this.Vn=this.Wn=this.Un=this.Gd=this.Hd=this.Fd=i;if(this.f)this.f.k(),this.f=i;this.Oa=this.R=this.b=i;this.Ym=[];this.Zm=[];this.si=this.sf=this.f=this.vf=i;S(window,"resize",i,!1,this)};r.Zk=function(a,b,c,d){if(a>=0&&a<=1&&b>=0&&b<=1&&c>=0&&c<=1&&d>=0&&d<=1)this.sj=a,this.rj=b,this.qj=c,this.pj=d};r.on=function(){return{Kp:this.sj,zp:this.rj,tp:this.qj,op:this.pj}};
r.Fi=function(){var a=this.b;a.clearColor(this.sj,this.rj,this.qj,this.pj);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)};r.jl=function(a,b,c,d){this.cn=a;this.dn=b;this.bn=c;this.an=d;this.b.viewport(a,b,c,d)};r.qn=function(){return{x:this.cn,y:this.dn,Tp:this.bn,Ap:this.an}};r.gl=function(a){this.oc.Y(a);Og(this)};r.Zi=function(a){this.eb.Y(a);Og(this)};r.ic=function(a){this.vb.Y(a);Og(this)};function Og(a){a.tg.V(a.eb,a.vb);a.ga.V(a.oc,a.tg);a.Sj.Ne(a.tg);a.Sj.Ve()}
r.sn=function(a){var b=new M(this);N(b,a);this.Zm.push(b);return b};r.rn=function(a){var b=new L(this);Lc(b,a);this.Ym.push(b);return b};r.hc=function(){var a=this.We,b=this.eb,c=new K;c.Y(b);a.bh.push(c);a=this.We;b=this.vb;c=new K;c.Y(b);a.ah.push(c);a=this.We;b=this.oc;c=new K;c.Y(b);a.Oe.push(c)};r.Vc=function(){this.vb.Y(this.We.ah.pop());this.eb.Y(this.We.bh.pop());this.oc.Y(this.We.Oe.pop());Og(this)};
r.Yi=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.vb.$g();this.eb.$g();this.oc.Tk(0,b,0,a);Og(this)};r.Df=function(){this.Vd==0?F(G("owg.engine3d"),"** WARNING: not implemented"):this.Vd==1?(this.f=new pg(this),this.f.D.Mk(this.width,this.height)):this.Vd==2?F(G("owg.engine3d"),"** WARNING: not implemented"):this.Vd==3&&F(G("owg.engine3d"),"** WARNING: not implemented")};r.vd=function(a,b,c,d,e){this.vf&&this.vf.vd(a,b,c,d,e)};
r.Ii=function(a){var b=Array(2);b[0]=0;b[1]=0;this.vf&&(b[0]=this.vf.Ok(a),b[1]=32);return b};r.Yd=function(a,b,c,d){var e=new K;e.Ne(c);var f=this.height-b-1,b=(a-0)*2/this.width-1,c=(f-0)*2/this.height-1,a=(a-0)*2/this.width-1,f=(f-0)*2/this.height-1,g=new J;g.u(b,c,-1);b=e.Ia(g);c=new J;c.u(a,f,1);c=e.Ia(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.j=d[2];b.dd=e;b.ed=a;b.fd=c;return b};
if(typeof window!="undefined")window.Em=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)};
function Ng(){Cg=new Date;var a=Cg.valueOf()-Dg.valueOf();Dg=Cg;for(var b=0;b<Eg.length;b++){var c=Eg[b];if(c.f){var d=c.f,e=a;d.wb.Se(e);d.Gb.Se(e);d.D.Se(e);d.pd.Se(e)}c.Hd&&c.Hd(a,c);c.jl(0,0,c.width,c.height);c.Fi();if(c.f){var d=c.f,e=d.Qc,f=d.vb,g=new K;g.Y(f);e.ah.push(g);e=d.Qc;f=d.eb;g=new K;g.Y(f);e.bh.push(g);e=d.Qc;f=d.po;g=new K;g.Y(f);e.Oe.push(g);d.wb.Uc(d.Qc);d.Gb.Uc(d.Qc);d.D.Uc(d.Qc);d.pd.Uc(d.Qc);d.Qc.ah.pop();d.Qc.bh.pop();d.Qc.Oe.pop();c.f.Sa()}c.Gd&&c.Gd(c);typeof window!="undefined"&&
window.Em(Ng,c.R)}}function Jg(a,b,c){a.width=b;a.height=c;a.bd&&a.bd(b,c,a);a.f&&a.f.D.Mk(b,c)}r=$.prototype;r.$k=ca("Fd");r.qh=ca("Hd");r.hl=ca("Gd");r.cl=function(a){if(this.ie)ee(this.ie),this.ie=i;if(a)this.ie=S(this.R,qd,function(b){a(b.button,b.clientX-this.Tg/2,b.clientY-this.Ug/2,this)},!1,this)};r.el=function(a){if(this.ke)ee(this.ke),this.ke=i;if(a)this.ke=S(this.R,rd,function(b){a(b.button,b.clientX-this.Tg/2,b.clientY-this.Ug/2,this)},!1,this)};
r.dl=function(a){if(this.je)ee(this.je),this.je=i;if(a)this.je=S(this.R,sd,function(b){a(b.clientX-this.Tg/2,b.clientY-this.Ug/2,this)},!1,this)};r.fl=function(a){if(this.ad)ee(this.ad),this.ad=i;if(a){var b=new Vf(this.R);this.ad=S(b,sd,function(b){b.preventDefault();a(b.Jh,this)},!1,this)}};r.il=ca("bd");r.al=function(a){Gg&&(ee(Gg),Gg=i);a&&(Gg=S(window,td,function(b){a(b.keyCode,this)},!1,this))};r.bl=function(a){Hg&&(ee(Hg),Hg=i);a&&(Hg=S(window,ud,function(b){a(b.keyCode,this)},!1,this))};
r.$d=function(a,b,c){this.f&&this.f.D.Ma.$d(a,b,c)};r.hh=function(a,b,c,d){this.f&&this.f.D.Ma.hh(a,b,c,d)};r.Pf=function(a,b){if(this.f)return this.f.D.ci.Pf(a,b);return i};r.ae=function(a,b){if(this.f)return this.f.D.Qh.ae(a,b);return-1};r.Of=function(a,b){if(this.f)return this.f.D.Ch.Of(a,b);return-1};r.Vg=function(){if(this.f)return this.f.D.Ma.Vg();return 0};r.gn=function(){if(this.f)return this.f.wb.Zd().elevation;return 0};
r.Yg=function(a,b){if(this.f)return this.f.D.Ma.Yg(a,b);return{hasvalue:!1,elevation:0,lod:-1}};r.Hi=function(a,b,c,d,e,f,g){this.La.Hi(a,b,c,d,e,f,g)};r.lh=function(a){this.La.lh(a)};r.Tf=function(){this.La.Tf()};function Me(a){if(a.be.length<1)Pg("Fatal error with render target stack. PushRenderTarget/PopRenderTarget do not correspond.");else{var b=a.be.pop(),c=a.be.length;c>0?a.be[c-1].Vf():b.ll()}}y("engine3d",$);$.prototype.AltitudeAboveEllipsoid=$.prototype.gn;
$.prototype.AltitudeAboveGround=$.prototype.Vg;$.prototype.Clear=$.prototype.Fi;$.prototype.CreateScene=$.prototype.Df;$.prototype.DrawText=$.prototype.vd;$.prototype.GetClearColor=$.prototype.on;$.prototype.GetDirectionMousePos=$.prototype.Yd;$.prototype.GetViewport=$.prototype.qn;$.prototype.InitEngine=$.prototype.Pk;$.prototype.LoadMesh=$.prototype.rn;$.prototype.LoadTexture=$.prototype.sn;$.prototype.PickGlobe=$.prototype.$d;$.prototype.PopMatrices=$.prototype.Vc;$.prototype.PushMatrices=$.prototype.hc;
$.prototype.SetClearColor=$.prototype.Zk;$.prototype.SetInitCallback=$.prototype.$k;$.prototype.SetKeyDownCallback=$.prototype.al;$.prototype.SetKeyUpCallback=$.prototype.bl;$.prototype.SetModelMatrix=$.prototype.ic;$.prototype.SetMouseDownCallback=$.prototype.cl;$.prototype.SetMouseMoveCallback=$.prototype.dl;$.prototype.SetMouseUpCallback=$.prototype.el;$.prototype.SetMouseWheelCallback=$.prototype.fl;$.prototype.SetOrtho2D=$.prototype.Yi;$.prototype.SetProjectionMatrix=$.prototype.gl;
$.prototype.SetRenderCallback=$.prototype.hl;$.prototype.SetResizeCallback=$.prototype.il;$.prototype.SetTimerCallback=$.prototype.qh;$.prototype.SetViewMatrix=$.prototype.Zi;$.prototype.SetViewport=$.prototype.jl;$.prototype.GetElevationAt=$.prototype.Yg;$.prototype.OnDestroy=$.prototype.xd;function Qg(a){a=a.yb;a.Fd&&a.Fd(a.id)}function Rg(a,b){var c=b.yb;c.Hd&&c.Hd(c.id,a)}function Sg(a){a=a.yb;a.Gd&&a.Gd(a.id)}function Tg(a,b,c,d){d=d.yb;d.ie&&d.ie(d.id,a,b,c)}function Ug(a,b,c,d){a=d.yb;a.ke&&a.ke(a.id)}function Vg(a,b,c){c=c.yb;c.je&&c.je(c.id,a,b)}function Wg(a,b){var c=b.yb;c.ad&&c.ad(c.id,a)}function Xg(a,b,c){c=c.yb;c.bd&&c.bd(c.id,a,b)}function Yg(a,b){var c=b.yb;c.tj&&c.tj(c.id,a)}function Zg(a,b){var c=b.yb;c.uj&&c.uj(c.id,a)}
function $g(a){var b=a.yb;b.ge&&b.ge(a.yb.id)}function ah(a){var b=a.yb;b.he&&b.he(a.yb.id)}function bh(){this.name="ogContext";this.type=z;this.Ll=!1;this.f=this.c=i;this.fontcolor=new zc(1,1,1,1);this.wo=1;this.he=this.ge=this.Rn=this.Fd=this.Qn=this.Pn=this.xp=this.Hd=this.Gd=this.bd=this.uj=this.tj=this.je=this.ad=this.ke=this.ie=i}bh.prototype=new D;
bh.prototype.wa=function(a){this.Fd=a.cbfInit;this.Rn=a.cbfExit;this.bd=a.cbfResize;if(a.fullscreen)this.Ll=!0;this.c=new $;this.c.yb=this;a.canvas?this.c.Pk(a.canvas,this.Ll):F(G("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.$k(Qg);this.c.qh(Rg);this.c.hl(Sg);this.c.cl(Tg);this.c.el(Ug);this.c.dl(Vg);this.c.fl(Wg);this.c.il(Xg);this.c.al(Yg);this.c.bl(Zg);this.c.La.ge=$g;this.c.La.he=ah};bh.prototype.vd=function(a,b,c){this.c&&this.c.vd(a,b,c,1,this.fontcolor)};
bh.prototype.Ii=function(a){if(this.c)return this.c.Ii(a);return i};bh.prototype.Ka=function(){this.c.xd();this.c=i};function ch(){this.name="ogWorld";this.type=Aa}ch.prototype=new D;ch.prototype.wa=function(a){if(a==i)F(G("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c;if(a.scenetype==bb){if(b.Vd=1,b.Df(),b.f)b.f.zf=this}else if(a.scenetype==cb){if(b.Vd=2,b.Df(),b.f)b.f.zf=this}else if(a.scenetype==db){if(b.Vd=3,b.Df(),b.f)b.f.zf=this}else if(a.scenetype==eb&&(b.Vd=0,b.Df(),b.f))b.f.zf=this}};
ch.prototype.oh=function(a,b){var c=this.parent.parent.c.f.D.Ma;switch(a){case 0:c.oh(Df);c.Dm=b!=i?b:{};break;case 1:c.oh(Ef),c.Dm=b!=i?b:{}}};function dh(){this.name="ogScene";this.type=B;this.ee=this.zf=i;this.Eh=[];this.uc=bb}dh.prototype=new D;r=dh.prototype;r.wa=function(a){if(a==i)F(G("owg.ogScene"),"** ERROR: no options for scene creation!");else if(a.type)this.uc=a.type};r.Nf=function(a,b){var c={};this.parent.c.$d(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;d[4]=c.x;d[5]=c.y;d[6]=c.z;return d};r.Pf=function(a,b){var c=this.parent.c.Pf(a,b);if(c)return c.zo.id;return-1};
r.ae=function(a,b){return this.parent.c.ae(a,b)};r.Of=function(a,b){return this.parent.c.Of(a,b)};function eh(a,b){var c=C(b);if(c&&c.type==Pa){var d=nc(c);d.sa(c.Ic,c.Hc,c.Fc);d.Te(I(c.Ha),I(c.pitch),I(c.ac));d.pb=c}a.ee=c};function fh(){this.name="ogPOI";this.type=Ua;this.C=!1;this.m=this.qa=i}fh.prototype=new D;
fh.prototype.wa=function(a){var b="",c=40,d=i;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new O(e[0],e[1],e[2])).ia(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);if(a.textstyle)this.Ke=a.textstyle;if(a.iconstyle)this.oe=a.iconstyle;this.qa=this.parent.parent.c.sf.Ik(b,this.Ke,d,this.oe);this.qa.C=!1;if(a.flagpoleColor)b=this.qa,d=a.flagpoleColor,b.ym=d[0],b.xm=d[1],b.wm=d[2],b.vm=d[3];a.flagpole==!0?this.qa.sa(f[0],f[1],f[2],0):this.qa.sa(f[0],f[1],f[2],i);this.qa.ph(c);this.qa.zo=this;(c=
gh(this))&&c.za.push(this.qa);if(a.visibilityRange)c=this.qa,a=a.visibilityRange,c.qk=a[0]*1E3*H,c.pk=a[1]*1E3*H};fh.prototype.Ka=function(){var a=this.parent.parent,b=gh(this);if(b)for(var c=this.qa,d=0;d<b.za.length;d++)if(b.za[d]==c){b.za.splice(d,1);break}a.c.sf.Kk(this.qa)};fh.prototype.U=function(){this.C=!0;this.qa.C=!0};fh.prototype.W=function(){this.C=!1;this.qa.C=!1};function gh(a){var b=i,a=a.parent.parent.c;if(a.f&&a.f.D)b=a.f.D.ci;return b};function hh(){this.name="ogPOILayer";this.type=Ea;this.C=!1;this.za=[];this.kd="";this.oe=this.Ke=i;this.eo={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.co={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}
hh.prototype=new D;
function ih(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")"}if(a.fontColor)b=a.fontColor,a.fontColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.strokeColor)b=a.strokeColor,a.strokeStyle="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.shadowColor)b=a.shadowColor,a.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}hh.prototype.wa=function(a){if(a.name)this.kd=a.name;a.textstyle?(ih(a.textstyle),this.Ke=a.textstyle):this.Ke=this.eo;a.iconstyle?(ih(a.iconstyle),this.oe=a.iconstyle):this.oe=this.co};hh.prototype.Ka=function(){for(var a=0;a<this.za.length;a++)E(this.za[a])};hh.prototype.U=function(){this.C=!0;for(var a=0;a<this.za.length;a++)this.za[a].U()};hh.prototype.W=function(){this.C=!1;for(var a=0;a<this.za.length;a++)this.za[a].W()};function jh(){this.name="ogElevationLayer";this.type=Ca;this.rg=-1}jh.prototype=new D;jh.prototype.Zg=function(){var a=i,b=this.parent.parent.parent.c;if(b.f&&b.f.D)a=b.f.D.Ma;return a};jh.prototype.Ci=function(a){var b=this.Zg();if(b)this.rg=b.Ci(a)};jh.prototype.wa=function(a){this.Ci(a)};function Mg(a){this.c=a;this.b=a.b;this.ue=i;this.Rl=this.Od=!1;this.dh=[];this.eh=[];this.fh=[];this.gh=[];this.Tm=2E3;this.mo=new O;this.he=this.ge=i}function kh(a,b,c,d){var e=a.ue.Zd(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.ig=hc*Math.acos(Math.sin(I(f[1]))*Math.sin(I(g[1]))+Math.cos(I(f[1]))*Math.cos(I(g[1]))*Math.cos(I(g[0]-f[0])));if(isNaN(a.ig))a.ig=0;e=[e.longitude,e.latitude,e.elevation+a.ig/4];b=[b,c,d+a.ig/4];a.dh=f;a.eh=e;a.fh=b;a.gh=g;a.Rl=!0}
function He(a,b,c,d,e,f,g){a.ue=a.c.f.wb;var j=a.ue.Hf();a.ik=j.Ha;a.gk=j.pitch;a.hk=j.ac;e!=i&&f!=i&&g!=i?(a.Lm=I(e),a.Jm=I(f),a.Km=I(g)):(a.Lm=a.ik,a.Jm=a.gk,a.Km=a.hk);a.gg=a.Lm-a.ik;Math.abs(a.gg)>Math.PI&&(a.gg>0?a.gg-=2*Math.PI:a.gg+=2*Math.PI);a.eg=a.Jm-a.gk;Math.abs(a.eg)>Math.PI&&(a.eg>0?a.eg-=2*Math.PI:a.eg+=2*Math.PI);a.fg=a.Km-a.hk;Math.abs(a.fg)>Math.PI&&(a.fg>0?a.fg-=2*Math.PI:a.fg+=2*Math.PI);kh(a,b,c,d);a.ge&&a.ge(a.c);a.c.qh(function(b){if(a.Rl){a.bm+=b;b=a.bm/a.Tm;a.v=0.5*Math.sin(Math.PI*
b-Math.PI/2)+0.5;if(b>1)a.v=1,a.Tf();var b=Math.pow(1-a.v,3)*a.dh[0]+3*a.v*Math.pow(1-a.v,2)*a.eh[0]+3*a.v*a.v*(1-a.v)*a.fh[0]+Math.pow(a.v,3)*a.gh[0],c=Math.pow(1-a.v,3)*a.dh[1]+3*a.v*Math.pow(1-a.v,2)*a.eh[1]+3*a.v*a.v*(1-a.v)*a.fh[1]+Math.pow(a.v,3)*a.gh[1],d=Math.pow(1-a.v,3)*a.dh[2]+3*a.v*Math.pow(1-a.v,2)*a.eh[2]+3*a.v*a.v*(1-a.v)*a.fh[2]+Math.pow(a.v,3)*a.gh[2];a.mo.yc(b,c,d);a.ue.sa(b,c,d);a.ue.Te(a.ik+a.v*a.gg,a.gk+a.v*a.eg,a.hk+a.v*a.fg);a.v==1&&a.Tf()}});a.v=0;a.bm=0;a.Od=!0}
Mg.prototype.Tf=function(){this.c.qh(i);this.Od=!1;this.he&&this.he(this.c)};
Mg.prototype.Hi=function(a,b,c,d,e,f,g){this.ue=this.c.f.wb;d*=H;var j=new O(a,b,c),k=[];j.ia(k);var l=new K;l.Xd(a,b);a=new K;a.Xc(k[0],k[1],k[2]);k=new K;k.V(a,l);l={};e!=i&&f!=i&&g!=i?(l.Ha=I(e),l.pitch=I(f),l.ac=I(g)):l=this.ue.Hf();a=l.pitch-Math.PI/2;d=new J(d*Math.sin(a)*Math.cos(l.Ha),d*Math.sin(a)*Math.sin(l.Ha),d*Math.cos(a));d=k.Ia(d).a;j.yc(d[0],d[1],d[2]);d=j.F[1];k=j.F[0];j=j.F[2];j>c?He(this,k,d,j,e,f,g):He(this,k,d,-j,l.Ha,-kc(l.pitch),l.ac)};Mg.prototype.lh=ca("Tm");function Tf(a,b){this.c=a;this.b=a.b;this.ha=this.nb=this.S=this.I=this.p=i;this.od=new K;this.ck=[];this.options=b}
Tf.prototype.nh=function(a){this.ck=a;var b=0,c=[],d=[];if(this.options.segmentation)for(var e=0;e<a.length-1;e++){var f=[];tf(a[e][0],a[e][1],f);f[2]=a[e][2];var g=[];tf(a[e+1][0],a[e+1][1],g);g[2]=a[e+1][2];for(var g=[g[0]-f[0],g[1]-f[1],g[2]-g[2]],j=0;j<this.options.segmentation+1;j++){var k=f[2]+g[2]*j/this.options.segmentation,l=[];uf(f[0]+g[0]*j/this.options.segmentation,f[1]+g[1]*j/this.options.segmentation,l);l[2]=k;k=new O(l[0],l[1],l[2]);l=[];k.ia(l);c.push(l[0]);c.push(l[1]);c.push(l[2]);
c.push(this.options.color[0]);c.push(this.options.color[1]);c.push(this.options.color[2]);c.push(this.options.color[3]);d.push(b);d.push(b+1);b+=1}}else for(e=0;e<a.length;e++)k=new O(a[e][0],a[e][1],a[e][2]),l=[],k.ia(l),c.push(l[0]),c.push(l[1]),c.push(l[2]),c.push(this.options.color[0]),c.push(this.options.color[1]),c.push(this.options.color[2]),c.push(this.options.color[3]),d.push(e),d.push(e+1);d.pop();d.pop();this.$h=e*this.options.segmentation;this.p=new Float32Array(c);this.I=new Uint16Array(d);
this.xb=d.length;this.Cd()};Tf.prototype.k=function(){if(this.S)this.b.deleteBuffer(this.S),this.S=i;if(this.nb)this.b.deleteBuffer(this.nb),this.S=i;this.S=this.qd=i};
Tf.prototype.ba=function(){this.ck!=i&&(this.S||this.Cd(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S),this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.nb),this.b.enableVertexAttribArray(0),this.b.enableVertexAttribArray(1),this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0),this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12),Kc(this.c.Oa,this.c.ga),this.b.lineWidth(this.options.linewidth),this.b.enable(this.b.POLYGON_OFFSET_FILL),this.b.polygonOffset(1,1E3),this.b.drawElements(this.b.LINES,
this.xb,this.b.UNSIGNED_SHORT,0),this.b.disable(this.b.POLYGON_OFFSET_FILL),this.b.disableVertexAttribArray(0),this.b.disableVertexAttribArray(1),this.b.lineWidth(1))};Tf.prototype.Cd=function(){this.S=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.S);this.b.bufferData(this.b.ARRAY_BUFFER,this.p,this.b.STATIC_DRAW);this.nb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.nb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.I,this.b.STATIC_DRAW)};function lh(){this.name="ogEarthPolylineObject";this.type=$a;this.options=this.Kd=i}lh.prototype=new D;r=lh.prototype;r.wa=function(a){this.options=a;this.Kd=new Tf(this.parent.parent.parent.c,a);this.Kd.nh(a.coords)};r.Ka=function(){if(this.Kd)this.Kd.k(),this.Kd=i,this.status=3};r.U=function(){this.Kd.C=!0};r.Ad=n();r.W=function(){this.Kd.C=!1};function mh(a){this.c=a;this.b=a.b;this.Fc=this.Ic=this.Hc=0;this.canvas=i;this.o=this.l=0;this.H=this.q=i;this.tm=-1}r=mh.prototype;
r.Uf=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Ca.g);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,i);this.Ca.tb=!0};r.sa=function(a,b,c){var d=[];(new O(a,b,c)).ia(d);this.q.Rf(d[0],d[1],d[2],0,0,0)};r.ba=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.q&&Nc(this.q);this.c.hc();var a=new K;a.yd(H*this.scale,H*this.scale,1);this.c.ic(a);this.q&&this.q.ba(!1,0,0,i,i);this.c.Vc();this.c.b.disable(this.c.b.BLEND)};
r.ph=ca("scale");r.Nf=function(a,b){if(this.q)var c=this.c.Yd(a,b,this.c.ga,!0),d=this.q.Bd(c.x,c.y,c.j,c.dd,c.ed,c.fd);if(d){var e=c=0,f=d.ec,g=d.Rc,j=1-f-g;d.Um==0?(c=f*-this.l/2+g*this.l/2+j*-this.l/2/(f+g+j)+this.l/2,e=f*this.o/2+g*this.o/2+j*-this.o/2/(f+g+j)+this.o/2):d.Um==1&&(c=f*this.l/2+g*this.l/2+j*-this.l/2/(f+g+j)+this.l/2,e=f*this.o/2+g*-this.o/2+j*-this.o/2/(f+g+j)+this.o/2);c/=this.l;e/=this.o;d={};d.id=this.tm;d.x=c;d.y=e;return d}return i};r.k=function(){this.q&&(this.q.k(),this.Ca.k())};function nh(){this.name="ogBillboard";this.type=Va;this.status=gb;this.m=-1;this.C=!1}nh.prototype=new D;r=nh.prototype;
r.wa=function(a){if(a==i)F(G("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==i)F(G("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=B)F(G("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.Sb=new mh(this.parent.parent.c);this.Sb.tm=this.id;var b=this.Sb,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.H=b.canvas.getContext("2d");b.l=b.H.canvas.width;b.o=b.H.canvas.height;
break;case "[object HTMLVideoElement]":b.l=c.videoWidth,b.o=c.videoHeight}b.Ca=new M(b.c);b.Ca.g=b.b.createTexture();b.q=new L(b.c);b.q.Qb(b.Ca);b.dc=b.l;b.cc=b.o;c=[];c.push(-b.l/2,b.o/2,0,0,0);c.push(-b.l/2,-b.o/2,0,0,1/b.cc*b.o);c.push(b.l/2,-b.o/2,0,1/b.dc*b.l,1/b.cc*b.o);c.push(b.l/2,b.o/2,0,1/b.dc*b.l,0);Gc(b.q,c);Ic(b.q,[0,1,2,0,2,3],"TRIANGLES");b.q.N=[-b.l/2,-b.o/2,0];b.q.da=[b.l/2,b.o/2,0];b.q.l=b.l;b.q.o=b.o;b.Uf();a=a.position;this.Sb.sa(a[0],a[1],a[2]);oh(this).Bi(this.Sb)}};
r.Ka=function(){if(this.Sb)oh(this).Vi(this.Sb),this.Sb.k(),this.status=3};r.ba=function(){this.Sb.ba()};function oh(a){var b=i,a=a.parent.parent.c;if(a.f&&a.f.D)b=a.f.D.Ch;return b}r.U=function(){this.C=!0;this.Sb.C=!0};r.W=function(){this.C=!1;this.Sb.C=!1};function ph(){this.name="ogMeshObject";this.type=Ma;this.Nb=[];this.He=[]}ph.prototype=new D;r=ph.prototype;r.wa=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=T(Na,this,this.options);this.Nb.push(c);this.He.push(c.q)}};r.Ka=function(){for(var a=0;a<this.Nb.length;a++)E(this.Nb[a]);this.He=this.Nb=i};r.U=function(){for(var a=0;a<this.Nb.length;a++)this.Nb[a].U()};
r.Ad=function(a,b,c,d,e,f){for(var g=0;g<this.Nb.length;g++)this.Nb[g].Ad(a,b,c,d,e,f)};r.Sf=function(a,b,c,d){for(var e=0;e<this.Nb.length;e++)this.Nb[e].Sf(a,b,c,d)};r.W=function(){for(var a=0;a<this.Nb.length;a++)this.Nb[a].W()};function qh(){this.Cm=ya()}var rh=new qh;qh.prototype.set=ca("Cm");qh.prototype.reset=function(){this.set(ya())};qh.prototype.get=da("Cm");function sh(a){this.dk=a||"";this.Oo=rh}sh.prototype.Ko=!0;sh.prototype.Mo=!0;sh.prototype.Lo=!0;sh.prototype.Gm=!1;function th(a){if(a<10)return"0"+a;return String(a)}function uh(a,b){var c=(a.Om-b)/1E3,d=c.toFixed(3),e=0;if(c<1)e=2;else for(;c<100;)e++,c*=10;for(;e-- >0;)d=" "+d;return d}function vh(a){sh.call(this,a)}za(vh,sh);vh.prototype.Gm=!0;function wh(a){this.te=a||100;this.fe=[]}r=wh.prototype;r.xg=0;r.add=function(a){this.fe[this.xg]=a;this.xg=(this.xg+1)%this.te};r.get=function(a){a=xh(this,a);return this.fe[a]};r.set=function(a,b){a=xh(this,a);this.fe[a]=b};r.ne=function(){return this.fe.length};r.clear=function(){this.xg=this.fe.length=0};r.Lj=function(){for(var a=this.ne(),b=[],c=this.ne()-this.ne();c<a;c++)b[c]=this.get(c);return b};r.Rh=function(){for(var a=[],b=this.ne(),c=0;c<b;c++)a[c]=c;return a};
function xh(a,b){b>=a.fe.length&&ba(Error("Out of bounds exception"));if(a.fe.length<a.te)return b;return(a.xg+Number(b))%a.te};function yh(a,b){this.Md=a||"";this.dk=b||"";this.rf=[];this.ei=new wh(zh);this.Eo=xa(this.Kn,this);this.lo=new vh(this.dk);this.ko={};if(!0!=this.Pl){this.Pl=!0;fc();var c=ec,d=this.Eo;if(!c.og)c.og=[];c.og.push(d)}this.Lh=Ah(this.Md,"enabled")=="1";u.setInterval(xa(this.Io,this),7500)}var zh=500;r=yh.prototype;r.en="LOGGING";r.io=!1;r.Ra=i;r.Bk=!1;r.Pl=!1;r.wl=i;r.Pj=ya();r.Gc=function(){this.Lh&&Bh(this)};function Ch(a){a.Lh=!0;a.Lh&&(Bh(a),a.Ra&&a.zi());Dh(a,"enabled","1")}
function Eh(a){return!!a.Ra&&!a.Ra.closed}r.Xn=function(){this.ei.clear();Eh(this)&&this.zi()};
r.Kn=function(a){if(!this.ko[a.Wl]){this.io&&a.md>=Wb&&Ch(this);var b=this.lo,c;switch(a.md.value){case Vb.value:c="dbg-sh";break;case Wb.value:c="dbg-sev";break;case Xb.value:c="dbg-w";break;case Yb.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.dk," ");if(b.Ko){var e=new Date(a.Om);d.push("[",th(e.getFullYear()-2E3)+th(e.getMonth()+1)+th(e.getDate())+" "+th(e.getHours())+":"+th(e.getMinutes())+":"+th(e.getSeconds())+"."+th(Math.floor(e.getMilliseconds()/10)),"] ")}b.Mo&&d.push("[",vb(uh(a,
b.Oo.get())),"s] ");b.Lo&&d.push("[",pb(a.Wl),"] ");d.push('<span class="',c,'">',ob(vb(pb(a.cm))));b.Gm&&a.Aj&&d.push("<br>",ob(vb(a.zj||"")));d.push("</span><br>");a=d.join("");this.Lh?(Bh(this),this.ei.add(a),Fh(this,a)):this.ei.add(a)}};function Fh(a,b){a.rf.push(b);u.clearTimeout(a.wl);ya()-a.Pj>750?a.Ck():a.wl=u.setTimeout(xa(a.Ck,a),250)}
r.Ck=function(){this.Pj=ya();if(Eh(this)){var a=this.Ra.document.body,a=a&&a.scrollHeight-(a.scrollTop+a.clientHeight)<=100;this.Ra.document.write(this.rf.join(""));this.rf.length=0;a&&this.Ra.scrollTo(0,1E6)}};function Gh(a){for(var b=a.ei.Lj(),c=0;c<b.length;c++)Fh(a,b[c])}
function Bh(a){if(!Eh(a)&&!a.Bk){var b=Ah(a.Md,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.Bk=!0;a.Ra=window.open("",$c?a.Md.replace(/[\s\-\.\,]/g,"_"):a.Md,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);if(!a.Ra&&!a.No)alert("Logger popup was blocked"),a.No=!0;a.Bk=!1;a.Ra&&a.zi()}}r.Sh=q("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
r.zi=function(){Eh(this)||(this.Ra.document.open(),Fh(this,"<style>"+this.Sh()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.en+"<br><small>Logger: "+this.Md+"</small></div><hr>"),Gh(this))};function Dh(a,b,c){b+=a.Md;document.cookie=b+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(ya()+2592E6)).toUTCString()}
function Ah(a,b,c){var a=b+a,b=String(document.cookie),d=b.indexOf(a+"=");return d!=-1?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,c==-1?b.length:c))):c||""}r.Io=function(){Eh(this)&&Dh(this,"dbg",(this.Ra.screenX||this.Ra.screenLeft||0)+","+(this.Ra.screenY||this.Ra.screenTop||0)+","+(this.Ra.outerWidth||800)+","+(this.Ra.outerHeight||500))};function Hh(a){var b;b=(b=a.className)&&typeof b.split=="function"?b.split(/\s+/):[];var c=Fb(arguments,1),d;d=b;for(var e=0,f=0;f<c.length;f++)Bb(d,c[f])>=0||(d.push(c[f]),e++);d=e==c.length;a.className=b.join(" ");return d};var Ih=!$c||nd("9");!ad&&!$c||$c&&nd("9")||ad&&nd("1.9.1");$c&&nd("9");function Jh(a,b){ib(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in Kh?a.setAttribute(Kh[d],b):a[d]=b})}var Kh={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function Lh(a,b,c){function d(c){c&&b.appendChild(ma(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];la(f)&&!(ra(f)&&f.nodeType>0)?Cb(Mh(f)?Eb(f):f,d):d(f)}}function Mh(a){if(a&&typeof a.length=="number")if(ra(a))return typeof a.item=="function"||typeof a.item=="string";else if(na(a))return typeof a.item=="function";return!1}function Nh(a){this.jg=a||u.document||document}function Oh(a,b){return ma(b)?a.jg.getElementById(b):b}
Nh.prototype.bf=function(){var a=this.jg,b=arguments,c=b[0],d=b[1];if(!Ih&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',pb(d.name),'"');if(d.type){c.push(' type="',pb(d.type),'"');var e={};lb(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)ma(d)?c.className=d:ka(d)?Hh.apply(i,[c].concat(d)):Jh(c,d);b.length>2&&Lh(a,c,b);return c};Nh.prototype.createElement=function(a){return this.jg.createElement(a)};Nh.prototype.createTextNode=function(a){return this.jg.createTextNode(a)};
Nh.prototype.appendChild=function(a,b){a.appendChild(b)};function Ph(a,b){yh.call(this,a,b)}za(Ph,yh);r=Ph.prototype;r.Ck=function(){this.Pj=ya();if(Eh(this)){for(var a=Oh(this.Tb,"log"),b=a.scrollHeight-(a.scrollTop+a.offsetHeight)<=100,c=0;c<this.rf.length;c++){var d=this.Tb.bf("div","logmsg");d.innerHTML=this.rf[c];a.appendChild(d)}this.rf.length=0;this.Fm();if(b)a.scrollTop=a.scrollHeight}};
r.zi=function(){if(Eh(this)){var a=this.Ra.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.Md+"</title><style>"+this.Sh()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.Md+"</b></p><p>"+this.en+'</p><span id="clearbutton">clear</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();($c?a.body:this.Ra).onresize=xa(this.Fm,this);this.Tb=new Nh(a);Oh(this.Tb,"openbutton").onclick=xa(this.Ao,this);Oh(this.Tb,"closebutton").onclick=xa(this.Yn,this);Oh(this.Tb,"clearbutton").onclick=xa(this.Xn,this);Gh(this)}};
r.Ao=function(){var a=Oh(this.Tb,"optionsarea");a.innerHTML="";for(var b=Qh(),c=this.Tb,d=0;d<b.length;d++){var e=G(b[d]),e=c.bf("div",{},Rh(this,"sel"+b[d],e.md?e.md.name:"INHERIT"),c.bf("span",{},b[d]||"(root)"));a.appendChild(e)}Oh(this.Tb,"options").style.display="block";return!1};
function Rh(a,b,c){for(var a=a.Tb,b=a.bf("select",{id:b}),d=0;d<$b.length;d++){var e=$b[d],f=a.bf("option",{},e.name);if(c==e.name)f.selected=!0;b.appendChild(f)}b.appendChild(a.bf("option",{selected:c=="INHERIT"},"INHERIT"));return b}r.Yn=function(){Oh(this.Tb,"options").style.display="none";for(var a=Qh(),b=this.Tb,c=0;c<a.length;c++){var d=G(a[c]),e=Oh(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;e=="INHERIT"?d.fi(i):d.fi(bc(e))}return!1};
r.Fm=function(){var a=this.Tb,b=Oh(a,"log"),c=Oh(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.jg.body.offsetHeight-c.offsetHeight-($c?4:0)+"px"};function Qh(){var a=jb(dc);a.sort();return a}r.Sh=function(){return Ph.Ge.Sh.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:medium monospace;}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};function Sh(){this.y=this.x=i;this.index=-1;arguments.length==0?this.y=this.x=0:arguments.length==2?(this.x=arguments[0],this.y=arguments[1]):arguments.length==3?(this.x=arguments[0],this.y=arguments[1],this.index=arguments[2]):alert("Invalid poly2tri.Point constructor call!");this.lg=[]}r=Sh.prototype;r.set=function(a,b){this.x=a;this.y=b};r.add=function(a){this.x+=a.x;this.y+=a.y};r.sub=function(a){this.x-=a.x;this.y-=a.y};r.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
r.h=function(a){return this.x==a.x&&this.y==a.y};function Th(a,b){return a.y==b.y?a.x-b.x:a.y-b.y}
function Uh(){this.Za=this.ya=i;arguments.length==2?arguments[0].y>arguments[1].y?(this.Za=arguments[0],this.ya=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.Za=arguments[0],this.ya=arguments[1]):arguments[0].x==arguments[1].x?alert("Invalid poly2tri.edge constructor call: repeated points!"):(this.ya=arguments[0],this.Za=arguments[1]):(this.ya=arguments[0],this.Za=arguments[1]):alert("Invalid poly2tri.Edge constructor call!");this.Za.lg.push(this)}
function Vh(a,b,c){this.d=[i,i,i];this.va=[i,i,i];this.Nl=!1;this.la=[!1,!1,!1];this.oa=[!1,!1,!1];arguments.length==3&&(this.d[0]=a,this.d[1]=b,this.d[2]=c)}r=Vh.prototype;r.zc=function(a){return this.d[a]};r.Gi=function(){for(var a=!0,b=0;b<arguments.length;++b)a=a&&(arguments[b].h(this.d[0])||arguments[b].h(this.d[1])||arguments[b].h(this.d[2]));return a};r.Qk=function(){if(arguments.length!=0)this.Nl=arguments[0];return this.Nl};
r.fc=function(){var a;if(arguments.length==3){var b=arguments[0],c=arguments[1];a=arguments[2];b.h(this.d[2])&&c.h(this.d[1])||b.h(this.d[1])&&c.h(this.d[2])?this.va[0]=a:b.h(this.d[0])&&c.h(this.d[2])||b.h(this.d[2])&&c.h(this.d[0])?this.va[1]=a:b.h(this.d[0])&&c.h(this.d[1])||b.h(this.d[1])&&c.h(this.d[0])?this.va[2]=a:alert("Invalid poly2tri.Triangle.MarkNeighbor call (1)!")}else arguments.length==1?(a=arguments[0],a.Gi(this.d[1],this.d[2])?(this.va[0]=a,a.fc(this.d[1],this.d[2],this)):a.Gi(this.d[0],
this.d[2])?(this.va[1]=a,a.fc(this.d[0],this.d[2],this)):a.Gi(this.d[0],this.d[1])&&(this.va[2]=a,a.fc(this.d[0],this.d[1],this))):alert("Invalid poly2tri.Triangle.MarkNeighbor call! (2)")};function Wh(a){a.va[0]=i;a.va[1]=i;a.va[2]=i}function Xh(a){a.oa[0]=!1;a.oa[1]=!1;a.oa[2]=!1}function Yh(a,b){return b.h(a.d[0])?a.d[2]:b.h(a.d[1])?a.d[0]:b.h(a.d[2])?a.d[1]:i}function Zh(a,b){return b.h(a.d[0])?a.d[1]:b.h(a.d[1])?a.d[2]:b.h(a.d[2])?a.d[0]:i}
function $h(a,b){return b.h(a.d[0])?a.va[1]:b.h(a.d[1])?a.va[2]:a.va[0]}function ai(a,b){return b.h(a.d[0])?a.va[2]:b.h(a.d[1])?a.va[0]:a.va[1]}function bi(a,b){return b.h(a.d[0])?a.la[1]:b.h(a.d[1])?a.la[2]:a.la[0]}function ci(a,b){return b.h(a.d[0])?a.la[2]:b.h(a.d[1])?a.la[0]:a.la[1]}function di(a,b,c){b.h(a.d[0])?a.la[1]=c:b.h(a.d[1])?a.la[2]=c:a.la[0]=c}function ei(a,b,c){b.h(a.d[0])?a.la[2]=c:b.h(a.d[1])?a.la[0]=c:a.la[1]=c}
function fi(a,b){return b.h(a.d[0])?a.oa[1]:b.h(a.d[1])?a.oa[2]:a.oa[0]}function gi(a,b){return b.h(a.d[0])?a.oa[2]:b.h(a.d[1])?a.oa[0]:a.oa[1]}function hi(a,b,c){b.h(a.d[0])?a.oa[1]=c:b.h(a.d[1])?a.oa[2]=c:a.oa[0]=c}function ii(a,b,c){b.h(a.d[0])?a.oa[2]=c:b.h(a.d[1])?a.oa[0]=c:a.oa[1]=c}function ji(a,b){return b.h(a.d[0])?a.va[0]:b.h(a.d[1])?a.va[1]:a.va[2]}
r.Li=function(){if(arguments.length==1)this.Li(this.d[0],arguments[0]);else if(arguments.length==2){var a=arguments[0],b=arguments[1];a.h(this.d[0])?(this.d[1]=this.d[0],this.d[0]=this.d[2],this.d[2]=b):a.h(this.d[1])?(this.d[2]=this.d[1],this.d[1]=this.d[0],this.d[0]=b):a.h(this.d[2])?(this.d[0]=this.d[2],this.d[2]=this.d[1],this.d[1]=b):alert("Invalid poly2tri.Triangle.Legalize call!")}else alert("Invalid poly2tri.Triangle.Legalize call!")};
function ki(a,b,c){if(b.h(a.d[0]))if(c.h(a.d[1]))return 2;else{if(c.h(a.d[2]))return 1}else if(b.h(a.d[1]))if(c.h(a.d[2]))return 0;else{if(c.h(a.d[0]))return 2}else if(b.h(a.d[2]))if(c.h(a.d[0]))return 1;else if(c.h(a.d[1]))return 0;return-1}
r.Jf=function(){if(arguments.length==1)typeof arguments[0]=="number"?this.la[arguments[0]]=!0:this.Jf(arguments[0].ya,arguments[0].Za);else if(arguments.length==2){var a=arguments[0],b=arguments[1];if(b.h(this.d[0])&&a.h(this.d[1])||b.h(this.d[1])&&a.h(this.d[0]))this.la[2]=!0;else if(b.h(this.d[0])&&a.h(this.d[2])||b.h(this.d[2])&&a.h(this.d[0]))this.la[1]=!0;else if(b.h(this.d[1])&&a.h(this.d[2])||b.h(this.d[2])&&a.h(this.d[1]))this.la[0]=!0}else alert("Invalid poly2tri.Triangle.MarkConstrainedEdge call!")};
var li=3*Math.PI/4,mi=Math.PI/2;function ni(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return a>-1.0E-16&&a<1.0E-16?0:a>0?-1:1}function oi(a,b,c,d){var e=d.x,d=d.y,f=a.x-e,a=a.y-d;if(f*(b.y-d)-(b.x-e)*a<=1.0E-16)return!1;if((c.x-e)*a-f*(c.y-d)<=1.0E-16)return!1;return!0}
function pi(){this.s=this.next=this.Ud=this.e=i;this.value=0;arguments.length==1?(this.e=arguments[0],this.value=this.e.x):arguments.length==2?(this.e=arguments[0],this.Ud=arguments[1],this.value=this.e.x):alert("Invalid poly2tri.Node constructor call!")}function qi(a,b){this.pg=a;this.lk=b;this.Hg=a}qi.prototype.Ni=function(a){var b=this.Hg;if(a<b.value)for(;(b=b.s)!=i;){if(a>=b.value)return this.Hg=b}else for(;(b=b.next)!=i;)if(a<b.value)return this.Hg=b.s;return i};
function ri(){this.Lb=this.kc=this.ld=i;this.width=0;this.Rj=!1}ri.prototype.Fi=function(){this.Lb=this.kc=this.ld=i;this.width=0;this.Rj=!1};function si(){this.la=i;this.right=!1}function ti(a){this.Vm=[];this.Wb=[];this.d=a;this.lg=[];this.rp=this.qp=this.pp=this.lk=this.pg=this.ng=i;this.M=new ri;this.kg=new si;ui(this,this.d)}function ui(a,b){for(var c=0;c<b.length;++c)a.lg.push(new Uh(b[c],b[(c+1)%b.length]))}ti.prototype.zc=function(a){return this.d[a]};ti.prototype.Ni=function(a){return this.ng.Ni(a.x)};
function vi(a,b){for(var c=0;c<3;++c)if(b.va[c]==i){var d;a:{d=a.ng;var e=Yh(b,b.zc(c)),f=e.x,g=d.Hg,j=g.e.x;if(f==j)if(e.h(g.s.e))g=g.s;else if(e.h(g.next.e))g=g.next;else{if(!e.h(g.e)){alert("Invalid poly2tri.AdvancingFront.LocatePoint call!");d=i;break a}}else if(f<j)for(;(g=g.s)!=i;){if(e.h(g.e))break}else for(;(g=g.next)!=i;)if(e.h(g.e))break;if(g!=i)d.Hg=g;d=g}if(d!=i)d.Ud=b}}function wi(a,b){if(b!=i&&!b.Qk()){b.Qk(!0);a.Vm.push(b);for(var c=0;c<3;++c)b.la[c]||wi(a,b.va[c])}}
function xi(){var a;if(arguments.length==3){a=arguments[0];var b=arguments[1],c=arguments[2];a.kg.la=b;a.kg.right=b.ya.x>b.Za.x;if(!yi(c.Ud,b.ya,b.Za)){var d=a;if(d.kg.right)for(var e=c;e.next.e.x<b.ya.x;)ni(b.Za,e.next.e,b.ya)==-1?zi(d,b,e):e=e.next;else for(e=c;e.s.e.x>b.ya.x;)ni(b.Za,e.s.e,b.ya)==1?Ai(d,b,e):e=e.s;xi(a,b.ya,b.Za,c.Ud,b.Za)}}else if(arguments.length==5){if(a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],!yi(d,b,c)){var f=Zh(d,e),f=ni(c,f,b);if(f==0)alert("poly2tri.sweep.EdgeEvent: Collinear not supported!");
else{var g=Yh(d,e),g=ni(c,g,b);g==0?alert("poly2tri.sweep.EdgeEvent: Collinear not supported!"):f==g?(d=f==1?ai(d,e):$h(d,e),xi(a,b,c,d,e)):Bi(a,b,c,d,e)}}}else alert("Invalid poly2tri.sweep.EdgeEvent call!")}function yi(a,b,c){var d=ki(a,b,c);if(d!=-1)return a.Jf(d),a=a.va[d],a!=i&&a.Jf(b,c),!0;return!1}function Ci(a,b){var c=new Vh(b.s.e,b.e,b.next.e);c.fc(b.s.Ud);c.fc(b.Ud);a.Wb.push(c);b.s.next=b.next;b.next.s=b.s;Di(a,c)||vi(a,c)}
function Ei(a){var b=a.next.e.x-a.e.x,c=a.next.e.y-a.e.y,d=a.s.e.x-a.e.x,a=a.s.e.y-a.e.y;return Math.atan2(b*a-c*d,b*d+c*a)}
function Di(a,b){for(var c=0;c<3;++c)if(!b.oa[c]){var d=b.va[c];if(d!=i){var e=b.zc(c),f=Yh(d,Yh(b,e)),g=f.h(d.d[0])?0:f.h(d.d[1])?1:f.h(d.d[2])?2:-1;if(d.la[g]||d.oa[g])b.la[c]=d.la[g];else{var j;var k=Zh(b,e),l=Yh(b,e);j=e.x-f.x;var m=e.y-f.y,p=k.x-f.x,k=k.y-f.y,o=j*k-p*m;if(o<=0)j=!1;else{var s=l.x-f.x,l=l.y-f.y,t=s*m-j*l;j=t<=0?!1:(j*j+m*m)*(p*l-s*k)+(p*p+k*k)*t+(s*s+l*l)*o>0}if(j)return b.oa[c]=!0,d.oa[g]=!0,Fi(b,e,d,f),(e=!Di(a,b))&&vi(a,b),(e=!Di(a,d))&&vi(a,d),b.oa[c]=!1,d.oa[g]=!1,!0}}}return!1}
function Fi(a,b,c,d){var e,f,g,j;e=ai(a,b);f=$h(a,b);g=ai(c,d);j=$h(c,d);var k,l,m,p;k=ci(a,b);l=bi(a,b);m=ci(c,d);p=bi(c,d);var o,s,t,w;o=gi(a,b);s=fi(a,b);t=gi(c,d);w=fi(c,d);a.Li(b,d);c.Li(d,b);ii(c,b,o);hi(a,b,s);ii(a,d,t);hi(c,d,w);ei(c,b,k);di(a,b,l);ei(a,d,m);di(c,d,p);Wh(a);Wh(c);e&&c.fc(e);f&&a.fc(f);g&&a.fc(g);j&&c.fc(j);a.fc(c)}
function Gi(a,b){var c;c=a.M.width>(a.M.Rj?a.M.ld.e.y-b.e.y:a.M.Lb.e.y-b.e.y)?!0:!1;if(!c&&(Ci(a,b),!(b.s==a.M.ld&&b.next==a.M.Lb))){if(b.s==a.M.ld){c=ni(b.e,b.next.e,b.next.next.e);if(c==1)return;b=b.next}else if(b.next==a.M.Lb){c=ni(b.e,b.s.e,b.s.s.e);if(c==-1)return;b=b.s}else b=b.s.e.y<b.next.e.y?b.s:b.next;Gi(a,b)}}function zi(a,b,c){c.e.x<b.ya.x&&(ni(c.e,c.next.e,c.next.next.e)==-1?Hi(a,b,c):(Ii(a,b,c),zi(a,b,c)))}
function Hi(a,b,c){Ci(a,c.next);c.next.e!=b.ya&&ni(b.Za,c.next.e,b.ya)==-1&&ni(c.e,c.next.e,c.next.next.e)==-1&&Hi(a,b,c)}function Ii(a,b,c){ni(c.next.e,c.next.next.e,c.next.next.next.e)==-1?Hi(a,b,c.next):ni(b.Za,c.next.next.e,b.ya)==-1&&Ii(a,b,c.next)}function Ai(a,b,c){c.e.x>b.ya.x&&(ni(c.e,c.s.e,c.s.s.e)==1?Ji(a,b,c):(Ki(a,b,c),Ai(a,b,c)))}function Ki(a,b,c){ni(c.s.e,c.s.s.e,c.s.s.s.e)==1?Ji(a,b,c.s):ni(b.Za,c.s.s.e,b.ya)==1&&Ki(a,b,c.s)}
function Ji(a,b,c){Ci(a,c.s);c.s.e!=b.ya&&ni(b.Za,c.s.e,b.ya)==1&&ni(c.e,c.s.e,c.s.s.e)==1&&Ji(a,b,c)}
function Bi(a,b,c,d,e){var f=ji(d,e);if(f==i)alert("[BUG:FIXME] FLIP failed due to missing triangle!");else{var g=Yh(f,Yh(d,e));oi(e,Zh(d,e),Yh(d,e),g)?(Fi(d,e,f,g),vi(a,d),vi(a,f),e==c&&g==b?c==a.kg.la.Za&&b==a.kg.la.ya&&(d.Jf(b,c),f.Jf(b,c),Di(a,d),Di(a,f)):(ni(c,g,b)==-1?(g=ki(f,e,g),f.oa[g]=!0,Di(a,f),Xh(f)):(g=ki(d,e,g),d.oa[g]=!0,Di(a,d),Xh(d),d=f),Bi(a,b,c,d,e))):(g=Li(b,c,f,g),Mi(a,b,c,d,f,g),xi(a,b,c,d,e))}}
function Li(a,b,c,d){a=ni(b,d,a);if(a==1)return Zh(c,d);else if(a==-1)return Yh(c,d);else alert("[Unsupported] poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!")}function Mi(a,b,c,d,e,f){var g=ji(e,f);g==i?alert("[BUG:FIXME] FLIP failed due to missing triangle"):(e=Yh(g,Yh(e,f)),oi(c,Zh(d,c),Yh(d,c),e)?Bi(a,c,e,g,e):(e=Li(b,c,g,e),Mi(a,b,c,d,g,e)))};function Ni(){this.name="ogGeometry";this.type=La;this.jd="";this.options=this.lc=this.cd=i;this.He=[];this.qe=this.cb=-1;this.color=[1,1,1,1];this.Th=[1,1,1,1];this.So="unknown";this.Do=this.Tl=10;this.am=-1E3;this.$l=9E3}Ni.prototype=new D;r=Ni.prototype;r.wa=function(a){this.options=a;a.url&&a.type=="GeoJSON"&&Oi(this,a.url)};r.Ka=function(){Pi(this).jh(this.cb)};function Pi(a){var b=i,a=a.parent.parent.c;if(a.f&&a.f.D)b=a.f.D.nk;return b}r.U=n();r.W=n();
r.dj=function(){this.K.readyState==4&&(this.K.status==404?this.lc&&this.lc(this.id):this.wc(Ac(this.K.responseText)))};
function Qi(a,b,c,d){var e={zg:!1,ig:0,Hb:[0,0,0],Co:[0,0,0]},b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]],d=[d[0]-c[0],d[1]-c[1],d[2]-c[2]],f=[a[0]-c[0],a[1]-c[1],a[2]-c[2]],g=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],j=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],k=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],l=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],m=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],p=g*k-j*j;p<1.0E-14?(e.zg=!0,f=0,g=j>k?l/j:m/k):(f=(j*m-k*l)/p,g=(g*m-j*l)/p);e.Hb=[a[0]+f*b[0],a[1]+f*b[1],a[2]+f*b[2]];e.Co=[c[0]+g*d[0],c[1]+g*d[1],c[2]+g*d[2]];return e}
function Ri(a,b,c,d,e,f,g,j,k,l,m){l.push(b[0]);l.push(b[1]);l.push(b[2]);b=a;a++;l.push(f[0]);l.push(f[1]);l.push(f[2]);f=a;a++;l.push(e[0]);l.push(e[1]);l.push(e[2]);e=a;a++;l.push(k[0]);l.push(k[1]);l.push(k[2]);k=a;a++;l.push(c[0]);l.push(c[1]);l.push(c[2]);c=a;a++;l.push(g[0]);l.push(g[1]);l.push(g[2]);g=a;a++;l.push(d[0]);l.push(d[1]);l.push(d[2]);d=a;a++;l.push(j[0]);l.push(j[1]);l.push(j[2]);j=a;a++;m.push(c);m.push(g);m.push(d);m.push(g);m.push(j);m.push(d);m.push(b);m.push(e);m.push(f);
m.push(f);m.push(e);m.push(k);m.push(b);m.push(f);m.push(c);m.push(f);m.push(g);m.push(c);m.push(e);m.push(d);m.push(j);m.push(k);m.push(e);m.push(j);m.push(b);m.push(c);m.push(e);m.push(c);m.push(d);m.push(e);m.push(f);m.push(j);m.push(g);m.push(f);m.push(k);m.push(j);return a}
function Si(a,b,c){var d={VertexSemantic:"",Vertices:i,IndexSemantic:"",Indices:i,VertexSemantic:"p",IndexSemantic:"TRIANGLES"};d.Vertices=b;d.Indices=c;b=new L(a.parent.parent.c);b.wc(d,i,i,b);a.color.length==4?b.rd.u(a.color[0],a.color[1],a.color[2],a.color[3]):a.color.length==3&&b.rd.u(a.color[0],a.color[1],a.color[2],1);return b}
r.wc=function(a){Ti("CreateFromJSONObject");var b=!1;if(a.type=="FeatureCollection"&&(Ti("[GeoJSON Parser] type = FeatureCollection"),v(a.features)))for(var a=a.features,c=a.length,d=0;d<c;d++)if(v(a[d].type)&&a[d].type=="Feature"&&v(a[d].properties)&&v(a[d].geometry)){var e=a[d].properties,f=a[d].geometry;if(v(e.id))this.So=e.id;if(v(e.color))this.color=e.color;if(v(e.highlightcolor))this.Th=e.highlightcolor;if(v(e.linewidth))this.Tl=e.linewidth;if(v(e.pointsize))this.Do=e.pointsize;if(v(e.minelv))this.am=
e.minelv;if(v(e.maxelv))this.$l=e.maxelv;if(v(f.type))if(e=f.type,e=="LineString")v(f.coordinates&&ka(f.coordinates))&&(b=Ui(this,f.coordinates));else if(e=="MultiLineString"){if(v(f.coordinates&&ka(f.coordinates))){f=f.coordinates;for(e=0;e<f.length;e++)Ui(this,f[e])&&(b=!0)}}else if(e=="Polygon"){if(v(f.coordinates&&ka(f.coordinates))){var b=f.coordinates,e=0,g=[],f=[],j=[];new O;var k=b.length;if(k==0)b=!1;else{if(k>=1){for(var l=0;l<k;l++)if(l==0)for(var m=0;m<b[l].length;m++)g.push(new Sh(b[l][m][0],
b[l][m][1],e)),j.push([b[l][m][0],b[l][m][1]]),e++;else{for(var p=[],m=0;m<b[l].length;m++)p.push(new Sh(b[l][m][0],b[l][m][1]),e),j.push([b[l][m][0],b[l][m][1]]),e++;f.push(p)}b=new ti(g);e=h;for(e in f)for(k in g=b,j=f[e],ui(g,j),k=h,j)g.d.push(j[k]);e=f=b;g=e.d[0].x;j=e.d[0].x;l=e.d[0].y;k=e.d[0].y;m=h;for(m in e.d){p=e.d[m];if(p.x>g)g=p.x;if(p.x<j)j=p.x;if(p.y>l)l=p.y;if(p.y<k)k=p.y}l=0.3*(l-k);e.pg=new Sh(g+0.3*(g-j),k-l);e.lk=new Sh(j-l,k-l);e.d.sort(Th);e=f;k=j=g=h;k=new Vh(e.d[0],e.lk,e.pg);
e.Wb.push(k);g=new pi(k.zc(1),k);j=new pi(k.zc(0),k);k=new pi(k.zc(2));e.ng=new qi(g,k);g.next=j;j.next=k;j.s=g;k.s=j;e=f;for(g=1;g<e.d.length;++g){var j=e.zc(g),k=e,l=j,m=k.Ni(l),p=k,o=l,s=m,t=new Vh(o,s.e,s.next.e);t.fc(s.Ud);p.Wb.push(t);o=new pi(o);o.next=s.next;o.s=s;s.next.s=o;s.next=o;Di(p,t)||vi(p,t);p=o;l.x<=m.e.x+1.0E-16&&Ci(k,m);l=p;m=l.next;for(s=h;m.next!=i;){s=Ei(m);if(s>mi||s<-mi)break;Ci(k,m);m=m.next}for(m=l.s;m.s!=i;){s=Ei(m);if(s>mi||s<-mi)break;Ci(k,m);m=m.s}if(l.next!=i&&l.next.next!=
i&&(s=Math.atan2(l.e.y-l.next.next.e.y,l.e.x-l.next.next.e.x),s<li)){k.M.ld=ni(l.e,l.next.e,l.next.next.e)==-1?l.next.next:l.next;for(k.M.kc=k.M.ld;k.M.kc.next!=i&&k.M.kc.e.y>=k.M.kc.next.e.y;)k.M.kc=k.M.kc.next;if(k.M.kc!=k.M.ld){for(k.M.Lb=k.M.kc;k.M.Lb.next!=i&&k.M.Lb.e.y<k.M.Lb.next.e.y;)k.M.Lb=k.M.Lb.next;if(k.M.Lb!=k.M.kc)k.M.width=k.M.Lb.e.x-k.M.ld.e.x,k.M.Rj=k.M.ld.e.y>k.M.Lb.e.y,Gi(k,k.M.kc)}}k=p;for(l=0;l<j.lg.length;++l)xi(e,j.lg[l],k)}e=f.ng.pg.next.Ud;for(g=f.ng.pg.next.e;!bi(e,g);)e=
ai(e,g);wi(f,e);b=b.Vm;f=[];for(e=0;e<b.length;e++)g=b[e].zc(1).index,j=b[e].zc(2).index,f.push(b[e].zc(0).index),f.push(g),f.push(j)}b=!0}}}else e=="MultiPolygon"?Pg("MultiPolygon is not yet supported"):e=="Point"?Pg("Point is not yet supported"):e=="MultiPoint"&&Pg("MultiPoint is not yet supported")}if(b)this.cb=Pi(this).Dk(this.He)};
function Oi(a,b){b==i?alert("invalid json-url"):(a.jd=b,a.K=new window.XMLHttpRequest,a.K.open("GET",a.jd,!0),a.K.onreadystatechange=function(){a.dj()},a.K.send())}
function Ui(a,b){var c=new O,d=[0,0,0],e=[0,0,0],f=[],g=b.length;if(g>1)for(var j=0;j<g;j++){var k=b[j][0],l=b[j][1];c.u(k,l,a.$l);c.ia(d);c.u(k,l,a.am);c.ia(e);f.push([d[0],d[1],d[2]]);f.push([e[0],e[1],e[2]])}else return!1;var c=[],d=[],g=0.5*a.Tl*H,e=0,m,p,o,s,t,w,x,fa,ga,P,aa,U,V,W,oa,pa,qa;if(f.length==4){j=f[0];m=f[1];var k=f[2],l=f[3],A=k[0]-j[0],X=k[1]-j[1],ha=k[2]-j[2],Y=m[0]-j[0],Z=m[1]-j[1],Q=m[2]-j[2],f=X*Q-ha*Z,e=ha*Y-A*Q;p=A*Z-X*Y;A=g/Math.sqrt(f*f+e*e+p*p);f*=A;e*=A;p*=A;s=[j[0]+f,
j[1]+e,j[2]+p];t=[m[0]+f,m[1]+e,m[2]+p];w=[k[0]+f,k[1]+e,k[2]+p];x=[l[0]+f,l[1]+e,l[2]+p];fa=[j[0]-f,j[1]-e,j[2]-p];ga=[m[0]-f,m[1]-e,m[2]-p];P=[k[0]-f,k[1]-e,k[2]-p];aa=[l[0]-f,l[1]-e,l[2]-p];Ri(0,s,fa,P,w,t,ga,aa,x,d,c);a.He.push(Si(a,d,c))}else if(f.length>=6){j=f[0];m=f[1];k=f[2];l=f[3];p=f[4];o=f[5];A=k[0]-j[0];X=k[1]-j[1];ha=k[2]-j[2];Y=m[0]-j[0];Z=m[1]-j[1];Q=m[2]-j[2];U=X*Q-ha*Z;V=ha*Y-A*Q;W=A*Z-X*Y;A=g/Math.sqrt(U*U+V*V+W*W);U*=A;V*=A;W*=A;s=[j[0]+U,j[1]+V,j[2]+W];t=[m[0]+U,m[1]+V,m[2]+W];
fa=[j[0]-U,j[1]-V,j[2]-W];ga=[m[0]-U,m[1]-V,m[2]-W];for(j=4;j<f.length;j+=2)p=f[j],o=f[j+1],A=p[0]-k[0],X=p[1]-k[1],ha=p[2]-k[2],Y=l[0]-k[0],Z=l[1]-k[1],Q=l[2]-k[2],oa=X*Q-ha*Z,pa=ha*Y-A*Q,qa=A*Z-X*Y,A=g/Math.sqrt(oa*oa+pa*pa+qa*qa),oa*=A,pa*=A,qa*=A,Y=l[0]-m[0],Z=l[1]-m[1],Q=l[2]-m[2],x=Math.sqrt(Y*Y+Z*Z+Q*Q),Y/=x,Z/=x,Q/=x,A=l[0]-o[0],X=l[1]-o[1],ha=l[2]-o[2],x=Math.sqrt(A*A+X*X+ha*ha),A/=x,X/=x,P=[o[0]+oa,o[1]+pa,o[2]+qa],m=[o[0]-oa,o[1]-pa,o[2]-qa],aa=[p[0]+oa,p[1]+pa,p[2]+qa],w=[p[0]-oa,p[1]-
pa,p[2]-qa],x=Qi([t[0],t[1],t[2]],[t[0]+Y,t[1]+Z,t[2]+Q],[P[0],P[1],P[2]],[P[0]+A,P[1]+X,P[2]+Q]),P=Qi([ga[0],ga[1],ga[2]],[ga[0]+Y,ga[1]+Z,ga[2]+Q],[m[0],m[1],P[2]],[m[0]+A,m[1]+X,m[2]+Q]),m=Qi([s[0],s[1],s[2]],[s[0]+Y,s[1]+Z,s[2]+Q],[aa[0],aa[1],aa[2]],[aa[0]+A,aa[1]+X,aa[2]+Q]),A=Qi([fa[0],fa[1],fa[2]],[fa[0]+Y,fa[1]+Z,fa[2]+Q],[w[0],w[1],w[2]],[w[0]+A,w[1]+X,w[2]+Q]),!x.zg&&!P.zg&&!m.zg&&!A.zg?(x=[x.Hb[0],x.Hb[1],x.Hb[2]],aa=[P.Hb[0],P.Hb[1],P.Hb[2]],w=[m.Hb[0],m.Hb[1],m.Hb[2]],P=[A.Hb[0],A.Hb[1],
A.Hb[2]]):(x=[l[0]+U,l[1]+V,l[2]+W],aa=[l[0]-U,l[1]-V,l[2]-W],w=[k[0]+U,k[1]+V,k[2]+W],P=[k[0]-U,k[1]-V,k[2]-W]),e=Ri(e,s,fa,P,w,t,ga,aa,x,d,c),U=oa,V=pa,W=qa,m=l,k=p,l=o,t=x,ga=aa,s=w,fa=P;f=[o[0]+U,o[1]+V,o[2]+W];g=[o[0]-U,o[1]-V,o[2]-W];j=[p[0]+U,p[1]+V,p[2]+W];k=[p[0]-U,p[1]-V,p[2]-W];Ri(e,w,P,k,j,x,aa,g,f,d,c);a.He.push(Si(a,d,c))}else return!1;return!0};function Vi(){this.name="ogAoeImageLayer";this.type=Xa;this.C=!1;this.ob=[];this.kd=""}Vi.prototype=new D;r=Vi.prototype;r.wa=function(a){if(a.name)this.kd=a.name};r.Ka=function(){for(var a=0;a<this.ob.length;a++){for(var b=a;b<this.ob.length;b++)this.ob[a].cb-=1;E(this.ob[a])}};r.U=function(){this.C=!0;for(var a=0;a<this.ob.length;a++)this.ob[a].U()};r.W=function(){this.C=!1;for(var a=0;a<this.ob.length;a++)this.ob[a].W()};r.Ai=function(a){this.ob.push(a);a.qe=this.id};
r.Ui=function(a){for(var b=0;b<this.ob.length;b++)if(this.ob[b]==a){for(var c=b+1;c<this.ob.length;c++)this.ob[c].cb-=1;E(this.ob[b]);this.ob.splice(b,1)}};function Wi(){this.name="ogVectorLayer";this.type=Ha;this.C=!1;this.fa=[];this.kd=""}Wi.prototype=new D;r=Wi.prototype;r.wa=function(a){if(a.name)this.kd=a.name};r.jh=function(a){for(var b=0;b<this.fa.length;b++)this.fa[b]==a&&(E(this.fa[b]),this.fa.splice(b,1))};r.Ka=function(){Xi(this)};r.U=function(){this.C=!0;for(var a=0;a<this.fa.length;a++)this.fa[a].U()};r.W=function(){this.C=!1;for(var a=0;a<this.fa.length;a++)this.fa[a].W()};
function Xi(a){for(var b=0;b<a.fa.length;b++){for(var c=b;c<a.fa.length;c++)a.fa[b].cb-=1;E(a.fa[b])}}r.Dk=function(a){this.fa.push(a);a.qe=this.id};r.jh=function(a){for(var b=0;b<this.fa.length;b++)if(this.fa[b]==a){for(var c=b+1;c<this.fa.length;c++)this.fa[c].cb-=1;E(this.fa[b]);this.fa.splice(b,1)}};function Yi(){this.name="ogImageLayer";this.type=Ba;this.rg=-1}Yi.prototype=new D;Yi.prototype.Zg=function(){var a=i,b=this.parent.parent.parent.c;if(b.f&&b.f.D)a=b.f.D.Ma;return a};Yi.prototype.Di=function(a){var b=this.Zg();if(b)this.rg=b.Di(a)};Yi.prototype.ih=function(){var a=this.Zg();a&&this.rg!=-1&&a.ih(this.rg)};Yi.prototype.wa=function(a){this.Di(a)};function Zi(){this.name="ogBillboardLayer";this.type=Wa;this.C=!1;this.Ba=[];this.kd=""}Zi.prototype=new D;r=Zi.prototype;r.wa=function(a){if(a.name)this.kd=a.name};r.Ka=function(){for(var a=0;a<this.Ba.length;a++)E(this.Ba[a])};r.U=function(){this.C=!0;for(var a=0;a<this.Ba.length;a++)this.Ba[a].U()};r.W=function(){this.C=!1;for(var a=0;a<this.Ba.length;a++)this.Ba[a].W()};r.Vi=function(a){for(var b=0;b<this.Ba.length;b++)this.Ba[b]==a&&(E(this.Ba[b]),this.Ba.splice(b,1))};r.Bi=function(a){this.Ba.push(a)};function $i(){this.name="ogPointSpriteObject";this.type=Za;this.qd=this.options=this.pc=i;this.ai=this.Ih=0}$i.prototype=new D;r=$i.prototype;r.wa=function(a){this.options=a;this.pc=new Qc(this.parent.parent.parent.c);a.Vertices&&this.pc.nh(a.Vertices);if(a.PointUrl)aj(this,a.PointUrl),this.xo=a.NumberOfPoints,this.pc.ui=this.xo;this.pc.kh(a.Center[0],a.Center[1],a.Center[2])};r.Ka=function(){if(this.pc)this.pc.k(),this.pc=i,this.status=3};r.U=function(){this.pc.C=!0};r.Ad=n();
r.W=function(){this.pc.C=!1};function aj(a,b){b==i?alert("invalid xyzurl"):(a.Yo=b,a.K=new window.XMLHttpRequest,a.K.open("GET",a.Yo,!0),a.K.onreadystatechange=function(){a.K.readyState==4&&(a.K.status==404?alert("xyz-file not found..."):bj(a))},a.K.onprogress=function(){bj(a)},a.K.send(),a.Ih=0,a.ai=0)}
function bj(a){var b=a.K.responseText;a.Ih=b.lastIndexOf("\n");for(var b=b.substr(a.ai,a.Ih-a.ai-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}a.pc.nh(c);a.ai=a.Ih};function cj(){this.name="ogGeometryLayer";this.type=Fa;this.C=!1;this.aa=[];this.kd=""}cj.prototype=new D;r=cj.prototype;r.wa=function(a){if(a.name)this.kd=a.name};r.Ka=function(){for(var a=0;a<this.aa.length;a++){for(var b=a;b<this.aa.length;b++)this.aa[a].cb-=1;E(this.aa[a])}};r.U=function(){this.C=!0;for(var a=0;a<this.aa.length;a++)this.aa[a].U()};r.W=function(){this.C=!1;for(var a=0;a<this.aa.length;a++)this.aa[a].W()};r.Wd=function(a){this.aa.push(a);a.qe=this.id};
r.Wi=function(a){for(var b=0;b<this.aa.length;b++)if(this.aa[b]==a){for(var c=b+1;c<this.aa.length;c++)this.aa[c].cb-=1;E(this.aa[b]);this.aa.splice(b,1)}};function dj(){this.name="ogSurface";this.type=Na;this.Pp=this.Fp=!1;this.elevation=this.latitude=this.longitude=0;this.status=gb;this.q=i}dj.prototype=new D;r=dj.prototype;r.Ad=function(a,b,c,d,e,f){this.q.kh(a,b,c,d,e,f)};
r.Sf=function(a,b,c,d){var e=this.q,f=new O(a,b,c),c=Array(3);f.ia(c);f=new K;f.Xd(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new K;c.zd(a);a=new K;a.zd([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.Ve();b=new K;b.Xg(d[0],d[1],d[2],d[3]);b.Ve();f=new K;f.V(a,b);d=new K;d.V(a,f);b=new K;b.zd([0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.Ve();a=new K;a.V(b,d);d=new K;d.V(c,
a);c=new K;c.yd(H,H,H);a=new K;a.V(d,c);e.ha=a;Mc(e)};
r.wa=function(a){if(a==i)F(G("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==i)F(G("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=Ma)F(G("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.q=new L(this.parent.parent.parent.parent.c);this.q.C=!1;this.q.yo=this.id;var b=this;this.q.wc(a.jsonobject,function(){b.longitude!=0&&b.latitude!=0&&b.Ad(b.longitude,b.latitude,b.elevation);b.status=fb;b.P&&b.P(b.id)},function(){b.status=
3;b.O&&b.O(b.id)});this.jd=a.url;this.q.$m=a.jsonobject.VisibilityDistance?a.jsonobject.VisibilityDistance*H:5E4*H}if(a.longitude&&a.latitude&&a.elevation)this.longitude=a.longitude,this.latitude=a.latitude,this.elevation=a.elevation}};r.Ka=function(){if(this.q)this.q.k(),this.q=i,this.status=3};r.W=function(){if(this.q)this.q.C=!1};r.U=function(){if(this.q)this.q.C=!0};var ej=-1;function T(a,b,c){var d=i;a==z?d=new bh:a==B?d=new dh:a==Aa?d=new ch:a==Ba?d=new Yi:a==Ca?d=new jh:a!=Da&&(a==Ea?d=new hh:a==Fa?d=new cj:a!=Ga&&a!=Ia&&(a==Ja?d=new gc:a==Ua?d=new fh:a!=Ka&&(a==La?d=new Pf:a==Ma?d=new ph:a==Na?d=new dj:a==Pa?d=new mc:a!=Qa&&a!=Ra&&a!=Sa&&a!=Ta&&(a==Va?d=new nh:a==Wa?d=new Zi:a==Xa?d=new Vi:a==Ya?d=new Ie:a==Za?d=new $i:a==$a?d=new lh:a==Ha?d=new Wi:a==Oa&&(d=new Ni)))));if(d!=i)ej++,d.id=ej,d.parent=b,hb.push(d),d.wa(c);return d}y("_CreateObject",T);
y("ogGetObjectType",function(a){return(a=C(a))?a.type:ab});y("ogGetObjectName",function(a){return(a=C(a))?a.name:""});y("ogGetNumObjects",function(){return hb.length});y("ogGetObjectAt",function(a){a=a<0||a>hb.length-1?i:hb[a];return a==i?-1:a.id});y("ogGetParentObject",function(a){if((a=C(a))&&a.parent)return a.parent.id;return-1});y("ogSetObjectName",function(a,b){var c=C(a);if(c)c.name=b});
y("ogGetObjectByName",function(a){a:{for(var b=0;b<hb.length;b++)if(hb[b].name==a){a=hb[b];break a}a=i}if(a)return a.id;return-1});y("ogGetObjectStatus",function(a){if(a=C(a))return a.status;return 3});y("ogOnLoad",function(a,b){var c=C(a);if(c)c.status==fb?b(a):c.P=b});y("ogOnFailure",function(a,b){var c=C(a);if(c)c.status==3?b(a):c.O=b});function fj(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=T(z,i,a);if(a!=i)return a.id;return-1}y("ogCreateContext",fj);
y("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?!0:!1;f.canvas=a;return fj(f,c,d,e)});y("ogDestroyContext",function(a){(a=C(a))&&a.type==z&&E(a)});y("ogGetWidth",function(a){if((a=C(a))&&a.type==z)return a=a.c?a.c.width:0,a;return 0});y("ogGetHeight",function(a){if((a=C(a))&&a.type==z)return a=a.c?a.c.height:0,a;return 0});y("ogGetScene",function(a){if((a=C(a))&&a.type==z&&a.f)return a.f.id;return-1});
y("ogSetBackgroundColor",function(a,b,c,d,e){(a=C(a))&&a.type==z&&a.c&&a.c.Zk(b,c,d,e)});y("ogSetTextColor",function(a,b,c,d){(a=C(a))&&a.type==z&&a.fontcolor.u(b,c,d,1)});y("ogDrawText",function(a,b,c,d){(a=C(a))&&a.type==z&&a.vd(b,c,d)});y("ogGetTextSize",function(a,b){var c=C(a);if(c&&c.type==z&&(c=c.Ii(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});y("ogSetMouseDownFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.ie=b});
y("ogSetMouseUpFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.ke=b});y("ogSetMouseMoveFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.je=b});y("ogSetMouseWheelFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.ad=b});y("ogSetKeyDownFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.tj=b});y("ogSetKeyUpFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.uj=b});y("ogSetResizeFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.bd=b});
y("ogSetRenderFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.Gd=b});y("ogSetTimerFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.Hd=b});y("ogSetRenderGeometryFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.wp=b});y("ogSetBeginRenderFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.Pn=b});y("ogSetEndRenderFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.Qn=b});y("ogSetFlyToStartedFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.ge=b});
y("ogSetInPositionFunction",function(a,b){var c=C(a);if(c&&c.type==z)c.he=b});y("ogSetNumRenderPasses",function(a,b){var c=C(a);if(c&&c.type==z)c.wo=b});y("ogExec",n());y("ogSetArtworkDirectory",function(a){R=a});function gj(a,b){var c=C(a);if(c&&c.type==z){var d={};d.type=b;return b==bb||b==cb||b==db||b==eb?(d=T(B,c,d),c.f=d,d.id):(F(G("owg.og"),"** WARNING: wrong scene type"),-1)}F(G("owg.og"),"** WARNING: context is not valid");return-1}y("ogCreateScene",gj);
y("ogGetContext",function(a){if((a=C(a))&&a.type==B)if(a=a.parent)return a.id;return-1});y("ogGetWorld",function(a){if((a=C(a))&&a.type==B)if(a=a.zf)return a.id;return-1});y("ogPickGlobe",function(a,b,c){if((a=C(a))&&a.type==B&&a.uc==bb)return a.Nf(b,c);return[!1,0,0,0,0,0,0]});y("ogToCartesian",function(a,b,c,d){if((a=C(a))&&a.type==B&&a.uc==bb){var e=[];(new O(b,c,d)).ia(e)}return e||i});
y("ogToWGS84",function(a,b,c,d){if((a=C(a))&&a.type==B&&a.uc==bb){var e=new O;e.yc(b,c,d);e=[e.F[0],e.F[1],e.F[2]]}return e||i});y("ogCreateCamera",function(a){if((a=C(a))&&a.type==B){var b=T(Pa,a,i);a.Eh.push(b);return b.id}return-1});y("ogDestroyCamera",function(a){(a=C(a))&&a.type==Pa&&E(a)});y("ogSetPosition",function(a,b,c,d){(a=C(a))&&a.type==Pa&&a.sa(b,c,d)});function hj(a){if((a=C(a))&&a.type==B)return a=a.ee,oc(a),a.Zd();return i}y("ogGetPosition",hj);
function ij(a,b,c,d){if((a=C(a))&&a.type==Pa)return b>360&&(b-=360),b<0&&(b=360+b),a.Te(b,c,d);return i}y("ogSetOrientation",ij);y("ogSetOrientationFromQuaternion",function(a,b,c,d,e){if((a=C(a))&&a.type==Pa)return a.mh(b,c,d,e);return i});function jj(a){if((a=C(a))&&a.type==B)return a=a.ee,oc(a),a.Hf();return i}y("ogGetOrientation",jj);function kj(a){if((a=C(a))&&a.type==B)return a.ee.id;return-1}y("ogGetActiveCamera",kj);y("ogSetActiveCamera",function(a){(a=C(a))&&a.type==Pa&&eh(a.parent,a.id)});
y("ogGetNumCameras",function(a){if((a=C(a))&&a.type==B)return a.Eh.length});y("ogGetCameraAt",function(a,b){var c=C(a);if(c&&c.type==B)return c.Eh[b].id;return-1});
y("ogLookAt",function(a,b,c,d){var e=kj(a);oc(C(e));var f=hj(a),g=[];(new O(f.longitude,f.latitude,f.elevation)).ia(g);var j=new J(g[0],g[1],g[2]),k=[];(new O(b,c,d)).ia(k);b=(new J(k[0],k[1],k[2])).Bf();b.$i(j);j=new K;j.Xd(f.longitude,f.latitude);f=new K;f.Xc(g[0],g[1],g[2]);g=new K;g.V(f,j);g.Ve();g=g.Ia(b);g.gc();g=g.a;f=g[0];j=g[1];b=g[2];g=Math.acos(f/Math.sqrt(1-b*b))*57.29577951308232;j<0&&f>0&&(g=360-g);j<0&&f<0&&(g=360-g);f=-(90-Math.acos(b)*57.29577951308232);b<-0.9&&(g=180+g,f=-f);a=jj(a);
ij(e,g,f,a.roll)});function lj(a){if((a=C(a))&&a.type==B){var b={};b.scenetype=a.uc;b=T(Aa,a,b);a.zf=b;return b.id}return-1}y("ogCreateWorld",lj);y("ogCreateGlobe",function(a){var b=gj(a,bb),a=lj(b),b=C(b),c=T(Pa,b,i);oc(c);eh(b,c.id);b.Eh.push(c);return a});y("ogSetNorthpoleColor",function(a,b,c,d){if((a=C(a))&&a.type==Aa)a.parent.parent.c.f.D.Ma.we=[b,c,d]});y("ogSetSouthpoleColor",function(a,b,c,d){if((a=C(a))&&a.type==Aa)a.parent.parent.c.f.D.Ma.Fe=[b,c,d]});
y("ogSetRenderQuality",function(a,b){var c=C(a);if(c&&c.type==Aa&&(c=c.parent.parent.c.f.D.Ma,b>0&&b<=3))c.Bm=b});y("ogSetRenderEffect",function(a,b,c){(a=C(a))&&a.type==Aa&&a.oh(b,c)});y("ogLoadTextureAsync",function(a,b){var c=C(a);if(c&&c.type==B){var d={};d.url=b;return T(Ja,c,d).id}return-1});y("ogDestroyTexture",function(a){(a=C(a))&&a.type==Ja&&E(a)});y("ogBlitTexture",function(a,b,c,d){(a=C(a))&&a.type==Ja&&a.w(b,c,d)});
y("ogAddImageLayer",function(a,b){var c=C(a);if(c&&c.type==Aa)return T(Ba,c,b).id;return-1});y("ogRemoveImageLayer",function(a){if((a=C(a))&&a.type==Ba)a.ih(),E(a)});y("ogAddElevationLayer",function(a,b){var c=C(a);if(c&&c.type==Aa)return T(Ca,c,b).id;return-1});y("ogRemoveElevationLayer",function(a){if((a=C(a))&&a.type==Ca)a.ih(),E(a)});y("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;if((a=C(a))&&a.type==Aa)return T(Ea,a,e).id;return-1});
y("ogRemovePOILayer",function(a){(a=C(a))&&a.type==Ea&&E(a)});y("ogHidePOILayer",function(a){(a=C(a))&&a.type==Ea&&a.U()});y("ogShowPOILayer",function(a){(a=C(a))&&a.type==Ea&&a.W()});y("ogAddVectorLayer",function(a,b){var c=C(a);if(c&&c.type==Aa)return T(Ha,c,b).id;return-1});y("ogRemoveVectorLayer",function(a){if((a=C(a))&&a.type==Ha)Xi(a),E(a)});y("ogLoadVectorAsync",function(a,b){var c=C(a);if(c&&c.type==Ha){var d=T(Oa,c.parent.parent,{url:b,type:"GeoJSON"});c.fa.push(d);d.Rp=c;return d.id}return-1});
y("ogDestroyVector",function(a){if((a=C(a))&&a.type==Oa)if(a.m){var b=a.m;b&&b.type==Ha&&b.jh(a)}else E(a);return-1});y("ogCreatePOI",function(a,b){var c=C(a);if(c&&c.type==Ea){b.textstyle=c.Ke;b.iconstyle=c.oe;var d=T(Ua,c.parent.parent,b);c.za.push(d);d.Jp=c;return d.id}return-1});y("ogDestroyPOI",function(a){if((a=C(a))&&a.type==Ua)if(a.m){var b=a.m;if(b&&b.type==Ea)for(var c=0;c<b.za.length;c++)b.za[c]==a&&(E(b.za[c]),b.za.splice(c,1))}else E(a);return-1});
y("ogChangePOIText",function(a,b){var c=C(a);if(c&&c.type==Ua){var d=c.parent.parent;c.Ke&&d.c.sf.Hk(c.qa,b,c.Ke)}});y("ogChangePOIIcon",function(a,b){var c=C(a);if(c&&c.type==Ua){var d=c.parent.parent;c.oe&&d.c.sf.Gk(c.qa,b,c.oe)}});y("ogChangePOISize",function(a,b){var c=C(a);c&&c.type==Ua&&c.qa.ph(b)});y("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=C(a))&&a.type==Ua){var e=[];(new O(b,c,d)).ia(e);b=e[0];c=e[1];e=e[2];a.qa.xe?a.qa.sa(b,c,e,0):a.qa.sa(b,c,e,i)}});
y("ogChangePOIPosition",function(a,b,c,d){(a=C(a))&&a.type==Ua&&(a.qa.xe?a.qa.sa(b,c,d,0):a.qa.sa(b,c,d,i))});y("ogHidePOI",function(a){(a=C(a))&&a.type==Ua&&a.U()});y("ogShowPOI",function(a){(a=C(a))&&a.type==Ua&&a.W()});y("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=C(a))&&a.type==Ua)a.qa.bk=new zc(b,c,d,e)});y("ogPickPOI",function(a,b,c){if((a=C(a))&&a.type==B&&a.uc==bb)return a.Pf(b,c);return-1});
y("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=C(a);if(d&&d.type==Aa)return T(Fa,d,c).id;return-1});y("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=C(a);if(d&&d.type==Aa)return T(Xa,d,c).id;return-1});y("ogCreateAoeImage",function(a,b){var c=C(a);if(c&&c.type==Xa){var d=T(Ya,c.parent.parent,b);c.Ai(d);return d.id}return-1});y("ogDestroyAoeImage",function(a){if((a=C(a))&&a.type==Ya){var b=C(a.qe);b&&b.type==Xa&&b.Ui(a)}return-1});
y("ogHideGeometryLayer",function(a){(a=C(a))&&a.type==Fa&&a.U()});y("ogShowGeometryLayer",function(a){(a=C(a))&&a.type==Fa&&a.W()});y("ogRemoveGeometryLayer",function(a){(a=C(a))&&a.type==Fa&&E(a);return-1});y("ogCreateGeometry",function(a,b){var c={};c.jsonobject=b;var d=C(a);if(d&&d.type==Fa)return c=T(La,d.parent.parent,c),d.Wd(c),c.id;return-1});y("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=C(a);if(d&&d.type==Fa)return c=T(La,d.parent.parent,c),d.Wd(c),c.id;return-1});
y("ogDestroyGeometry",function(a){if((a=C(a))&&a.type==La){var b=C(a.qe);b&&b.type==Fa&&b.Wi(a)}return-1});y("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){if((a=C(a))&&a.type==La)return a.Ad(b,c,d,e,f,g);return-1});y("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){if((a=C(a))&&a.type==La)return a.Sf(b,c,d,e);return-1});y("ogGetNumMeshes",function(a){if((a=C(a))&&a.type==La)return a.Db.length;return-1});y("ogGetMeshAt",function(a,b){var c=C(a);if(c&&c.type==La)return c.Db[b].id;return-1});
y("ogHideGeometry",function(a){(a=C(a))&&a.type==La&&a.U()});y("ogShowGeometry",function(a){(a=C(a))&&a.type==La&&a.W()});y("ogPickGeometry",function(a,b,c){if((a=C(a))&&a.type==B&&a.uc==bb)if(b=a.ae(b,c),b=C(b))return b.parent.parent.id;return-1});y("ogCreatePolylineWGS84",function(a,b,c){if((a=C(a))&&a.type==Fa)return c.coords=b,c.type="EarthPolyline",b=T(La,a.parent.parent,c),a.Wd(b),b.id;return-1});y("ogGetSurfaceAt",function(a,b){var c=C(a);if(c&&c.type==Ma)return c.Nb[b].id;return-1});
y("ogHideMesh",function(a){(a=C(a))&&a.type==Ma&&a.U()});y("ogShowMesh",function(a){(a=C(a))&&a.type==Ma&&a.W()});y("ogPickMesh",function(a,b,c){if((a=C(a))&&a.type==B&&a.uc==bb)if(b=a.ae(b,c),b=C(b))return b.parent.id;return-1});y("ogHideSurface",function(a){(a=C(a))&&a.type==Na&&a.U()});y("ogShowSurface",function(a){(a=C(a))&&a.type==Na&&a.W()});y("ogPickSurface",function(a,b,c){if((a=C(a))&&a.type==B&&a.uc==bb)return a.ae(b,c);return-1});
y("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=C(a);if(d&&d.type==Aa)return T(Wa,d,c).id;return-1});y("ogRemoveBillboardLayer",function(a){(a=C(a))&&a.type==Wa&&E(a)});y("ogHideBillboardLayer",function(a){(a=C(a))&&a.type==Wa&&a.U()});y("ogShowBillboardLayer",function(a){(a=C(a))&&a.type==Wa&&a.W()});y("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=C(a))&&a.type==Wa){var f={};f.canvas=b;f.position=[c,d,e];b=T(Va,a.parent.parent,f);a.Bi(b);b.m=a.id;return b.id}return-1});
y("ogDestroyBillboard",function(a){if((a=C(a))&&a.type==Va)if(a.m){var b=C(a.m);b&&b.type==Wa&&b.Vi(a)}else E(a);return-1});y("ogHideBillboard",function(a){(a=C(a))&&a.type==Va&&a.U();return-1});y("ogShowBillboard",function(a){(a=C(a))&&a.type==Va&&a.W();return-1});y("ogPickBillboard",function(a,b,c){if((a=C(a))&&a.type==B&&a.uc==bb)return a.Of(b,c);return-1});y("ogUpdateBillboard",function(a,b){var c=C(a);if(c&&c.type==Va)c.Sb.canvas=b,c.Sb.Uf();else return-1});
y("ogFlyTo",function(a,b,c,d,e,f,g){(a=C(a).parent.c)&&He(a.La,b,c,d,e,f,g)});y("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=C(a).parent.c)&&a.Hi(b,c,d,e,f,g,j)});y("ogSetFlightDuration",function(a,b){var c=C(a).parent.c;c&&c.lh(b)});y("ogStopFlyTo",function(a){(a=C(a).parent.c)&&a.Tf()});y("ogLockNavigation",function(a){(a=C(a).parent.c)&&a.f.wb.Oi(!0)});y("ogUnlockNavigation",function(a){(a=C(a).parent.c)&&a.f.wb.Oi(!1)});
y("ogSetCanvasSizeOffset",function(a,b,c){a=C(a).parent.c;a.Ak=b;a.Nj=c;Ig()});y("ogDebug",function(){var a=new Ph;Ch(a);a.Gc()});y("ogWarning",function(a){F(G("warning"),a)});function Pg(a){G("error").log(Wb,a,h)}y("ogError",Pg);function Ti(a){G("message").info(a)}y("ogLog",Ti);
y("ogWorldToWindow",function(a,b,c,d){var e;if((a=C(a))&&a.type==B&&a.uc==bb)e=a.parent.c,a=new K,a.V(e.oc,e.tg),b=new J(b,c,d),d=a.Ia(b),b=d.a[0],c=-d.a[1],d=d.a[2],b=Math.floor((b+1)*0.5*e.width+0.5),c=Math.floor((c+1)*0.5*e.height-1+0.5),e=[b,c,(d+1)*0.5];return e||i});y("ogCalcDistanceWGS84",function(a,b,c,d){a=hc*Math.acos(Math.sin(I(b))*Math.sin(I(d))+Math.cos(I(b))*Math.cos(I(d))*Math.cos(I(c-a)));isNaN(a)&&(a=0);return a});
