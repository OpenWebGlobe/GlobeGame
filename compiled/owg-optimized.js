function aa(a){throw a;}var h=void 0,i=null;function n(){return function(){}}function ba(a){return function(b){this[a]=b}}function ea(a){return function(){return this[a]}}function p(a){return function(){return a}}var r,u=this;function fa(a){for(var a=a.split("."),b=u,c;c=a.shift();)if(b[c]!=i)b=b[c];else return i;return b}function ga(){}
function ja(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function v(a){return a!==h}function ka(a){return ja(a)=="array"}function la(a){var b=ja(a);return b=="array"||b=="object"&&typeof a.length=="number"}function ma(a){return typeof a=="string"}function na(a){return ja(a)=="function"}function oa(a){a=ja(a);return a=="object"||a=="array"||a=="function"}function pa(a){return a[sa]||(a[sa]=++ta)}var sa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ta=0;
function ua(a){return a.call.apply(a.bind,arguments)}function ya(a,b){var c=b||u;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}else return function(){return a.apply(c,arguments)}}function za(){za=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ua:ya;return za.apply(i,arguments)}var Aa=Date.now||function(){return+new Date};
function w(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&v(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function Ba(a,b){function c(){}c.prototype=b.prototype;a.Vf=b.prototype;a.prototype=new c;a.prototype.constructor=a};var y=0,z=1,Ca=2,Da=3,Ea=4,Fa=5,Ga=6,Ha=7,Ia=8,Ja=9,Ka=10,La=11,Ma=12,Na=13,Oa=14,Pa=15,Qa=16,Ra=17,Sa=18,Ta=19,Ua=20,Va=21,Wa=22,Xa=23,Ya=24,Za=65533,$a=65534,ab=25,bb=26,cb=65535;w("OG_OBJECT_CONTEXT",y);w("OG_OBJECT_SCENE",z);w("OG_OBJECT_WORLD",Ca);w("OG_OBJECT_IMAGELAYER",Da);w("OG_OBJECT_ELEVATIONLAYER",Ea);w("OG_OBJECT_WAYPOINTLAYER",Fa);w("OG_OBJECT_GEOMETRYLAYER",Ha);w("OG_OBJECT_POILAYER",Ga);w("OG_OBJECT_VOXELLAYER",Ia);w("OG_OBJECT_VECTORLAYER",Ja);w("OG_OBJECT_IMAGE",Ka);
w("OG_OBJECT_TEXTURE",La);w("OG_OBJECT_PIXELBUFFER",Ma);w("OG_OBJECT_GEOMETRY",Na);w("OG_OBJECT_MESH",Oa);w("OG_OBJECT_SURFACE",Pa);w("OG_OBJECT_VECTOR",Qa);w("OG_OBJECT_CAMERA",Ra);w("OG_OBJECT_TEXT",Sa);w("OG_OBJECT_BINARYDATA",Ta);w("OG_OBJECT_LIGHT",Ua);w("OG_OBJECT_NAVIGATIONCONTROLLER",Va);w("OG_OBJECT_POI",Wa);w("OG_OBJECT_BILLBOARD",Xa);w("OG_OBJECT_BILLBOARDLAYER",Ya);w("OG_OBJECT_AOEIMAGELAYER",Za);w("OG_OBJECT_AOEIMAGE",$a);w("OG_OBJECT_POINTSPRITE",ab);w("OG_OBJECT_EARTHPOLYLINE",bb);
w("OG_OBJECT_INVALID",cb);w("OG_RENDEREFFECT_RGB",0);w("OG_RENDEREFFECT_CHROMADEPTH",1);var db=1,eb=2,fb=3,gb=4;w("OG_SCENE_3D_ELLIPSOID_WGS84",db);w("OG_SCENE_3D_FLAT_CARTESIAN",eb);w("OG_SCENE_2D_SCREEN",fb);w("OG_SCENE_CUSTOM",gb);w("OG_NAVIGATIONMODE_GLOBE",0);w("OG_NAVIGATIONMODE_FLIGHT",1);w("OG_NAVIGATIONMODE_CONSTRAINED",2);w("OG_NAVIGATIONMODE_DYNAMIC",3);var hb=1,ib=2;w("OG_OBJECT_READY",hb);w("OG_OBJECT_BUSY",ib);w("OG_OBJECT_FAILED",3);var jb=[];function B(a){if(a==-1)return i;for(var b=0;b<jb.length;b++)if(jb[b].id==a)return jb[b];return i}function C(){this.parent=i;this.name="ogObject";this.type=cb;this.id=-1;this.status=hb;this.N=this.O=i}C.prototype.jb=n();function D(a){for(var a=a.id,b=0;b<jb.length;b++)if(jb[b].id==a){jb[b].jb();jb.splice(b,1);break}}C.prototype.Ka=n();function kb(a,b){for(var c in a)b.call(h,a[c],c,a)}function lb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var mb=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function nb(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<mb.length;e++)b=mb[e],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}};function ob(a){this.stack=Error().stack||"";if(a)this.message=String(a)}Ba(ob,Error);ob.prototype.name="CustomError";function pb(a){for(var b=1;b<arguments.length;b++)var c=String(arguments[b]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,c);return a}function qb(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function rb(a){if(!sb.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(tb,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(ub,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(vb,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(wb,"&quot;"));return a}var tb=/&/g,ub=/</g,vb=/>/g,wb=/\"/g,sb=/[&<>\"]/;
function xb(a){return qb(a.replace(/  /g," &#160;"),h)}
function yb(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var j=d[g]||"",k=e[g]||"",l=RegExp("(\\d*)(\\D*)","g"),m=RegExp("(\\d*)(\\D*)","g");do{var q=l.exec(j)||["","",""],o=m.exec(k)||["","",""];if(q[0].length==0&&o[0].length==0)break;c=zb(q[1].length==0?0:parseInt(q[1],10),o[1].length==0?0:parseInt(o[1],10))||zb(q[2].length==0,o[2].length==0)||zb(q[2],o[2])}while(c==
0)}return c}function zb(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function Ab(a,b){b.unshift(a);ob.call(this,pb.apply(i,b));b.shift();this.nq=a}Ba(Ab,ob);Ab.prototype.name="AssertionError";function Bb(a){aa(new Ab("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var Cb=Array.prototype,Db=Cb.indexOf?function(a,b,c){return Cb.indexOf.call(a,b,c)}:function(a,b,c){c=c==i?0:c<0?Math.max(0,a.length+c):c;if(ma(a)){if(!ma(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Eb=Cb.forEach?function(a,b,c){Cb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function Fb(){return Cb.concat.apply(Cb,arguments)}
function Gb(a){if(ka(a))return Fb(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}function Hb(a,b,c){return arguments.length<=2?Cb.slice.call(a,b):Cb.slice.call(a,b,c)};var Ib="StopIteration"in u?u.StopIteration:Error("StopIteration");function Jb(){}Jb.prototype.next=function(){aa(Ib)};Jb.prototype.Vj=function(){return this};function Kb(a){if(a instanceof Jb)return a;if(typeof a.Vj=="function")return a.Vj(!1);if(la(a)){var b=0,c=new Jb;c.next=function(){for(;;)if(b>=a.length&&aa(Ib),b in a)return a[b++];else b++};return c}aa(Error("Not implemented"))}
function Lb(a,b){if(la(a))try{Eb(a,b,h)}catch(c){c!==Ib&&aa(c)}else{a=Kb(a);try{for(;;)b.call(h,a.next(),h,a)}catch(d){d!==Ib&&aa(d)}}};function Mb(a){this.Lc={};this.vb=[];var b=arguments.length;if(b>1){b%2&&aa(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.set(arguments[c],arguments[c+1])}else if(a){if(a instanceof Mb)b=a.Pi(),c=a.Hk();else{var b=lb(a),d=[],e=0;for(c in a)d[e++]=a[c];c=d}for(d=0;d<b.length;d++)this.set(b[d],c[d])}}r=Mb.prototype;r.Pa=0;r.tj=0;r.Ff=ea("Pa");r.Hk=function(){Nb(this);for(var a=[],b=0;b<this.vb.length;b++)a.push(this.Lc[this.vb[b]]);return a};r.Pi=function(){Nb(this);return this.vb.concat()};
r.i=function(a,b){if(this===a)return!0;if(this.Pa!=a.Ff())return!1;var c=b||Ob;Nb(this);for(var d,e=0;d=this.vb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Ob(a,b){return a===b}r.clear=function(){this.Lc={};this.tj=this.Pa=this.vb.length=0};
function Nb(a){if(a.Pa!=a.vb.length){for(var b=0,c=0;b<a.vb.length;){var d=a.vb[b];Object.prototype.hasOwnProperty.call(a.Lc,d)&&(a.vb[c++]=d);b++}a.vb.length=c}if(a.Pa!=a.vb.length){for(var e={},c=b=0;b<a.vb.length;)d=a.vb[b],Object.prototype.hasOwnProperty.call(e,d)||(a.vb[c++]=d,e[d]=1),b++;a.vb.length=c}}r.get=function(a,b){if(Object.prototype.hasOwnProperty.call(this.Lc,a))return this.Lc[a];return b};
r.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Lc,a)||(this.Pa++,this.vb.push(a),this.tj++);this.Lc[a]=b};r.Vj=function(a){Nb(this);var b=0,c=this.vb,d=this.Lc,e=this.tj,f=this,g=new Jb;g.next=function(){for(;;){e!=f.tj&&aa(Error("The map has changed since the iterator was created"));b>=c.length&&aa(Ib);var g=c[b++];return a?g:d[g]}};return g};function Pb(a){return Qb(a||arguments.callee.caller,[])}
function Qb(a,b){var c=[];if(Db(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(Rb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Rb(f))?f:"[fn]";break;default:f=typeof f}f.length>40&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Qb(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Rb(a){a=String(a);if(!Sb[a]){var b=/function ([^\(]+)/.exec(a);Sb[a]=b?b[1]:"[Anonymous]"}return Sb[a]}var Sb={};function Tb(a,b,c,d,e){this.reset(a,b,c,d,e)}Tb.prototype.wp=0;Tb.prototype.wk=i;Tb.prototype.vk=i;var Ub=0;Tb.prototype.reset=function(a,b,c,d,e){this.wp=typeof e=="number"?e:Ub++;this.Gn=d||Aa();this.qe=a;this.Um=b;this.Nm=c;delete this.wk;delete this.vk};Tb.prototype.aj=ba("qe");function Vb(a){this.gp=a}Vb.prototype.Yi=i;Vb.prototype.qe=i;Vb.prototype.qk=i;Vb.prototype.Eh=i;function Wb(a,b){this.name=a;this.value=b}Wb.prototype.toString=ea("name");var Xb=new Wb("SHOUT",1200),Yb=new Wb("SEVERE",1E3),Zb=new Wb("WARNING",900),$b=new Wb("INFO",800),ac=new Wb("CONFIG",700),bc=[new Wb("OFF",Infinity),Xb,Yb,Zb,$b,ac,new Wb("FINE",500),new Wb("FINER",400),new Wb("FINEST",300),new Wb("ALL",0)],cc=i;
function dc(a){if(!cc){cc={};for(var b=0,c;c=bc[b];b++)cc[c.value]=c,cc[c.name]=c}return cc[a]||i}r=Vb.prototype;r.getParent=ea("Yi");r.aj=ba("qe");function ec(a){if(a.qe)return a.qe;if(a.Yi)return ec(a.Yi);Bb("Root logger has no level set.");return i}r.log=function(a,b,c){if(a.value>=ec(this).value){a=this.$o(a,b,c);this.Mm("log:"+a.Um);for(b=this;b;){var c=b,d=a;if(c.Eh)for(var e=0,f=h;f=c.Eh[e];e++)f(d);b=b.getParent()}}};
r.$o=function(a,b,c){var d=new Tb(a,String(b),this.gp);if(c){d.wk=c;var e;var f=arguments.callee.caller;try{var g;var j=fa("window.location.href");if(ma(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,l,m=!1;try{k=c.lineNumber||c.kq||"Not available"}catch(q){k="Not available",m=!0}try{l=c.fileName||c.filename||c.sourceURL||j}catch(o){l="Not available",m=!0}g=m||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:l,stack:c.stack||"Not available"}:c}e="Message: "+rb(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+rb(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+rb(Pb(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.vk=e}return d};function fc(a,b){a.log(Zb,b,h)}r.info=function(a,b){this.log($b,a,b)};r.Mm=function(a){u.console&&u.console.markTimeline&&u.console.markTimeline(a)};
var gc={},hc=i;function ic(){hc||(hc=new Vb(""),gc[""]=hc,hc.aj(ac))}function E(a){ic();var b;if(!(b=gc[a])){b=new Vb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=E(a.substr(0,c));if(!c.qk)c.qk={};c.qk[d]=b;b.Yi=c;gc[a]=b}return b};function jc(){this.name="ogTexture";this.type=La;this.j=i;this.En="";this.status=ib}jc.prototype=new C;
jc.prototype.Ka=function(a){if(a==i)fc(E("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==i)fc(E("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=z)fc(E("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.j=this.parent.parent.c.nj.Fl(a.url,function(){b.status=hb;b.O&&b.O(b.id)},function(){b.status=3;b.N&&b.N(b.id)},!1);this.En=a.url}};
jc.prototype.jb=function(){if(this.j)this.parent.parent.c.nj.Hl(this.En),this.j=i,this.status=3};jc.prototype.U=function(a,b,c){this.status==hb&&this.j&&(c!=i?this.j.U(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.j.U(a,b))};var kc=6378137,lc=0.006694379990197,mc=0.006739496742,G=1.1920930376163766E-7;function H(a){return a*0.017453292519943295}function nc(a){return a*57.29577951308232}function oc(a){for(var b=1;a>b;)b*=2;return b};function pc(){this.name="ogCamera";this.type=Ra;this.ac=this.pitch=this.Sa=this.Vb=this.Xb=this.Yb=0}pc.prototype=new C;r=pc.prototype;r.jb=function(){this.ac=this.pitch=this.Sa=this.Vb=this.Xb=this.Yb=0};r.ya=function(a,b,c){this.Yb=a;this.Xb=b;this.Vb=c;this.parent.wf==this&&qc(this).ya(a,b,c)};r.df=function(){var a={};a.longitude=this.Yb;a.latitude=this.Xb;a.elevation=this.Vb;return a};r.Ab=function(a,b,c){this.Sa=a;this.pitch=b;this.ac=c;this==this.parent.wf&&qc(this).Ab(H(a),H(b),H(c))};
r.Mg=function(){var a={};a.yaw=this.Sa;a.pitch=this.pitch;a.roll=this.ac;return a};r.Yg=function(a,b,c,d){this==this.parent.wf&&qc(this).Yg(a,b,c,d)};function qc(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.S)b=a.e.S;return b}function rc(a){var b=qc(a),c=b.df(),b=b.Mg();a.Yb=c.longitude;a.Xb=c.latitude;a.Vb=c.elevation;a.Sa=nc(b.Sa);a.pitch=nc(b.pitch);a.ac=nc(b.ac)};function I(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.kc=new Float32Array([a,b,c])}r=I.prototype;r.n=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};r.La=function(){this.kc[0]=this.a[0];this.kc[1]=this.a[1];this.kc[2]=this.a[2];return this.kc};r.Kg=ea("a");r.bf=function(){var a=new I;a.n(this.a[0],this.a[1],this.a[2]);return a};r.Yn=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};r.Uj=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
r.so=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};r.bo=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function sc(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}r.co=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
r.Ij=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return Math.sqrt(a+b+c)};r.ro=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return a+b+c};r.Bc=function(){var a=this.Ij();a!=0&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};r.oo=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};r.dg=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};w("Cross",sc);w("vec3",I);I.prototype.Add=I.prototype.Yn;
I.prototype.Cross=I.prototype.bo;I.prototype.Dot=I.prototype.co;I.prototype.Get=I.prototype.Kg;I.prototype.Length=I.prototype.Ij;I.prototype.Neg=I.prototype.oo;I.prototype.Normalize=I.prototype.Bc;I.prototype.Set=I.prototype.n;I.prototype.SquaredLength=I.prototype.ro;I.prototype.Subtract=I.prototype.so;I.prototype.Sub=I.prototype.Uj;I.prototype.ToString=I.prototype.dg;function K(){this.a=Array(16);this.ii();this.kc=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}r=K.prototype;r.Fe=function(a){if(a.length==16)for(var b=0;b<16;b++)this.a[b]=a[b]};r.La=function(){for(var a=0;a<16;a++)this.kc[a]=this.a[a];return this.kc};r.Kg=ea("a");r.bf=function(){for(var a=new K,b=0;b<16;b++)a.a[b]=this.a[b];return a};r.da=function(a){for(var b=0;b<16;b++)this.a[b]=a.a[b]};
r.ii=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.to=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.cd=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.Rl=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};r.Vd=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return!0};
r.Rj=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};r.Vl=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
r.Wl=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
r.no=function(a,b,c,d,e,f,g,j,k){var l,m,q,o,d=a-d,e=b-e,f=c-f;o=1/Math.sqrt(d*d+e*e+f*f);d*=o;e*=o;f*=o;l=j*f-k*e;k=k*d-g*f;g=g*e-j*d;(o=Math.sqrt(l*l+k*k+g*g))?(o=1/o,l*=o,k*=o,g*=o):g=k=l=0;j=e*g-f*k;m=f*l-d*g;q=d*k-e*l;(o=Math.sqrt(j*j+m*m+q*q))?(o=1/o,j*=o,m*=o,q*=o):q=m=j=0;this.a[0]=l;this.a[4]=k;this.a[8]=g;this.a[12]=-(l*a+k*b+g*c);this.a[1]=j;this.a[5]=m;this.a[9]=q;this.a[13]=-(j*a+m*b+q*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
r.P=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],k=a.a[6],l=a.a[7],m=a.a[8],q=a.a[9],o=a.a[10],s=a.a[11],t=a.a[12],x=a.a[13],A=a.a[14],S=a.a[15],X=b.a[0],Q=b.a[1],ia=b.a[2],T=b.a[3],U=b.a[4],J=b.a[5],Y=b.a[6],Z=b.a[7],$=b.a[8],va=b.a[9],wa=b.a[10],xa=b.a[11],F=b.a[12],ca=b.a[13],qa=b.a[14],da=b.a[15];this.a[0]=X*c+Q*g+ia*m+T*t;this.a[1]=X*d+Q*j+ia*q+T*x;this.a[2]=X*e+Q*k+ia*o+T*A;this.a[3]=X*f+Q*l+ia*s+T*S;this.a[4]=U*c+J*g+Y*m+Z*t;this.a[5]=U*d+J*j+Y*q+Z*x;this.a[6]=U*
e+J*k+Y*o+Z*A;this.a[7]=U*f+J*l+Y*s+Z*S;this.a[8]=$*c+va*g+wa*m+xa*t;this.a[9]=$*d+va*j+wa*q+xa*x;this.a[10]=$*e+va*k+wa*o+xa*A;this.a[11]=$*f+va*l+wa*s+xa*S;this.a[12]=F*c+ca*g+qa*m+da*t;this.a[13]=F*d+ca*j+qa*q+da*x;this.a[14]=F*e+ca*k+qa*o+da*A;this.a[15]=F*f+ca*l+qa*s+da*S};r.eg=function(){for(var a=this.bf(),b=0;b<4;b++)for(var c=0;c<4;c++)this.a[4*b+c]=a.a[4*c+b]};
r.Ya=function(a){var b=new I;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
r.ho=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=e*2/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=e*2/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/k;this.a[14]=-(f*e*2)/k;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
r.Sl=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
r.Pl=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/k;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/k;this.a[15]=1};r.Ql=function(a,b,c,d){this.Pl(a,b,c,d,-1,1)};
r.Od=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.ao=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Bl=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Fg=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.eo=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],j=this.a[10];Math.abs(b)<1.0E-6&&Math.abs(d)<1.0E-6?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,j))};
r.af=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.zj=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.fo=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,j=d*d;this.a[0]=e+f-g-j;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-j;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+j;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Zf=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,j=a*b,k=a*c,l=b*c;a*=d;b*=d;c*=d;this.a[0]=1-2*f-2*g;this.a[4]=2*j+2*c;this.a[8]=2*k-2*b;this.a[12]=0;this.a[1]=2*j-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*l+2*a;this.a[13]=0;this.a[2]=2*k+2*b;this.a[6]=2*l-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.po=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],j=this.a[6],k=this.a[10],l=a+e+k;l>0?(l=Math.sqrt(l+1)*2,a=0.25*l,e=(j-f)/l,k=(c-g)/l,b=(d-b)/l):a>e&a>k?(l=Math.sqrt(1+a-e-k)*2,a=(j-f)/l,e=0.25*l,k=(b+d)/l,b=(c+g)/l):e>k?(l=Math.sqrt(1+e-a-k)*2,a=(c-g)/l,e=(b+d)/l,k=0.25*l,b=(f+j)/l):(l=Math.sqrt(1+k-a-e)*2,a=(d-b)/l,e=(c+g)/l,k=(f+j)/l,b=0.25*l);return[e,k,b,a]};
r.Ae=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],k=a.a[7],l=a.a[8],m=a.a[9],q=a.a[10],o=a.a[11],s=a.a[12],t=a.a[13],x=a.a[14],a=a.a[15],A=1/(b*g*q*a+b*j*o*t+b*k*m*x+c*f*o*x+c*j*l*a+c*k*q*s+d*f*m*a+d*g*o*s+d*k*l*t+e*f*q*t+e*g*l*x+e*j*m*s-b*g*o*x-b*j*m*a-b*k*q*t-c*f*q*a-c*j*o*s-c*k*l*x-d*f*o*t-d*g*l*a-d*k*m*s-e*f*m*x-e*g*q*s-e*j*l*t);this.a[0]=(g*q*a+j*o*t+k*m*x-g*o*x-j*m*a-k*q*t)*A;this.a[4]=(f*o*x+j*l*a+k*q*s-f*q*a-j*o*s-k*l*x)*A;this.a[8]=(f*m*a+g*o*s+k*l*t-f*o*
t-g*l*a-k*m*s)*A;this.a[12]=(f*q*t+g*l*x+j*m*s-f*m*x-g*q*s-j*l*t)*A;this.a[1]=(c*o*x+d*m*a+e*q*t-c*q*a-d*o*t-e*m*x)*A;this.a[5]=(b*q*a+d*o*s+e*l*x-b*o*x-d*l*a-e*q*s)*A;this.a[9]=(b*o*t+c*l*a+e*m*s-b*m*a-c*o*s-e*l*t)*A;this.a[13]=(b*m*x+c*q*s+d*l*t-b*q*t-c*l*x-d*m*s)*A;this.a[2]=(c*j*a+d*k*t+e*g*x-c*k*x-d*g*a-e*j*t)*A;this.a[6]=(b*k*x+d*f*a+e*j*s-b*j*a-d*k*s-e*f*x)*A;this.a[10]=(b*g*a+c*k*s+e*f*t-b*k*t-c*f*a-e*g*s)*A;this.a[14]=(b*j*t+c*f*x+d*g*s-b*g*x-c*j*s-d*f*t)*A;this.a[3]=(c*k*q+d*g*o+e*j*m-c*
j*o-d*k*m-e*g*q)*A;this.a[7]=(b*j*o+d*k*l+e*f*q-b*k*q-d*f*o-e*j*l)*A;this.a[11]=(b*k*m+c*f*o+e*g*l-b*g*o-c*k*l-e*f*m)*A;this.a[15]=(b*g*q+c*j*l+d*f*m-b*j*m-c*f*q-d*g*l)*A};r.dg=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};w("mat4",K);K.prototype.CalcBodyFrame=K.prototype.Fg;
K.prototype.CalcNavigationFrame=K.prototype.Od;K.prototype.Cami3d=K.prototype.af;K.prototype.CopyFrom=K.prototype.da;K.prototype.Copy=K.prototype.bf;K.prototype.Frustum=K.prototype.ho;K.prototype.Get=K.prototype.Kg;K.prototype.Identity=K.prototype.ii;K.prototype.Inverse=K.prototype.Ae;K.prototype.LookAt=K.prototype.no;K.prototype.Multiply=K.prototype.P;K.prototype.MultiplyVec3=K.prototype.Ya;K.prototype.Ortho2D=K.prototype.Ql;K.prototype.Ortho=K.prototype.Pl;K.prototype.OverwriteTranslation=K.prototype.Rl;
K.prototype.Perspective=K.prototype.Sl;K.prototype.RotationX=K.prototype.Rj;K.prototype.RotationY=K.prototype.Vl;K.prototype.RotationZ=K.prototype.Wl;K.prototype.Scale=K.prototype.Vd;K.prototype.SetFromArray=K.prototype.Fe;K.prototype.ToString=K.prototype.dg;K.prototype.Translation=K.prototype.cd;K.prototype.Transpose=K.prototype.eg;K.prototype.Zero=K.prototype.to;K.prototype.CalcNavigationFrame2=K.prototype.ao;K.prototype.CalcNavigationFrameZUp=K.prototype.Bl;K.prototype.ExtractEulerAngles=K.prototype.eo;
K.prototype.CamViewFrustum=K.prototype.zj;K.prototype.FromQuaternion=K.prototype.fo;K.prototype.FromQuaternionComponents=K.prototype.Zf;K.prototype.Rot2Quat=K.prototype.po;function tc(){this.ki=[];this.ji=[];this.ag=[];this.Gb={};this.Gb.x=0;this.Gb.y=0;this.Gb.h=0;this.Fd={};this.Fd.longitude=0;this.Fd.latitude=0;this.Fd.elevation=0;this.kd=!1;this.Va=[0,0];this.Mc=-1;this.Sk=0;this.xa=uc;this.ra=0}var uc=0,vc=1,wc=2,xc=3,yc=4,zc=5;tc.prototype.ya=function(a,b,c){this.Gb.x=a;this.Gb.y=b;this.Gb.h=c};tc.prototype.df=ea("Gb");function Ac(a,b,c,d){a.Fd.longitude=b;a.Fd.latitude=c;a.Fd.elevation=d};function Bc(){this.result={};this.result.J=0;this.result.Wc=0;this.result.Nd=0;this.Hb={};this.Hb.x=0;this.Hb.y=0;this.Hb.h=0;this.Ib={};this.Ib.x=0;this.Ib.y=0;this.Ib.h=0;this.mb={};this.mb.x=0;this.mb.y=0;this.mb.h=0;this.Qb={};this.Qb.x=0;this.Qb.y=0;this.Qb.h=0;this.Rb={};this.Rb.x=0;this.Rb.y=0;this.Si=this.Ke=this.Rb.h=0;this.Il=2.220446049250313E-16}
Bc.prototype.Gj=function(a,b,c,d,e,f,g,j,k,l,m,q,o,s,t){this.Hb.x=l-g;this.Hb.y=m-j;this.Hb.h=q-k;this.Ib.x=o-g;this.Ib.y=s-j;this.Ib.h=t-k;this.Qb.x=e*this.Ib.h-f*this.Ib.y;this.Qb.y=f*this.Ib.x-d*this.Ib.h;this.Qb.h=d*this.Ib.y-e*this.Ib.x;this.Ke=this.Hb.x*this.Qb.x+this.Hb.y*this.Qb.y+this.Hb.h*this.Qb.h;this.mb.x=a-g;this.mb.y=b-j;this.mb.h=c-k;this.Si=1/this.Ke;this.Rb.x=this.mb.y*this.Hb.h-this.mb.h*this.Hb.y;this.Rb.y=this.mb.h*this.Hb.x-this.mb.x*this.Hb.h;this.Rb.h=this.mb.x*this.Hb.y-this.mb.y*
this.Hb.x;if(this.Ke>this.Il){this.result.Wc=this.mb.x*this.Qb.x+this.mb.y*this.Qb.y+this.mb.h*this.Qb.h;if(this.result.Wc<0||this.result.Wc>this.Ke)return i;this.result.Nd=d*this.Rb.x+e*this.Rb.y+f*this.Rb.h;if(this.result.Nd<0||this.result.Wc+this.result.Nd>this.Ke)return i}else if(this.Ke<-this.Il){this.result.Wc=this.mb.x*this.Qb.x+this.mb.y*this.Qb.y+this.mb.h*this.Qb.h;if(this.result.Wc>0||this.result.Wc<this.Ke)return i;this.result.Nd=d*this.Rb.x+e*this.Rb.y+f*this.Rb.h;if(this.result.Nd>0||
this.result.Wc+this.result.Nd<this.Ke)return i}else return i;this.result.J=this.Ib.x*this.Rb.x+this.Ib.y*this.Rb.y+this.Ib.h*this.Rb.h;this.result.Wc*=this.Si;this.result.Nd*=this.Si;this.result.J*=this.Si;return this.result};w("TriangleIntersector",Bc);Bc.prototype.IntersectTriangle=Bc.prototype.Gj;function Cc(){this.Zh=this.$h=this.Xh=this.Yh=0;this.Ni=1;this.result={We:0,Ve:0}}
Cc.prototype.Ng=function(a,b,c,d,e,f,g,j,k,l,m,q){this.Ni=1;d>=0?(this.result.We=(g-a)/d,this.result.Ve=(l-a)/d):(this.result.We=(l-a)/d,this.result.Ve=(g-a)/d);e>=0?(this.Yh=(j-b)/e,this.Xh=(m-b)/e):(this.Yh=(m-b)/e,this.Xh=(j-b)/e);if(this.result.We>this.Xh||this.Yh>this.result.Ve)this.Ni=-1;if(this.Yh>this.result.We)this.result.We=this.Yh;if(this.Xh<this.result.Ve)this.result.Ve=this.Xh;f>=0?(this.$h=(k-c)/f,this.Zh=(q-c)/f):(this.$h=(q-c)/f,this.Zh=(k-c)/f);if(this.result.We>this.Zh||this.$h>
this.result.Ve)this.Ni=-1;if(this.$h>this.result.We)this.result.We=this.$h;if(this.Zh<this.result.Ve)this.result.Ve=this.Zh;return this.Ni>0?this.result:i};w("AABB",Cc);Cc.prototype.HitBox=Cc.prototype.Ng;function Dc(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.kc=new Float32Array([a,b,c,d])}Dc.prototype.n=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};Dc.prototype.La=function(){this.kc[0]=this.a[0];this.kc[1]=this.a[1];this.kc[2]=this.a[2];this.kc[3]=this.a[3];return this.kc};Dc.prototype.Kg=ea("a");Dc.prototype.dg=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};w("vec4",Dc);Dc.prototype.Get=Dc.prototype.Kg;Dc.prototype.Set=Dc.prototype.n;function Ec(a){var a=String(a),b;b=/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""));if(b)try{return eval("("+a+")")}catch(c){}aa(Error("Invalid JSON string: "+a))};function L(a){this.c=a;this.b=a.b;this.A=this.j=this.Jb=this.ca=i;this.mode="";this.Zb=this.ug=0;this.me=this.R=i;this.Da=!1;this.pm=this.ne=this.V=i;this.vm=new Dc;this.vm.n(1,1,1,1);this.wm=new Dc;this.wm.n(1,1,1,1);this.Kc=new Dc;this.Kc.n(1,1,1,1);this.Ac=new Dc;this.Ac.n(1,0,0,1);this.Fm=new Bc;this.Ga=this.ta=this.Z=i;this.Po=0;this.xi=new Cc;this.ha=i;this.Lh=this.T=0;this.C={};this.de=Array(3);this.ce=Array(3);this.se=new K;this.Vi=!1;this.Bb=-1}r=L.prototype;
r.kf=function(a,b,c,d){this.Kc.n(a,b,c,d)};function Fc(a,b){if(b.length%3==0)a.A=new Float32Array(b),a.mode="p",a.T=3}function Gc(a,b){if(b.length%8==0)a.A=new Float32Array(b),a.mode="pnt",a.T=8}function Hc(a,b){if(b.length%7==0)a.A=new Float32Array(b),a.mode="pc",a.T=7}function Ic(a,b){if(b.length%5==0)a.A=new Float32Array(b),a.mode="pt",a.T=5}function Jc(a,b){if(b.length%12==0)a.A=new Float32Array(b),a.mode="pnct",a.T=12}
function Kc(a,b){if(b.length%5==0)a.A=new Float32Array(b),a.mode="poi",a.T=5}function Lc(a,b,c){a.R=new Uint16Array(b);a.me=c;a.Zb=b.length;a.Da=!0;switch(c){case "TRIANGLES":a.Lh=b.length/3;break;case "TRIANGLESTRIP":a.Lh=b.length-2}}r.Gc=ba("j");
r.Ie=function(){this.ca=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ca);this.b.bufferData(this.b.ARRAY_BUFFER,this.A,this.b.STATIC_DRAW);this.Jb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Jb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.R,this.b.STATIC_DRAW)};
r.o=function(){if(this.ca)this.b.deleteBuffer(this.ca),this.ca=i;if(this.Jb)this.b.deleteBuffer(this.Jb),this.Jb=i;this.Vi?this.j.o():this.j=i;this.A=i;this.mode="";this.Zb=this.ug=0;this.me=this.R=i};
r.oa=function(a,b,c,d,e){if(this.Da){b=b||0;c=c||0;this.ca==i&&this.Ie();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ca);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Jb);this.ha&&(this.c.Dc(),this.se.P(this.ha,this.c.Mb),this.c.Fc(this.se));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,12,0);Mc(this.c.fb,this.c.ua,this.Ac);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,!1,32,24);var d=this.c.fb,e=this.c.Nk,f=this.c.Ih,g=this.c.rd;d.Pb&&(d.b.useProgram(d.Pb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Pb,"matModelView"),!1,f.La()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Pb,"matProjection"),!1,g.La()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Pb,"matNormal"),!1,e.La()),d.b.uniform1i(d.b.getUniformLocation(d.Pb,
"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);Nc(this.c.fb,this.c.ua,this.Kc);break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.fb;e=this.c.ua;f=this.Kc;d.wc&&(d.b.useProgram(d.wc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.wc,
"matMVP"),!1,e.La()),d.b.uniform1i(d.b.getUniformLocation(d.wc,"uTexture"),0),d.b.uniform4fv(d.b.getUniformLocation(d.wc,"uColor"),f.La()));break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,!1,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,!1,
48,40);d=this.c.fb;e=this.c.ua;d.vc&&(d.b.useProgram(d.vc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.vc,"matMVP"),!1,e.La()));break;case "font":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(d==i)d=this.vm;e=this.c.fb;f=this.c.ua;e.Nc&&(e.b.useProgram(e.Nc),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.Nc,"matMVP"),!1,f.La()),e.b.uniform4fv(e.b.getUniformLocation(e.Nc,
"uColor"),d.La()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(e==i)e=this.wm;d=this.c.fb;f=this.c.ua;d.Pc&&(d.b.useProgram(d.Pc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Pc,"matMVP"),!1,f.La()),d.b.uniform4fv(d.b.getUniformLocation(d.Pc,"uColor"),e.La()));break;case "blur":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,
3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);var d=this.c.fb,e=this.c.ua,g=this.j.width,j=this.j.height;d.Ob&&(f=new Float32Array([-1,-1,0,-1,1,-1,-1,0,0,0,1,0,-1,1,0,1,1,1]),g=new Float32Array([1/g,1/j]),j=new Float32Array([1,2,1,2,4,2,1,2,1]),d.b.useProgram(d.Ob),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ob,"matMVP"),!1,e.La()),d.b.uniform2fv(d.b.getUniformLocation(d.Ob,"uInvTexSize"),g),d.b.uniform1fv(d.b.getUniformLocation(d.Ob,"uKernel"),j),d.b.uniform1i(d.b.getUniformLocation(d.Ob,
"uTexture"),0),d.b.uniform2fv(d.b.getUniformLocation(d.Ob,"uOffset"),f));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.fb;e=this.c.ua;f=this.c.Mb;d.xc&&(d.b.useProgram(d.xc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.xc,"matM"),!1,f.La()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.xc,"matMVP"),!1,e.La()),d.b.uniform1i(d.b.getUniformLocation(d.xc,
"uTexture"),0));break;default:alert("unknown surface mode!!")}if(this.j)d=this.j,d.Sb&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,d.j));switch(this.me){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.Zb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.Zb,this.b.UNSIGNED_SHORT,0);break;
case "LINES":this.b.drawElements(this.b.LINES,this.Zb,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.Zb,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.Zb,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.ha&&this.c.Bd();if(this.j)a=this.j,a.Sb&&a.b.bindTexture(a.b.TEXTURE_2D,i);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);
this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
r.dc=function(a,b,c,d){d||(d=this);if(c)this.hd=c;if(b)this.he=b;if(a.BoundingBox)d.Z=a.BoundingBox[0],d.ta=a.BoundingBox[1];if(a.Offset)d.Ga=a.Offset;if(a.CurtainIndex)d.Po=a.CurtainIndex;switch(a.VertexSemantic){case "p":d.ug=a.Vertices.length/3;Fc(d,a.Vertices);d.mode="p";break;case "pnt":d.ug=a.Vertices.length/8;Gc(d,a.Vertices);d.mode="pnt";break;case "pc":d.ug=a.Vertices.length/7;d.mode="pc";Hc(d,a.Vertices);break;case "pt":d.ug=a.Vertices.length/5;d.mode="pt";Ic(d,a.Vertices);break;case "pnct":d.ug=
a.Vertices.length/12;d.mode="p";Jc(d,a.Vertices);break;default:alert("unknown surface mode!!")}Lc(d,a.Indices,a.IndexSemantic);if(a.DiffuseMap)d.j=new M(d.c),d.j.repeat=!0,N(d.j,a.DiffuseMap,function(){var a=d;a.Sb=!0;a.he&&a.he(a)},function(){var a=d;fc(E("owg.Mesh"),"Downloading Error: Texture not found...");a.hd&&a.hd(a)},!0),d.Vi=!0;a.Center&&d.Wg(a.Center[0],a.Center[1],a.Center[2]);d.Zb=a.Indices.length;if(!d.Vi)d.Sb=!0;d.pm&&d.pm();d.he&&!d.Vi&&d.he(d)};
function Oc(a,b,c,d){b==i?alert("invalid json-url"):(a.ne=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.ne,!0),a.he=c,a.hd=d,a.V.onreadystatechange=function(){if(a.V.readyState==4)if(a.V.status==404)a.hd&&a.hd(a);else{var b=Ec(a.V.responseText);a.dc(b,i,i,a)}},a.V.send())}
r.He=function(a,b,c,d,e,f){var g=!1,j,k,l,m;k=j=0;l=1.0E20;for(var q=0;q<this.Lh;q++){var o;o=q;switch(this.me){case "TRIANGLES":this.C.ai=this.A[this.R[o*3]*this.T];this.C.bi=this.A[this.R[o*3]*this.T+1];this.C.ci=this.A[this.R[o*3]*this.T+2];this.C.di=this.A[this.R[o*3+1]*this.T];this.C.ei=this.A[this.R[o*3+1]*this.T+1];this.C.fi=this.A[this.R[o*3+1]*this.T+2];this.C.qj=this.A[this.R[o*3+2]*this.T];this.C.rj=this.A[this.R[o*3+2]*this.T+1];this.C.sj=this.A[this.R[o*3+2]*this.T+2];break;case "TRIANGLESTRIP":o%
2==0?(this.C.ai=this.A[this.R[o]*this.T],this.C.bi=this.A[this.R[o]*this.T+1],this.C.ci=this.A[this.R[o]*this.T+2],this.C.di=this.A[this.R[o+1]*this.T],this.C.ei=this.A[this.R[o+1]*this.T+1],this.C.fi=this.A[this.R[o+1]*this.T+2]):(this.C.ai=this.A[this.R[o+1]*this.T],this.C.bi=this.A[this.R[o+1]*this.T+1],this.C.ci=this.A[this.R[o+1]*this.T+2],this.C.di=this.A[this.R[o]*this.T],this.C.ei=this.A[this.R[o]*this.T+1],this.C.fi=this.A[this.R[o]*this.T+2]);this.C.qj=this.A[this.R[o+2]*this.T];this.C.rj=
this.A[this.R[o+2]*this.T+1];this.C.sj=this.A[this.R[o+2]*this.T+2];break;default:fc(E("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.Ga&&(this.C.ai+=this.Ga[0],this.C.bi+=this.Ga[1],this.C.ci+=this.Ga[2],this.C.di+=this.Ga[0],this.C.ei+=this.Ga[1],this.C.fi+=this.Ga[2],this.C.qj+=this.Ga[0],this.C.rj+=this.Ga[1],this.C.sj+=this.Ga[2]);o=this.R[o]==this.R[o+1]||this.R[o]==this.R[o+2]||this.R[o+1]==this.R[o+2]?!1:!0;if(o){if(this.ha){o=new K;
o.da(this.se);var s=new I;s.n(this.C.ai,this.C.bi,this.C.ci);var t=new I;t.n(this.C.di,this.C.ei,this.C.fi);var x=new I;x.n(this.C.qj,this.C.rj,this.C.sj);s=o.Ya(s);t=o.Ya(t);o=o.Ya(x);o=this.Fm.Gj(a,b,c,d,e,f,s.a[0],s.a[1],s.a[2],t.a[0],t.a[1],t.a[2],o.a[0],o.a[1],o.a[2])}else o=this.Fm.Gj(a,b,c,d,e,f,this.C.ai,this.C.bi,this.C.ci,this.C.di,this.C.ei,this.C.fi,this.C.qj,this.C.rj,this.C.sj);if(o&&(g=!0,o.J<l&&o.J>0))l=o.J,j=o.Wc,k=o.Nd,m=q}}if(g)return a={},a.J=l,a.Wc=j,a.Nd=k,a.Mn=m,a;return i};
function Pc(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,j,k,l,m=0;m<a.A.length;m++)j=a.A[m*a.T],k=a.A[m*a.T+1],l=a.A[m*a.T+2],j>e&&(e=j),k>f&&(f=k),l>g&&(g=l),j<b&&(b=j),k<c&&(c=k),l<d&&(d=l);a.ha&&(m=new I(b,c,d),l=new I(e,c,d),j=new I(e,f,d),d=new I(b,f,d),k=new I(b,c,g),c=new I(b,f,g),e=new I(e,f,g),g=new I(b,f,g),b=a.ha.Ya(m),f=a.ha.Ya(l),j=a.ha.Ya(j),d=a.ha.Ya(d),k=a.ha.Ya(k),c=a.ha.Ya(c),l=a.ha.Ya(e),m=a.ha.Ya(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],k.a[0],c.a[0],l.a[0],m.a[0]],
g=[b.a[1],f.a[1],j.a[1],d.a[1],k.a[1],c.a[1],l.a[1],m.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],k.a[2],c.a[2],l.a[2],m.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.Ga&&(b+=a.Ga[0],c+=a.Ga[1],d+=a.Ga[2],e+=a.Ga[0],f+=a.Ga[1],g+=a.Ga[2]);if(a.Z===i)a.Z=Array(3);if(a.ta===i)a.ta=Array(3);a.Z[0]=b;a.Z[1]=c;a.Z[2]=d;a.ta[0]=e;a.ta[1]=f;a.ta[2]=g}
r.jm=function(a,b,c,d,e,f){return this.xi.Ng(a,b,c,d,e,f,this.Z[0],this.Z[1],this.Z[2],this.ta[0],this.ta[1],this.ta[2])};r.Vg=function(a,b,c,d,e,f){var g=this.c.Ca.a,j=new K;this.de[0]=a;this.de[1]=b;this.de[2]=c;this.ce[0]=d||0;this.ce[1]=e||0;this.ce[2]=f||0;j.Fe([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.de[0],this.de[1],this.de[2],1]);a=new K;a.cd(this.ce[0],this.ce[1],this.ce[2]);b=new K;b.P(j,a);this.ha=b};
function Qc(a){a.Vg(a.de[0],a.de[1],a.de[2],a.ce[0],a.ce[1],a.ce[2])}
r.Wg=function(a,b,c,d,e,f){this.Yb=a;this.Xb=b;this.Vb=c;var g=new O(a,b,c),c=Array(3);g.ma(c);(new K).cd(c[0],c[1],c[2]);g=new K;g.Od(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new K;b.Fe(a);a=new K;a.Vd(G,G,G);c=new K;c.P(b,a);b=new K;g=new K;a=new K;d?b.Rj(e*Math.PI/180):b.Rj(-1.57079633);e&&g.Vl(d*Math.PI/180+1.57079633);f&&a.Wl(f*Math.PI/180);d=new K;
d.P(b,g);e=new K;e.P(d,a);d=new K;d.P(c,e);this.ha=d;Pc(this)};r.lf=function(a,b,c){var d=new K;d.Vd(a,b,c);a=new K;b=this.ha.bf();a.P(b,d);this.ha=a};
r.Ab=function(a,b,c){var d=H(a),e=H(b),f=H(c),c=new K,b=Math.cos(d),a=Math.cos(e),g=Math.cos(f),d=Math.sin(d),e=Math.sin(e),f=Math.sin(f);c.a[0]=a*g;c.a[1]=d*e*g+b*f;c.a[2]=-b*e*g+d*f;c.a[3]=0;c.a[4]=-a*f;c.a[5]=-d*e*f+b*g;c.a[6]=b*e*f+d*g;c.a[7]=0;c.a[8]=e;c.a[9]=-d*a;c.a[10]=b*a;c.a[11]=0;c.a[12]=0;c.a[13]=0;c.a[14]=0;c.a[15]=1;b=this.ha.bf();a=new K;a.P(b,c);this.ha=a};
r.da=function(a){this.Gc(a.j);this.A=a.A;this.mode=a.mode;this.T=a.T;this.R=a.R;this.me=a.me;this.Zb=a.Zb;this.Da=a.Da;this.Lh=a.Lh;this.ca=a.ca;this.Jb=a.Jb;this.ha=a.ha;this.me=a.me};
function Rc(a,b,c,d){var e=b[0],f=b[1],b=b[2],g=c[0],j=c[1],c=c[2],k={VertexSemantic:"",Vertices:i,IndexSemantic:"",Indices:i,VertexSemantic:"p"};k.Vertices=[-0.5*g+e,-0.5*j+f,-0.5*c+b,-0.5*g+e,-0.5*j+f,0.5*c+b,0.5*g+e,-0.5*j+f,-0.5*c+b,0.5*g+e,-0.5*j+f,0.5*c+b,0.5*g+e,0.5*j+f,-0.5*c+b,0.5*g+e,0.5*j+f,0.5*c+b,-0.5*g+e,0.5*j+f,-0.5*c+b,-0.5*g+e,0.5*j+f,0.5*c+b];k.IndexSemantic="TRIANGLES";k.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];v(d)&&(d.length==4?a.Ac.n(d[0],
d[1],d[2],d[3]):d.length==3&&a.Ac.n(d[0],d[1],d[2],1));a.dc(k,i,i);Pc(a)}function Sc(a){var b=[],c=a[0],d=a[1],a=a[2],e=c*c+d*d;e/=0.578106683090441;e+=a*a/0.5742366172789609;e=Math.sqrt(e);e=1/e;b.push(e*c);b.push(e*d);b.push(e*a);return b}
function Tc(a,b,c){var d=Math.sqrt(0.578106683090441),e={VertexSemantic:"",Vertices:i,IndexSemantic:"",Indices:i,VertexSemantic:"p"};e.Vertices=[-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0];e.IndexSemantic="TRIANGLES";e.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];v(b)&&(b.length==4?a.Ac.n(b[0],b[1],b[2],
b[3]):b.length==3&&a.Ac.n(b[0],b[1],b[2],1));b=e.Vertices;for(d=0;d<c;d++){for(var f=[],g=e.Indices,j=0;j<g.length;j+=3){for(var k=g[j],l=g[j+1],m=g[j+2],q=[(b[k*3+0]+b[l*3+0])/2,(b[k*3+1]+b[l*3+1])/2,(b[k*3+2]+b[l*3+2])/2],q=Sc(q),o=[(b[l*3+0]+b[m*3+0])/2,(b[l*3+1]+b[m*3+1])/2,(b[l*3+2]+b[m*3+2])/2],o=Sc(o),s=[(b[m*3+0]+b[k*3+0])/2,(b[m*3+1]+b[k*3+1])/2,(b[m*3+2]+b[k*3+2])/2],s=Sc(s),t=-1,x=-1,A=-1,S=0;S<b.length/3;S+=3){for(var X=!0,Q=!0,ia=!0,T=0;T<3;T++)Math.abs(b[S+T]-q[T])>1.0E-7&&(X&=0),Math.abs(b[S+
T]-o[T])>1.0E-7&&(Q&=0),Math.abs(b[S+T]-s[T])>1.0E-7&&(ia&=0);X&&(t=S/3);Q&&(x=S/3);ia&&(A=S/3)}t==-1&&(t=b.length/3,b.push(q[0]),b.push(q[1]),b.push(q[2]));x==-1&&(x=b.length/3,b.push(o[0]),b.push(o[1]),b.push(o[2]));A==-1&&(A=b.length/3,b.push(s[0]),b.push(s[1]),b.push(s[2]));f.push(k);f.push(t);f.push(A);f.push(l);f.push(x);f.push(t);f.push(m);f.push(A);f.push(x);f.push(t);f.push(x);f.push(A)}e.Indices=f}a.dc(e,i,i);Pc(a)}w("Surface",L);L.prototype.Draw=L.prototype.oa;L.prototype.CopyFrom=L.prototype.da;
L.prototype.SetAsBillboard=L.prototype.Vg;L.prototype.SetTexture=L.prototype.Gc;L.prototype.TestBoundingBoxIntersection=L.prototype.jm;L.prototype.TestRayIntersection=L.prototype.He;var Uc="art/";function M(a,b,c,d,e){this.c=a;this.b=a.b;this.j=i;this.Mi=this.Sb=!1;this.Ua=i;this.height=this.width=0;this.sq=i;this.Am=this.On=!1;b&&Vc(this,c||0,d||0,e||!1);this.repeat=!1}
function Vc(a,b,c,d){Wc(a);a.zc=a.b.createFramebuffer();a.b.bindFramebuffer(a.b.FRAMEBUFFER,a.zc);a.zc.width=b;a.zc.height=c;a.j=a.b.createTexture();a.b.bindTexture(a.b.TEXTURE_2D,a.j);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MAG_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MIN_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_S,a.b.CLAMP_TO_EDGE);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_T,a.b.CLAMP_TO_EDGE);a.b.texImage2D(a.b.TEXTURE_2D,0,a.b.RGBA,
a.zc.width,a.zc.height,0,a.b.RGBA,a.b.UNSIGNED_BYTE,i);a.Zi=a.b.createRenderbuffer();a.b.bindRenderbuffer(a.b.RENDERBUFFER,a.Zi);d&&a.b.renderbufferStorage(a.b.RENDERBUFFER,a.b.DEPTH_STENCIL,a.zc.width,a.zc.height);a.b.framebufferTexture2D(a.b.FRAMEBUFFER,a.b.COLOR_ATTACHMENT0,a.b.TEXTURE_2D,a.j,0);d&&a.b.framebufferRenderbuffer(a.b.FRAMEBUFFER,a.b.DEPTH_STENCIL_ATTACHMENT,a.b.RENDERBUFFER,a.Zi);a.b.bindTexture(a.b.TEXTURE_2D,i);a.b.bindRenderbuffer(a.b.RENDERBUFFER,i);a.b.bindFramebuffer(a.b.FRAMEBUFFER,
i);a.Sb=!0;a.On=!0;a.width=b;a.height=c}function Wc(a){if(a.zc!=i&&(a.b.deleteRenderbuffer(a.Zi),a.Zi=i,a.b.deleteFramebuffer(a.zc),a.zc=i,a.b.deleteTexture(a.j),a.j=i,a.Ua))a.Ua.o(),a.Ua=i}
function N(a,b,c,d,e){a.Am=v(e)?e:!1;a.j=a.b.createTexture();var f=a.j,g=a.b;a.j.Pe=new Image;a.j.Pe.crossOrigin="anonymous";a.j.Pe.onload=function(){g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,a.Am);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.Pe);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);a.repeat?(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.REPEAT),g.texParameteri(g.TEXTURE_2D,
g.TEXTURE_WRAP_T,g.REPEAT)):(g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE),g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,g.CLAMP_TO_EDGE));g.bindTexture(g.TEXTURE_2D,i);a.width=f.Pe.width;a.height=f.Pe.height;c!=i&&c(a);a.Sb=!0};a.j.Pe.onerror=function(){fc(E("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.Mi=!0;d&&d(a)};a.j.Pe.src=b}r=M.prototype;
r.U=function(a,b,c,d,e,f,g,j,k,l){c=c||0;d=d||0;e=e||1;f=f||1;g=g||!1;j=j||!1;k=k||1;if(this.Sb){var m=this.width,q=this.height,o=this.width/2,s=this.height/2;this.c.Dc();this.c.Tj();var d=H(d),t=new K;d>0?t.Fe([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*o+Math.sin(d)*e*s+e*o+a,-Math.cos(d)*f*s-Math.sin(d)*f*o+f*s+b,c,1]):(t.cd(a,b,c),a=new K,a.Vd(e,f,1),t.P(t,a));this.c.Fc(t);if(this.Ua===i)this.Ua=new L(this.c),j?Kc(this.Ua,[0,0,0,0,0,m,0,0,1,0,m,q,0,
1,1,0,q,0,0,1]):Kc(this.Ua,[0,0,0,0,1,m,0,0,1,1,m,q,0,1,0,0,q,0,0,0]),Lc(this.Ua,[0,1,2,0,2,3],"TRIANGLES"),this.Ua.Gc(this);g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);k<1&&(this.c.b.blendColor(0,0,0,k),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Ua.oa(i,i,i,i,l);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.Bd()}};r.o=function(){this.j.Pe=i;this.c.b.deleteTexture(this.j);this.j=i;this.Mi=this.Sb=!1;if(this.Ua)this.Ua.o(),this.Ua=i;Wc(this)};r.dh=function(){this.On&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.zc),this.b.viewport(0,0,this.zc.width,this.zc.height))};r.km=function(){this.b.bindTexture(this.b.TEXTURE_2D,i);this.b.bindFramebuffer(this.b.FRAMEBUFFER,i);this.b.viewport(0,0,this.c.width,this.c.height)};
r.da=function(a){this.j=a.j;this.Sb=a.Sb;this.Mi=a.Mi;this.height=this.width=this.Ua=a.Ua};w("Texture",M);M.prototype.CopyFrom=M.prototype.da;M.prototype.Blit=M.prototype.U;M.prototype._EnableRenderToTexture=M.prototype.dh;M.prototype._DisableRenderToTexture=M.prototype.km;function O(a,b,c){this.G=new Float32Array([a,b,c])}O.prototype.n=function(a,b,c){this.G[0]=a;this.G[1]=b;this.G[2]=c};O.prototype.ma=function(a){var b=Math.sin(H(this.G[1])),c=Math.cos(H(this.G[1])),d=Math.sin(H(this.G[0])),e=kc/Math.sqrt(1-lc*b*b);a[0]=(e+this.G[2])*c*Math.cos(H(this.G[0]));a[1]=(e+this.G[2])*c*d;a[2]=(0.993305620011365*e+this.G[2])*b;a[0]*=G;a[1]*=G;a[2]*=G};
O.prototype.ec=function(a,b,c){var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0;a*=8388607;b*=8388607;c*=8388607;for(var k=0;k<10;k++)g=Math.sin(e),g*=g,j=Math.cos(e),g=kc/Math.sqrt(1-lc*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*lc/(g+f));this.G[0]=nc(d);this.G[1]=nc(e);this.G[2]=f};O.prototype.dg=function(){return" Longitude: "+this.G[0].toPrecision(17)+" Latitude: "+this.G[1].toPrecision(17)+" Elevation: "+this.G[2].toPrecision(17)};w("GeoCoord",O);
O.prototype.FromCartesian=O.prototype.ec;O.prototype.ToCartesian=O.prototype.ma;O.prototype.ToString=O.prototype.dg;function Xc(a){this.c=a;this.b=a.b;this.ha=this.ca=this.ve=i;this.se=new K;this.$k=[];this.pj=this.Wi=this.Ga=0}r=Xc.prototype;r.qi=function(a){this.Wi+=a.length/7;if(this.pj==0)this.pj=this.Wi*70;this.ve=i;this.ve=new Float32Array(a);this.Ie()};r.o=function(){if(this.ca)this.b.deleteBuffer(this.ca),this.ca=i;this.ca=this.ve=i};
r.Wg=function(a,b,c){var d=new O(a,b,c),c=Array(3);d.ma(c);(new K).cd(c[0],c[1],c[2]);d=new K;d.Bl(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new K;b.Fe(a);a=new K;a.Vd(G,G,G);c=new K;c.P(b,a);a=new K;b=new K;b.P(c,a);this.ha=b};
r.oa=function(){if(this.ve!=i){this.ca||this.Ie();this.ha&&(this.c.Dc(),this.se.P(this.ha,this.c.Mb),this.c.Fc(this.se));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ca);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);var a=new K;a.Ae(this.c.ua);var b=this.c.fb,c=this.c.ua;b.Qc&&(b.b.useProgram(b.Qc),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Qc,"matMVP"),!1,c.La()),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Qc,
"matInvMVP"),!1,a.La()));this.b.drawArrays(this.b.POINTS,0,this.Wi);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.ha&&this.c.Bd()}};
r.Ie=function(){this.ca===i?(this.ca=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ca),this.b.bufferData(this.b.ARRAY_BUFFER,this.pj,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.ve)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ca),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.Ga,this.ve));this.Ga+=this.ve.length*4};var Yc,Zc,$c,ad,bd;function cd(){return u.navigator?u.navigator.userAgent:i}ad=$c=Zc=Yc=!1;var dd;if(dd=cd()){var ed=u.navigator;Yc=dd.indexOf("Opera")==0;Zc=!Yc&&dd.indexOf("MSIE")!=-1;$c=!Yc&&dd.indexOf("WebKit")!=-1;ad=!Yc&&!$c&&ed.product=="Gecko"}var fd=Yc,gd=Zc,hd=ad,id=$c,jd,kd=u.navigator;jd=kd&&kd.platform||"";bd=jd.indexOf("Mac")!=-1;var ld=jd.indexOf("Win")!=-1,md;
a:{var nd="",od;if(fd&&u.opera)var pd=u.opera.version,nd=typeof pd=="function"?pd():pd;else if(hd?od=/rv\:([^\);]+)(\)|;)/:gd?od=/MSIE\s+([^\);]+)(\)|;)/:id&&(od=/WebKit\/(\S+)/),od)var qd=od.exec(cd()),nd=qd?qd[1]:"";if(gd){var rd,sd=u.document;rd=sd?sd.documentMode:h;if(rd>parseFloat(nd)){md=String(rd);break a}}md=nd}var td={};function ud(a){return td[a]||(td[a]=yb(md,a)>=0)};var vd;var wd="dblclick",xd="mousedown",yd="mouseup",zd="mousemove",Ad="keydown",Bd="keyup";var Cd=!gd||ud("9"),Dd=gd&&!ud("8");function Ed(){Fd&&(Gd[pa(this)]=this)}var Fd=!1,Gd={};Ed.prototype.ym=!1;Ed.prototype.wh=function(){if(!this.ym&&(this.ym=!0,this.Ed(),Fd)){var a=pa(this);Gd.hasOwnProperty(a)||aa(Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call"));delete Gd[a]}};Ed.prototype.Ed=n();function Hd(a,b){Ed.call(this);this.type=a;this.currentTarget=this.target=b}Ba(Hd,Ed);r=Hd.prototype;r.Ed=function(){delete this.type;delete this.target;delete this.currentTarget};r.Rf=!1;r.Uh=!0;r.stopPropagation=function(){this.Rf=!0};r.preventDefault=function(){this.Uh=!1};var Id=new Function("a","return a");function Jd(a,b){a&&this.Gd(a,b)}Ba(Jd,Hd);var Kd=0,Ld=1,Md=2,Nd=[1,4,2];r=Jd.prototype;r.target=i;r.relatedTarget=i;r.offsetX=0;r.offsetY=0;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.button=0;r.keyCode=0;r.charCode=0;r.ctrlKey=!1;r.altKey=!1;r.shiftKey=!1;r.metaKey=!1;r.np=!1;r.le=i;
r.Gd=function(a,b){var c=this.type=a.type;Hd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(hd)try{Id(d.nodeName)}catch(e){d=i}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||
0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.np=bd?a.metaKey:a.ctrlKey;this.state=a.state;this.le=a;delete this.Uh;delete this.Rf};function Od(a,b){return Cd?a.le.button==b:a.type=="click"?b==Kd:!!(a.le.button&Nd[b])}
r.stopPropagation=function(){Jd.Vf.stopPropagation.call(this);this.le.stopPropagation?this.le.stopPropagation():this.le.cancelBubble=!0};r.preventDefault=function(){Jd.Vf.preventDefault.call(this);var a=this.le;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Dd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};r.Ed=function(){Jd.Vf.Ed.call(this);this.relatedTarget=this.currentTarget=this.target=this.le=i};function Pd(){}var Qd=0;r=Pd.prototype;r.key=0;r.xg=!1;r.om=!1;r.Gd=function(a,b,c,d,e,f){na(a)?this.Hm=!0:a&&a.handleEvent&&na(a.handleEvent)?this.Hm=!1:aa(Error("Invalid listener argument"));this.Hh=a;this.qn=b;this.src=c;this.type=d;this.capture=!!e;this.Ik=f;this.om=!1;this.key=++Qd;this.xg=!1};r.handleEvent=function(a){if(this.Hm)return this.Hh.call(this.Ik||this.src,a);return this.Hh.handleEvent.call(this.Hh,a)};var Rd,Sd=(Rd="ScriptEngine"in u&&u.ScriptEngine()=="JScript")?u.ScriptEngineMajorVersion()+"."+u.ScriptEngineMinorVersion()+"."+u.ScriptEngineBuildVersion():"0";function Td(a,b){Ed.call(this);this.Om=b;this.Df=[];a>this.Om&&aa(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.Df.push(this.sh())}Ba(Td,Ed);r=Td.prototype;r.Bf=i;r.xm=i;r.getObject=function(){if(this.Df.length)return this.Df.pop();return this.sh()};function Ud(a,b){a.Df.length<a.Om?a.Df.push(b):a.sk(b)}r.sh=function(){return this.Bf?this.Bf():{}};r.sk=function(a){if(this.xm)this.xm(a);else if(oa(a))if(na(a.wh))a.wh();else for(var b in a)delete a[b]};
r.Ed=function(){Td.Vf.Ed.call(this);for(var a=this.Df;a.length;)this.sk(a.pop());delete this.Df};var Vd,Wd,Xd,Yd,Zd,$d,ae,be,ce,de,ee;
(function(){function a(){return{Pa:0,xd:0}}function b(){return[]}function c(){function a(b){return g.call(a.src,a.key,b)}return a}function d(){return new Pd}function e(){return new Jd}var f=Rd&&!(yb(Sd,"5.7")>=0),g;$d=function(a){g=a};if(f){Vd=function(){return j.getObject()};Wd=function(a){Ud(j,a)};Xd=function(){return k.getObject()};Yd=function(a){Ud(k,a)};Zd=function(){return l.getObject()};ae=function(){Ud(l,c())};be=function(){return m.getObject()};ce=function(a){Ud(m,a)};de=function(){return q.getObject()};
ee=function(a){Ud(q,a)};var j=new Td(0,600);j.Bf=a;var k=new Td(0,600);k.Bf=b;var l=new Td(0,600);l.Bf=c;var m=new Td(0,600);m.Bf=d;var q=new Td(0,600);q.Bf=e}else Vd=a,Wd=ga,Xd=b,Yd=ga,Zd=c,ae=ga,be=d,ce=ga,de=e,ee=ga})();var fe={},ge={},he={},ie={};
function P(a,b,c,d,e){if(b)if(ka(b)){for(var f=0;f<b.length;f++)P(a,b[f],c,d,e);return i}else{var d=!!d,g=ge;b in g||(g[b]=Vd());g=g[b];d in g||(g[d]=Vd(),g.Pa++);var g=g[d],j=pa(a),k;g.xd++;if(g[j]){k=g[j];for(f=0;f<k.length;f++)if(g=k[f],g.Hh==c&&g.Ik==e){if(g.xg)break;return k[f].key}}else k=g[j]=Xd(),g.Pa++;f=Zd();f.src=a;g=be();g.Gd(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);fe[c]=g;he[j]||(he[j]=Xd());he[j].push(g);a.addEventListener?(a==u||!a.um)&&a.addEventListener(b,f,d):a.attachEvent(je(b),
f);return c}else aa(Error("Invalid event type"))}function ke(a,b,c,d,e){if(ka(b))for(var f=0;f<b.length;f++)ke(a,b[f],c,d,e);else{d=!!d;a:{f=ge;if(b in f&&(f=f[b],d in f&&(f=f[d],a=pa(a),f[a]))){a=f[a];break a}a=i}if(a)for(f=0;f<a.length;f++)if(a[f].Hh==c&&a[f].capture==d&&a[f].Ik==e){R(a[f].key);break}}}
function R(a){if(fe[a]){var b=fe[a];if(!b.xg){var c=b.src,d=b.type,e=b.qn,f=b.capture;c.removeEventListener?(c==u||!c.um)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(je(d),e);c=pa(c);e=ge[d][f][c];if(he[c]){var g=he[c],j=Db(g,b);j>=0&&Cb.splice.call(g,j,1);g.length==0&&delete he[c]}b.xg=!0;e.hn=!0;le(d,f,c,e);delete fe[a]}}}
function le(a,b,c,d){if(!d.Ui&&d.hn){for(var e=0,f=0;e<d.length;e++)if(d[e].xg){var g=d[e].qn;g.src=i;ae(g);ce(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.hn=!1;f==0&&(Yd(d),delete ge[a][b][c],ge[a][b].Pa--,ge[a][b].Pa==0&&(Wd(ge[a][b]),delete ge[a][b],ge[a].Pa--),ge[a].Pa==0&&(Wd(ge[a]),delete ge[a]))}}
function me(a){var b,c=0,d=b==i;b=!!b;if(a==i)kb(he,function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)R(f.key),c++}});else if(a=pa(a),he[a])for(var a=he[a],e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)R(f.key),c++}}function je(a){if(a in ie)return ie[a];return ie[a]="on"+a}
function ne(a,b,c,d,e){var f=1,b=pa(b);if(a[b]){a.xd--;a=a[b];a.Ui?a.Ui++:a.Ui=1;try{for(var g=a.length,j=0;j<g;j++){var k=a[j];k&&!k.xg&&(f&=oe(k,e)!==!1)}}finally{a.Ui--,le(c,d,b,a)}}return Boolean(f)}function oe(a,b){var c=a.handleEvent(b);a.om&&R(a.key);return c}
$d(function(a,b){if(!fe[a])return!0;var c=fe[a],d=c.type,e=ge;if(!(d in e))return!0;var e=e[d],f,g;vd===h&&(vd=gd&&!u.addEventListener);if(vd){f=b||fa("window.event");var j=!0 in e,k=!1 in e;if(j){if(f.keyCode<0||f.returnValue!=h)return!0;a:{var l=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(m){l=!0}if(l||f.returnValue==h)f.returnValue=!0}}l=de();l.Gd(f,this);f=!0;try{if(j){for(var q=Xd(),o=l.currentTarget;o;o=o.parentNode)q.push(o);g=e[!0];g.xd=g.Pa;for(var s=q.length-1;!l.Rf&&s>=0&&g.xd;s--)l.currentTarget=
q[s],f&=ne(g,q[s],d,!0,l);if(k){g=e[!1];g.xd=g.Pa;for(s=0;!l.Rf&&s<q.length&&g.xd;s++)l.currentTarget=q[s],f&=ne(g,q[s],d,!1,l)}}else f=oe(c,l)}finally{if(q)q.length=0,Yd(q);l.wh();ee(l)}return f}d=new Jd(b,this);try{f=oe(c,d)}finally{d.wh()}return f});function pe(){this.Bh=[];this.Uk=new Mb;this.In=this.Jn=this.Kn=this.zn=0;this.Kd=new Mb;this.qm=this.Hn=0;this.hp=1;this.tk=new Td(0,4E3);this.tk.sh=function(){return new qe};this.An=new Td(0,50);this.An.sh=function(){return new re};var a=this;this.Kk=new Td(0,2E3);this.Kk.sh=function(){return String(a.hp++)};this.Kk.sk=n();this.To=3}function re(){this.il=this.Fn=this.count=0}
re.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(this.Fn*10)/10," ms)");this.il&&a.push(" [VarAlloc = ",this.il,"]");return a.join("")};function qe(){}function se(a,b,c,d){var e=[];c==-1?e.push("    "):e.push(te(a.zm-c));e.push(" ",ue(a.zm-b));a.uk==0?e.push(" Start        "):a.uk==1?(e.push(" Done "),e.push(te(a.vq-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);a.Fp>0&&e.push("[VarAlloc ",a.Fp,"] ");return e.join("")}
qe.prototype.toString=function(){return this.type==i?this.Oo:"["+this.type+"] "+this.Oo};pe.prototype.reset=function(a){this.To=a;for(a=0;a<this.Bh.length;a++){var b=this.tk.id;b&&Ud(this.Kk,b);Ud(this.tk,this.Bh[a])}this.Bh.length=0;this.Uk.clear();this.zn=Aa();this.qm=this.Hn=this.In=this.Jn=this.Kn=0;b=this.Kd.Pi();for(a=0;a<b.length;a++){var c=this.Kd.get(b[a]);c.count=0;c.Fn=0;c.il=0;Ud(this.An,c)}this.Kd.clear()};
pe.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Bh.length;d++){var e=this.Bh[d];e.uk==1&&c.pop();a.push(" ",se(e,this.zn,b,c.join("")));b=e.zm;a.push("\n");e.uk==0&&c.push("|  ")}if(this.Uk.Ff()!=0){var f=Aa();a.push(" Unstopped timers:\n");Lb(this.Uk,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",ue(b.startTime),")\n")})}b=this.Kd.Pi();for(d=0;d<b.length;d++)c=this.Kd.get(b[d]),c.count>1&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.Hn,"\n","Total comments created ",
this.qm,"\n","Overhead start: ",this.Kn," ms\n","Overhead end: ",this.Jn," ms\n","Overhead comment: ",this.In," ms\n");return a.join("")};pe.prototype.Mm=function(a){u.console&&u.console.markTimeline&&u.console.markTimeline(a)};function te(a){var a=Math.round(a),b="";a<1E3&&(b=" ");a<100&&(b="  ");a<10&&(b="   ");return b+a}function ue(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new pe;new Td(0,100);var ve=0;function we(){this.Pp=ve;ve++;this.ad=n();this.bd=n();this.$c=n();this.Ce=n();this.Be=n();this.De=n();this.bg=n();this.Ee=n();this.Qp=this.c=i;this.xq=[]}function xe(a){a.De(a.c.H);a.Ce()}we.prototype.Cc=function(){this.bg();this.Be()};function ye(){Ed.call(this)}Ba(ye,Ed);r=ye.prototype;r.um=!0;r.Vk=i;r.addEventListener=function(a,b,c,d){P(this,a,b,c,d)};r.removeEventListener=function(a,b,c,d){ke(this,a,b,c,d)};
r.dispatchEvent=function(a){var b=a.type||a,c=ge;if(b in c){if(ma(a))a=new Hd(a,this);else if(a instanceof Hd)a.target=a.target||this;else{var d=a,a=new Hd(b,this);nb(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.Vk)e.push(f);f=c[!0];f.xd=f.Pa;for(var g=e.length-1;!a.Rf&&g>=0&&f.xd;g--)a.currentTarget=e[g],d&=ne(f,e[g],a.type,!0,a)&&a.Uh!=!1}if(!1 in c)if(f=c[!1],f.xd=f.Pa,b)for(g=0;!a.Rf&&g<e.length&&f.xd;g++)a.currentTarget=e[g],d&=ne(f,e[g],a.type,!1,a)&&a.Uh!=!1;else for(e=this;!a.Rf&&
e&&f.xd;e=e.Vk)a.currentTarget=e,d&=ne(f,e,a.type,!1,a)&&a.Uh!=!1;a=Boolean(d)}else a=!0;return a};r.Ed=function(){ye.Vf.Ed.call(this);me(this);this.Vk=i};function ze(){this.cj=this.mj=this.kj=this.lj=this.jj=this.hj=this.ij=this.gj=this.ej=this.fj=this.dj=this.Ag=this.Bg=this.Xf=this.zg=this.Hi=this.Fi=this.lq=i;this.Rk=this.Qk=0;this.mc=!1;this.elevation=this.latitude=this.longitude=this.Sa=0;this.Mc=-1;this.eb=this.kb=0;this.$=Ae;this.kg=0;this.pd=48;this.Tc=this.bj=this.we=this.bc=this.Dg=this.Tb=this.rc=this.wb=0;this.lm=!1;this.sm=this.rm=0;this.Kc=new Dc(0.7,0.9,1,1);this.$c=n();this.gc=function(a){for(;a>360;)a-=360;for(;a<0;)a+=360;return a};
this.ad=function(){if(this.Mc==0)this.mc&&(this.Hi.U(this.Qk-64,this.Rk-64,0,this.Sa,1,1,!0,!1),this.Fi.U(this.Qk-64,this.Rk-64,0,0,1,1,!0,!1)),this.c.ye("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(this.Mc==1){this.lm&&this.cj.U(this.rm-16,this.sm-16,0,0,1,1,!0,!1,0.75);var a=this.c.width-1-64-this.kg,b=this.c.height-1-this.pd,c=this.gc(this.Dg+this.bj);this.$==Be?this.Ag.U(a-64,b-64,0,c,1,1,!0,!1,1,this.Kc):this.$==
Ce?this.Ag.U(a-64,b-64,0,c,1,1,!0,!1,1,this.Kc):this.Ag.U(a-64,b-64,0,c,1,1,!0,!1);this.$==De?(this.Bg.U(a-32,b-32,0,0,1,1,!0,!1),this.Xf.U(a-32,b-32,0,this.Tb,1,1,!0,!1,0.5)):this.$==Ee?(this.Bg.U(a-32,b-32,0,0,1,1,!0,!1),this.Xf.U(a-32,b-32,0,this.Tb,1,1,!0,!1,0.5)):this.Bg.U(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-this.pd;this.$==Fe?(this.zg.U(a-32,b-32,0,0,1,1,!0),this.Xf.U(a-32,b-32,0,this.wb,1,1,!0,!1,0.5)):this.$==Ge?(this.zg.U(a-32,b-32,0,0,1,1,!0),this.Xf.U(a-32,b-32,0,this.wb,1,1,
!0,!1,0.5)):this.zg.U(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.pd;this.mj.U(a-8,b-64,0,0,1,1,!0,!1);b=this.c.height-1-82-64-this.pd;this.$==He?this.ij.U(a-16,b-16,0,0,1,1,!0,!1):this.$==Ie?this.hj.U(a-16,b-16,0,0,1,1,!0,!1):this.gj.U(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-64-this.pd;this.$==Je?this.fj.U(a-16,b-16,0,0,1,1,!0,!1):this.$==Ke?this.ej.U(a-16,b-16,0,0,1,1,!0,!1):this.dj.U(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.Tc-this.pd;this.$==Le?this.lj.U(a-16,
b-16,0,0,1,1,!0,!1):this.$==Me?this.kj.U(a-16,b-16,0,0,1,1,!0,!1):this.jj.U(a-16,b-16,0,0,1,1,!0,!1)}};this.bd=function(a){this.Mc=a.Mc;this.Sa=a.Gi*57.29577951308232;this.longitude=a.Fd.longitude;this.latitude=a.Fd.latitude;this.elevation=a.Fd.elevation;this.lm=a.kd;this.rm=a.Va[0];this.sm=this.c.height-a.Va[1]-1;if(this.$!=Be)this.bj=this.Sa,this.Dg=0;if(this.$==Ie)a.xa=vc,a.ra=1;else if(this.$==Ke)a.xa=wc,a.ra=1;else if(this.$==Me)if(this.Tc>0)a.xa=wc,a.ra=Math.sqrt(this.Tc)/4;else{if(this.Tc<
0)a.ra=Math.sqrt(-this.Tc)/4,a.xa=vc}else this.$==Ge?(a.xa=xc,a.ra=this.rc):this.$==Be?(a.xa=yc,a.ra=this.bj+this.Dg,a.ra=this.gc(a.ra),a.ra*=Math.PI/180):this.$==De?(a.xa=zc,a.ra=Math.PI*this.Tb/180):a.xa=uc;a.Sk=this.$==Ae?0:1};this.Ce=function(){this.Fi=new M(this.c);N(this.Fi,Uc+"flightnavigation/cmpbg.png");this.Hi=new M(this.c);N(this.Hi,Uc+"flightnavigation/cmpr.png");this.zg=new M(this.c);N(this.zg,Uc+"globenavigation/MoveWheel.png");this.Bg=new M(this.c);N(this.Bg,Uc+"globenavigation/YawPitchWheel.png");
this.Ag=new M(this.c);N(this.Ag,Uc+"globenavigation/yaw_pitch_adjust.png");this.Xf=new M(this.c);N(this.Xf,Uc+"globenavigation/movewheel_marker.png",i,i,!0);this.dj=new M(this.c);N(this.dj,Uc+"globenavigation/minus.png");this.fj=new M(this.c);N(this.fj,Uc+"globenavigation/minus_over.png");this.ej=new M(this.c);N(this.ej,Uc+"globenavigation/minus_clicked.png");this.gj=new M(this.c);N(this.gj,Uc+"globenavigation/plus.png");this.ij=new M(this.c);N(this.ij,Uc+"globenavigation/plus_over.png");this.hj=
new M(this.c);N(this.hj,Uc+"globenavigation/plus_clicked.png");this.jj=new M(this.c);N(this.jj,Uc+"globenavigation/slider.png");this.lj=new M(this.c);N(this.lj,Uc+"globenavigation/slider_over.png");this.kj=new M(this.c);N(this.kj,Uc+"globenavigation/slider_clicked.png");this.mj=new M(this.c);N(this.mj,Uc+"globenavigation/slider_rail.png");this.cj=new M(this.c);N(this.cj,Uc+"globenavigation/crosshair.png")};this.Be=function(){this.Fi.o();this.Hi.o();this.zg.o();this.Bg.o();this.Ag.o();this.Xf.o();
this.dj.o();this.fj.o();this.ej.o();this.gj.o();this.ij.o();this.hj.o();this.jj.o();this.lj.o();this.kj.o();this.mj.o();this.cj.o()};this.bg=function(){R(this.nc);R(this.pc);R(this.oc);R(this.nd)};this.De=function(a){this.nc=P(a,xd,this.Qd,!1,this);this.pc=P(a,yd,this.Sd,!1,this);this.oc=P(a,zd,this.Rd,!1,this);this.nd=P(a,wd,this.Qg,!1,this)};this.Qd=function(a){if(Od(a,Kd)){var b=a.offsetX-this.c.H.offsetLeft,a=a.offsetY-this.c.H.offsetTop;this.Qk=b;this.Rk=this.c.height-a-1;this.kb=b;this.eb=this.c.height-
a-1;this.mc=!0;this.Mc==1&&this.Fj(0)}};this.Sd=function(a){if(Od(a,Kd)){var b=a.offsetY-this.c.H.offsetTop;this.kb=a.offsetX-this.c.H.offsetLeft;this.eb=this.c.height-b-1;this.mc=!1;this.Mc==1&&this.Fj(0);this.Tc=0}};this.Rd=function(a){if(this.c&&this.c.H){var b=a.offsetY-this.c.H.offsetTop,c=this.c.height-b-1-this.eb;this.kb=a.offsetX-this.c.H.offsetLeft;this.eb=this.c.height-b-1;this.Mc==1&&this.Fj(c)}};this.Qg=function(){this.$==Ce&&Ne(this.c.pa,this.longitude,this.latitude,this.elevation,0,
-90,0)};this.Fj=function(a){var b=this.c.width-1-64-this.kg-8,c=this.c.height-1-82-64-this.pd+8,d=this.c.width-1-64-this.kg-8,e=this.c.height-1-82-128-64-this.pd+8,f=this.c.width-1-64-this.kg-8,g=this.c.height-1-82-128-this.Tc-this.pd+8,j=this.c.width-1-64-this.kg,k=this.c.height-1-82-this.pd,l=Math.abs(this.kb-j);l*=l;var m=Math.abs(this.eb-k);m*=m;var q=this.c.width-1-64-this.kg,o=this.c.height-1-this.pd,s=Math.abs(this.kb-q);s*=s;var t=Math.abs(this.eb-o);t*=t;if(this.mc&&this.$==Me)if(this.Tc-=
a,this.Tc<-40)this.Tc=-40;else{if(this.Tc>40)this.Tc=40}else if(this.mc&&this.$==Ge)a=this.kb-j,k=this.eb-k,this.rc=this.wb=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.wb=360-this.wb:this.rc=360-this.rc,this.wb+=90,this.rc+=90,this.wb=this.gc(this.wb),this.rc=this.gc(this.rc);else if(this.mc&&this.$==Be){a=this.kb-q;k=this.eb-o;this.bc=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.bc=360-this.bc;this.bc-=90;this.bc=this.gc(this.bc);this.Dg=this.gc(this.bc-this.we)}else if(this.mc&&this.$==
De){a=this.kb-q;k=this.eb-o;this.Tb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.Tb=360-this.Tb;this.Tb+=90;this.Tb=this.gc(this.Tb)}else{this.$=0;if(this.kb>b&&this.eb>c-16&&this.kb<b+16&&this.eb<c)this.$=this.mc?Ie:He;if(this.kb>d&&this.eb>e-16&&this.kb<d+16&&this.eb<e)this.$=this.mc?Ke:Je;if(this.kb>f&&this.eb>g-16&&this.kb<f+16&&this.eb<g)this.$=this.mc?Me:Le;l+m<=729?this.mc?this.$=Ge:(this.$=Fe,a=this.kb-j,k=this.eb-k,this.rc=this.wb=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.wb=360-
this.wb:this.rc=360-this.rc,this.wb+=90,this.rc+=90,this.wb=this.gc(this.wb),this.rc=this.gc(this.rc)):this.wb=0;if(s+t<=625){this.$=this.mc?De:Ee;a=this.kb-q;k=this.eb-o;this.Tb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.Tb=360-this.Tb;this.Tb+=90;this.Tb=this.gc(this.Tb)}else if(s+t<=1600)if(this.mc){this.$=Be;a=this.kb-q;k=this.eb-o;this.bc=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.bc=360-this.bc;this.bc-=90;this.bc=this.gc(this.bc);this.Dg=this.gc(this.bc-this.we);this.bj=this.Sa}else{this.$=
Ce;a=this.kb-q;k=this.eb-o;this.we=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.we=360-this.we;this.we-=90;this.we-=this.Dg;this.we=this.gc(this.we)}}}}var Ae=0,He=1,Ie=2,Je=3,Ke=4,Le=5,Me=6,Fe=7,Ge=8,Ce=9,Be=10,Ee=11,De=12;ze.prototype=new we;function Oe(){this.name="ogAoeImage";this.type=$a;this.ab=-1;this.M=!1;this.options=i;this.Jf=-1;this.Lf=-180;this.If=-90;this.og=180;this.ng=90;this.jq="";this.Sb=!1;this.j=this.cp=i;this.pg=[];this.ig=[]}Oe.prototype=new C;r=Oe.prototype;r.Ka=function(a){this.options=a;this.Lf=a.longitude0;this.If=a.latitude0;this.og=a.longitude1;this.ng=a.latitude1;this.ap=a.url;a=this.parent.parent.c;this.cp=new M(a,!0,256,256);this.j=new M(a);this.j.parent=this;N(this.j,this.ap,Pe,Qe,!0);this.ab=Re(this).vj(this)};
r.jb=function(){Re(this).Mj(this.ab)};function Re(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.q)b=a.e.q.gk;return b}r.ka=n();r.la=n();
r.pb=function(){var a=this.parent.parent.c;if(this.Sb!=!1){var b=a.e.q.Aa.K.length,c,d,e,f,g=i;this.ig=i;this.ig=[];for(var j=0;j<b;j++)if(g=a.e.q.Aa.K[j],!(g.k.length<1)&&!g.iq&&(c=g.Lf,d=g.If,e=g.og,f=g.ng,!(this.Lf>e|this.og<c|this.If>f|this.ng<d)&&(this.ig[g.k]=this.pg[g.k],!this.pg[g.k]))){var k=new L(g.c);k.da(g.v);var l=g.j,m=new M(g.c,!0,256,256),q=m;a.jf.push(q);q.dh();l.U(0,0,0,0,1,1,!0,!0,1);this.j.U((this.Lf-c)*256/(e-c),(this.If-d)*256/(f-d),0,0,(this.og-this.Lf)/this.j.width/((e-c)/
256),(this.ng-this.If)/this.j.height/((f-d)/256),!0,!0,1);Se(a);k.Gc(m);k.Ip=g.ga[0];k.Jp=g.ga[1];k.Kp=g.ga[2];this.pg[g.k]=k;this.ig[g.k]=k}}for(var o in this.ig)a=this.ig[o],b=new K,b.da(a.c.Mb),b.a[12]+=a.Ip,b.a[13]+=a.Jp,b.a[14]+=a.Kp,a.c.Dc(),a.c.Fc(b),a.oa(),a.c.Bd()};function Pe(a){a.parent.Sb=!0;a.O&&a.O(a.k,a,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i}function Qe(a){a.N&&a.N(a.k,a.caller,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i};function Te(a){this.c=a;this.mh=[]}Te.prototype.pb=function(){for(var a=0;a<this.mh.length;a++)this.mh[a].pb()};Te.prototype.vj=function(a){this.mh.push(a);return this.mh.length-1};Te.prototype.Mj=function(a){this.mh.splice(a,1)};function Ue(a){this.c=a;this.Ra=[];this.Me=new Ve}Ue.prototype.pb=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.Me.vi(b);for(var k=0;k<this.Ra.length;k++){var l=this.Ra[k];l.M||(this.Me.ui(l.Re,l.Se,l.Te,l.Re+0.001,l.Se+0.001,l.Te+0.001),f=l.Re-c,g=l.Se-d,j=l.Te-e,f=f*f+g*g+j*j,g=l.ml*l.ml,l.ll*l.ll>f&&g<f&&l.oa())}};Ue.prototype.Tg=function(a,b){for(var c=0;c<this.Ra.length;c++)if(this.Ra[c].Rg(a,b))return this.Ra[c];return i};function We(a){this.c=a;this.Ta=[]}We.prototype.pb=function(){for(var a=0;a<this.Ta.length;a++){var b=this.Ta[a];b.M||b.oa()}};We.prototype.wj=function(a){this.Ta.push(a)};We.prototype.Nj=function(a){for(var b=0;b<this.Ta.length;b++)if(this.Ta[b]==a){this.Ta.splice(b,1);break}};We.prototype.Sg=function(a,b){for(var c=0;c<this.Ta.length;c++){var d=this.Ta[c].Rg(a,b);if(d)return d}return i};function Xe(){this.h=this.y=this.x=0}function Ve(){this.L=Array(6);this.L[0]=new Ye;this.L[1]=new Ye;this.L[2]=new Ye;this.L[3]=new Ye;this.L[4]=new Ye;this.L[5]=new Ye;this.X=Array(8);this.X[0]=new Xe;this.X[1]=new Xe;this.X[2]=new Xe;this.X[3]=new Xe;this.X[4]=new Xe;this.X[5]=new Xe;this.X[6]=new Xe;this.X[7]=new Xe}function Ye(){this.Jd=this.Id=this.Hd=this.xe=0}
Ye.prototype.Bc=function(){var a=Math.sqrt(this.Hd*this.Hd+this.Id*this.Id+this.Jd*this.Jd);this.Hd/=a;this.Id/=a;this.Jd/=a;this.xe/=a};
Ve.prototype.ui=function(a,b,c,d,e,f){this.X[0].x=a;this.X[0].y=b;this.X[0].h=c;this.X[1].x=d;this.X[1].y=b;this.X[1].h=c;this.X[2].x=d;this.X[2].y=e;this.X[2].h=c;this.X[3].x=a;this.X[3].y=e;this.X[3].h=c;this.X[4].x=a;this.X[4].y=b;this.X[4].h=f;this.X[5].x=a;this.X[5].y=e;this.X[5].h=f;this.X[6].x=d;this.X[6].y=e;this.X[6].h=f;this.X[7].x=d;this.X[7].y=b;this.X[7].h=f;for(a=0;a<6;a++){b=8;for(c=0;c<8;c++)this.L[a].Hd*this.X[c].x+this.L[a].Id*this.X[c].y+this.L[a].Jd*this.X[c].h+this.L[a].xe<0&&
--b;if(b==0)return!1}return!0};
Ve.prototype.vi=function(a){this.pq=a;this.Cb=a.a;this.Vm=this.Cb[0];this.Zm=this.Cb[1];this.cn=this.Cb[2];this.qg=this.Cb[3];this.Wm=this.Cb[4];this.$m=this.Cb[5];this.dn=this.Cb[6];this.rg=this.Cb[7];this.Xm=this.Cb[8];this.an=this.Cb[9];this.en=this.Cb[10];this.sg=this.Cb[11];this.Ym=this.Cb[12];this.bn=this.Cb[13];this.fn=this.Cb[14];this.tg=this.Cb[15];this.L[0].Hd=this.qg+this.Vm;this.L[0].Id=this.rg+this.Wm;this.L[0].Jd=this.sg+this.Xm;this.L[0].xe=this.tg+this.Ym;this.L[0].Bc();this.L[1].Hd=
this.qg-this.Vm;this.L[1].Id=this.rg-this.Wm;this.L[1].Jd=this.sg-this.Xm;this.L[1].xe=this.tg-this.Ym;this.L[1].Bc();this.L[2].Hd=this.qg-this.Zm;this.L[2].Id=this.rg-this.$m;this.L[2].Jd=this.sg-this.an;this.L[2].xe=this.tg-this.bn;this.L[2].Bc();this.L[3].Hd=this.qg+this.Zm;this.L[3].Id=this.rg+this.$m;this.L[3].Jd=this.sg+this.an;this.L[3].xe=this.tg+this.bn;this.L[3].Bc();this.L[4].Hd=this.qg+this.cn;this.L[4].Id=this.rg+this.dn;this.L[4].Jd=this.sg+this.en;this.L[4].xe=this.tg+this.fn;this.L[4].Bc();
this.L[5].Hd=this.qg-this.cn;this.L[5].Id=this.rg-this.dn;this.L[5].Jd=this.sg-this.en;this.L[5].xe=this.tg-this.fn;this.L[5].Bc()};w("ViewFrustum",Ve);Ve.prototype.TestBox=Ve.prototype.ui;Ve.prototype.Update=Ve.prototype.vi;function Ze(){this.nh=this.oh=!1;this.version=this.Ue=this.Hp=this.Pn=this.Sf=this.Lp=this.gn=this.dp=this.ep=this.xb=this.nb=this.fp=this.tp=this.up=i}
Ze.prototype.Jg=function(a){this.V=new XMLHttpRequest;this.V.open("GET",a,!0);var b=this;this.V.onreadystatechange=function(){a:if(b.V.readyState==4)if(b.V.status==200){var a=b.V.responseText,d;try{d=Ec(a)}catch(e){alert(e);break a}if(d.extent)if(b.version=1,b.tq=d.name,b.xb=d.maxlod,b.gn=256,a=d.extent,b.nb=a,b.Pn=[b.xb,a[0],a[1],a[2],a[3]],d.type=="image")d.format=="png"?(b.Sf="image/png",b.Ue=".png"):d.format=="jpg"?(b.Sf="image/jpg",b.Ue=".jpg"):b.Sf="image/png";else{if(d.type=="elevation")b.Ue=
".json"}else if(b.version=0,b.up=d.layer,b.tp=d.copyright,b.fp=d.srs,b.nb=d.boundingbox,b.xb=d.levelofdetail,b.ep=d.imagewidth,b.dp=d.imageheight,b.gn=d.tilesize,b.Lp=d.tilelayout,b.Sf=d.tileformat,b.Pn=d.bounds,b.Hp=d.center,b.Sf=="image/png")b.Ue=".png";else if(b.Sf=="image/jpg")b.Ue=".jpg";else if(b.Sf=="elevation/json")b.Ue=".json";b.oh=!0}else fc(E("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.nh=!0};this.V.send()};w("DatasetInfo",Ze);Ze.prototype.Download=Ze.prototype.Jg;function $e(){}r=$e.prototype;r.Ug=function(a,b){this.Lj(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};r.Lj=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
r.Ec=function(a,b){b.x=0;b.y=0;b.Bb=a.length;for(var c,d=b.Bb;d>0;d--)switch(c=1<<d-1,a[b.Bb-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};r.Tl=function(a,b){var c={x:i,y:i,Bb:i};this.Ec(a,c);var d=4.007501668E7/Math.pow(2,c.Bb);b[0]=-2.003750834E7+d*c.x;b[1]=2.003750834E7-d*(c.y+1);b[2]=-2.003750834E7+d*(c.x+1);b[3]=2.003750834E7-d*c.y};
r.Ul=function(a,b){var c=a.length,d=[],e=256*Math.pow(2,c);this.Lj(a,d);var f=d[0]*256*Math.pow(2,c),g=(1-d[1])*256*Math.pow(2,c),c=Math.min(Math.max(f,0),e-1)/e-0.5,j=0.5-Math.min(Math.max(g,0),e-1)/e,d=90-360*Math.atan(Math.exp(-j*2*Math.PI))/Math.PI,k=360*c,c=Math.min(Math.max(f,0),e-1)/e-0.5,j=0.5-Math.min(Math.max(g,0),e-1)/e,e=90-360*Math.atan(Math.exp(-j*2*Math.PI))/Math.PI;b[0]=d;b[1]=k;b[2]=e;b[3]=360*c};w("MercatorQuadtree",$e);$e.prototype.QuadKeyToMercatorCoord=$e.prototype.Ug;
$e.prototype.QuadKeyToNormalizedCoord=$e.prototype.Lj;$e.prototype.QuadKeyToTileCoord=$e.prototype.Ec;$e.prototype.QuadKeyToMercator=$e.prototype.Tl;$e.prototype.QuadKeyToWGS84=$e.prototype.Ul;var af={Kj:function(a){for(var b="",c=0;c<a.length;c++)c%2==0&&c>0&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};w("GlobeUtils",af);w("GlobeUtils.MakeHierarchicalFilename",af.Kj);function bf(){this.Da=p(!1);this.Yc=p(!1);this.Ub=n();this.Pd=p(0);this.fc=p(0);this.Ye=this.Ze=-1;this.Xc=p(!1)};function cf(){this.I=new Ze;this.l=this.Sc=i;this.na=new $e;this.coords=Array(4);this.Db=1;this.Da=function(){return this.I.oh};this.Yc=function(){return this.I.nh};this.Ub=function(a,b,c,d,e,f){if(this.Da()){var g=this.Sc+"/"+this.l+"/"+af.Kj(b+this.I.Ue),a=new M(a);a.k=b;a.l=c;a.O=d;a.N=e;a.caller=f;a.Db=this.Db;N(a,g,df,ef,!0)}};this.Pd=p(0);this.fc=function(){return this.I.xb?this.I.xb:0};this.Xc=function(a){if(a.length>this.I.xb)return!1;this.na.Ug(a,this.coords);var a=this.coords[0],b=this.coords[1],
c=this.coords[2],d=this.coords[3],e=this.I.nb[0],f=this.I.nb[1],g=this.I.nb[2],j=this.I.nb[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.ib=function(a,b,c){this.Db=c==i?1:c;this.Sc=a;this.l=b;this.I.Jg(a+"/"+b+".json")}}cf.prototype=new bf;function df(a){a.O(a.k,a,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i}function ef(a){a.N(a.k,a.caller,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i}w("i3dImageLayer",cf);cf.prototype.Failed=cf.prototype.Yc;cf.prototype.Ready=cf.prototype.Da;
cf.prototype.RequestTile=cf.prototype.Ub;cf.prototype.Setup=cf.prototype.ib;function ff(){this.l=this.lb=i;this.na=new $e;this.za=0;this.Da=p(!0);this.Yc=p(!1);this.Ub=function(a,b,c,d,e,f){var g={};this.na.Ec(b,g);g=this.lb[this.za]+"/"+g.Bb+"/"+g.x+"/"+g.y+".png";a=new M(a);a.k=b;a.l=c;a.O=d;a.N=e;a.caller=f;N(a,g,gf,hf,!0);this.za++;if(this.za>=this.lb.length)this.za=0};this.Pd=p(0);this.fc=p(18);this.Xc=function(a){if(a.length<19)return!0;return!1};this.ib=ba("lb")}ff.prototype=new bf;function gf(a){a.O(a.k,a,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i}
function hf(a){a.N(a.k,a.caller,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i};function jf(){this.Da=p(!1);this.Yc=p(!1);this.Ub=n();this.Pd=p(0);this.fc=p(0);this.Xc=p(!1)};function kf(){this.I=new Ze;this.l=this.Sc=i;this.na=new $e;this.coords=Array(4);this.Da=function(){return this.I.oh};this.Yc=function(){return this.I.nh};this.Ub=function(a,b,c,d,e,f){if(this.Da()){var g=this.Sc+"/"+this.l+"_JSON/"+(af.Kj(b+".jso")+"n"),a=new L(a);a.k=b;a.l=c;a.O=d;a.N=e;a.caller=f;Oc(a,g,lf,mf)}};this.Pd=p(0);this.fc=function(){return this.I.xb?this.I.xb:0};this.Xc=function(a){if(a.length>this.I.xb)return!1;this.na.Ug(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.I.nb[0],f=this.I.nb[1],g=this.I.nb[2],j=this.I.nb[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.ib=function(a,b){this.Sc=a;this.l=b;this.I.Jg(a+"/"+b+".json")}}kf.prototype=new jf;function lf(a){a.O(a.k,a,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i}function mf(a){a.N(a.k,a.caller,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i};function nf(){this.version=this.style=this.jg=this.l=this.Sc=i;this.Db=1;this.qb=i;this.na=new $e;this.Da=p(!0);this.Yc=p(!1);this.Ub=function(a,b,c,d,e,f){this.Sc.indexOf("?",this.Sc.length-1)==-1&&(this.Sc+="?");var g=Array(4);this.qb=="EPSG%3A4326"?this.na.Ul(b,g):this.na.Tl(b,g);g=g[0]+","+g[1]+","+g[2]+","+g[3];g=this.Sc+"service=WMS&request=GetMap&WIDTH=256&HEIGHT=256&TILED=TRUE&SRS="+this.qb+"&LAYERS="+this.l+"&STYLES="+this.style+"&FORMAT="+this.jg+"&VERSION="+this.version+"&BBOX="+g;a=new M(a);
a.k=b;a.l=c;a.O=d;a.N=e;a.caller=f;if(this.jg=="image/png")a.Db=this.Db;N(a,g,of,pf,!0)};this.Pd=p(0);this.fc=p(30);this.Xc=function(a){if(a.length<31)return!0;return!1};this.ib=function(a,b,c,d,e,f,g){this.Sc=a;this.l=b;this.jg=d;this.style=e;this.version=f;this.Db=g;this.qb=c;if(this.jg==i)this.jg="image/png";if(this.style==i)this.style="";if(this.version==i)this.version="1.1.1";if(this.qb==i)this.qb="EPSG%3A900913";if(this.qb=="EPSG:900913")this.qb="EPSG%3A900913";if(this.qb=="ESRI:102100")this.qb=
"ESRI%3A102100";if(this.qb=="ESRI:102113")this.qb="ESRI%3A102113";if(this.qb=="EPSG:3785")this.qb="EPSG%3A3785";if(this.qb=="EPSG:3857")this.qb="EPSG%3A3857";if(this.qb=="EPSG:4326")this.qb="EPSG%3A4326"}}nf.prototype=new bf;function of(a){a.O(a.k,a,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i}function pf(a){a.N(a.k,a.caller,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i};function qf(){this.l=this.lb=i;this.na=new $e;this.za=0;this.Da=p(!0);this.Yc=p(!1);this.Ub=function(a,b,c,d,e,f){var g={};this.na.Ec(b,g);var j=Math.pow(2,g.Bb),g=this.lb[this.za]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.Bb)+"&key=[KEY]",a=new M(a);a.k=b;a.l=c;a.O=d;a.N=e;a.caller=f;N(a,g,rf,sf,!0);this.za++;if(this.za>=this.lb.length)this.za=0};this.Pd=p(0);this.fc=p(16);this.Xc=function(a){if(a.length<17)return!0;return!1};this.ib=ba("lb")}ff.prototype=new bf;
function rf(a){a.O(a.k,a,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i}function sf(a){a.N(a.k,a.caller,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i};function tf(){this.I=new Ze;this.l=this.Sc=i;this.na=new $e;this.coords=Array(4);this.za=0;this.Da=function(){return this.I.oh};this.Yc=function(){return this.I.nh};this.Ub=function(a,b,c,d,e,f){if(this.Da()){var g={};this.na.Ec(b,g);g=this.lb[this.za]+"/"+this.l+"/tiles/"+g.Bb+"/"+g.x+"/"+g.y+".json";a=new L(a);a.k=b;a.l=c;a.O=d;a.N=e;a.caller=f;Oc(a,g,uf,vf);this.za++;if(this.za>=this.lb.length)this.za=0}};this.Pd=p(0);this.fc=function(){return this.I.xb?this.I.xb:0};this.Xc=function(a){if(a.length>
this.I.xb)return!1;for(var b=a,c=a,d=0;d<this.I.xb-a.length;d++)b+="0",c+="3";d={};this.na.Ec(b,d);b=d.x;a=d.y;this.na.Ec(c,d);var c=d.x,d=d.y,e=this.I.nb[0],f=this.I.nb[1],g=this.I.nb[3];return!(b>this.I.nb[2]||c<e||a>g||d<f)};this.ib=function(a,b){this.lb=a;this.l=b;this.I.Jg(a[0]+"/"+b+"/layersettings.json")}}tf.prototype=new jf;function uf(a){a.O(a.k,a,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i}function vf(a){a.N(a.k,a.caller,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i};function wf(){this.l=this.lb=i;this.na=new $e;this.sub=this.za=0;this.Ep=["Galile","Galil","Gali","Gal","Ga","G"];this.Da=p(!0);this.Yc=p(!1);this.Ub=function(a,b,c,d,e,f){var g={};this.na.Ec(b,g);g=this.lb[this.za]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.Bb+"&s="+this.Ep[this.sub];this.sub++;if(this.sub==5)this.sub=0;a=new M(a);a.k=b;a.l=c;a.O=d;a.N=e;a.caller=f;N(a,g,gf,hf,!0);this.za++;if(this.za>=this.lb.length)this.za=0};this.Pd=p(0);this.fc=p(19);this.Xc=function(a){if(a.length<20)return!0;return!1};
this.ib=ba("lb")}wf.prototype=new ff;function xf(a,b){this.Mf=a||-1;this.Qo=b||!1;this.Qe={};this.Pa=0;this.rn=Math.round(this.Mf*0.75);this.Kd={};this.Kd.hits=0;this.Kd.misses=0;yf(this,"Initialized cache with size "+a)}xf.prototype.getItem=function(a){var b=this.Qe[a];if(b!=i)zf(b)?(Af(this,a),b=i):b.Ti=(new Date).getTime();(b=b?b.value:i)?(this.Kd.hits++,yf(this,"Cache HIT for key "+a)):(this.Kd.misses++,yf(this,"Cache MISS for key "+a));return b};
xf.prototype.setItem=function(a,b,c){this.Qe[a]!=i&&Af(this,a);Bf(this,new function(a,b,c){(a==i||a=="")&&aa(Error("key cannot be null or empty"));this.key=a;this.value=b;c==i&&(c={});if(c.Li!=i)c.Li=c.Li.getTime();if(c.Sh==i)c.Sh=2;this.options=c;this.Ti=(new Date).getTime()}(a,b,c));yf(this,"Setting key "+a);if(this.Mf>0&&this.Pa>this.Mf){var d=this;setTimeout(function(){d.sp.call(d)},0)}};xf.prototype.clear=function(){for(var a in this.Qe)Af(this,a);yf(this,"Cache cleared")};
xf.prototype.sp=function(){var a=[],b;for(b in this.Qe){var c=this.Qe[b];zf(c)?Af(this,b):a.push(c)}if(a.length>this.rn)for(a=a.sort(function(a,b){return a.options.Sh!=b.options.Sh?b.options.Sh-a.options.Sh:b.Ti-a.Ti});a.length>this.rn;)Af(this,a.pop().key);yf(this,"Purged cached")};function Bf(a,b){a.Qe[b.key]=b;a.Pa++}
function Af(a,b){var c=a.Qe[b];delete a.Qe[b];a.Pa--;yf(a,"removed key "+b);c.options.Ko!=i&&setTimeout(function(){c.options.Ko.call(i,c.key,c.value)},0);c.o!=i&&setTimeout(function(){c.o()},0)}function zf(a){var b=(new Date).getTime(),c=!1;a.options.Li&&a.options.Li<b&&(c=!0);!c&&a.options.Wo&&a.Ti+a.options.Wo*1E3<b&&(c=!0);return c}function yf(a,b){a.Qo&&E("owg.Cache").info(b)};function Cf(a,b,c){a=H(a)-0;b=Math.log(Math.tan(Math.PI/4+H(b)/2));a/=Math.PI;b/=Math.PI;c[0]=a;c[1]=b}function Df(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=nc(b);for(a=nc(a/1+0);a>180;)a-=180;for(;a<-180;)a+=180;for(;b>90;)b-=180;for(;b<-90;)b+=180;c[0]=a;c[1]=b};function Ef(a,b,c){this.c=a;this.k=b;this.na=c;this.j=i;this.Hc=!1;this.v=i;this.Dm=!0;this.ga=[];this.hb=Array(5);this.hb[0]=new I;this.hb[1]=new I;this.hb[2]=new I;this.hb[3]=new I;this.hb[4]=new I;this.lg=0;this.images=i;this.jk=!1;this.Ji=0;this.wi=new I;this.Ld=new K;this.Lf=-180;this.If=-90;this.og=180;this.ng=90;var d=Array(4),e=Array(2);this.na.Ug(this.k,d);var a=Array(3),b=Array(3),c=Array(3),f,g,j=new O;f=d[0];g=d[1];Df(f,g,e);f=e[0];g=e[1];this.Lf=f;this.ng=g;j.n(f,g,0);j.ma(a);f=d[2];
g=d[1];Df(f,g,e);f=e[0];g=e[1];j.n(f,g,0);j.ma(b);f=d[2];g=d[3];Df(f,g,e);f=e[0];g=e[1];this.og=f;this.If=g;j.n(f,g,0);j.ma(c);d=new I;e=new I;d.n(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.n(c[0]-a[0],c[1]-a[1],c[2]-a[2]);sc(this.wi,d,e);this.wi.Bc()}var Ff=0;
function Gf(a){if(a.lg==0&&a.Ji==0){var b=0,c=0;if(a.images!==i)for(var d=0;d<a.images.length;d++)a.images[d]!=i&&(b++,c=d);b==0?(a.j=a.c.Tk,a.v===i&&Hf(a),a.v.Gc(a.j),a.Hc=!0,a.images=i):b==1?(a.j=a.images[c],a.v===i&&Hf(a),a.v.Gc(a.j),a.Hc=!0,a.images=i):(a.jk=!0,a.v===i&&Hf(a),a.Hc=!0)}}function If(a,b,c){a=b.caller;a.images[c]=b;a.lg-=1;Gf(a);Ff--}function Jf(a,b,c){c>=0?(b.images[c]=i,b.lg-=1):(b.images=i,b.lg=0);Gf(b);Ff--}
function Kf(a,b){var c=b.caller;c.v=b;c.v.Bb=c.k.length;c.ga=b.Ga;c.hb[0].n(b.Z[0],b.Z[1],b.Z[2]);c.hb[1].n(b.ta[0],b.Z[1],b.Z[2]);c.hb[2].n(b.ta[0],b.ta[1],b.Z[2]);c.hb[3].n(b.Z[0],b.ta[1],b.Z[2]);c.hb[4].n(0.5*(b.ta[0]-b.Z[0]),0.5*(b.ta[1]-b.Z[1]),0.5*(b.ta[2]-b.Z[2]));c.Ji-=1;Gf(c);Ff--}function Lf(a,b){b.v=i;b.Ji-=1;Gf(b);Ff--}Ef.prototype.o=function(){this.j&&this.j.o();this.v&&this.v.o()};
function Hf(a){a.Dm=!1;a.v=new L(a.c);a.v.Bb=a.k.length;var b;b=a.k.length<3?2:a.k.length<6?9:5;for(var c=Array(2*b*b),d=1/(b-1),e=0;e<b;e++)for(var f=0;f<b;f++)c[2*(e*b+f)+0]=f*d,c[2*(e*b+f)+1]=1-e*d;var f=[],g,j,d=Array(4),k=Array(2),l=Array(3);a.na.Ug(a.k,d);g=d[0];j=d[1];for(var m=(d[3]-j)/(b-1),q=(d[2]-g)/(b-1),o,s,t,x=new O,d=0;d<b;d++)for(e=0;e<b;e++){o=g+e*q;s=j+d*m;Df(o,s,k);x.n(k[0],k[1],0);x.ma(l);o=l[0];s=l[1];t=l[2];if(e==0&&d==0)a.ga=[o,s,t];e==0&&d==0?a.hb[0].n(o,s,t):e==b-1&&d==0?
a.hb[1].n(o,s,t):e==b-1&&d==b-1?a.hb[2].n(o,s,t):e==0&&d==b-1?a.hb[3].n(o,s,t):e==(b-1)/2&&d==(b-1)/2&&a.hb[4].n(o,s,t);f.push(o-a.ga[0]);f.push(s-a.ga[1]);f.push(t-a.ga[2])}g=Array(5*b*b);for(d=0;d<b*b;d++)g[5*d+0]=f[3*d+0],g[5*d+1]=f[3*d+1],g[5*d+2]=f[3*d+2],g[5*d+3]=c[2*d+0],g[5*d+4]=c[2*d+1];for(var c=[],A,e=j=f=0;e<=b-2;e+=1){for(d=0;d<=b-1;d+=1)k=e,A=e+1,m=j%2==0?l=b-1-d:l=d,A+=m*b,c[f++]=k+l*b,c[f++]=A;c[f++]=A;j+=1}Ic(a.v,g);Lc(a.v,c,"TRIANGLESTRIP");a.v.Gc(a.j);a.v.Ga=a.ga;Pc(a.v)}
Ef.prototype.pb=function(a){if(!(this.k.length<3)){if(a){if(this.Ld.da(this.c.Mb),this.Ld.a[12]+=this.ga[0],this.Ld.a[13]+=this.ga[1],this.Ld.a[14]+=this.ga[2],this.c.Dc(),this.c.Fc(this.Ld),a=this.v,a.Da){a.ca==i&&a.Ie();a.b.bindBuffer(a.b.ARRAY_BUFFER,a.ca);a.b.bindBuffer(a.b.ELEMENT_ARRAY_BUFFER,a.Jb);a.ha&&(a.c.Dc(),a.se.P(a.ha,a.c.Mb),a.c.Fc(a.se));switch(a.mode){case "p":a.b.enableVertexAttribArray(0);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,12,0);Mc(a.c.fb,a.c.ua,a.Ac);break;case "pnt":a.b.enableVertexAttribArray(0);
a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,32,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,!1,32,12);a.b.vertexAttribPointer(2,2,a.b.FLOAT,!1,32,24);Mc(a.c.fb,a.c.ua,a.Ac);break;case "pc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,28,0);a.b.vertexAttribPointer(1,4,a.b.FLOAT,!1,28,12);Mc(a.c.fb,a.c.ua,a.Ac);break;case "pt":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);
a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,20,0);a.b.vertexAttribPointer(1,2,a.b.FLOAT,!1,20,12);Mc(a.c.fb,a.c.ua,a.Ac);break;case "pnct":a.b.enableVertexAttribArray(0),a.b.enableVertexAttribArray(1),a.b.enableVertexAttribArray(2),a.b.enableVertexAttribArray(3),a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,48,0),a.b.vertexAttribPointer(1,3,a.b.FLOAT,!1,48,12),a.b.vertexAttribPointer(2,4,a.b.FLOAT,!1,48,24),a.b.vertexAttribPointer(3,2,a.b.FLOAT,!1,48,40),Mc(a.c.fb,a.c.ua,a.Ac)}switch(a.me){case "TRIANGLES":a.b.drawElements(a.b.TRIANGLES,
a.Zb,a.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a.b.drawElements(a.b.TRIANGLE_STRIP,a.Zb,a.b.UNSIGNED_SHORT,0)}a.b.disableVertexAttribArray(0);a.b.disableVertexAttribArray(1);a.b.disableVertexAttribArray(2);a.b.disableVertexAttribArray(3)}}else{if(this.jk){this.jk=!1;a=this.j=new M(this.c,!0,256,256);this.c.jf.push(a);a.dh();for(a=0;a<this.images.length;a++)this.images[a]!=i&&(this.images[a].Db<1?this.images[a].U(0,0,0,0,1,1,!0,!0,this.images[a].Db):this.images[a].U(0,0,0,0,1,1,!0,!0,1));Se(this.c);
for(a=0;a<this.images.length;a++)this.images[a]!=i&&this.images[a].o();this.images=i;this.v.Gc(this.j)}this.Ld.da(this.c.Mb);this.Ld.a[12]+=this.ga[0];this.Ld.a[13]+=this.ga[1];this.Ld.a[14]+=this.ga[2];this.c.Dc();this.c.Fc(this.Ld);if(this.c.e.q.Aa.cl==Mf)this.v.mode="pt";else if(this.c.e.q.Aa.cl==Nf)this.v.mode="pt_chroma";this.v.oa()}this.c.Bd()}};function Of(a,b,c,d,e){this.c=a;this.wa=b;this.ub=c;this.na=d;this.Bi=new xf(e,!1);this.gl={};this.gl.jn=0}Of.prototype.o=function(){this.na=this.ub=this.wa=this.c=i;this.Bi.clear();this.Bi=i};Of.prototype.Ml=function(){if(!this.wa)return!1;if(this.wa.length==0)return!1;for(var a=0;a<this.wa.length;a++)if(!this.wa[a].Da())return!1;if(this.ub)for(a=0;a<this.ub.length;a++)if(!this.ub[a].Da())return!1;return!0};
Of.prototype.Ud=function(a){var b=this.Bi.getItem(a);if(b==i){this.gl.jn++;var c=b=new Ef(this.c,a,this.na),d=this.wa,e=this.ub;if(c.k.length<3)Jf(0,c,-1);else{if(d.length>0){c.lg=d.length;c.images=Array(c.lg);for(var f=0;f<d.length;f++){c.images[f]=i;var g=c.k.length,g=(g<=d[f].Ye||d[f].Ye==-1)&&(g>=d[f].Ze||d[f].Ze==-1);d[f].Xc(c.k)&&g?(d[f].Ub(c.c,c.k,f,If,Jf,c),Ff++):Jf(0,c,f)}}if(e&&e.length>0&&c.k.length>8&&e[0].Xc(c.k))c.Ji=1,e[0].Ub(c.c,c.k,0,Kf,Lf,c),Ff++}this.Bi.setItem(a,b)}return b};
Of.prototype.fc=function(){var a=0,b=0;if(this.ub.length>0)for(var c=0;c<this.ub.length;c++)b=Math.max(b,this.ub[c].fc());for(c=0;c<this.wa.length;c++)a=Math.max(a,this.wa[c].fc());if(b>0)return Math.min(b,a);return a};w("GlobeCache",Of);Of.prototype.IsReady=Of.prototype.Ml;Of.prototype.RequestBlock=Of.prototype.Ud;function Pf(){this.I=new Ze;this.l=i;this.na=new $e;this.coords=Array(4);this.Db=1;this.za=0;this.Da=function(){return this.I.oh};this.Yc=function(){return this.I.nh};this.Ub=function(a,b,c,d,e,f){if(this.Da()){var g={};this.na.Ec(b,g);g=this.lb[this.za]+"/"+this.l+"/tiles/"+g.Bb+"/"+g.x+"/"+g.y+this.I.Ue;a=new M(a);a.k=b;a.l=c;a.O=d;a.N=e;a.caller=f;a.Db=this.Db;N(a,g,Qf,Rf,!0);this.za++;if(this.za>=this.lb.length)this.za=0}};this.Pd=p(0);this.fc=function(){return this.I.xb?this.I.xb:0};this.Xc=
function(a){if(a.length>this.I.xb)return!1;for(var b=a,c=a,d=0;d<this.I.xb-a.length;d++)b+="0",c+="3";d={};this.na.Ec(b,d);b=d.x;a=d.y;this.na.Ec(c,d);var c=d.x,d=d.y,e=this.I.nb[0],f=this.I.nb[1],g=this.I.nb[3];return!(b>this.I.nb[2]||c<e||a>g||d<f)};this.ib=function(a,b,c){this.Db=c==i?1:c;this.lb=a;this.l=b;this.I.Jg(a[0]+"/"+b+"/layersettings.json")}}Pf.prototype=new bf;function Qf(a){a.O(a.k,a,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i}
function Rf(a){a.N(a.k,a.caller,a.l);a.O=i;a.N=i;a.k=i;a.caller=i;a.l=i}w("owgImageLayer",Pf);Pf.prototype.Failed=Pf.prototype.Yc;Pf.prototype.Ready=Pf.prototype.Da;Pf.prototype.RequestTile=Pf.prototype.Ub;Pf.prototype.Setup=Pf.prototype.ib;function Sf(){this.Db=1;this.Ub=function(a,b,c,d,e,f){var g={};this.na.Ec(b,g);g.y=Math.pow(2,g.Bb)-1-g.y;g=this.lb[this.za]+"/"+g.Bb+"/"+g.x+"/"+g.y+".png";a=new M(a);a.k=b;a.l=c;a.O=d;a.N=e;a.caller=f;a.Db=this.Db;N(a,g,gf,hf,!0)}}Sf.prototype=new ff;function Tf(a){this.c=a;this.wa=[];this.ub=[];this.na=new $e;this.Jo=1E3;this.$a=i;this.K=[];this.Jm=0;this.Gh={};this.Gh.Ei=0;this.qh=i;this.Pk=0;this.sn=1;this.Me=new Ve;this.va=Array(3);this.Ok=new K;this.Of=new L(this.c);this.Tf=new L(this.c);this.Pf=[8/255,24/255,58/255];this.Uf=[1,1,1];this.bl=1;this.cl=Mf;this.un={}}r=Tf.prototype;r.o=function(){if(this.$a)this.$a.o(),this.$a=i;if(this.Of)this.Of.o(),this.Of=i;if(this.Tf)this.Tf.o(),this.Tf=i};
r.yj=function(a){var b=-1;if(v(a.service))if(a.service=="i3d"){if(v(a.url)&&v(a.layer)&&a.url.length>0){var b=a.url[0],c=a.layer,d=new cf;if(v(a.minlod))d.Ze=a.minlod;if(v(a.maxlod))d.Ye=a.maxlod;d.ib(b,c,a.transparency);b=this.wa.length;this.wa.push(d);Uf(this)}}else if(a.service=="osm"){if(v(a.url)&&a.url.length>0){d=new ff;if(v(a.minlod))d.Ze=a.minlod;if(v(a.maxlod))d.Ye=a.maxlod;d.ib(a.url);b=this.wa.length;this.wa.push(d);Uf(this)}}else if(a.service=="tms"){if(v(a.url)&&a.url.length>0){d=new Sf;
if(v(a.minlod))d.Ze=a.minlod;if(v(a.maxlod))d.Ye=a.maxlod;d.ib(a.url);b=this.wa.length;this.wa.push(d);Uf(this)}}else if(a.service=="wms"){if(v(a.url)&&a.url.length>0&&v(a.layer)&&a.layer.length>0){d=new nf;if(v(a.format))d.jg=a.format;if(v(a.style))d.style=a.style;if(v(a.version))d.version=a.version;d.ib(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency);b=this.wa.length;this.wa.push(d);Uf(this)}}else if(a.service=="owg"){if(v(a.url)&&a.url.length>0){c=a.layer;d=new Pf;if(v(a.minlod))d.Ze=
a.minlod;if(v(a.maxlod))d.Ye=a.maxlod;d.ib(a.url,c,a.transparency);b=this.wa.length;this.wa.push(d);Uf(this)}}else if(a.service=="goo"){if(v(a.url)&&a.url.length>0){d=new wf;if(v(a.minlod))d.Ze=a.minlod;if(v(a.maxlod))d.Ye=a.maxlod;d.ib(a.url);b=this.wa.length;this.wa.push(d);Uf(this)}}else if(a.service=="oym"&&v(a.url)&&a.url.length>0){d=new qf;if(v(a.minlod))d.Ze=a.minlod;if(v(a.maxlod))d.Ye=a.maxlod;d.ib(a.url);b=this.wa.length;this.wa.push(d);Uf(this)}return b};
r.xj=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new kf;c.ib(a.url[0],b);b=this.ub.length;this.ub.push(c);Uf(this)}}else if(a.service=="owg"&&a.url&&a.layer&&a.url.length>0){var d=a.url,b=a.layer,c=new tf;c.ib(d,b);b=this.ub.length;this.ub.push(c);Uf(this)}return b};r.Qj=function(a){a<0||a>=this.wa.length||(this.wa.splice(a,1),Uf(this))};r.Oj=function(a){a<0||a>=this.ub.length||(this.ub.splice(a,1),Uf(this))};
function Uf(a){if(a.$a)a.$a.o(),a.$a=i;a.$a=new Of(a.c,a.wa,a.ub,a.na,a.Jo)}
r.pb=function(a,b){this.$a.gl.jn=0;this.Ok.da(b);this.Me.vi(b);this.qh=a;if(this.$a&&this.$a.Ml()){this.Pk=this.$a.fc();var c=this.$a.Ud("0"),d=this.$a.Ud("1"),e=this.$a.Ud("2"),f=this.$a.Ud("3");if(c.Hc&&d.Hc&&e.Hc&&f.Hc){this.K=[];this.K.push(c);this.K.push(d);this.K.push(e);this.K.push(f);for(this.Gh.Ei=0;this.Gh.Ei!=this.K.length;)a:{c=this.Gh.Ei;if(this.K[c].k.length!=this.Pk&&this.K[c].Hc&&Vf(this,c)){var g=this.K[c].k,d=this.$a.Ud(g+"0"),e=this.$a.Ud(g+"1"),f=this.$a.Ud(g+"2"),g=this.$a.Ud(g+
"3");if(d.Hc&&e.Hc&&f.Hc&&g.Hc){this.K.splice(c,1);this.K.push(d);this.K.push(e);this.K.push(f);this.K.push(g);break a}}this.Gh.Ei++}for(c=0;c<this.K.length;)e=this.K[c],d=e.hb[4].a,e=e.wi.a,f=this.qh.a,this.va[0]=f[0]-d[0],this.va[1]=f[1]-d[1],this.va[2]=f[2]-d[2],(this.va[0]*e[0]+this.va[1]*e[1]+this.va[2]*e[2])/Math.sqrt(this.va[0]*this.va[0]+this.va[1]*this.va[1]+this.va[2]*this.va[2])>=0.4?this.K.splice(c,1):c++;for(c=0;c<this.K.length;c++)this.K[c].pb(!1);d=[];e=[];for(c=0;c<this.K.length;c++){var f=
this.K[c].k,g=0,j=f.charAt(0);if(j=="0"||j=="1")g=1;if(j=="2"||j=="3")g=2;for(var k=1;k<f.length;k++){j=f.charAt(k);if((j=="0"||j=="1")&&g=="2"){g=0;break}if((j=="2"||j=="3")&&g=="1"){g=0;break}}g==1&&d.push(this.K[c]);g==2&&e.push(this.K[c])}d.length>3&&Wf(this,d);e.length>3&&Xf(this,e)}}};
function Vf(a,b){var c=!0,d=a.K[b],e=d.k.length;if(e>a.Pk)return!1;if(e<3)return!0;c=a.Me.ui(d.v.Z[0],d.v.Z[1],d.v.Z[2],d.v.ta[0],d.v.ta[1],d.v.ta[2]);if(!c)return!1;var f=d.hb[4].a,g=d.wi.a,e=a.qh.a;a.va[0]=e[0]-f[0];a.va[1]=e[1]-f[1];a.va[2]=e[2]-f[2];f=Math.sqrt(a.va[0]*a.va[0]+a.va[1]*a.va[1]+a.va[2]*a.va[2]);f>0&&(a.va[0]/=f,a.va[1]/=f,a.va[2]/=f);a.va[0]*g[0]+a.va[1]*g[1]+a.va[2]*g[2]>0.4&&(c=!1);if(!c)return!1;for(var c=[0,0,0],g=0,f=1.0E20,j=d.v.A.length/d.v.T,k=0;k<j;k++)c[0]=e[0]-(d.v.A[5*
k]+d.ga[0]),c[1]=e[1]-(d.v.A[5*k+1]+d.ga[1]),c[2]=e[2]-(d.v.A[5*k+2]+d.ga[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.sn;g=d.hb[0].bf();g.Uj(d.hb[1]);return c*g.Ij()/e>1}
r.Td=function(a,b,c){for(var b=this.c.cf(a,b,this.Ok,!0),d=[],e=a=0;e<this.K.length;e++){var f=this.K[e].v.Z,g=this.K[e].v.ta;this.K[e].v.xi.Ng(b.x,b.y,b.h,b.ie,b.je,b.ke,f[0],f[1],f[2],g[0],g[1],g[2])&&d.push(this.K[e])}f=1.0E20;c.hit=!1;c.numhits=d.length;for(e=0;e<d.length;e++)if((g=d[e].v.He(b.x,b.y,b.h,b.ie,b.je,b.ke))&&g.J<f)c.hit=!0,f=g.J,a=d[e].Dm?0:1;c.tmin=f;if(c.hit)c.x=b.x+f*b.ie,c.y=b.y+f*b.je,c.z=b.h+f*b.ke,b=new O(0,0,0),b.ec(c.x,c.y,c.z),c.lng=b.G[0],c.lat=b.G[1],c.elv=b.G[2],a==1&&
(c.elv=0)};r.cg=function(a,b,c,d){if(d)if(d={},this.Td(a,b,d),d.hit)this.bl=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.cf(a,b,this.Ok,!0);c.hit=!1;var f=e.x,b=e.y,a=e.h,g=e.ie,d=e.je,e=e.ke,j=g*g+d*d+e*e,k=f*g+b*d+a*e,l=k*k-j*(f*f+b*b+a*a-this.bl*this.bl);if(!(l<=0))j=(0-k-Math.sqrt(l))/j,f+=g*j,b+=d*j,a+=e*j,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=!0,c.x=f*d,c.y=b*d,c.z=a*d,a=new O(0,0,0),a.ec(c.x,c.y,c.z),c.lng=a.G[0],c.lat=a.G[1],c.elv=a.G[2]};
r.$f=function(a,b){var c={hasvalue:!1,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new O(a,b,0);f.ma(e);f.n(a,b,-1);f.ma(d);var g,j,f=d[0];g=d[1];j=d[2];var k=e[0]-d[0],l=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(k*k+l*l+d*d);k/=e;l/=e;d/=e;for(var e=[],m=0;m<this.K.length;m++){var q=this.K[m].v.Z,o=this.K[m].v.ta;this.K[m].v.xi.Ng(f,g,j,k,l,d,q[0],q[1],q[2],o[0],o[1],o[2])&&e.push(this.K[m])}q=1.0E20;for(m=0;m<e.length;m++)if((o=e[m].v.He(f,g,j,k,l,d))&&o.J<q)c.hasvalue=!0,c.lod=e[m].v.Bb,q=o.J;if(c.hasvalue)c.x=
f+q*k,c.y=g+q*l,c.z=j+q*d,f=new O(0,0,0),f.ec(c.x,c.y,c.z),c.lng=f.G[0],c.lat=f.G[1],c.elevation=f.G[2];return c};
function Wf(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].k.length>c)c=b[d].k.length;for(d=0;d<b.length;d++)for(b[d].sc=b[d].k;b[d].sc.length<c;)b[d].sc+="0";b.sort(function(a,b){return parseInt(a.sc,2)-parseInt(b.sc,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.Pf[0],a.Pf[1],a.Pf[2],1],e=[],d=0;d<b.length;d++)for(var f=2;b[d].v.A[f]==0;)c.push(b[d].ga[0]+b[d].v.A[f-2]),c.push(b[d].ga[1]+b[d].v.A[f-1]),c.push(b[d].ga[2]+b[d].v.A[f]),c.push(a.Pf[0]),c.push(a.Pf[1]),c.push(a.Pf[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.Of.o();a.Of=new L(a.c);a.Of.dc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},i,i);a.Of.oa()}
function Xf(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].k.length>c)c=b[d].k.length;for(d=0;d<b.length;d++){b[d].sc=b[d].k;b[d].sc=b[d].sc.replace(/2/g,"0");for(b[d].sc=b[d].sc.replace(/3/g,"1");b[d].sc.length<c;)b[d].sc+="0"}b.sort(function(a,b){return parseInt(b.sc,2)-parseInt(a.sc,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.Uf[0],a.Uf[1],a.Uf[2],1],e=[],d=0;d<b.length;d++){var f=b[d].v.A.length;for(f-=1;b[d].v.A[f]==0;)c.push(b[d].ga[0]+b[d].v.A[f-4]),c.push(b[d].ga[1]+b[d].v.A[f-
3]),c.push(b[d].ga[2]+b[d].v.A[f-2]),c.push(a.Uf[0]),c.push(a.Uf[1]),c.push(a.Uf[2]),c.push(1),f-=5}for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.Tf.o();a.Tf=new L(a.c);a.Tf.dc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},i,i);a.Tf.oa()}
r.Eg=function(){if(!this.qh)return NaN;var a=[],b=this.qh.a,c=new I;if(this.ub.length==0)return c=new O,c.ec(b[0],b[1],b[2]),c.G[2];c.n(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.K.length;d++){var e=this.K[d].v.Z,f=this.K[d].v.ta;this.K[d].v.xi.Ng(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.K[d])}e=1.0E20;f=!1;for(d=0;d<a.length;d++){var g=a[d].v.He(b[0],b[1],b[2],c[0],c[1],c[2]);if(g&&g.J<e)f=!0,e=g.J}if(f)return b=e*c[0],a=e*c[1],c=e*c[2],b=Math.sqrt(b*b+a*a+c*c)*
8388607,e<0&&(b=-b),this.Jm=b;return this.Jm};r.ri=ba("cl");var Mf=0,Nf=1;function Yf(a){this.c=a;this.ja=[]}
Yf.prototype.pb=function(){for(var a=0;a<this.ja.length;a++){var b=new K;b.da(this.c.Mb);b.a[12]+=this.ja[a].ga[0];b.a[13]+=this.ja[a].ga[1];b.a[14]+=this.ja[a].ga[2];this.c.Dc();this.c.Fc(b);var b=this.ja[a],c=this.ja[a],d=this.c.b;d.colorMask(!1,!1,!1,!1);d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(!1);d.depthFunc(d.GEQUAL);d.enable(d.STENCIL_TEST);d.stencilFunc(d.ALWAYS,0,0);d.stencilOp(d.KEEP,d.KEEP,d.INCR);d.cullFace(d.FRONT);for(var e=0;e<b.length;e++)b[e].oa();d.stencilOp(d.KEEP,
d.KEEP,d.DECR);d.cullFace(d.BACK);for(e=0;e<b.length;e++)b[e].oa();d.depthMask(!0);d.colorMask(!0,!0,!0,!0);d.cullFace(d.FRONT);d.stencilFunc(d.NOTEQUAL,0,1);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);d.enable(d.BLEND);d.depthMask(!0);for(e=0;e<c.length;e++)c[e].oa();d.stencilFunc(d.NOTEQUAL,0,2);for(e=0;e<c.length;e++)c[e].oa();d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.enable(d.CULL_FACE);d.cullFace(d.BACK);d.depthFunc(d.LESS);d.disable(d.STENCIL_TEST);this.c.Bd()}};
Yf.prototype.Al=function(a){this.ja.push(a);return this.ja.length-1};Yf.prototype.pi=function(a){this.ja.splice(a,1)};function Zf(){this.name="ogGeometry";this.type=Na;this.cb=[];this.pg=[];this.ab=-1;this.M=!1;this.ne="";this.options=this.hd=this.he=i;this.Jf=-1;this.ln=this.ue=i}Zf.prototype=new C;r=Zf.prototype;
r.Ka=function(a){this.options=a;a.url&&$f(this,a.url);a.jsonobject&&this.dc(a.jsonobject);if(a.type=="EarthPolyline")this.ln=V(bb,this,this.options),this.ab=ag(this).zd(this.ln.Le);else if(a.type=="solidcube"){v(a.srs)||(a.srs="EPSG:4326");v(a.position)||(a.position=[0,0,0]);v(a.color)||(a.color=[1,1,1]);var b=this.parent.parent.c,c=i;if(b.e&&b.e.q)c=b.e.q.Ef;if(c){var b=new L(b),d=a.position,e=a.length,f=a.color;if(a.srs=="EPSG:4326")Rc(b,[0,0,0],[e,e,e],f),b.Wg(d[0],d[1],d[2],0,0,0),this.ab=c.zd([[b]]);
else if(a.srs=="cartesian")Rc(b,d,[e,e,e],f),this.ab=c.zd([[b]])}}else if(a.type=="solidgeosphere"){v(a.color)||(a.color=[1,1,1]);v(a.subdivisions)||(a.subdivisions=1);b=this.parent.parent.c;c=i;if(b.e&&b.e.q)c=b.e.q.Ef;if(c)b=new L(b),Tc(b,a.color,a.subdivisions),this.ab=c.zd([[b]])}};r.jb=function(){ag(this).Pj(this.ab);if(this.ue!=i)D(this.ue);else{for(var a=0;a<this.cb.length;a++)D(this.cb[a]);this.qa=i}};function ag(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.q)b=a.e.q.Ef;return b}
r.Ge=function(a,b,c,d,e,f){for(var g=0;g<this.cb.length;g++)this.cb[g].Ge(a,b,c,d,e,f)};r.Zg=function(a,b,c,d){for(var e=0;e<this.cb.length;e++)this.cb[e].Zg(a,b,c,d)};r.Ab=function(a,b,c){for(var d=0;d<this.cb.length;d++)this.cb[d].Ab(a,b,c)};r.lf=function(a,b,c){for(var d=0;d<this.cb.length;d++)this.cb[d].lf(a,b,c)};r.ka=function(){if(this.ue!=i)this.ue.ka();else for(var a=0;a<this.cb.length;a++)this.cb[a].ka()};r.la=function(){if(this.ue!=i)this.ue.la();else for(var a=0;a<this.cb.length;a++)this.cb[a].la()};
r.kf=function(a,b,c,d){if(this.ue==i)for(var e=0;e<this.cb.length;e++)this.cb[e].kf(a,b,c,d)};r.Xj=function(){this.V.readyState==4&&(this.V.status==404?this.hd&&this.hd(this.id):this.dc(Ec(this.V.responseText)))};
r.dc=function(a){if(a.Type=="pointcloud")this.options=a,this.ue=V(ab,this,this.options),a=ag(this),this.ab=a.zd(this.ue.ud);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=V(Oa,this,this.options);this.cb.push(c);this.pg.push(c.yd)}this.he&&this.he(this.id);a=ag(this);this.ab=a.zd(this.pg)}};function $f(a,b){b==i?alert("invalid json-url"):(a.ne=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.ne,!0),a.V.onreadystatechange=function(){a.Xj()},a.V.send())};function bg(a){this.c=a;this.qa=[];this.Me=new Ve;this.zq=1E5*G*1E5*G}
bg.prototype.pb=function(a,b){this.Me.vi(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.qa.length;f++)if(this.qa[f]instanceof Xc){var g=this.qa[f];g.M||g.oa()}else if(this.qa[f]instanceof cg)g=this.qa[f],g.M||g.oa();else for(var g=this.qa[f],j=0;j<g.length;j++)for(var k=g[j],l=0;l<k.length;l++){var m=k[l];if(!m.M){var q=m.Z[0]-c,o=m.Z[1]-d,s=m.Z[2]-e,q=q*q+o*o+s*s,o=m.Sn*m.Sn;this.Me.ui(m.Z[0],m.Z[1],m.Z[2],m.ta[0],m.ta[1],m.ta[2])&&!(q>o)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),
this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),m.oa(),this.c.b.disable(this.c.b.BLEND))}}};bg.prototype.zd=function(a){this.qa.push(a);return this.qa.length-1};bg.prototype.Pj=function(a){this.qa.splice(a,1)};
bg.prototype.hf=function(a,b){for(var c=this.c.cf(a,b,this.c.ua,!0),d=1E4,e=i,f=0;f<this.qa.length;f++)for(var g=this.qa[f],j=0;j<g.length;j++)for(var k=g[j],l=0;l<k.length;l++){var m=k[l];if(!m.M){m.jm(c.x,c.y,c.h,c.ie,c.je,c.ke);var q=m.He(c.x,c.y,c.h,c.ie,c.je,c.ke);if(q&&q.J<d)d=q.J,e=m}}if(e)return e.kp;return-1};function dg(a){this.Aa=i;this.Gb=new I;this.jl=this.gk=this.ph=this.Ef=this.Rh=i;this.Ai=a.rendertotexture;this.j=i;this.elevation=this.Cp=0;this.tm=!1;this.Ne=i;this.qp=!0;if(a.type=="custom")this.tm=!0;this.$c=n();this.ad=function(){if(this.Ai){var a=this.j;this.c.jf.push(a);a.dh();a=this.c.b;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.enable(a.DEPTH_TEST);a.disable(a.CULL_FACE)}if(this.Aa){if(this.Ne)a=this.c,a.b.disable(a.b.DEPTH_TEST),this.Ne.oa(),
a=this.c,a.b.enable(a.b.DEPTH_TEST);this.Aa.pb(this.Gb,this.c.ua)}this.jl.pb(this.Gb,this.c.ua);this.Rh.pb(this.Gb,this.c.ua);this.Ef.pb(this.Gb,this.c.ua);this.ph.pb(this.Gb,this.c.ua);this.gk.pb(this.Gb,this.c.ua);if(this.Ai&&(Se(this.c),this.Cp==0)){if(v(this.j.Ua)&&this.j.Ua!==i)this.j.Ua.mode=this.qp?"blur":"pt";this.j.U(0,0,0,0,1,1,!0,!0,1)}};this.bd=function(a){var c=a.df();this.Gb.n(c.x,c.y,c.h);this.elevation=a.Fd.elevation};this.Ce=function(){if(!this.tm)this.Ne=new L(this.c),this.Ai?Tc(this.Ne,
[1,0,1,0],3):Tc(this.Ne,[0,0,0,1],2),this.Aa=new Tf(this.c);this.jl=new Yf(this.c);this.Rh=new Ue(this.c);this.Ef=new bg(this.c);this.ph=new We(this.c);this.gk=new Te(this.c)};this.Be=function(){if(this.Ne)this.Ne.o(),this.Ne=i;if(this.Aa)this.Aa.o(),this.Aa=i};this.Cj=function(a,c){if(this.Ai)this.j==i?this.j=new M(this.c,!0,a,c,!0):Vc(this.j,a,c,!0)};this.De=n()}dg.prototype=new we;function eg(a){Ed.call(this);this.Uo=a;this.Lm=P(this.Uo,hd?"DOMMouseScroll":"mousewheel",this)}Ba(eg,ye);var fg="mousewheel";
eg.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.le;if(a.type=="mousewheel"){c=1;if(gd||id&&(ld||ud("532.0")))c=40;d=id&&bd&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;v(a.wheelDeltaX)?(b=id&&bd&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=id&&bd&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),v(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;typeof this.Pm=="number"&&(b=Math.min(Math.max(b,-this.Pm),this.Pm));typeof this.Qm==
"number"&&(c=Math.min(Math.max(c,-this.Qm),this.Qm));b=new gg(d,a,b,c);try{this.dispatchEvent(b)}finally{b.wh()}};eg.prototype.Ed=function(){eg.Vf.Ed.call(this);R(this.Lm);delete this.Lm};function gg(a,b,c,d){b&&this.Gd(b,h);this.type=fg;this.detail=a;this.fq=c;this.Cf=d}Ba(gg,Jd);function hg(){this.rk=this.Hf=0;this.Ca=new K;this.fd=new I;this.fd.n(1,0,0);this.B=0;this.D=-0.03;this.Ha=0;this.p=7.616;this.m=45.9088;this.f=17E3;this.jc=this.ic=this.ck=this.$d=this.ae=0;this.yo=!1;this.bk=this.dk=0;this.of=this.Zj=this.ed=this.hh=this.gh=this.Za=1;this.ek=this.fk=this.Ma=this.Na=0;this.Wj=!1;this.uo=0.001;this.Ao=-0.4;this.Fb=!1;this.ba=this.aa=this.Yj=0;this.fh=!1;this.lc=new I;this.vf=this.uf=0;this.Xd=this.Eb=!1;this.s=Array(3);this.Nb=new O(0,0,0);this.qc=new K;this.td=new K;
this.qd=new K;this.Lb=new K;this.Ca=new K;this.bb=new K;this.sd=new K;this.Lb.af();this.Fa=100;this.ia=i;this.od=this.nd=this.pc=this.oc=this.nc=this.md=this.ld=0;this.Og=ba("Xd");this.$c=function(){this.c.$g(this.Ca)};this.ad=n();this.bd=function(a){a.Mc=0;this.Nb.n(this.p,this.m,this.f);this.Nb.ma(this.s);this.fd.n(this.s[0],this.s[1],this.s[2]);this.td.cd(this.s[0],this.s[1],this.s[2]);this.qd.Od(this.p,this.m);this.qc.Fg(this.B,this.D,this.Ha);this.bb.P(this.td,this.qd);this.sd.P(this.bb,this.qc);
this.bb.P(this.sd,this.Lb);this.Ca.Ae(this.bb);a.Gi=this.B;a.ya(this.s[0],this.s[1],this.s[2]);Ac(a,this.p,this.m,this.f);if(this.ia)this.ia.Yb=this.p,this.ia.Xb=this.m,this.ia.Vb=this.f,this.ia.pitch=this.D*57.29577951308232,this.ia.Sa=this.B*57.29577951308232,this.ia.ac=this.Ha*57.29577951308232};this.Ce=n();this.Be=n();this.bg=function(){R(this.ld);R(this.md);R(this.nc);R(this.oc);R(this.pc);R(this.nd);R(this.od)};this.De=function(a){this.ld=P(window,Ad,this.ef,!1,this);this.md=P(window,Bd,this.ff,
!1,this);this.nc=P(a,xd,this.Qd,!1,this);this.pc=P(a,yd,this.Sd,!1,this);this.oc=P(a,zd,this.Rd,!1,this);a=new eg(a);this.od=P(a,fg,this.gf,!1,this)};this.gf=function(a){a.Cf>0?this.Ma>0?this.Na=this.Ma=0:this.Na+=0.05:this.Na>0?this.Ma=this.Na=0:this.Ma+=0.05};this.ef=function(a){if(a.keyCode==81)this.jc=this.Za*this.of;else if(a.keyCode==65)this.jc=-this.Za*this.of;else if(a.keyCode==83)this.ic=0.5*this.ed;else if(a.keyCode==88)this.ic=-0.5*this.ed;this.Hf=a.keyCode};this.ff=function(a){if(a.keyCode==
81)this.jc=0;else if(a.keyCode==65)this.jc=0;else if(a.keyCode==83)this.ic=0;else if(a.keyCode==88)this.ic=0;this.Hf=0};this.Qd=function(a){if(Od(a,Kd))this.pf=0,this.lc.n(0,0,0),this.uf=a.offsetX,this.vf=a.offsetY,this.fh=this.Eb=!0;this.aa=a.offsetX;this.ba=a.offsetY;if(Od(a,Ld))return!1};this.Sd=function(a){if(Od(a,Kd))this.Eb=this.fh=!1;this.aa=a.offsetX;this.ba=a.offsetY;this.ae=this.$d=this.pf=0;if(Od(a,Ld))return!1};this.Rd=function(a){this.aa=a.offsetX;this.ba=a.offsetY;if(this.Eb){var b=
(this.uf-a.offsetX)/this.c.width,c=(this.vf-a.offsetY)/this.c.height;b*=b;c*=c;this.pf=Math.sqrt(b+c);this.lc.n(a.offsetX-this.uf,this.c.height-1-a.offsetY-(this.c.height-1-this.vf),0);this.lc.Bc();var a=this.lc.a[0],d=this.lc.a[1],e=0,f=0;a>0?e=1:a<0&&(e=-1);d>0?f=1:d<0&&(f=-1);this.$d=this.Za*this.gh*c*f;this.ae=this.hh*b*e}};this.Ee=function(a){var b=this.ic*a/500,c=this.ae*a/500,d=this.jc*a,e=0,e=0,f=this.f/5E5*(this.f/5E5);f>10?f=10:f<0.001&&(f=0.001);var g=f*this.$d*a/250;if(this.Na>0){var j=
0.5*this.ed*a/1E3;this.D+=j;this.Na-=j;if(this.Na<0)this.D+=this.Na,this.Na=0;this.Fb=!0}if(this.Ma>0){j=0.5*this.ed*a/1E3;this.D-=j;this.Ma-=j;if(this.Ma<0)this.D-=this.Ma,this.Ma=0;this.Fb=!0}if(b)this.D+=b,this.Fb=!0;if(c){this.B+=c;this.B>2*Math.PI&&(this.B-=2*Math.PI);if(this.B<0)this.B=2*Math.PI-this.B;this.Fb=!0}if(this.Fb&&(e=this.c.Eg(),isNaN(e)))e=this.Fa;if(d&&(a=1E3*d*f,this.f+=a,e+=a,this.f>7E6))this.f=7E6;if(g){a=this.m*0.017453292519943295;d=Math.sin(a);f=Math.cos(a);c=this.B;b=this.p*
0.017453292519943295;d=kc/Math.sqrt(1-lc*d*d);f=kc/(d/(1+mc*f*f))*g*Math.cos(c);j=kc/d*g*Math.sin(c)/Math.cos(a);g=kc/d*g*Math.sin(c)*Math.tan(a)+c;this.p=57.29577951308232*(j+b);this.m=57.29577951308232*(f+a);for(this.B=g;this.p>180;)this.p-=360;for(;this.p<-180;)this.p+=360;for(;this.m>90;)this.m=180-this.m;for(;this.m<-90;)this.m=-180-this.m;this.Fb=!0}e<this.Fa&&this.Fb&&(this.f+=this.Fa-e);if(this.ia)this.ia.Yb=this.p,this.ia.Xb=this.m,this.ia.Vb=this.f,this.ia.pitch=this.D*57.29577951308232,
this.ia.Sa=this.B*57.29577951308232,this.ia.ac=this.Ha*57.29577951308232}}hg.prototype=new we;r=hg.prototype;r.ya=function(a,b,c){this.p=a;this.m=b;this.f=c};r.df=function(){return{longitude:this.p,latitude:this.m,elevation:this.f}};r.Ab=function(a,b,c){this.B=a;this.D=b;this.Ha=c};r.Yg=n();r.Mg=function(){return{Sa:this.B,pitch:this.D,ac:this.Ha}};function ig(){this.rk=this.Hf=0;this.Ca=new K;this.Xd=this.rb=!1;this.fd=new I;this.fd.n(1,0,0);this.B=0;this.D=-1.5707963267948966;this.Ha=0;this.p=7.77442050946391;this.m=47.472720418012834;this.f=75E5;this.sb=jg;this.rf=this.qf=this.r=0;this.zo=!0;this.bk=this.dk=this.jc=this.ic=this.ck=this.$d=this.ae=this.sf=this.tf=0;this.of=this.Zj=this.ed=this.hh=this.gh=this.Za=1;this.ek=this.fk=this.Ma=this.Na=0;this.Wj=!1;this.Yj=0;this.Do=new K;this.ak=this.$j=this.ba=this.aa=0;this.lc=new I;this.nf=this.Yd=
this.Eb=!1;this.Bo=this.Co=this.pf=0;this.s=Array(3);this.Nb=new O(0,0,0);this.qc=new K;this.td=new K;this.qd=new K;this.Lb=new K;this.Ca=new K;this.bb=new K;this.sd=new K;this.Lb.af();this.Zd=!1;this.lh=this.kh=this.jh=0;this.ih=1;this.hc=!1;this.vo=this.wo=this.xo=0;this.fa={};this.ea={};this.mf=new K;this.eh=new K;this.Wd=new K;this.Eo=new K;this.Fo=new K;this.Fa=50;this.re=1E7;this.xa=uc;this.ra=0;this.kd=!1;this.Va=[0,0];this.tb=0;this.be=this.Oa=!1;this.od=this.nd=this.pc=this.oc=this.nc=this.md=
this.ld=this.Io=0;this.Og=function(a){if(!a)this.rb=!1;this.Xd=a};this.$c=function(){this.c.$g(this.Ca)};this.ad=n();this.bd=function(a){this.f<2E3?(this.c.e.yb.Jh=1.0E-7,this.c.e.yb.Ch=1.2):(this.c.e.yb.Jh=1.0E-5,this.c.e.yb.Ch=10);this.xa=a.xa;this.ra=a.ra;a.kd=this.kd;a.Va[0]=this.Va[0];a.Va[1]=this.Va[1];a.Mc=1;this.rb=this.Xd?!0:a.Sk!=0?!0:!1;if(this.sb==kg&&!this.rb&&!this.c.pa.Wb){if(this.Yd)this.Yd=!1,this.ik(this.aa,this.ba);if(this.Eb&&this.nf)this.nf=!1,this.hk(this.aa,this.ba)}this.Nb.n(this.p,
this.m,this.f);this.Nb.ma(this.s);this.fd.n(this.s[0],this.s[1],this.s[2]);this.td.cd(this.s[0],this.s[1],this.s[2]);this.qd.Od(this.p,this.m);this.Zd?(this.qc.Zf(this.jh,this.kh,this.lh,this.ih),this.Lb.zj()):this.qc.Fg(this.B,this.D,this.Ha);this.bb.P(this.td,this.qd);this.sd.P(this.bb,this.qc);this.bb.P(this.sd,this.Lb);this.Ca.Ae(this.bb);a.Gi=this.B;a.ya(this.s[0],this.s[1],this.s[2]);Ac(a,this.p,this.m,this.f)};this.Ce=n();this.Be=n();this.bg=function(){R(this.ld);R(this.md);R(this.nc);R(this.oc);
R(this.pc);R(this.nd);R(this.od)};this.De=function(a){this.ld=P(window,Ad,this.ef,!1,this);this.md=P(window,Bd,this.ff,!1,this);this.nc=P(a,xd,this.Qd,!1,this);this.oc=P(a,zd,this.Rd,!1,this);this.pc=P(a,yd,this.Sd,!1,this);this.nd=P(a,wd,this.Qg,!1,this);a=new eg(a);this.od=P(a,fg,this.gf,!1,this)};this.dd=function(){var a=jg;(this.r&lg)==mg&&((this.r&ng)==0?a=kg:(this.r&ng)==og?a=pg:(this.r&ng)==qg&&(a=rg));(this.r&lg)==sg&&(a=rg);if(a!=this.sb){if(this.sb==rg)this.B=this.tf+45*Math.PI*this.Za*
(this.aa-this.qf)/(180*this.c.height),this.D=this.sf+45*Math.PI*this.Za*(this.rf-this.ba)/(180*this.c.height);this.sb=a;if(this.sb==rg)this.qf=this.aa,this.rf=this.ba,this.tf=this.B,this.sf=this.D}if(this.sb==rg)this.B=this.tf+45*Math.PI*this.Za*(this.aa-this.qf)/(180*this.c.height),this.D=this.sf+45*Math.PI*this.Za*(this.rf-this.ba)/(180*this.c.height)};this.gf=function(a){if(this.rb||this.c.pa.Wb)this.tb=0;else{if(this.sb==jg)if((this.r&ng)==0){var b={},c,d;this.tb>0?(c=this.Va[0],d=this.Va[1]):
(c=this.aa,d=this.ba);this.c.Td(c,d,b);if(b.hit){this.Va=[c,d];this.tb=500;this.Nb.n(this.p,this.m,this.f);this.Nb.ma(this.s);c=this.s[0]-b.x;d=this.s[1]-b.y;b=this.s[2]-b.z;a.Cf>0?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,b*=-0.2);var e=new O(0,0,0);e.ec(this.s[0]+c,this.s[1]+d,this.s[2]+b);this.p=e.G[0];this.m=e.G[1];if(this.be){if(e.G[2]>this.f)this.f=e.G[2]}else this.f=e.G[2];this.Oa=!0;if(this.f<this.Fa)this.f=this.Fa,this.Oa=!0;else if(this.f>this.re)this.f=this.re,this.Oa=!0}}else(this.r&ng)==
og&&(this.D+=5*a.Cf*Math.PI*this.Za/180);return this.W(a)}};this.ef=function(a){if(!this.rb&&!this.c.pa.Wb){if(a.keyCode==66)this.Zd=!1;if(a.keyCode==16)return this.r|=og,this.W(a);else if(a.keyCode==17)return this.r|=qg,this.W(a);else if(a.keyCode==37||a.keyCode==65)return this.r|=tg,this.W(a);else if(a.keyCode==38||a.keyCode==87)return this.r|=ug,this.W(a);else if(a.keyCode==39||a.keyCode==68)return this.r|=vg,this.W(a);else if(a.keyCode==40||a.keyCode==83)return this.r|=wg,this.W(a);this.dd();
return!0}};this.ff=function(a){if(a.keyCode==16)return this.r&=~og,this.W(a);else if(a.keyCode==17)return this.r&=~qg,this.W(a);else if(a.keyCode==37||a.keyCode==65)return this.r&=~tg,this.W(a);else if(a.keyCode==38||a.keyCode==87)return this.r&=~ug,this.W(a);else if(a.keyCode==39||a.keyCode==68)return this.r&=~vg,this.W(a);else if(a.keyCode==40||a.keyCode==83)return this.r&=~wg,this.W(a);this.dd();return!0};this.Qg=function(a){if(!this.rb&&!this.c.pa.Wb){var b={};this.c.Td(this.aa,this.ba,b);if(b.hit){this.c.Xg(2E3);
var c=this.f;c>1E6?Ne(this.c.pa,b.lng,b.lat,1E6,h,h,h):c>25E4?Ne(this.c.pa,b.lng,b.lat,25E4,h,h,h):c>5E4?Ne(this.c.pa,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,Ne(this.c.pa,b.lng,b.lat,c,0,-90,0));this.Va=[this.aa,this.ba];this.tb=2500}return this.W(a)}};this.Qd=function(a){if(this.c&&this.c.H&&!this.rb&&!this.c.pa.Wb){this.aa=a.offsetX-this.c.H.offsetLeft;this.ba=a.offsetY-this.c.H.offsetTop;if(Od(a,Kd))this.r|=mg,document.body.style.cursor="move",this.Yd=!0;else if(Od(a,Ld))return!1;else Od(a,Md)&&(this.r|=
sg);this.dd();return this.W(a)}};this.Sd=function(a){if(this.c&&this.c.H){this.Eb=!0;this.aa=a.offsetX-this.c.H.offsetLeft;this.ba=a.offsetY-this.c.H.offsetTop;if(Od(a,Kd))this.r&=~mg,this.hc=!1,document.body.style.cursor="default",this.Yd=!1;else if(Od(a,Ld))return!1;else Od(a,Md)&&(this.r&=~sg);this.dd();return this.W(a)}};this.Rd=function(a){if(this.c&&this.c.H&&!this.rb&&!this.c.pa.Wb)return this.Eb=this.sb==kg,this.nf=!0,this.$j=a.offsetX-this.c.H.offsetLeft-this.aa,this.ak=a.offsetY-this.c.H.offsetTop-
this.ba,this.aa=a.offsetX-this.c.H.offsetLeft,this.ba=a.offsetY-this.c.H.offsetTop,this.dd(),this.W(a)};this.Ee=function(a){if(this.xa==vc){var b=this.ra*this.f/5E3;this.be||(this.f-=a*b);if(this.f<this.Fa)this.f=this.Fa;this.Oa=!0}else if(this.xa==wc){b=this.ra*this.f/5E3;this.f+=a*b;if(this.f>this.re)this.f=this.re;this.Oa=!0}else if(this.xa==yc)this.B=this.ra;else if(this.xa==zc)if(b=Math.sin(this.ra),this.D+=a/5E3*-Math.cos(this.ra),this.B+=a/5E3*b,this.D<-Math.PI/2)this.D=-Math.PI/2;else if(this.D>
0)this.D=0;if(this.tb>0&&(this.kd=!0,this.tb-=a,this.tb<=0))this.tb=0,this.kd=!1;if((this.r&xg||this.xa==xc)&&(this.r&ng)==0){b=0;this.r&ug&&(b+=1);this.r&wg&&(b-=1);var c=0;this.r&tg&&(c-=1);this.r&vg&&(c+=1);var d;d=this.xa==xc?Math.PI*this.ra/180:Math.atan2(c,b);b=this.f/5E5;b>10?b=10:b<0.001&&(b=0.001);var a=b*a/5E4,b=Math.PI*this.m/180,e=Math.sin(b),c=Math.cos(b),f=this.B+d;d=Math.PI*this.p/180;var g=kc/Math.sqrt(1-lc*e*e),e=kc/g*a*Math.sin(f)/Math.cos(b),a=kc/(g/(1+mc*c*c))*a*Math.cos(f)+b;
this.p=180*(e+d)/Math.PI;this.m=180*a/Math.PI}for(;this.p>180;)this.p-=180;for(;this.p<-180;)this.p+=180;for(;this.m>90;)this.m-=180;for(;this.m<-90;)this.m+=180;if(this.Oa)if(this.Oa=!1,a=this.c.$f(this.p,this.m),a.hasvalue){if(this.f-this.Fa<a.elevation)this.f=a.elevation+this.Fa,this.Oa=!0;this.be=!1}else if(this.f<5E3)this.Oa=this.be=!0};this.Ab=function(a,b,c){this.Zd=!1;this.Lb.af();this.B=a;this.D=b;this.Ha=c};this.Yg=function(a,b,c,d){this.Zd=!0;this.jh=a;this.kh=b;this.lh=c;this.ih=d;var e=
a,a=b,b=e,e=a*b+c*d;if(e>0.499)this.B=2*Math.atan2(a,d),this.D=Math.PI/2,this.Ha=0;else if(e<-0.499)this.B=-2*Math.atan2(a,d),this.D=-Math.PI/2,this.Ha=0;else{var f=c*c;this.B=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.D=Math.asin(2*e);this.Ha=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.Go=function(a,b,c){a.a[0]=b.a[0]*c.a[0]+b.a[1]*c.a[4]+b.a[2]*c.a[8];a.a[1]=b.a[0]*c.a[1]+b.a[1]*c.a[5]+b.a[2]*c.a[9];a.a[2]=b.a[0]*c.a[2]+b.a[1]*c.a[6]+b.a[2]*c.a[10];a.a[4]=b.a[4]*c.a[0]+b.a[5]*c.a[4]+b.a[6]*c.a[8];
a.a[5]=b.a[4]*c.a[1]+b.a[5]*c.a[5]+b.a[6]*c.a[9];a.a[6]=b.a[4]*c.a[2]+b.a[5]*c.a[6]+b.a[6]*c.a[10];a.a[8]=b.a[8]*c.a[0]+b.a[9]*c.a[4]+b.a[10]*c.a[8];a.a[9]=b.a[8]*c.a[1]+b.a[9]*c.a[5]+b.a[10]*c.a[9];a.a[10]=b.a[8]*c.a[2]+b.a[9]*c.a[6]+b.a[10]*c.a[10]};this.ik=function(a,b){this.mf.da(this.Wd);var c={};this.c.cg(a,b,c,!0);c.hit?(this.fa.x=c.x,this.fa.y=c.y,this.fa.h=c.z,this.hc=!0):this.hc=!1};this.hk=function(a,b){if(this.hc){var c={};this.c.cg(a,b,c,!1);if(c.hit)if(this.ea.x=c.x,this.ea.y=c.y,this.ea.h=
c.z,this.hc=!0,this.ea.x==this.fa.x&&this.ea.y==this.fa.y&&this.ea.h==this.fa.h)this.Wd.da(this.mf);else{var d=this.fa.x*this.ea.x+this.fa.y*this.ea.y+this.fa.h*this.ea.h,c=Math.sqrt((1-d)*0.5),d=Math.sqrt((1+d)*0.5),e={};e.x=this.fa.y*this.ea.h-this.fa.h*this.ea.y;e.y=this.ea.x*this.fa.h-this.fa.x*this.ea.h;e.h=this.fa.x*this.ea.y-this.fa.y*this.ea.x;c/=Math.sqrt(e.x*e.x+e.y*e.y+e.h*e.h);e.x*=c;e.y*=c;e.h*=c;this.eh.Zf(e.x,e.y,e.h,d);this.Wd.P(this.mf,this.eh);c=[];(new O(this.p,this.m,this.f)).ma(c);
c=this.Wd.Ya(new I(c[0],c[1],c[2]));d=new O(0,0,0);d.ec(c.a[0],c.a[1],c.a[2]);this.p=d.G[0];this.m=d.G[1];this.Oa=!0}else this.hc=!1}};this.W=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1};this.am=ba("Fa")}Ba(ig,hg);var mg=1,sg=4,lg=7,tg=16,ug=32,vg=64,wg=128,xg=240,og=256,qg=512,ng=768,jg=0,kg=1,rg=2,pg=3;function yg(){this.rd=new K;this.Jh=1.0E-5;this.Ch=10;this.Bm=45;this.Op=ea("Bm");this.$c=function(){this.c.fm(this.rd)};this.ad=n();this.bd=function(a){this.rd.Sl(this.Bm,this.c.width/this.c.height,this.Jh,this.Ch);a.ag[a.ag.length-1].da(this.rd)};this.Ce=n();this.Be=n();this.De=n()}yg.prototype=new we;function zg(){this.rk=this.Hf=0;this.Ca=new K;this.Xd=this.rb=!1;this.fd=new I;this.fd.n(1,0,0);this.B=0;this.D=-1.5707963267948966;this.Ha=0;this.p=7.77442050946391;this.m=47.472720418012834;this.f=75E5;this.sb=Ag;this.rf=this.qf=this.r=0;this.zo=!0;this.bk=this.dk=this.jc=this.ic=this.ck=this.$d=this.ae=this.sf=this.tf=0;this.of=this.Zj=this.ed=this.hh=this.gh=this.Za=1;this.ek=this.fk=this.Ma=this.Na=0;this.Wj=!1;this.Yj=0;this.Do=new K;this.ak=this.$j=this.ba=this.aa=0;this.lc=new I;this.nf=this.Yd=
this.Eb=!1;this.Bo=this.Co=this.pf=0;this.s=Array(3);this.Nb=new O(0,0,0);this.qc=new K;this.td=new K;this.qd=new K;this.Lb=new K;this.Ca=new K;this.bb=new K;this.sd=new K;this.Lb.af();this.Zd=!1;this.lh=this.kh=this.jh=0;this.ih=1;this.hc=!1;this.vo=this.wo=this.xo=0;this.fa={};this.ea={};this.mf=new K;this.eh=new K;this.Wd=new K;this.Eo=new K;this.Fo=new K;this.Fa=50;this.re=1E7;this.xa=uc;this.ra=0;this.kd=!1;this.Va=[0,0];this.tb=0;this.be=this.Oa=!1;this.od=this.nd=this.pc=this.oc=this.nc=this.md=
this.ld=this.Io=0;this.Og=function(a){if(!a)this.rb=!1;this.Xd=a};this.$c=function(){this.c.$g(this.Ca)};this.ad=n();this.bd=function(a){this.f<2E3?(this.c.e.yb.Jh=1.0E-7,this.c.e.yb.Ch=1.2):(this.c.e.yb.Jh=1.0E-5,this.c.e.yb.Ch=10);this.xa=a.xa;this.ra=a.ra;a.kd=this.kd;a.Va[0]=this.Va[0];a.Va[1]=this.Va[1];a.Mc=1;this.rb=this.Xd?!0:a.Sk!=0?!0:!1;if(this.sb==Bg&&!this.rb&&!this.c.pa.Wb){if(this.Yd)this.Yd=!1,this.ik(this.aa,this.ba);if(this.Eb&&this.nf)this.nf=!1,this.hk(this.aa,this.ba)}this.Nb.n(this.p,
this.m,this.f);this.Nb.ma(this.s);this.fd.n(this.s[0],this.s[1],this.s[2]);this.td.cd(this.s[0],this.s[1],this.s[2]);this.qd.Od(this.p,this.m);this.Zd?(this.qc.Zf(this.jh,this.kh,this.lh,this.ih),this.Lb.zj()):this.qc.Fg(this.B,this.D,this.Ha);this.bb.P(this.td,this.qd);this.sd.P(this.bb,this.qc);this.bb.P(this.sd,this.Lb);this.Ca.Ae(this.bb);a.Gi=this.B;a.ya(this.s[0],this.s[1],this.s[2]);Ac(a,this.p,this.m,this.f)};this.Ce=n();this.Be=n();this.bg=function(){R(this.ld);R(this.md);R(this.nc);R(this.oc);
R(this.pc);R(this.nd);R(this.od)};this.De=function(a){this.ld=P(window,Ad,this.ef,!1,this);this.md=P(window,Bd,this.ff,!1,this);this.nc=P(a,xd,this.Qd,!1,this);this.oc=P(a,zd,this.Rd,!1,this);this.pc=P(a,yd,this.Sd,!1,this);this.nd=P(a,wd,this.Qg,!1,this);a=new eg(a);this.od=P(a,fg,this.gf,!1,this)};this.dd=function(){var a=Ag;(this.r&Cg)==Dg&&((this.r&Eg)==0?a=Bg:(this.r&Eg)==Fg?a=Gg:(this.r&Eg)==Hg&&(a=Ig));(this.r&Cg)==Jg&&(a=Ig);if(a!=this.sb){if(this.sb==Ig)this.B=this.tf+45*Math.PI*this.Za*
(this.aa-this.qf)/(180*this.c.height),this.D=this.sf+45*Math.PI*this.Za*(this.rf-this.ba)/(180*this.c.height);this.sb=a;if(this.sb==Ig)this.qf=this.aa,this.rf=this.ba,this.tf=this.B,this.sf=this.D}if(this.sb==Ig)this.B=this.tf+45*Math.PI*this.Za*(this.aa-this.qf)/(180*this.c.height),this.D=this.sf+45*Math.PI*this.Za*(this.rf-this.ba)/(180*this.c.height)};this.gf=function(a){if(this.rb||this.c.pa.Wb)this.tb=0;else{if(this.sb==Ag)if((this.r&Eg)==0){var b={},c,d;this.tb>0?(c=this.Va[0],d=this.Va[1]):
(c=this.aa,d=this.ba);this.c.Td(c,d,b);if(b.hit){this.Va=[c,d];this.tb=500;this.Nb.n(this.p,this.m,this.f);this.Nb.ma(this.s);c=this.s[0]-b.x;d=this.s[1]-b.y;b=this.s[2]-b.z;a.Cf>0?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,b*=-0.2);var e=new O(0,0,0);e.ec(this.s[0]+c,this.s[1]+d,this.s[2]+b);this.p=e.G[0];this.m=e.G[1];if(this.be){if(e.G[2]>this.f)this.f=e.G[2]}else this.f=e.G[2];this.Oa=!0;if(this.f<this.Fa)this.f=this.Fa,this.Oa=!0;else if(this.f>this.re)this.f=this.re,this.Oa=!0}}else(this.r&Eg)==
Fg&&(this.D+=5*a.Cf*Math.PI*this.Za/180);return this.W(a)}};this.ef=function(a){if(!this.rb&&!this.c.pa.Wb){if(a.keyCode==66)this.Zd=!1;if(a.keyCode==16)return this.r|=Fg,this.W(a);else if(a.keyCode==17)return this.r|=Hg,this.W(a);else if(a.keyCode==37||a.keyCode==65)return this.r|=Kg,this.W(a);else if(a.keyCode==38||a.keyCode==87)return this.r|=Lg,this.W(a);else if(a.keyCode==39||a.keyCode==68)return this.r|=Mg,this.W(a);else if(a.keyCode==40||a.keyCode==83)return this.r|=Ng,this.W(a);this.dd();
return!0}};this.ff=function(a){if(a.keyCode==16)return this.r&=~Fg,this.W(a);else if(a.keyCode==17)return this.r&=~Hg,this.W(a);else if(a.keyCode==37||a.keyCode==65)return this.r&=~Kg,this.W(a);else if(a.keyCode==38||a.keyCode==87)return this.r&=~Lg,this.W(a);else if(a.keyCode==39||a.keyCode==68)return this.r&=~Mg,this.W(a);else if(a.keyCode==40||a.keyCode==83)return this.r&=~Ng,this.W(a);this.dd();return!0};this.Qg=function(a){if(!this.rb&&!this.c.pa.Wb){var b={};this.c.Td(this.aa,this.ba,b);if(b.hit){this.c.Xg(2E3);
var c=this.f;c>1E6?Ne(this.c.pa,b.lng,b.lat,1E6,h,h,h):c>25E4?Ne(this.c.pa,b.lng,b.lat,25E4,h,h,h):c>5E4?Ne(this.c.pa,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,Ne(this.c.pa,b.lng,b.lat,c,0,-90,0));this.Va=[this.aa,this.ba];this.tb=2500}return this.W(a)}};this.Qd=function(a){if(this.c&&this.c.H&&!this.rb&&!this.c.pa.Wb){this.aa=a.offsetX-this.c.H.offsetLeft;this.ba=a.offsetY-this.c.H.offsetTop;if(Od(a,Kd))this.r|=Dg,document.body.style.cursor="move",this.Yd=!0;else if(Od(a,Ld))return!1;else Od(a,Md)&&(this.r|=
Jg);this.dd();return this.W(a)}};this.Sd=function(a){if(this.c&&this.c.H){this.Eb=!0;this.aa=a.offsetX-this.c.H.offsetLeft;this.ba=a.offsetY-this.c.H.offsetTop;if(Od(a,Kd))this.r&=~Dg,this.hc=!1,document.body.style.cursor="default",this.Yd=!1;else if(Od(a,Ld))return!1;else Od(a,Md)&&(this.r&=~Jg);this.dd();return this.W(a)}};this.Rd=function(a){if(this.c&&this.c.H&&!this.rb&&!this.c.pa.Wb)return this.Eb=this.sb==Bg,this.nf=!0,this.$j=a.offsetX-this.c.H.offsetLeft-this.aa,this.ak=a.offsetY-this.c.H.offsetTop-
this.ba,this.aa=a.offsetX-this.c.H.offsetLeft,this.ba=a.offsetY-this.c.H.offsetTop,this.dd(),this.W(a)};this.Ee=function(a){if(this.xa==vc){var b=this.ra*this.f/5E3;this.be||(this.f-=a*b);if(this.f<this.Fa)this.f=this.Fa;this.Oa=!0}else if(this.xa==wc){b=this.ra*this.f/5E3;this.f+=a*b;if(this.f>this.re)this.f=this.re;this.Oa=!0}else if(this.xa==yc)this.B=this.ra;else if(this.xa==zc)if(b=Math.sin(this.ra),this.D+=a/5E3*-Math.cos(this.ra),this.B+=a/5E3*b,this.D<-Math.PI/2)this.D=-Math.PI/2;else if(this.D>
0)this.D=0;if(this.tb>0&&(this.kd=!0,this.tb-=a,this.tb<=0))this.tb=0,this.kd=!1;if((this.r&Og||this.xa==xc)&&(this.r&Eg)==0){b=0;this.r&Lg&&(b+=1);this.r&Ng&&(b-=1);var c=0;this.r&Kg&&(c-=1);this.r&Mg&&(c+=1);var d;d=this.xa==xc?Math.PI*this.ra/180:Math.atan2(c,b);b=this.f/5E5;b>10?b=10:b<0.001&&(b=0.001);var a=b*a/5E4,b=Math.PI*this.m/180,e=Math.sin(b),c=Math.cos(b),f=this.B+d;d=Math.PI*this.p/180;var g=kc/Math.sqrt(1-lc*e*e),e=kc/g*a*Math.sin(f)/Math.cos(b),a=kc/(g/(1+mc*c*c))*a*Math.cos(f)+b;
this.p=180*(e+d)/Math.PI;this.m=180*a/Math.PI}for(;this.p>180;)this.p-=180;for(;this.p<-180;)this.p+=180;for(;this.m>90;)this.m-=180;for(;this.m<-90;)this.m+=180;if(this.Oa)if(this.Oa=!1,a=this.c.$f(this.p,this.m),a.hasvalue){if(this.f-this.Fa<a.elevation)this.f=a.elevation+this.Fa,this.Oa=!0;this.be=!1}else if(this.f<5E3)this.Oa=this.be=!0};this.Ab=function(a,b,c){this.Zd=!1;this.Lb.af();this.B=a;this.D=b;this.Ha=c};this.Yg=function(a,b,c,d){this.Zd=!0;this.jh=a;this.kh=b;this.lh=c;this.ih=d;var e=
a,a=b,b=e,e=a*b+c*d;if(e>0.499)this.B=2*Math.atan2(a,d),this.D=Math.PI/2,this.Ha=0;else if(e<-0.499)this.B=-2*Math.atan2(a,d),this.D=-Math.PI/2,this.Ha=0;else{var f=c*c;this.B=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.D=Math.asin(2*e);this.Ha=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.Go=function(a,b,c){a.a[0]=b.a[0]*c.a[0]+b.a[1]*c.a[4]+b.a[2]*c.a[8];a.a[1]=b.a[0]*c.a[1]+b.a[1]*c.a[5]+b.a[2]*c.a[9];a.a[2]=b.a[0]*c.a[2]+b.a[1]*c.a[6]+b.a[2]*c.a[10];a.a[4]=b.a[4]*c.a[0]+b.a[5]*c.a[4]+b.a[6]*c.a[8];
a.a[5]=b.a[4]*c.a[1]+b.a[5]*c.a[5]+b.a[6]*c.a[9];a.a[6]=b.a[4]*c.a[2]+b.a[5]*c.a[6]+b.a[6]*c.a[10];a.a[8]=b.a[8]*c.a[0]+b.a[9]*c.a[4]+b.a[10]*c.a[8];a.a[9]=b.a[8]*c.a[1]+b.a[9]*c.a[5]+b.a[10]*c.a[9];a.a[10]=b.a[8]*c.a[2]+b.a[9]*c.a[6]+b.a[10]*c.a[10]};this.ik=function(a,b){this.mf.da(this.Wd);var c={};this.c.cg(a,b,c,!0);c.hit?(this.fa.x=c.x,this.fa.y=c.y,this.fa.h=c.z,this.hc=!0):this.hc=!1};this.hk=function(a,b){if(this.hc){var c={};this.c.cg(a,b,c,!1);if(c.hit)if(this.ea.x=c.x,this.ea.y=c.y,this.ea.h=
c.z,this.hc=!0,this.ea.x==this.fa.x&&this.ea.y==this.fa.y&&this.ea.h==this.fa.h)this.Wd.da(this.mf);else{var d=this.fa.x*this.ea.x+this.fa.y*this.ea.y+this.fa.h*this.ea.h,c=Math.sqrt((1-d)*0.5),d=Math.sqrt((1+d)*0.5),e={};e.x=this.fa.y*this.ea.h-this.fa.h*this.ea.y;e.y=this.ea.x*this.fa.h-this.fa.x*this.ea.h;e.h=this.fa.x*this.ea.y-this.fa.y*this.ea.x;c/=Math.sqrt(e.x*e.x+e.y*e.y+e.h*e.h);e.x*=c;e.y*=c;e.h*=c;this.eh.Zf(e.x,e.y,e.h,d);this.Wd.P(this.mf,this.eh);c=[];(new O(this.p,this.m,this.f)).ma(c);
c=this.Wd.Ya(new I(c[0],c[1],c[2]));d=new O(0,0,0);d.ec(c.a[0],c.a[1],c.a[2]);this.p=d.G[0];this.m=d.G[1];this.Oa=!0}else this.hc=!1}};this.W=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1};this.am=ba("Fa")}Ba(zg,hg);var Dg=1,Jg=4,Cg=7,Kg=16,Lg=32,Mg=64,Ng=128,Og=240,Fg=256,Hg=512,Eg=768,Ag=0,Bg=1,Ig=2,Gg=3;function Pg(a){this.rk=this.Hf=0;this.Ca=new K;this.fd=new I;this.fd.n(1,0,0);this.B=0;this.D=-0.03;this.Ha=0;this.p=7.616;this.m=45.9088;this.f=17E3;this.jc=this.ic=this.ck=this.$d=this.ae=0;this.yo=!1;this.bk=this.dk=0;this.of=this.Zj=this.ed=this.hh=this.gh=this.Za=1;this.ek=this.fk=this.Ma=this.Na=0;this.Wj=!1;this.uo=0.001;this.Ao=-0.4;this.Fb=!1;this.ba=this.aa=this.Yj=0;this.fh=!1;this.lc=new I;this.vf=this.uf=0;this.Xd=this.Eb=!1;this.s=Array(3);this.Nb=new O(0,0,0);this.qc=new K;this.td=
new K;this.qd=new K;this.Lb=new K;this.Ca=new K;this.bb=new K;this.sd=new K;this.Lb.af();this.Fa=100;this.ia=i;this.od=this.nd=this.pc=this.oc=this.nc=this.md=this.ld=0;this.yi=this.zi=!1;this.ze=[];if(v(a.ElevationSteps))this.ze=a.ElevationSteps;this.Ol=0;this.Nl=7E6;this.cc=[];if(v(a.BoundingRect))this.cc=a.BoundingRect;this.$n=[];if(v(a.BoundingPolygon))this.cc=[],this.$n=a.BoundingPolygon;this.Og=ba("Xd");this.$c=function(){this.c.$g(this.Ca)};this.ad=n();this.bd=function(a){a.Mc=0;this.Nb.n(this.p,
this.m,this.f);this.Nb.ma(this.s);this.fd.n(this.s[0],this.s[1],this.s[2]);this.td.cd(this.s[0],this.s[1],this.s[2]);this.qd.Od(this.p,this.m);this.qc.Fg(this.B,this.D,this.Ha);this.bb.P(this.td,this.qd);this.sd.P(this.bb,this.qc);this.bb.P(this.sd,this.Lb);this.Ca.Ae(this.bb);a.Gi=this.B;a.ya(this.s[0],this.s[1],this.s[2]);Ac(a,this.p,this.m,this.f);if(this.ia)this.ia.Yb=this.p,this.ia.Xb=this.m,this.ia.Vb=this.f,this.ia.pitch=this.D*57.29577951308232,this.ia.Sa=this.B*57.29577951308232,this.ia.ac=
this.Ha*57.29577951308232};this.Ce=n();this.Be=n();this.bg=function(){R(this.ld);R(this.md);R(this.nc);R(this.oc);R(this.pc);R(this.nd);R(this.od)};this.De=function(a){this.ld=P(window,Ad,this.ef,!1,this);this.md=P(window,Bd,this.ff,!1,this);this.nc=P(a,xd,this.Qd,!1,this);this.pc=P(a,yd,this.Sd,!1,this);this.oc=P(a,zd,this.Rd,!1,this);a=new eg(a);this.od=P(a,fg,this.gf,!1,this)};this.gf=function(a){a.Cf>0?this.Ma>0?this.Na=this.Ma=0:this.Na+=0.05:this.Na>0?this.Ma=this.Na=0:this.Ma+=0.05};this.ef=
function(a){if(a.keyCode==81)this.jc=this.Za*this.of,this.zi=!0;else if(a.keyCode==65)this.jc=-this.Za*this.of,this.yi=!0;else if(a.keyCode==83)this.ic=0.5*this.ed;else if(a.keyCode==88)this.ic=-0.5*this.ed;this.Hf=a.keyCode};this.ff=function(a){if(a.keyCode==81)this.jc=0,this.zi=!1;else if(a.keyCode==65)this.jc=0,this.yi=!1;else if(a.keyCode==83)this.ic=0;else if(a.keyCode==88)this.ic=0;this.Hf=0};this.Qd=function(a){if(Od(a,Kd))this.pf=0,this.lc.n(0,0,0),this.uf=a.offsetX,this.vf=a.offsetY,this.fh=
this.Eb=!0;this.aa=a.offsetX;this.ba=a.offsetY;if(Od(a,Ld))return!1};this.Sd=function(a){if(Od(a,Kd))this.Eb=this.fh=!1;this.aa=a.offsetX;this.ba=a.offsetY;this.ae=this.$d=this.pf=0;if(Od(a,Ld))return!1};this.Rd=function(a){this.aa=a.offsetX;this.ba=a.offsetY;if(this.Eb){var c=(this.uf-a.offsetX)/this.c.width,d=(this.vf-a.offsetY)/this.c.height;c*=c;d*=d;this.pf=Math.sqrt(c+d);this.lc.n(a.offsetX-this.uf,this.c.height-1-a.offsetY-(this.c.height-1-this.vf),0);this.lc.Bc();var a=this.lc.a[0],e=this.lc.a[1],
f=0,g=0;a>0?f=1:a<0&&(f=-1);e>0?g=1:e<0&&(g=-1);this.$d=this.Za*this.gh*d*g;this.ae=this.hh*c*f}};this.Ee=function(a){var c=this.ic*a/500,d=this.ae*a/500,e=this.jc*a,f=0,f=0,g=this.f/5E5*(this.f/5E5);g>10?g=10:g<0.001&&(g=0.001);var j=g*this.$d*a/250;if(this.Na>0){var k=0.5*this.ed*a/1E3;this.D+=k;this.Na-=k;if(this.Na<0)this.D+=this.Na,this.Na=0;this.Fb=!0}if(this.Ma>0){k=0.5*this.ed*a/1E3;this.D-=k;this.Ma-=k;if(this.Ma<0)this.D-=this.Ma,this.Ma=0;this.Fb=!0}if(c)this.D+=c,this.Fb=!0;if(d){this.B+=
d;this.B>2*Math.PI&&(this.B-=2*Math.PI);if(this.B<0)this.B=2*Math.PI-this.B;this.Fb=!0}if(this.Fb&&(f=this.c.Eg(),isNaN(f)))f=this.Fa;if(e){if(this.ze.length==0)a=1E3*e*g,this.f+=a,f+=a;else if(this.zi){this.zi=!1;for(a=0;a<this.ze.length;a++)if(this.ze[a]>this.f){this.f=this.ze[a];break}}else if(this.yi){this.yi=!1;for(a=this.ze.length-1;a>=0;a--)if(this.ze[a]<this.f){this.f=this.ze[a];break}}if(this.f>this.Nl)this.f=this.Nl;else if(this.f<this.Ol)this.f=this.Ol}if(j){a=this.m*0.017453292519943295;
e=Math.sin(a);g=Math.cos(a);d=this.B;c=this.p*0.017453292519943295;e=kc/Math.sqrt(1-lc*e*e);g=kc/(e/(1+mc*g*g))*j*Math.cos(d);k=kc/e*j*Math.sin(d)/Math.cos(a);j=kc/e*j*Math.sin(d)*Math.tan(a)+d;this.p=57.29577951308232*(k+c);this.m=57.29577951308232*(g+a);for(this.B=j;this.p>180;)this.p-=360;for(;this.p<-180;)this.p+=360;for(;this.m>90;)this.m=180-this.m;for(;this.m<-90;)this.m=-180-this.m;this.Fb=!0}f<this.Fa&&this.Fb&&(this.f+=this.Fa-f);if(this.cc.length==2&&this.cc[0].length==2&&this.cc[1].length==
2){if(this.cc[0][0]>this.p)this.p=this.cc[0][0];if(this.cc[1][0]<this.p)this.p=this.cc[1][0];if(this.cc[0][1]>this.m)this.m=this.cc[0][1];if(this.cc[1][1]<this.m)this.m=this.cc[1][1]}if(this.ia)this.ia.Yb=this.p,this.ia.Xb=this.m,this.ia.Vb=this.f,this.ia.pitch=this.D*57.29577951308232,this.ia.Sa=this.B*57.29577951308232,this.ia.ac=this.Ha*57.29577951308232}}Ba(Pg,hg);function Qg(a,b){this.c=a;this.S=new ig;this.S.c=a;xe(this.S);this.yb=new yg;this.q=new dg(b);this.te=new ze;this.yb.c=a;xe(this.yb);this.q.c=a;xe(this.q);this.te.c=a;xe(this.te);this.Md=new tc;this.Mb=new K;this.Ca=new K;this.bp=new K}Qg.prototype.pb=function(){this.S.$c();this.S.ad();this.yb.$c();this.yb.ad();this.q.$c();this.q.ad();this.te.$c();this.te.ad()};
Qg.prototype.o=function(){if(this.S)this.S.Cc(),this.S=i;if(this.yb)this.yb.Cc(),this.yb=i;if(this.q)this.q.Cc(),this.q=i;if(this.te)this.te.Cc(),this.te=i};
Qg.prototype.Sj=function(a){var b,c,d,e,f,g;if(v(a.type)){if(a.type=="globe")this.S.Cc(),this.S=new ig,this.S.c=this.c;else if(a.type=="fly")this.S.Cc(),this.S=new hg,this.S.c=this.c;else if(a.type=="constrained")this.S.Cc(),this.S=new Pg(a),this.S.c=this.c;else if(a.type=="dynamic")this.S.Cc(),this.S=new zg,this.S.c=this.c;b=this.S.p;c=this.S.m;d=this.S.f;e=this.S.B;f=this.S.D;g=this.S.Ha;v(a.Longitude)&&(b=a.Longitude);v(a.Latitude)&&(c=a.Latitude);v(a.Elevation)&&(d=a.Elevation);v(a.Yaw)&&(e=H(a.Yaw));
v(a.Pitch)&&(f=H(a.Pitch));v(a.Roll)&&(g=H(a.Roll));this.S.ya(b,c,d);this.S.Ab(e,f,g);xe(this.S)}};function Rg(a){this.b=a;this.Gd=!1;this.xk=this.nl=this.Ob=this.Gk=this.wl=this.xc=this.Ek=this.ul=this.Qc=this.Dk=this.tl=this.Pc=this.yk=this.ol=this.Nc=this.Bk=this.rl=this.vc=this.Fk=this.vl=this.wc=this.Ak=this.ql=this.Oc=this.Ck=this.sl=this.Pb=this.zk=this.pl=this.vd=i}function Mc(a,b,c){a.vd&&(a.b.useProgram(a.vd),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.vd,"matMVP"),!1,b.La()),a.b.uniform4fv(a.b.getUniformLocation(a.vd,"uColor"),c.La()))}
function Nc(a,b,c){a.Oc&&(a.b.useProgram(a.Oc),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Oc,"matMVP"),!1,b.La()),a.b.uniform4fv(a.b.getUniformLocation(a.Oc,"uColor"),c.La()))}
function Sg(a){a.Gd=!0;a.pl=Tg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.zk=Tg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");if(a.pl&&a.zk)a.vd=a.b.createProgram(),a.b.attachShader(a.vd,a.pl),a.b.attachShader(a.vd,a.zk),a.b.bindAttribLocation(a.vd,0,"aPosition"),a.b.linkProgram(a.vd),!a.b.getProgramParameter(a.vd,
a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert("Shader Link: "+a.b.getProgramInfoLog(a.vd));a.sl=Tg(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.Ck=Tg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");if(a.sl&&a.Ck)a.Pb=a.b.createProgram(),a.b.attachShader(a.Pb,a.sl),a.b.attachShader(a.Pb,a.Ck),a.b.bindAttribLocation(a.Pb,0,
"aPosition"),a.b.bindAttribLocation(a.Pb,1,"aNormal"),a.b.bindAttribLocation(a.Pb,2,"aTexCoord"),a.b.linkProgram(a.Pb),!a.b.getProgramParameter(a.Pb,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Pb));a.ql=Tg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.Ak=Tg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = vColor * uColor;\n}\n\n");
if(a.ql&&a.Ak)a.Oc=a.b.createProgram(),a.b.attachShader(a.Oc,a.ql),a.b.attachShader(a.Oc,a.Ak),a.b.bindAttribLocation(a.Oc,0,"aPosition"),a.b.bindAttribLocation(a.Oc,1,"aColor"),a.b.linkProgram(a.Oc),!a.b.getProgramParameter(a.Oc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Oc));a.vl=Tg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Fk=Tg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord)*uColor;\n}\n\n");if(a.vl&&a.Fk)a.wc=a.b.createProgram(),a.b.attachShader(a.wc,a.vl),a.b.attachShader(a.wc,a.Fk),a.b.bindAttribLocation(a.wc,0,"aPosition"),a.b.bindAttribLocation(a.wc,1,"aTexCoord"),a.b.linkProgram(a.wc),!a.b.getProgramParameter(a.wc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&
alert(a.b.getProgramInfoLog(a.wc));a.rl=Tg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.Bk=Tg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.rl&&a.Bk)a.vc=a.b.createProgram(),a.b.attachShader(a.vc,a.rl),a.b.attachShader(a.vc,a.Bk),a.b.bindAttribLocation(a.vc,0,"aPosition"),a.b.bindAttribLocation(a.vc,1,"aNormal"),a.b.bindAttribLocation(a.vc,2,"aTexCoord"),a.b.bindAttribLocation(a.vc,3,"aColor"),a.b.linkProgram(a.vc),!a.b.getProgramParameter(a.vc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.vc));a.ol=Tg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.yk=Tg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");if(a.ol&&a.yk)a.Nc=a.b.createProgram(),a.b.attachShader(a.Nc,a.ol),a.b.attachShader(a.Nc,a.yk),a.b.bindAttribLocation(a.Nc,0,"aPosition"),a.b.bindAttribLocation(a.Nc,1,"aTexCoord"),a.b.linkProgram(a.Nc),!a.b.getProgramParameter(a.Nc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&
alert("font shader: "+a.b.getProgramInfoLog(a.Nc));a.tl=Tg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.Dk=Tg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.tl&&a.Dk)a.Pc=a.b.createProgram(),a.b.attachShader(a.Pc,a.tl),a.b.attachShader(a.Pc,a.Dk),a.b.bindAttribLocation(a.Pc,0,"aPosition"),a.b.bindAttribLocation(a.Pc,1,"aTexCoord"),a.b.linkProgram(a.Pc),!a.b.getProgramParameter(a.Pc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert("poi shader: "+a.b.getProgramInfoLog(a.Pc));a.ul=Tg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.Ek=Tg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");if(a.ul&&a.Ek)a.Qc=a.b.createProgram(),a.b.attachShader(a.Qc,a.ul),a.b.attachShader(a.Qc,a.Ek),a.b.bindAttribLocation(a.Qc,0,"aPosition"),a.b.bindAttribLocation(a.Qc,1,"aColor"),a.b.linkProgram(a.Qc),!a.b.getProgramParameter(a.Qc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Qc));a.wl=Tg(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.Gk=Tg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
if(a.wl&&a.Gk)a.xc=a.b.createProgram(),a.b.attachShader(a.xc,a.wl),a.b.attachShader(a.xc,a.Gk),a.b.bindAttribLocation(a.xc,0,"aPosition"),a.b.bindAttribLocation(a.xc,1,"aTexCoord"),a.b.linkProgram(a.xc),!a.b.getProgramParameter(a.xc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.xc));a.nl=Tg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.xk=Tg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 uInvTexSize;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float weight=0.0; vec4 colorsum = vec4(0.0,0.0,0.0,0.0);\n   vec4 mid = texture2D(uTexture, vTexCoord);\n   if (mid.r == 1.0 && mid.g == 0.0 && mid.b == 1.0 && mid.a < 0.5)\n   {   for (int i=-3;i<3;i++) {\n       \n          for (int j=-3;j<3;j++) {\n          \n             vec4 val = texture2D(uTexture, vTexCoord + uInvTexSize * vec2(i,j));\n             if (val.r == 1.0 && val.g == 0.0 && val.b == 1.0 && val.a < 0.5) \n             {}\n             else \n             {                gl_FragColor = val; return;\n             }\n           }\n        }\n        gl_FragColor = vec4(0,1,0.5,0); return;\n   }\n   gl_FragColor = mid;\n}\n");
if(a.nl&&a.xk)a.Ob=a.b.createProgram(),a.b.attachShader(a.Ob,a.nl),a.b.attachShader(a.Ob,a.xk),a.b.bindAttribLocation(a.Ob,0,"aPosition"),a.b.bindAttribLocation(a.Ob,1,"aTexCoord"),a.b.linkProgram(a.Ob),!a.b.getProgramParameter(a.Ob,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Ob))}
function Tg(a,b,c){var d=a.b.createShader(b);if(!d)return i;a.b.shaderSource(d,c);a.b.compileShader(d);if(!a.b.getShaderParameter(d,a.b.COMPILE_STATUS)&&!a.b.isContextLost())return b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),i;return d};function Ug(a){this.c=a;this.oj=[];this.wd=[]}w("TextureManager",Ug);Ug.prototype.Fl=function(a,b,c,d){var e=this.oj[a];e?(this.wd[a]+=1,b(e)):(e=new M(this.c),N(e,a,b,c,d),this.wd[a]=1,this.oj[a]=e);return e};Ug.prototype.CreateTexture=Ug.prototype.Fl;Ug.prototype.Hl=function(a){this.wd[a]-=1;this.wd[a]==0&&(this.oj[a].o(),delete this.oj[a],delete this.wd[a])};Ug.prototype.DestroyTexture=Ug.prototype.Hl;var Vg=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function Wg(a){this.c=a;this.b=a.b;var b=0,c=0;this.Oi=new L(this.c);for(var a=[],d=[],e=0;e<16;e++)for(var f=0;f<16;f++){var b=e*0.0625,g=f*0.0625;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=c*4;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.Oi;if(a.length%5==0)c.A=new Float32Array(a),c.mode="font",c.T=5;Lc(this.Oi,d,"TRIANGLES");a=new M(this.c);N(a,Uc+"font.png");this.Oi.Gc(a);this.oq=new K;this.Dp=0}
Wg.prototype.ye=function(a,b,c,d,e){d==i&&(d=1);this.c.Dc();this.c.Tj();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new K,g=0,j=0,k=0;k<a.length;k++)g=a.charCodeAt(k),j+=Vg[g]/2*d,f.Vd(d,d,1),f.Rl(f,b+j,c,0),this.c.Fc(f),this.Oi.oa(!0,6,g*12,e),j+=Vg[g]/2*d;this.c.Bd();this.c.b.disable(this.c.b.BLEND);this.Dp=b-b};Wg.prototype.Jl=function(a){for(var b=0,c=0;c<a.length;c++)b+=Vg[a.charCodeAt(c)];return b};
Wg.prototype.jo=p(32);w("Font",Wg);Wg.prototype.DrawText=Wg.prototype.ye;Wg.prototype.GetStringHeight=Wg.prototype.jo;Wg.prototype.GetStringWidth=Wg.prototype.Jl;function Xg(a){this.c=a;this.b=a.b;this.Qf=!1;this.kl=this.uc=this.u=i;this.w=this.t=0}
Xg.prototype.Ig=function(a,b){this.Wf=document.createElement("canvas");this.Q=this.Wf.getContext("2d");this.Wa=new M(this.c);this.Wa.j=this.b.createTexture();this.text=a;this.Q.save();this.Q.font=b.fontString;this.Q.textAlign="left";this.Q.textBaseline="top";this.Q.lineWidth=b.lineWidth;this.Q.strokeStyle=b.strokeStyle;var c=this.Q.measureText(this.text),c=Math.round(c.width);this.Q.restore();this.t=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.w=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.Vc=oc(this.t);this.Uc=oc(this.w);this.Wa.width=this.Vc;this.Wa.height=this.Uc;this.Q.canvas.width=this.Vc;this.Q.canvas.height=this.Uc;this.Q.fillStyle=b.backgroundColor;this.Q.fillRect(0,0,this.t,this.w);this.Q.shadowOffsetX=b.shadowOffsetX;this.Q.shadowOffsetY=b.shadowOffsetY;this.Q.shadowBlur=b.shadowBlur;this.Q.shadowColor=b.shadowColor;this.Q.fillStyle=b.fontColor;this.Q.font=b.fontString;this.Q.textAlign=
"left";this.Q.textBaseline="middle";this.Q.lineWidth=b.lineWidth;this.Q.strokeStyle=b.strokeStyle;this.Q.strokeText(a,b.lineWidth,this.w/2);this.Q.fillText(a,b.lineWidth,this.w/2);this.bh();this.u=new L(this.c);this.u.Gc(this.Wa);c=[];c.push(-this.t/2,this.w/2,0,0,0);c.push(-this.t/2,-this.w/2,0,0,1/this.Uc*this.w);c.push(this.t/2,-this.w/2,0,1/this.Vc*this.t,1/this.Uc*this.w);c.push(this.t/2,this.w/2,0,1/this.Vc*this.t,0);Kc(this.u,c);Lc(this.u,[0,1,2,0,2,3],"TRIANGLES");this.u.t=this.t;this.u.w=
this.w;return this.u};
Xg.prototype.Gg=function(a,b){this.Wf=document.createElement("canvas");this.Q=this.Wf.getContext("2d");this.Wa=new M(this.c);this.Wa.j=this.b.createTexture();Yg(this,a,b);this.u=new L(this.c);this.u.Gc(this.Wa);var c=[];c.push(-this.t/2,this.w/2,0,0,0);c.push(-this.t/2,-this.w/2,0,0,1/this.Uc*this.w);c.push(this.t/2,-this.w/2,0,1/this.Vc*this.t,1/this.Uc*this.w);c.push(this.t/2,this.w/2,0,1/this.Vc*this.t,0);Kc(this.u,c);Lc(this.u,[0,1,2,0,2,3],"TRIANGLES");this.u.Z=[-this.t/2,-this.w/2,0];this.u.ta=
[this.t/2,this.w/2,0];this.u.t=this.t;this.u.w=this.w;return this.u};
function Yg(a,b,c){a.t=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.w=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.Vc=oc(a.t);a.Uc=oc(a.w);a.Wa.width=a.Vc;a.Wa.height=a.Uc;a.Q.canvas.width=a.Vc;a.Q.canvas.height=a.Uc;a.Q.fillStyle=c.backgroundColor;a.Q.fillRect(0,0,a.t,a.w);a.Q.shadowOffsetX=c.shadowOffsetX;a.Q.shadowOffsetY=c.shadowOffsetY;a.Q.shadowBlur=c.shadowBlur;a.Q.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.Q.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.bh()};d.src=b}
Xg.prototype.bh=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Wa.j);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.Wf);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,i);this.Wa.Sb=!0};Xg.prototype.o=function(){if(this.u)this.u.o(),this.u=i;if(this.uc)this.uc.o(),this.uc=i;if(this.kl)this.kl.o(),this.kl=i;if(this.Wa)this.Wa.o(),this.Wa=i;if(this.Wf)document.removeChild(this.Wf),this.Wf=i};function Zg(a){this.c=a;this.b=a.b;this.Vb=this.Yb=this.Xb=0;this.uq=i;this.Qf=!1;this.Xa=this.Ia=this.uc=i;this.scale=20;this.text=this.mg="";this.rh=new Xg(a);this.Nh=this.Qh=0;this.on=this.pn=1;this.nn=0;this.mn=1;this.ml=0;this.ll=Infinity;this.Zk=new Dc(1,1,1,1);this.Ri={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.Wh={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",
fontColor:"rgba(255,255,255,1.0)",lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"};this.Di=!1;this.Wk=0;this.Xk=1;this.Yk=0}r=Zg.prototype;r.qo=function(a,b,c,d){this.mg=c?c:"";if(b)this.Wh=b;this.text=a;if(d)this.Ri=d;if(c)this.Ia=this.rh.Gg(this.mg,this.Ri);this.rh=new Xg(this.c);if(a)this.Xa=this.rh.Ig(a,this.Wh)};
r.ya=function(a,b,c,d){if(this.Ia&&this.Xa)this.Qh=this.Ia.t+this.Xa.t,this.Nh=this.Ia.w;else if(this.Ia)this.Qh=this.Ia.t,this.Nh=this.Ia.w;else if(this.Xa)this.Qh=this.Xa.t,this.Nh=this.Xa.w;var e=this.Ia?this.Ia.t:0,f=this.Di?-this.Wk*e/2:-this.Wk*this.Qh/2;if(this.Ia){var g=this.Qh-e,g=this.Di?0:-g/2;this.Ia.Vg(a,b,c,(g+f)*G*this.scale,this.Xk*(this.Nh/2)*G*this.scale,this.Yk*G*this.scale)}this.Xa&&(g=this.Di?e/2+this.Xa.t/2:e/2,this.Xa.Vg(a,b,c,(g+f)*G*this.scale,this.Xk*(this.Nh/2)*G*this.scale,
this.Yk*G*this.scale));this.Re=a;this.Se=b;this.Te=c;if(d!=i){this.Qf=!0;var d=this.rh,e=this.pn,f=this.on,g=this.nn,j=this.mn;d.uc=new L(d.c);var k=[];k.push(a,b,c,e,f,g,j);k.push(0,0,0,e,f,g,j);Hc(d.uc,k);Lc(d.uc,[0,1],"LINES");this.uc=d.uc}};
r.oa=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.Qf&&this.uc.oa();this.Ia&&Qc(this.Ia);this.Xa&&Qc(this.Xa);this.c.Dc();var a=new K;a.Vd(G*this.scale,G*this.scale,1);this.c.Fc(a);this.Ia&&this.Ia.oa(!1,0,0,i,this.Zk);this.Xa&&this.Xa.oa(!1,0,0,i,this.Zk);this.c.Bd();this.c.b.disable(this.c.b.BLEND)};function $g(a){a.Qf?a.ya(a.Re,a.Se,a.Te,0):a.ya(a.Re,a.Se,a.Te,i)}
r.si=function(a){this.scale=a;$g(this)};r.Rg=function(a,b){var c=!1,d=!1;if(this.Ia)var e=this.c.cf(a,b,this.c.ua,!0),c=this.Ia.He(e.x,e.y,e.h,e.ie,e.je,e.ke);this.Xa&&(e=this.c.cf(a,b,this.c.ua,!0),d=this.Xa.He(e.x,e.y,e.h,e.ie,e.je,e.ke));return c||d};r.o=function(){this.rh=i;this.Vb=this.Yb=this.Xb=0;this.Ia&&this.Ia.o();this.Xa&&this.Xa.o();this.uc&&this.uc.o();this.Qf=!1;this.uc=i;this.scale=0};w("Poi",Zg);Zg.prototype.Draw=Zg.prototype.oa;Zg.prototype.SetContent=Zg.prototype.qo;
Zg.prototype.SetPosition=Zg.prototype.ya;Zg.prototype.SetSize=Zg.prototype.si;Zg.prototype.Destroy=Zg.prototype.o;function ah(a){this.c=a;this.Oh=[];this.wd=[];this.gg=i;this.Ph=[];this.Th=[]}r=ah.prototype;r.El=function(a,b,c,d){var e=new Zg(this.c);if(b)e.Wh=b;e.text=a;if(d)e.Ri=d;if(c)e.mg=c,e.Ia=this.Gg(c,e.Ri);if(a)e.Xa=this.Ig(a,e.Wh);return e};r.Gl=function(a){a.Ia&&bh(this,a.mg);a.Xa&&ch(this,a.text,a.Wh)};r.Gg=function(a,b){var c=this.Oh[a];if(c){this.wd[a]+=1;var d=new L(this.c);d.da(c);d.t=c.t;d.w=c.w;this.Oh[a]=d}else this.gg=new Xg(this.c),d=this.gg.Gg(a,b),this.wd[a]=1,this.Oh[a]=d,this.gg=i;return d};
function bh(a,b){a.wd[b]-=1;a.wd[b]==0&&(a.Oh[b].j.o(),delete a.Oh[b],delete a.wd[b])}r.Ig=function(a,b){var c=this.Ph[a+b.id];if(c){this.Th[a+b.id]+=1;var d=new L(this.c);d.da(c);d.t=c.t;d.w=c.w;this.Ph[a+b.id]=d}else this.gg=new Xg(this.c),d=this.gg.Ig(a,b),this.Th[a+b.id]=1,this.Ph[a+b.id]=d,this.gg=i;return d};function ch(a,b,c){a.Th[b+c.id]-=1;a.Th[b+c.id]==0&&(a.Ph[b+c.id].j.o(),delete a.Ph[b+c.id],delete a.Th[b+c.id])}
r.Cl=function(a,b,c){a.Ia=this.Gg(b,c);a.ya(a.Re,a.Se,a.Te,i);bh(this,a.mg);a.mg=b};r.Dl=function(a,b,c){a.Xa=this.Ig(b,c);a.ya(a.Re,a.Se,a.Te,i);ch(this,a.text,c);a.text=b};w("PoiManager",ah);ah.prototype.CreatePoi=ah.prototype.El;ah.prototype.DestroyPoi=ah.prototype.Gl;ah.prototype.ChangePoiIcon=ah.prototype.Cl;ah.prototype.ChangePoiText=ah.prototype.Dl;var dh=new Date,eh=new Date,fh=[],gh=0,hh=i,ih=i;function jh(){for(var a=0;a<fh.length;a++){var b=fh[a];if(b.mm)b.xl>0&&b.Jk>0?(b.H.width=window.innerWidth-b.xl,b.H.height=window.innerHeight-b.Jk):(b.H.width=window.innerWidth,b.H.height=window.innerHeight);b.b.isContextLost()||kh(b,b.H.width,b.H.height)}}
function W(){this.Je=this.bq=this.aq=this.jd=this.dq=this.eq=this.cq=this.fe=this.ge=this.ee=i;this.Gd=!1;this.Xp="";this.height=this.width=0;this.mm=!1;this.fb=this.H=this.b=i;this.nk=0.670588;this.mk=0.921569;this.kk=this.lk=1;this.Tn=this.Un=this.Wn=this.Vn=0;this.hi=this.gi=20;this.Mb=new K;this.Ca=new K;this.rd=new K;this.Ih=new K;this.ua=new K;this.Nk=new K;this.jf=[];this.fg=new tc;this.Qn=[];this.Rn=[];fh[gh]=this;gh++;this.Tk=this.e=this.yg=i;this.$e=1;this.pa=this.nj=this.wg=i;this.Jk=this.xl=
0}
function lh(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),i;var c=mh(a);if(c===i)return b('It doesn\'t appear your browser supports WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'),i;
return c}function mh(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=i,d=0;d<b.length;++d){try{c=a.getContext(b[d],{Vp:!1})}catch(e){}if(c)break}return c}r=W.prototype;
r.Kl=function(a,b){var c=document.getElementById(a);if(this.b=lh(c)){this.H=c;c.addEventListener("webglcontextlost",function(a){a.preventDefault()},!1);c.addEventListener("webglcontextrestored",function(){window.location.reload()},!1);if(b)this.hi=this.gi=0,c.width=window.innerWidth-this.gi,c.height=window.innerHeight-this.hi,this.mm=!0;for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}this.b?(kh(this,this.H.width,
this.H.height),this.b.clearColor(0,0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.fb=new Rg(this.b),Sg(this.fb),this.yg=new Wg(this),this.Tk=new M(this),N(this.Tk,Uc+"nodata.png"),this.wg=new ah(this),this.nj=new Ug(this),this.pa=new nh(this),this.ee&&this.ee(this),eh=new Date,typeof window!="undefined"&&window.wn(oh,this.H),this.H.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1},P(window,"resize",jh,!1,this),P(window,
"unload",this.Cc,!1,this)):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
r.Cc=function(){if(this.ee)this.ee=i;if(this.Cd)R(this.Cd),this.Cd=i;if(this.Dd)R(this.Dd),this.Dd=i;if(this.jd)R(this.jd),this.jd=i;if(this.ge)this.ge=i;if(this.fe)this.fe=i;hh&&(R(hh),ih=i);ih&&(R(ih),ih=i);if(this.e)this.e.o(),this.e=i;this.b.clearColor(0,0,0,0);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);this.fb=this.H=this.b=i;this.Qn=[];this.Rn=[];this.nj=this.wg=this.e=this.yg=i;ke(window,"resize",i,!1,this);gh=0;fh=[]};
r.Xl=function(a,b,c,d){if(a>=0&&a<=1&&b>=0&&b<=1&&c>=0&&c<=1&&d>=0&&d<=1)this.nk=a,this.mk=b,this.lk=c,this.kk=d};r.io=function(){return{rq:this.nk,gq:this.mk,Wp:this.lk,Rp:this.kk}};r.Aj=function(){var a=this.b;a?(a.clearColor(this.nk,this.mk,this.lk,this.kk),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)):ph("Warning: no gl context!!")};r.im=function(a,b,c,d){if(this.b)this.Vn=a,this.Wn=b,this.Un=c,this.Tn=d,this.b.viewport(a,b,c,d)};r.ko=function(){return{x:this.Vn,y:this.Wn,Aq:this.Un,hq:this.Tn}};
r.fm=function(a){this.rd.da(a);qh(this)};r.$g=function(a){this.Ca.da(a);qh(this)};r.Fc=function(a){this.Mb.da(a);qh(this)};function qh(a){a.Ih.P(a.Ca,a.Mb);a.ua.P(a.rd,a.Ih);a.Nk.Ae(a.Ih);a.Nk.eg()}r.mo=function(a){var b=new M(this);N(b,a);this.Rn.push(b);return b};r.lo=function(a){var b=new L(this);Oc(b,a);this.Qn.push(b);return b};r.Dc=function(){var a=this.fg,b=this.Ca,c=new K;c.da(b);a.ki.push(c);a=this.fg;b=this.Mb;c=new K;c.da(b);a.ji.push(c);a=this.fg;b=this.rd;c=new K;c.da(b);a.ag.push(c)};
r.Bd=function(){this.Mb.da(this.fg.ji.pop());this.Ca.da(this.fg.ki.pop());this.rd.da(this.fg.ag.pop());qh(this)};r.Tj=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Mb.ii();this.Ca.ii();this.rd.Ql(0,b,0,a);qh(this)};
r.Hg=function(a){this.$e==0?(a.type="custom",this.e=new Qg(this,a),this.e.q.Cj(this.width,this.height)):this.$e==1?(a.type="ellipsoid",this.e=new Qg(this,a),this.e.q.Cj(this.width,this.height)):this.$e==2?fc(E("owg.engine3d"),"** WARNING: not implemented"):this.$e==3&&fc(E("owg.engine3d"),"** WARNING: not implemented")};r.ye=function(a,b,c,d,e){this.yg&&this.yg.ye(a,b,c,d,e)};r.Ej=function(a){var b=Array(2);b[0]=0;b[1]=0;this.yg&&(b[0]=this.yg.Jl(a),b[1]=32);return b};
r.cf=function(a,b,c,d){var e=new K;e.Ae(c);var f=this.height-b-1,b=(a-0)*2/this.width-1,c=(f-0)*2/this.height-1,a=(a-0)*2/this.width-1,f=(f-0)*2/this.height-1,g=new I;g.n(b,c,-1);b=e.Ya(g);c=new I;c.n(a,f,1);c=e.Ya(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.h=d[2];b.ie=e;b.je=a;b.ke=c;return b};
if(typeof window!="undefined")window.wn=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)};
function oh(){dh=new Date;var a=dh.valueOf()-eh.valueOf();eh=dh;for(var b=0;b<fh.length;b++){var c=fh[b];if(!c.b.isContextLost()){if(c.e){var d=c.e,e=a;d.S.Ee(e);d.yb.Ee(e);d.q.Ee(e);d.te.Ee(e)}c.ge&&c.ge(a,c);c.im(0,0,c.width,c.height);c.Aj();if(c.e){var d=c.e,e=d.Md,f=d.Mb,g=new K;g.da(f);e.ji.push(g);e=d.Md;f=d.Ca;g=new K;g.da(f);e.ki.push(g);e=d.Md;f=d.bp;g=new K;g.da(f);e.ag.push(g);d.S.bd(d.Md);d.yb.bd(d.Md);d.q.bd(d.Md);d.te.bd(d.Md);d.Md.ji.pop();d.Md.ki.pop();d.Md.ag.pop();c.e.pb()}d=c.b.getError();
d!=c.b.NO_ERROR&&d!=c.b.Np&&ph("WebGL Error: "+d);c.fe&&c.fe(c);typeof window!="undefined"&&window.wn(oh,c.H)}}}function kh(a,b,c){a.width=b;a.height=c;a.Je&&a.Je(b,c,a);a.e&&a.e.q.Cj(b,c)}r=W.prototype;r.Yl=ba("ee");r.ti=ba("ge");r.gm=ba("fe");r.bm=function(a){if(this.Cd)R(this.Cd),this.Cd=i;if(a)this.Cd=P(this.H,xd,function(b){a(b.button,b.clientX-this.gi/2,b.clientY-this.hi/2,this)},!1,this)};
r.dm=function(a){if(this.Dd)R(this.Dd),this.Dd=i;if(a)this.Dd=P(this.H,yd,function(b){a(b.button,b.clientX-this.gi/2,b.clientY-this.hi/2,this)},!1,this)};r.cm=function(a){if(this.Af)R(this.Af),this.Af=i;if(a)this.Af=P(this.H,zd,function(b){a(b.clientX-this.gi/2,b.clientY-this.hi/2,this)},!1,this)};r.em=function(a){if(this.jd)R(this.jd),this.jd=i;if(a){var b=new eg(this.H);this.jd=P(b,zd,function(b){b.preventDefault();a(b.Cf,this)},!1,this)}};r.hm=ba("Je");
r.Zl=function(a){hh&&(R(hh),hh=i);a&&(hh=P(window,Ad,function(b){a(b.keyCode,this)},!1,this))};r.$l=function(a){ih&&(R(ih),ih=i);a&&(ih=P(window,Bd,function(b){a(b.keyCode,this)},!1,this))};r.Td=function(a,b,c){this.e&&this.e.q&&this.e.q.Aa&&this.e.q.Aa.Td(a,b,c)};r.cg=function(a,b,c,d){this.e&&this.e.q&&this.e.q.Aa&&this.e.q.Aa.cg(a,b,c,d)};r.Tg=function(a,b){if(this.e&&this.e.q&&this.e.q.Rh)return this.e.q.Rh.Tg(a,b);return i};
r.hf=function(a,b){if(this.e&&this.e.q&&this.e.q.Ef)return this.e.q.Ef.hf(a,b);return-1};r.Sg=function(a,b){if(this.e&&this.e.q&&this.e.q.ph)return this.e.q.ph.Sg(a,b);return-1};r.Eg=function(){if(this.e&&this.e.q&&this.e.q.Aa)return this.e.q.Aa.Eg();return 0};r.Zn=function(){if(this.e)return this.e.S.df().elevation;return 0};r.$f=function(a,b){if(this.e&&this.e.q&&this.e.q.Aa)return this.e.q.Aa.$f(a,b);if(!this.e.q.Aa)return{hasvalue:!0,elevation:0,lod:0};return{hasvalue:!1,elevation:0,lod:-1}};
r.Dj=function(a,b,c,d,e,f,g){this.pa.Dj(a,b,c,d,e,f,g)};r.Xg=function(a){this.pa.Xg(a)};r.ah=function(){this.pa.ah()};function Se(a){if(a.jf.length<1)rh("Fatal error with render target stack. PushRenderTarget/PopRenderTarget do not correspond.");else{var b=a.jf.pop(),c=a.jf.length;c>0?a.jf[c-1].dh():b.km()}}w("engine3d",W);W.prototype.AltitudeAboveEllipsoid=W.prototype.Zn;W.prototype.AltitudeAboveGround=W.prototype.Eg;W.prototype.Clear=W.prototype.Aj;W.prototype.CreateScene=W.prototype.Hg;
W.prototype.DrawText=W.prototype.ye;W.prototype.GetClearColor=W.prototype.io;W.prototype.GetDirectionMousePos=W.prototype.cf;W.prototype.GetViewport=W.prototype.ko;W.prototype.InitEngine=W.prototype.Kl;W.prototype.LoadMesh=W.prototype.lo;W.prototype.LoadTexture=W.prototype.mo;W.prototype.PickGlobe=W.prototype.Td;W.prototype.PopMatrices=W.prototype.Bd;W.prototype.PushMatrices=W.prototype.Dc;W.prototype.SetClearColor=W.prototype.Xl;W.prototype.SetInitCallback=W.prototype.Yl;
W.prototype.SetKeyDownCallback=W.prototype.Zl;W.prototype.SetKeyUpCallback=W.prototype.$l;W.prototype.SetModelMatrix=W.prototype.Fc;W.prototype.SetMouseDownCallback=W.prototype.bm;W.prototype.SetMouseMoveCallback=W.prototype.cm;W.prototype.SetMouseUpCallback=W.prototype.dm;W.prototype.SetMouseWheelCallback=W.prototype.em;W.prototype.SetOrtho2D=W.prototype.Tj;W.prototype.SetProjectionMatrix=W.prototype.fm;W.prototype.SetRenderCallback=W.prototype.gm;W.prototype.SetResizeCallback=W.prototype.hm;
W.prototype.SetTimerCallback=W.prototype.ti;W.prototype.SetViewMatrix=W.prototype.$g;W.prototype.SetViewport=W.prototype.im;W.prototype.GetElevationAt=W.prototype.$f;W.prototype.OnDestroy=W.prototype.Cc;function sh(a){a=a.$b;a.ee&&a.ee(a.id)}function th(a,b){var c=b.$b;c.ge&&c.ge(c.id,a)}function uh(a){a=a.$b;a.fe&&a.fe(a.id)}function vh(a,b,c,d){d=d.$b;d.Cd&&d.Cd(d.id,a,b,c)}function wh(a,b,c,d){d=d.$b;d.Dd&&d.Dd(d.id,a,b,c)}function xh(a,b,c){c=c.$b;c.Af&&c.Af(c.id,a,b)}function yh(a,b){var c=b.$b;c.jd&&c.jd(c.id,a)}function zh(a,b,c){c=c.$b;c.Je&&c.Je(c.id,a,b)}function Ah(a,b){var c=b.$b;c.ok&&c.ok(c.id,a)}function Bh(a,b){var c=b.$b;c.pk&&c.pk(c.id,a)}
function Ch(a){var b=a.$b;b.yf&&b.yf(a.$b.id)}function Dh(a){var b=a.$b;b.zf&&b.zf(a.$b.id)}function Eh(){this.name="ogContext";this.type=y;this.Cm=!1;this.e=this.c=i;this.fontcolor=new Dc(1,1,1,1);this.ip=1;this.zf=this.yf=this.Lo=this.ee=this.ge=this.fe=this.Je=this.pk=this.ok=this.Af=this.jd=this.Dd=this.Cd=i}Eh.prototype=new C;
Eh.prototype.Ka=function(a){this.ee=a.cbfInit;this.Lo=a.cbfExit;this.Je=a.cbfResize;if(a.fullscreen)this.Cm=!0;this.c=new W;this.c.$b=this;a.canvas?this.c.Kl(a.canvas,this.Cm):fc(E("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.Yl(sh);this.c.ti(th);this.c.gm(uh);this.c.bm(vh);this.c.dm(wh);this.c.cm(xh);this.c.em(yh);this.c.hm(zh);this.c.Zl(Ah);this.c.$l(Bh);this.c.pa.yf=Ch;this.c.pa.zf=Dh};Eh.prototype.ye=function(a,b,c){this.c&&this.c.ye(a,b,c,1,this.fontcolor)};
Eh.prototype.Ej=function(a){if(this.c)return this.c.Ej(a);return i};Eh.prototype.jb=function(){this.c.Cc();this.c=i};function Fh(){this.name="ogWorld";this.type=Ca}Fh.prototype=new C;Fh.prototype.Ka=function(a){if(a==i)fc(E("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c,c={rendertotexture:this.parent.vn};if(a.scenetype==db){if(b.$e=1,b.Hg(c),b.e)b.e.Cg=this}else if(a.scenetype==eb){if(b.$e=2,b.Hg(c),b.e)b.e.Cg=this}else if(a.scenetype==fb){if(b.$e=3,b.Hg(c),b.e)b.e.Cg=this}else if(a.scenetype==gb&&(b.$e=0,b.Hg(c),b.e))b.e.Cg=this}};
Fh.prototype.ri=function(a,b){var c=this.parent.parent.c.e.q.Aa;switch(a){case 0:c.ri(Mf);c.un=b!=i?b:{};break;case 1:c.ri(Nf),c.un=b!=i?b:{}}};function Gh(){this.name="ogScene";this.type=z;this.wf=this.Cg=i;this.Ci=[];this.Rc=db;this.vn=!0}Gh.prototype=new C;r=Gh.prototype;r.Ka=function(a){if(a==i)fc(E("owg.ogScene"),"** ERROR: no options for scene creation!");else{if(v(a.type))this.Rc=a.type;if(v(a.rendertotexture))this.vn=a.rendertotexture}};r.Rg=function(a,b){var c={};this.parent.c.Td(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;d[4]=c.x;d[5]=c.y;d[6]=c.z;return d};
r.Tg=function(a,b){var c=this.parent.c.Tg(a,b);if(c)return c.lp.id;return-1};r.hf=function(a,b){return this.parent.c.hf(a,b)};r.Sg=function(a,b){return this.parent.c.Sg(a,b)};function Hh(a,b){var c=B(b);if(c&&c.type==Ra){var d=qc(c);d.ya(c.Yb,c.Xb,c.Vb);d.Ab(H(c.Sa),H(c.pitch),H(c.ac));d.ia=c}a.wf=c}r.Sj=function(a,b){var c=this.parent.c;if(a==0)b.type="globe";else if(a==1)b.type="fly";else if(a==2)b.type="constrained";else if(a==3)b.type="dynamic";else return;c.e.Sj(b)};function Ih(){this.name="ogPOI";this.type=Wa;this.M=!1;this.l=this.sa=i}Ih.prototype=new C;
Ih.prototype.Ka=function(a){var b="",c=40,d=i;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new O(e[0],e[1],e[2])).ma(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);if(a.textstyle)this.Yf=a.textstyle;if(a.iconstyle)this.Gf=a.iconstyle;this.sa=this.parent.parent.c.wg.El(b,this.Yf,d,this.Gf);this.sa.M=!1;if(a.flagpoleColor)b=this.sa,d=a.flagpoleColor,b.pn=d[0],b.on=d[1],b.nn=d[2],b.mn=d[3];a.flagpole==!0?this.sa.ya(f[0],f[1],f[2],0):this.sa.ya(f[0],f[1],f[2],i);this.sa.si(c);if(a.centerOnIcon==
!0)c=this.sa,c.Di=!0,$g(c);if(a.pivotPoint)c=a.pivotPoint,f=this.sa,b=c[1],d=c[2],f.Wk=c[0],f.Xk=b,f.Yk=d,$g(f);this.sa.lp=this;(c=Jh(this))&&c.Ra.push(this.sa);if(a.visibilityRange)c=this.sa,a=a.visibilityRange,c.ml=a[0]*1E3*G,c.ll=a[1]*1E3*G};Ih.prototype.jb=function(){var a=this.parent.parent,b=Jh(this);if(b)for(var c=this.sa,d=0;d<b.Ra.length;d++)if(b.Ra[d]==c){b.Ra.splice(d,1);break}a.c.wg.Gl(this.sa)};Ih.prototype.ka=function(){this.M=!0;this.sa.M=!0};
Ih.prototype.la=function(){this.M=!1;this.sa.M=!1};function Jh(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.q)b=a.e.q.Rh;return b};function Kh(){this.name="ogPOILayer";this.type=Ga;this.M=!1;this.Ra=[];this.oe="";this.Gf=this.Yf=i;this.So={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.Ro={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}
Kh.prototype=new C;
function Lh(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")"}if(a.fontColor)b=a.fontColor,a.fontColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.strokeColor)b=a.strokeColor,a.strokeStyle="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.shadowColor)b=a.shadowColor,a.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}Kh.prototype.Ka=function(a){if(a.name)this.oe=a.name;a.textstyle?(Lh(a.textstyle),this.Yf=a.textstyle):this.Yf=this.So;a.iconstyle?(Lh(a.iconstyle),this.Gf=a.iconstyle):this.Gf=this.Ro};Kh.prototype.jb=function(){for(var a=0;a<this.Ra.length;a++)D(this.Ra[a])};Kh.prototype.ka=function(){this.M=!0;for(var a=0;a<this.Ra.length;a++)this.Ra[a].ka()};Kh.prototype.la=function(){this.M=!1;for(var a=0;a<this.Ra.length;a++)this.Ra[a].la()};function Mh(){this.name="ogElevationLayer";this.type=Ea;this.Kf=-1}Mh.prototype=new C;Mh.prototype.Lg=function(){var a=i,b=this.parent.parent.parent.c;if(b.e&&b.e.q)a=b.e.q.Aa;return a};Mh.prototype.xj=function(a){var b=this.Lg();if(b)this.Kf=b.xj(a)};Mh.prototype.Oj=function(){var a=this.Lg();a&&this.Kf!=-1&&a.Oj(this.Kf)};Mh.prototype.Ka=function(a){this.xj(a)};function nh(a){this.c=a;this.b=a.b;this.Nf=i;this.Im=this.Wb=!1;this.li=[];this.mi=[];this.ni=[];this.oi=[];this.Ln=2E3;this.Zo=new O;this.zf=this.yf=i}function Nh(a,b,c,d){var e=a.Nf.df(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.xh=kc*Math.acos(Math.sin(H(f[1]))*Math.sin(H(g[1]))+Math.cos(H(f[1]))*Math.cos(H(g[1]))*Math.cos(H(g[0]-f[0])));if(isNaN(a.xh))a.xh=0;e=[e.longitude,e.latitude,e.elevation+a.xh/4];b=[b,c,d+a.xh/4];a.li=f;a.mi=e;a.ni=b;a.oi=g;a.Im=!0}
function Ne(a,b,c,d,e,f,g){a.Nf=a.c.e.S;var j=a.Nf.Mg();a.fl=j.Sa;a.dl=j.pitch;a.el=j.ac;e!=i&&f!=i&&g!=i?(a.Dn=H(e),a.Bn=H(f),a.Cn=H(g)):(a.Dn=a.fl,a.Bn=a.dl,a.Cn=a.el);a.vh=a.Dn-a.fl;Math.abs(a.vh)>Math.PI&&(a.vh>0?a.vh-=2*Math.PI:a.vh+=2*Math.PI);a.th=a.Bn-a.dl;Math.abs(a.th)>Math.PI&&(a.th>0?a.th-=2*Math.PI:a.th+=2*Math.PI);a.uh=a.Cn-a.el;Math.abs(a.uh)>Math.PI&&(a.uh>0?a.uh-=2*Math.PI:a.uh+=2*Math.PI);Nh(a,b,c,d);a.yf&&a.yf(a.c);a.c.ti(function(b){if(a.Im){a.Tm+=b;b=a.Tm/a.Ln;a.J=0.5*Math.sin(Math.PI*
b-Math.PI/2)+0.5;if(b>1)a.J=1,a.ah();var b=Math.pow(1-a.J,3)*a.li[0]+3*a.J*Math.pow(1-a.J,2)*a.mi[0]+3*a.J*a.J*(1-a.J)*a.ni[0]+Math.pow(a.J,3)*a.oi[0],c=Math.pow(1-a.J,3)*a.li[1]+3*a.J*Math.pow(1-a.J,2)*a.mi[1]+3*a.J*a.J*(1-a.J)*a.ni[1]+Math.pow(a.J,3)*a.oi[1],d=Math.pow(1-a.J,3)*a.li[2]+3*a.J*Math.pow(1-a.J,2)*a.mi[2]+3*a.J*a.J*(1-a.J)*a.ni[2]+Math.pow(a.J,3)*a.oi[2];a.Zo.ec(b,c,d);a.Nf.ya(b,c,d);a.Nf.Ab(a.fl+a.J*a.vh,a.dl+a.J*a.th,a.el+a.J*a.uh);a.J==1&&a.ah()}});a.J=0;a.Tm=0;a.Wb=!0}
nh.prototype.ah=function(){this.c.ti(i);this.Wb=!1;this.zf&&this.zf(this.c)};
nh.prototype.Dj=function(a,b,c,d,e,f,g){this.Nf=this.c.e.S;d*=G;var j=new O(a,b,c),k=[];j.ma(k);var l=new K;l.Od(a,b);a=new K;a.cd(k[0],k[1],k[2]);k=new K;k.P(a,l);l={};e!=i&&f!=i&&g!=i?(l.Sa=H(e),l.pitch=H(f),l.ac=H(g)):l=this.Nf.Mg();a=l.pitch-Math.PI/2;d=new I(d*Math.sin(a)*Math.cos(l.Sa),d*Math.sin(a)*Math.sin(l.Sa),d*Math.cos(a));d=k.Ya(d).a;j.ec(d[0],d[1],d[2]);d=j.G[1];k=j.G[0];j=j.G[2];j>c?Ne(this,k,d,j,e,f,g):Ne(this,k,d,-j,l.Sa,-nc(l.pitch),l.ac)};nh.prototype.Xg=ba("Ln");function cg(a,b){this.c=a;this.b=a.b;this.ha=this.Jb=this.ca=this.R=this.A=i;this.se=new K;this.$k=[];this.options=b;this.Kc=new Dc;this.Kc.n(1,1,1,1)}
cg.prototype.qi=function(a){this.$k=a;var b=0,c=[],d=[];if(this.options.segmentation)for(var e=0;e<a.length-1;e++){var f=[];Cf(a[e][0],a[e][1],f);f[2]=a[e][2];var g=[];Cf(a[e+1][0],a[e+1][1],g);g[2]=a[e+1][2];for(var g=[g[0]-f[0],g[1]-f[1],g[2]-g[2]],j=0;j<this.options.segmentation+1;j++){var k=f[2]+g[2]*j/this.options.segmentation,l=[];Df(f[0]+g[0]*j/this.options.segmentation,f[1]+g[1]*j/this.options.segmentation,l);l[2]=k;k=new O(l[0],l[1],l[2]);l=[];k.ma(l);c.push(l[0]);c.push(l[1]);c.push(l[2]);
c.push(this.options.color[0]);c.push(this.options.color[1]);c.push(this.options.color[2]);c.push(this.options.color[3]);d.push(b);d.push(b+1);b+=1}}else for(e=0;e<a.length;e++)k=new O(a[e][0],a[e][1],a[e][2]),l=[],k.ma(l),c.push(l[0]),c.push(l[1]),c.push(l[2]),c.push(this.options.color[0]),c.push(this.options.color[1]),c.push(this.options.color[2]),c.push(this.options.color[3]),d.push(e),d.push(e+1);d.pop();d.pop();this.Wi=e*this.options.segmentation;this.A=new Float32Array(c);this.R=new Uint16Array(d);
this.Zb=d.length;this.Ie()};cg.prototype.o=function(){if(this.ca)this.b.deleteBuffer(this.ca),this.ca=i;if(this.Jb)this.b.deleteBuffer(this.Jb),this.ca=i;this.ca=this.ve=i};
cg.prototype.oa=function(){this.$k!=i&&(this.ca||this.Ie(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ca),this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Jb),this.b.enableVertexAttribArray(0),this.b.enableVertexAttribArray(1),this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0),this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12),Nc(this.c.fb,this.c.ua,this.Kc),this.b.lineWidth(this.options.linewidth),this.b.enable(this.b.POLYGON_OFFSET_FILL),this.b.polygonOffset(1,1E3),this.b.drawElements(this.b.LINES,
this.Zb,this.b.UNSIGNED_SHORT,0),this.b.disable(this.b.POLYGON_OFFSET_FILL),this.b.disableVertexAttribArray(0),this.b.disableVertexAttribArray(1),this.b.lineWidth(1))};cg.prototype.Ie=function(){this.ca=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.ca);this.b.bufferData(this.b.ARRAY_BUFFER,this.A,this.b.STATIC_DRAW);this.Jb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Jb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.R,this.b.STATIC_DRAW)};function Oh(){this.name="ogEarthPolylineObject";this.type=bb;this.options=this.Le=i}Oh.prototype=new C;r=Oh.prototype;r.Ka=function(a){this.options=a;this.Le=new cg(this.parent.parent.parent.c,a);this.Le.qi(a.coords)};r.jb=function(){if(this.Le)this.Le.o(),this.Le=i,this.status=3};r.ka=function(){this.Le.M=!0};r.Ge=n();r.la=function(){this.Le.M=!1};function Ph(a){this.c=a;this.b=a.b;this.Vb=this.Yb=this.Xb=0;this.canvas=i;this.w=this.t=0;this.Q=this.u=i;this.kn=-1}r=Ph.prototype;
r.bh=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.Wa.j);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,i);this.Wa.Sb=!0};r.ya=function(a,b,c){var d=[];(new O(a,b,c)).ma(d);this.u.Vg(d[0],d[1],d[2],0,0,0)};r.oa=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.u&&Qc(this.u);this.c.Dc();var a=new K;a.Vd(G*this.scale,G*this.scale,1);this.c.Fc(a);this.u&&this.u.oa(!1,0,0,i,i);this.c.Bd();this.c.b.disable(this.c.b.BLEND)};
r.si=ba("scale");r.Rg=function(a,b){if(this.u)var c=this.c.cf(a,b,this.c.ua,!0),d=this.u.He(c.x,c.y,c.h,c.ie,c.je,c.ke);if(d){var e=c=0,f=d.Wc,g=d.Nd,j=1-f-g;d.Mn==0?(c=f*-this.t/2+g*this.t/2+j*-this.t/2/(f+g+j)+this.t/2,e=f*this.w/2+g*this.w/2+j*-this.w/2/(f+g+j)+this.w/2):d.Mn==1&&(c=f*this.t/2+g*this.t/2+j*-this.t/2/(f+g+j)+this.t/2,e=f*this.w/2+g*-this.w/2+j*-this.w/2/(f+g+j)+this.w/2);c/=this.t;e/=this.w;d={};d.id=this.kn;d.x=c;d.y=e;return d}return i};r.o=function(){this.u&&(this.u.o(),this.Wa.o())};function Qh(){this.name="ogBillboard";this.type=Xa;this.status=ib;this.l=-1;this.M=!1}Qh.prototype=new C;r=Qh.prototype;
r.Ka=function(a){if(a==i)fc(E("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==i)fc(E("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=z)fc(E("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.Ic=new Ph(this.parent.parent.c);this.Ic.kn=this.id;var b=this.Ic,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.Q=b.canvas.getContext("2d");b.t=b.Q.canvas.width;b.w=b.Q.canvas.height;
break;case "[object HTMLVideoElement]":b.t=c.videoWidth,b.w=c.videoHeight}b.Wa=new M(b.c);b.Wa.j=b.b.createTexture();b.u=new L(b.c);b.u.Gc(b.Wa);b.Vc=b.t;b.Uc=b.w;c=[];c.push(-b.t/2,b.w/2,0,0,0);c.push(-b.t/2,-b.w/2,0,0,1/b.Uc*b.w);c.push(b.t/2,-b.w/2,0,1/b.Vc*b.t,1/b.Uc*b.w);c.push(b.t/2,b.w/2,0,1/b.Vc*b.t,0);Kc(b.u,c);Lc(b.u,[0,1,2,0,2,3],"TRIANGLES");b.u.Z=[-b.t/2,-b.w/2,0];b.u.ta=[b.t/2,b.w/2,0];b.u.t=b.t;b.u.w=b.w;b.bh();a=a.position;this.Ic.ya(a[0],a[1],a[2]);Rh(this).wj(this.Ic)}};
r.jb=function(){if(this.Ic)Rh(this).Nj(this.Ic),this.Ic.o(),this.status=3};r.oa=function(){this.Ic.oa()};function Rh(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.q)b=a.e.q.ph;return b}r.ka=function(){this.M=!0;this.Ic.M=!0};r.la=function(){this.M=!1;this.Ic.M=!1};function Sh(){this.name="ogMeshObject";this.type=Oa;this.gb=[];this.yd=[]}Sh.prototype=new C;r=Sh.prototype;r.Ka=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=V(Pa,this,this.options);this.gb.push(c);this.yd.push(c.u)}};r.jb=function(){for(var a=0;a<this.gb.length;a++)D(this.gb[a]);this.yd=this.gb=i};r.ka=function(){for(var a=0;a<this.gb.length;a++)this.gb[a].ka()};
r.kf=function(a,b,c,d){for(var e=0;e<this.gb.length;e++)this.gb[e].kf(a,b,c,d)};r.Ge=function(a,b,c,d,e,f){for(var g=0;g<this.gb.length;g++)this.gb[g].Ge(a,b,c,d,e,f)};r.Zg=function(a,b,c,d){for(var e=0;e<this.gb.length;e++)this.gb[e].Zg(a,b,c,d)};r.lf=function(a,b,c){for(var d=0;d<this.gb.length;d++)this.gb[d].lf(a,b,c)};r.Ab=function(a,b,c){for(var d=0;d<this.gb.length;d++)this.gb[d].Ab(a,b,c)};r.la=function(){for(var a=0;a<this.gb.length;a++)this.gb[a].la()};function Th(){this.tn=Aa()}var Uh=new Th;Th.prototype.set=ba("tn");Th.prototype.reset=function(){this.set(Aa())};Th.prototype.get=ea("tn");function Vh(a){this.al=a||"";this.Bp=Uh}Vh.prototype.xp=!0;Vh.prototype.zp=!0;Vh.prototype.yp=!0;Vh.prototype.yn=!1;function Wh(a){if(a<10)return"0"+a;return String(a)}function Xh(a,b){var c=(a.Gn-b)/1E3,d=c.toFixed(3),e=0;if(c<1)e=2;else for(;c<100;)e++,c*=10;for(;e-- >0;)d=" "+d;return d}function Yh(a){Vh.call(this,a)}Ba(Yh,Vh);Yh.prototype.yn=!0;function Zh(a){this.Mf=a||100;this.xf=[]}r=Zh.prototype;r.Kh=0;r.add=function(a){this.xf[this.Kh]=a;this.Kh=(this.Kh+1)%this.Mf};r.get=function(a){a=$h(this,a);return this.xf[a]};r.set=function(a,b){a=$h(this,a);this.xf[a]=b};r.Ff=function(){return this.xf.length};r.clear=function(){this.Kh=this.xf.length=0};r.Hk=function(){for(var a=this.Ff(),b=[],c=this.Ff()-this.Ff();c<a;c++)b[c]=this.get(c);return b};r.Pi=function(){for(var a=[],b=this.Ff(),c=0;c<b;c++)a[c]=c;return a};
function $h(a,b){b>=a.xf.length&&aa(Error("Out of bounds exception"));if(a.xf.length<a.Mf)return b;return(a.Kh+Number(b))%a.Mf};function ai(a,b){this.Oe=a||"";this.al=b||"";this.vg=[];this.$i=new Zh(bi);this.rp=za(this.Ho,this);this.Yo=new Yh(this.al);this.Xo={};if(!0!=this.Gm){this.Gm=!0;ic();var c=hc,d=this.rp;if(!c.Eh)c.Eh=[];c.Eh.push(d)}this.Ki=ci(this.Oe,"enabled")=="1";u.setInterval(za(this.vp,this),7500)}var bi=500;r=ai.prototype;r.Xn="LOGGING";r.Vo=!1;r.ob=i;r.yl=!1;r.Gm=!1;r.nm=i;r.Lk=Aa();r.Gd=function(){this.Ki&&di(this)};function ei(a){a.Ki=!0;a.Ki&&(di(a),a.ob&&a.uj());fi(a,"enabled","1")}
function gi(a){return!!a.ob&&!a.ob.closed}r.Mo=function(){this.$i.clear();gi(this)&&this.uj()};
r.Ho=function(a){if(!this.Xo[a.Nm]){this.Vo&&a.qe>=Yb&&ei(this);var b=this.Yo,c;switch(a.qe.value){case Xb.value:c="dbg-sh";break;case Yb.value:c="dbg-sev";break;case Zb.value:c="dbg-w";break;case $b.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.al," ");if(b.xp){var e=new Date(a.Gn);d.push("[",Wh(e.getFullYear()-2E3)+Wh(e.getMonth()+1)+Wh(e.getDate())+" "+Wh(e.getHours())+":"+Wh(e.getMinutes())+":"+Wh(e.getSeconds())+"."+Wh(Math.floor(e.getMilliseconds()/10)),"] ")}b.zp&&d.push("[",xb(Xh(a,
b.Bp.get())),"s] ");b.yp&&d.push("[",rb(a.Nm),"] ");d.push('<span class="',c,'">',qb(xb(rb(a.Um))));b.yn&&a.wk&&d.push("<br>",qb(xb(a.vk||"")));d.push("</span><br>");a=d.join("");this.Ki?(di(this),this.$i.add(a),hi(this,a)):this.$i.add(a)}};function hi(a,b){a.vg.push(b);u.clearTimeout(a.nm);Aa()-a.Lk>750?a.zl():a.nm=u.setTimeout(za(a.zl,a),250)}
r.zl=function(){this.Lk=Aa();if(gi(this)){var a=this.ob.document.body,a=a&&a.scrollHeight-(a.scrollTop+a.clientHeight)<=100;this.ob.document.write(this.vg.join(""));this.vg.length=0;a&&this.ob.scrollTo(0,1E6)}};function ii(a){for(var b=a.$i.Hk(),c=0;c<b.length;c++)hi(a,b[c])}
function di(a){if(!gi(a)&&!a.yl){var b=ci(a.Oe,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.yl=!0;a.ob=window.open("",gd?a.Oe.replace(/[\s\-\.\,]/g,"_"):a.Oe,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);if(!a.ob&&!a.Ap)alert("Logger popup was blocked"),a.Ap=!0;a.yl=!1;a.ob&&a.uj()}}r.Qi=p("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
r.uj=function(){gi(this)||(this.ob.document.open(),hi(this,"<style>"+this.Qi()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.Xn+"<br><small>Logger: "+this.Oe+"</small></div><hr>"),ii(this))};function fi(a,b,c){b+=a.Oe;document.cookie=b+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(Aa()+2592E6)).toUTCString()}
function ci(a,b,c){var a=b+a,b=String(document.cookie),d=b.indexOf(a+"=");return d!=-1?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,c==-1?b.length:c))):c||""}r.vp=function(){gi(this)&&fi(this,"dbg",(this.ob.screenX||this.ob.screenLeft||0)+","+(this.ob.screenY||this.ob.screenTop||0)+","+(this.ob.outerWidth||800)+","+(this.ob.outerHeight||500))};function ji(a){var b;b=(b=a.className)&&typeof b.split=="function"?b.split(/\s+/):[];var c=Hb(arguments,1),d;d=b;for(var e=0,f=0;f<c.length;f++)Db(d,c[f])>=0||(d.push(c[f]),e++);d=e==c.length;a.className=b.join(" ");return d};var ki=!gd||ud("9");!hd&&!gd||gd&&ud("9")||hd&&ud("1.9.1");gd&&ud("9");function li(a,b){kb(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in mi?a.setAttribute(mi[d],b):a[d]=b})}var mi={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function ni(a,b,c){function d(c){c&&b.appendChild(ma(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];la(f)&&!(oa(f)&&f.nodeType>0)?Eb(oi(f)?Gb(f):f,d):d(f)}}function oi(a){if(a&&typeof a.length=="number")if(oa(a))return typeof a.item=="function"||typeof a.item=="string";else if(na(a))return typeof a.item=="function";return!1}function pi(a){this.yh=a||u.document||document}function qi(a,b){return ma(b)?a.yh.getElementById(b):b}
pi.prototype.hg=function(){var a=this.yh,b=arguments,c=b[0],d=b[1];if(!ki&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',rb(d.name),'"');if(d.type){c.push(' type="',rb(d.type),'"');var e={};nb(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)ma(d)?c.className=d:ka(d)?ji.apply(i,[c].concat(d)):li(c,d);b.length>2&&ni(a,c,b);return c};pi.prototype.createElement=function(a){return this.yh.createElement(a)};pi.prototype.createTextNode=function(a){return this.yh.createTextNode(a)};
pi.prototype.appendChild=function(a,b){a.appendChild(b)};function ri(a,b){ai.call(this,a,b)}Ba(ri,ai);r=ri.prototype;r.zl=function(){this.Lk=Aa();if(gi(this)){for(var a=qi(this.Jc,"log"),b=a.scrollHeight-(a.scrollTop+a.offsetHeight)<=100,c=0;c<this.vg.length;c++){var d=this.Jc.hg("div","logmsg");d.innerHTML=this.vg[c];a.appendChild(d)}this.vg.length=0;this.xn();if(b)a.scrollTop=a.scrollHeight}};
r.uj=function(){if(gi(this)){var a=this.ob.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.Oe+"</title><style>"+this.Qi()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.Oe+"</b></p><p>"+this.Xn+'</p><span id="clearbutton">clear</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();(gd?a.body:this.ob).onresize=za(this.xn,this);this.Jc=new pi(a);qi(this.Jc,"openbutton").onclick=za(this.mp,this);qi(this.Jc,"closebutton").onclick=za(this.No,this);qi(this.Jc,"clearbutton").onclick=za(this.Mo,this);ii(this)}};
r.mp=function(){var a=qi(this.Jc,"optionsarea");a.innerHTML="";for(var b=si(),c=this.Jc,d=0;d<b.length;d++){var e=E(b[d]),e=c.hg("div",{},ti(this,"sel"+b[d],e.qe?e.qe.name:"INHERIT"),c.hg("span",{},b[d]||"(root)"));a.appendChild(e)}qi(this.Jc,"options").style.display="block";return!1};
function ti(a,b,c){for(var a=a.Jc,b=a.hg("select",{id:b}),d=0;d<bc.length;d++){var e=bc[d],f=a.hg("option",{},e.name);if(c==e.name)f.selected=!0;b.appendChild(f)}b.appendChild(a.hg("option",{selected:c=="INHERIT"},"INHERIT"));return b}r.No=function(){qi(this.Jc,"options").style.display="none";for(var a=si(),b=this.Jc,c=0;c<a.length;c++){var d=E(a[c]),e=qi(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;e=="INHERIT"?d.aj(i):d.aj(dc(e))}return!1};
r.xn=function(){var a=this.Jc,b=qi(a,"log"),c=qi(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.yh.body.offsetHeight-c.offsetHeight-(gd?4:0)+"px"};function si(){var a=lb(gc);a.sort();return a}r.Qi=function(){return ri.Vf.Qi.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:medium monospace;}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};function ui(){this.y=this.x=i;this.index=-1;arguments.length==0?this.y=this.x=0:arguments.length==2?(this.x=arguments[0],this.y=arguments[1]):arguments.length==3?(this.x=arguments[0],this.y=arguments[1],this.index=arguments[2]):alert("Invalid poly2tri.Point constructor call!");this.Ah=[]}r=ui.prototype;r.set=function(a,b){this.x=a;this.y=b};r.add=function(a){this.x+=a.x;this.y+=a.y};r.sub=function(a){this.x-=a.x;this.y-=a.y};r.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
r.i=function(a){return this.x==a.x&&this.y==a.y};function vi(a,b){return a.y==b.y?a.x-b.x:a.y-b.y}
function wi(){this.zb=this.Qa=i;arguments.length==2?arguments[0].y>arguments[1].y?(this.zb=arguments[0],this.Qa=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.zb=arguments[0],this.Qa=arguments[1]):arguments[0].x==arguments[1].x?alert("Invalid poly2tri.edge constructor call: repeated points!"):(this.Qa=arguments[0],this.zb=arguments[1]):(this.Qa=arguments[0],this.zb=arguments[1]):alert("Invalid poly2tri.Edge constructor call!");this.zb.Ah.push(this)}
function xi(a,b,c){this.d=[i,i,i];this.Ja=[i,i,i];this.Em=!1;this.Ba=[!1,!1,!1];this.Ea=[!1,!1,!1];arguments.length==3&&(this.d[0]=a,this.d[1]=b,this.d[2]=c)}r=xi.prototype;r.Ad=function(a){return this.d[a]};r.Bj=function(){for(var a=!0,b=0;b<arguments.length;++b)a=a&&(arguments[b].i(this.d[0])||arguments[b].i(this.d[1])||arguments[b].i(this.d[2]));return a};r.Ll=function(){if(arguments.length!=0)this.Em=arguments[0];return this.Em};
r.Zc=function(){var a;if(arguments.length==3){var b=arguments[0],c=arguments[1];a=arguments[2];b.i(this.d[2])&&c.i(this.d[1])||b.i(this.d[1])&&c.i(this.d[2])?this.Ja[0]=a:b.i(this.d[0])&&c.i(this.d[2])||b.i(this.d[2])&&c.i(this.d[0])?this.Ja[1]=a:b.i(this.d[0])&&c.i(this.d[1])||b.i(this.d[1])&&c.i(this.d[0])?this.Ja[2]=a:alert("Invalid poly2tri.Triangle.MarkNeighbor call (1)!")}else arguments.length==1?(a=arguments[0],a.Bj(this.d[1],this.d[2])?(this.Ja[0]=a,a.Zc(this.d[1],this.d[2],this)):a.Bj(this.d[0],
this.d[2])?(this.Ja[1]=a,a.Zc(this.d[0],this.d[2],this)):a.Bj(this.d[0],this.d[1])&&(this.Ja[2]=a,a.Zc(this.d[0],this.d[1],this))):alert("Invalid poly2tri.Triangle.MarkNeighbor call! (2)")};function yi(a){a.Ja[0]=i;a.Ja[1]=i;a.Ja[2]=i}function zi(a){a.Ea[0]=!1;a.Ea[1]=!1;a.Ea[2]=!1}function Ai(a,b){return b.i(a.d[0])?a.d[2]:b.i(a.d[1])?a.d[0]:b.i(a.d[2])?a.d[1]:i}function Bi(a,b){return b.i(a.d[0])?a.d[1]:b.i(a.d[1])?a.d[2]:b.i(a.d[2])?a.d[0]:i}
function Ci(a,b){return b.i(a.d[0])?a.Ja[1]:b.i(a.d[1])?a.Ja[2]:a.Ja[0]}function Di(a,b){return b.i(a.d[0])?a.Ja[2]:b.i(a.d[1])?a.Ja[0]:a.Ja[1]}function Ei(a,b){return b.i(a.d[0])?a.Ba[1]:b.i(a.d[1])?a.Ba[2]:a.Ba[0]}function Fi(a,b){return b.i(a.d[0])?a.Ba[2]:b.i(a.d[1])?a.Ba[0]:a.Ba[1]}function Gi(a,b,c){b.i(a.d[0])?a.Ba[1]=c:b.i(a.d[1])?a.Ba[2]=c:a.Ba[0]=c}function Hi(a,b,c){b.i(a.d[0])?a.Ba[2]=c:b.i(a.d[1])?a.Ba[0]=c:a.Ba[1]=c}
function Ii(a,b){return b.i(a.d[0])?a.Ea[1]:b.i(a.d[1])?a.Ea[2]:a.Ea[0]}function Ji(a,b){return b.i(a.d[0])?a.Ea[2]:b.i(a.d[1])?a.Ea[0]:a.Ea[1]}function Ki(a,b,c){b.i(a.d[0])?a.Ea[1]=c:b.i(a.d[1])?a.Ea[2]=c:a.Ea[0]=c}function Li(a,b,c){b.i(a.d[0])?a.Ea[2]=c:b.i(a.d[1])?a.Ea[0]=c:a.Ea[1]=c}function Mi(a,b){return b.i(a.d[0])?a.Ja[0]:b.i(a.d[1])?a.Ja[1]:a.Ja[2]}
r.Hj=function(){if(arguments.length==1)this.Hj(this.d[0],arguments[0]);else if(arguments.length==2){var a=arguments[0],b=arguments[1];a.i(this.d[0])?(this.d[1]=this.d[0],this.d[0]=this.d[2],this.d[2]=b):a.i(this.d[1])?(this.d[2]=this.d[1],this.d[1]=this.d[0],this.d[0]=b):a.i(this.d[2])?(this.d[0]=this.d[2],this.d[2]=this.d[1],this.d[1]=b):alert("Invalid poly2tri.Triangle.Legalize call!")}else alert("Invalid poly2tri.Triangle.Legalize call!")};
function Ni(a,b,c){if(b.i(a.d[0]))if(c.i(a.d[1]))return 2;else{if(c.i(a.d[2]))return 1}else if(b.i(a.d[1]))if(c.i(a.d[2]))return 0;else{if(c.i(a.d[0]))return 2}else if(b.i(a.d[2]))if(c.i(a.d[0]))return 1;else if(c.i(a.d[1]))return 0;return-1}
r.Pg=function(){if(arguments.length==1)typeof arguments[0]=="number"?this.Ba[arguments[0]]=!0:this.Pg(arguments[0].Qa,arguments[0].zb);else if(arguments.length==2){var a=arguments[0],b=arguments[1];if(b.i(this.d[0])&&a.i(this.d[1])||b.i(this.d[1])&&a.i(this.d[0]))this.Ba[2]=!0;else if(b.i(this.d[0])&&a.i(this.d[2])||b.i(this.d[2])&&a.i(this.d[0]))this.Ba[1]=!0;else if(b.i(this.d[1])&&a.i(this.d[2])||b.i(this.d[2])&&a.i(this.d[1]))this.Ba[0]=!0}else alert("Invalid poly2tri.Triangle.MarkConstrainedEdge call!")};
var Oi=3*Math.PI/4,Pi=Math.PI/2;function Qi(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return a>-1.0E-16&&a<1.0E-16?0:a>0?-1:1}function Ri(a,b,c,d){var e=d.x,d=d.y,f=a.x-e,a=a.y-d;if(f*(b.y-d)-(b.x-e)*a<=1.0E-16)return!1;if((c.x-e)*a-f*(c.y-d)<=1.0E-16)return!1;return!0}
function Si(){this.F=this.next=this.Xe=this.g=i;this.value=0;arguments.length==1?(this.g=arguments[0],this.value=this.g.x):arguments.length==2?(this.g=arguments[0],this.Xe=arguments[1],this.value=this.g.x):alert("Invalid poly2tri.Node constructor call!")}function Ti(a,b){this.Fh=a;this.hl=b;this.Vh=a}Ti.prototype.Jj=function(a){var b=this.Vh;if(a<b.value)for(;(b=b.F)!=i;){if(a>=b.value)return this.Vh=b}else for(;(b=b.next)!=i;)if(a<b.value)return this.Vh=b.F;return i};
function Ui(){this.yc=this.gd=this.pe=i;this.width=0;this.Mk=!1}Ui.prototype.Aj=function(){this.yc=this.gd=this.pe=i;this.width=0;this.Mk=!1};function Vi(){this.Ba=i;this.right=!1}function Wi(a){this.Nn=[];this.Lc=[];this.d=a;this.Ah=[];this.Up=this.Tp=this.Sp=this.hl=this.Fh=this.Dh=i;this.Y=new Ui;this.zh=new Vi;Xi(this,this.d)}function Xi(a,b){for(var c=0;c<b.length;++c)a.Ah.push(new wi(b[c],b[(c+1)%b.length]))}Wi.prototype.Ad=function(a){return this.d[a]};Wi.prototype.Jj=function(a){return this.Dh.Jj(a.x)};
function Yi(a,b){for(var c=0;c<3;++c)if(b.Ja[c]==i){var d;a:{d=a.Dh;var e=Ai(b,b.Ad(c)),f=e.x,g=d.Vh,j=g.g.x;if(f==j)if(e.i(g.F.g))g=g.F;else if(e.i(g.next.g))g=g.next;else{if(!e.i(g.g)){alert("Invalid poly2tri.AdvancingFront.LocatePoint call!");d=i;break a}}else if(f<j)for(;(g=g.F)!=i;){if(e.i(g.g))break}else for(;(g=g.next)!=i;)if(e.i(g.g))break;if(g!=i)d.Vh=g;d=g}if(d!=i)d.Xe=b}}function Zi(a,b){if(b!=i&&!b.Ll()){b.Ll(!0);a.Nn.push(b);for(var c=0;c<3;++c)b.Ba[c]||Zi(a,b.Ja[c])}}
function $i(){var a;if(arguments.length==3){a=arguments[0];var b=arguments[1],c=arguments[2];a.zh.Ba=b;a.zh.right=b.Qa.x>b.zb.x;if(!aj(c.Xe,b.Qa,b.zb)){var d=a;if(d.zh.right)for(var e=c;e.next.g.x<b.Qa.x;)Qi(b.zb,e.next.g,b.Qa)==-1?bj(d,b,e):e=e.next;else for(e=c;e.F.g.x>b.Qa.x;)Qi(b.zb,e.F.g,b.Qa)==1?cj(d,b,e):e=e.F;$i(a,b.Qa,b.zb,c.Xe,b.zb)}}else if(arguments.length==5){if(a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],!aj(d,b,c)){var f=Bi(d,e),f=Qi(c,f,b);if(f==0)alert("poly2tri.sweep.EdgeEvent: Collinear not supported!");
else{var g=Ai(d,e),g=Qi(c,g,b);g==0?alert("poly2tri.sweep.EdgeEvent: Collinear not supported!"):f==g?(d=f==1?Di(d,e):Ci(d,e),$i(a,b,c,d,e)):dj(a,b,c,d,e)}}}else alert("Invalid poly2tri.sweep.EdgeEvent call!")}function aj(a,b,c){var d=Ni(a,b,c);if(d!=-1)return a.Pg(d),a=a.Ja[d],a!=i&&a.Pg(b,c),!0;return!1}function ej(a,b){var c=new xi(b.F.g,b.g,b.next.g);c.Zc(b.F.Xe);c.Zc(b.Xe);a.Lc.push(c);b.F.next=b.next;b.next.F=b.F;fj(a,c)||Yi(a,c)}
function gj(a){var b=a.next.g.x-a.g.x,c=a.next.g.y-a.g.y,d=a.F.g.x-a.g.x,a=a.F.g.y-a.g.y;return Math.atan2(b*a-c*d,b*d+c*a)}
function fj(a,b){for(var c=0;c<3;++c)if(!b.Ea[c]){var d=b.Ja[c];if(d!=i){var e=b.Ad(c),f=Ai(d,Ai(b,e)),g=f.i(d.d[0])?0:f.i(d.d[1])?1:f.i(d.d[2])?2:-1;if(d.Ba[g]||d.Ea[g])b.Ba[c]=d.Ba[g];else{var j;var k=Bi(b,e),l=Ai(b,e);j=e.x-f.x;var m=e.y-f.y,q=k.x-f.x,k=k.y-f.y,o=j*k-q*m;if(o<=0)j=!1;else{var s=l.x-f.x,l=l.y-f.y,t=s*m-j*l;j=t<=0?!1:(j*j+m*m)*(q*l-s*k)+(q*q+k*k)*t+(s*s+l*l)*o>0}if(j)return b.Ea[c]=!0,d.Ea[g]=!0,hj(b,e,d,f),(e=!fj(a,b))&&Yi(a,b),(e=!fj(a,d))&&Yi(a,d),b.Ea[c]=!1,d.Ea[g]=!1,!0}}}return!1}
function hj(a,b,c,d){var e,f,g,j;e=Di(a,b);f=Ci(a,b);g=Di(c,d);j=Ci(c,d);var k,l,m,q;k=Fi(a,b);l=Ei(a,b);m=Fi(c,d);q=Ei(c,d);var o,s,t,x;o=Ji(a,b);s=Ii(a,b);t=Ji(c,d);x=Ii(c,d);a.Hj(b,d);c.Hj(d,b);Li(c,b,o);Ki(a,b,s);Li(a,d,t);Ki(c,d,x);Hi(c,b,k);Gi(a,b,l);Hi(a,d,m);Gi(c,d,q);yi(a);yi(c);e&&c.Zc(e);f&&a.Zc(f);g&&a.Zc(g);j&&c.Zc(j);a.Zc(c)}
function ij(a,b){var c;c=a.Y.width>(a.Y.Mk?a.Y.pe.g.y-b.g.y:a.Y.yc.g.y-b.g.y)?!0:!1;if(!c&&(ej(a,b),!(b.F==a.Y.pe&&b.next==a.Y.yc))){if(b.F==a.Y.pe){c=Qi(b.g,b.next.g,b.next.next.g);if(c==1)return;b=b.next}else if(b.next==a.Y.yc){c=Qi(b.g,b.F.g,b.F.F.g);if(c==-1)return;b=b.F}else b=b.F.g.y<b.next.g.y?b.F:b.next;ij(a,b)}}function bj(a,b,c){c.g.x<b.Qa.x&&(Qi(c.g,c.next.g,c.next.next.g)==-1?jj(a,b,c):(kj(a,b,c),bj(a,b,c)))}
function jj(a,b,c){ej(a,c.next);c.next.g!=b.Qa&&Qi(b.zb,c.next.g,b.Qa)==-1&&Qi(c.g,c.next.g,c.next.next.g)==-1&&jj(a,b,c)}function kj(a,b,c){Qi(c.next.g,c.next.next.g,c.next.next.next.g)==-1?jj(a,b,c.next):Qi(b.zb,c.next.next.g,b.Qa)==-1&&kj(a,b,c.next)}function cj(a,b,c){c.g.x>b.Qa.x&&(Qi(c.g,c.F.g,c.F.F.g)==1?lj(a,b,c):(mj(a,b,c),cj(a,b,c)))}function mj(a,b,c){Qi(c.F.g,c.F.F.g,c.F.F.F.g)==1?lj(a,b,c.F):Qi(b.zb,c.F.F.g,b.Qa)==1&&mj(a,b,c.F)}
function lj(a,b,c){ej(a,c.F);c.F.g!=b.Qa&&Qi(b.zb,c.F.g,b.Qa)==1&&Qi(c.g,c.F.g,c.F.F.g)==1&&lj(a,b,c)}
function dj(a,b,c,d,e){var f=Mi(d,e);if(f==i)alert("[BUG:FIXME] FLIP failed due to missing triangle!");else{var g=Ai(f,Ai(d,e));Ri(e,Bi(d,e),Ai(d,e),g)?(hj(d,e,f,g),Yi(a,d),Yi(a,f),e==c&&g==b?c==a.zh.Ba.zb&&b==a.zh.Ba.Qa&&(d.Pg(b,c),f.Pg(b,c),fj(a,d),fj(a,f)):(Qi(c,g,b)==-1?(g=Ni(f,e,g),f.Ea[g]=!0,fj(a,f),zi(f)):(g=Ni(d,e,g),d.Ea[g]=!0,fj(a,d),zi(d),d=f),dj(a,b,c,d,e))):(g=nj(b,c,f,g),oj(a,b,c,d,f,g),$i(a,b,c,d,e))}}
function nj(a,b,c,d){a=Qi(b,d,a);if(a==1)return Bi(c,d);else if(a==-1)return Ai(c,d);else alert("[Unsupported] poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!")}function oj(a,b,c,d,e,f){var g=Mi(e,f);g==i?alert("[BUG:FIXME] FLIP failed due to missing triangle"):(e=Ai(g,Ai(e,f)),Ri(c,Bi(d,c),Ai(d,c),e)?dj(a,c,e,g,e):(e=nj(b,c,g,e),oj(a,b,c,d,g,e)))};function pj(){this.name="ogGeometry";this.type=Na;this.ne="";this.options=this.hd=this.he=i;this.yd=[];this.yd.ga=[0,0,0];this.Jf=this.ab=-1;this.color=[1,1,1,1];this.Kc=[1,1,1,1];this.Gp="unknown";this.pp=this.Km=10;this.Sm=-1E3;this.Rm=9E3}pj.prototype=new C;r=pj.prototype;r.Ka=function(a){a.dynamic?this.dc(a.data):v(a.url)&&a.type=="GeoJSON"&&qj(this,a.url)};r.jb=function(){rj(this).pi(this.ab)};function rj(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.q)b=a.e.q.jl;return b}r.ka=n();r.la=n();
r.Xj=function(){this.V.readyState==4&&(this.V.status==404?this.hd&&this.hd(this.id):this.dc(Ec(this.V.responseText)))};
function sj(a,b,c,d){var e={Mh:!1,xh:0,tc:[0,0,0],op:[0,0,0]},b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]],d=[d[0]-c[0],d[1]-c[1],d[2]-c[2]],f=[a[0]-c[0],a[1]-c[1],a[2]-c[2]],g=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],j=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],k=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],l=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],m=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],q=g*k-j*j;q<1.0E-14?(e.Mh=!0,f=0,g=j>k?l/j:m/k):(f=(j*m-k*l)/q,g=(g*m-j*l)/q);e.tc=[a[0]+f*b[0],a[1]+f*b[1],a[2]+f*b[2]];e.op=[c[0]+g*d[0],c[1]+g*d[1],c[2]+g*d[2]];return e}
function tj(a,b,c,d,e,f,g,j,k,l,m){l.push(b[0]);l.push(b[1]);l.push(b[2]);b=a;a++;l.push(f[0]);l.push(f[1]);l.push(f[2]);f=a;a++;l.push(e[0]);l.push(e[1]);l.push(e[2]);e=a;a++;l.push(k[0]);l.push(k[1]);l.push(k[2]);k=a;a++;l.push(c[0]);l.push(c[1]);l.push(c[2]);c=a;a++;l.push(g[0]);l.push(g[1]);l.push(g[2]);g=a;a++;l.push(d[0]);l.push(d[1]);l.push(d[2]);d=a;a++;l.push(j[0]);l.push(j[1]);l.push(j[2]);j=a;a++;m.push(c);m.push(g);m.push(d);m.push(g);m.push(j);m.push(d);m.push(b);m.push(e);m.push(f);
m.push(f);m.push(e);m.push(k);m.push(b);m.push(f);m.push(c);m.push(f);m.push(g);m.push(c);m.push(e);m.push(d);m.push(j);m.push(k);m.push(e);m.push(j);m.push(b);m.push(c);m.push(e);m.push(c);m.push(d);m.push(e);m.push(f);m.push(j);m.push(g);m.push(f);m.push(k);m.push(j);return a}
function uj(a,b,c){var d={VertexSemantic:"",Vertices:i,IndexSemantic:"",Indices:i,VertexSemantic:"p",IndexSemantic:"TRIANGLES"};d.Vertices=b;d.Indices=c;b=new L(a.parent.parent.c);b.dc(d,i,i,b);a.color.length==4?b.Ac.n(a.color[0],a.color[1],a.color[2],a.color[3]):a.color.length==3&&b.Ac.n(a.color[0],a.color[1],a.color[2],1);return b}
r.dc=function(a){ph("CreateFromJSONObject");var b=!1;if(a.type=="FeatureCollection"&&(ph("[GeoJSON Parser] type = FeatureCollection"),v(a.features)))for(var a=a.features,c=a.length,d=0;d<c;d++)if(v(a[d].type)&&a[d].type=="Feature"&&v(a[d].properties)&&v(a[d].geometry)){var e=a[d].properties,f=a[d].geometry;if(v(e.id))this.Gp=e.id;if(v(e.color))this.color=e.color;if(v(e.highlightcolor))this.Kc=e.highlightcolor;if(v(e.linewidth))this.Km=e.linewidth;if(v(e.pointsize))this.pp=e.pointsize;if(v(e.minelv))this.Sm=
e.minelv;if(v(e.maxelv))this.Rm=e.maxelv;if(v(f.type))if(e=f.type,e=="LineString")v(f.coordinates&&ka(f.coordinates))&&(b=vj(this,f.coordinates));else if(e=="MultiLineString"){if(v(f.coordinates&&ka(f.coordinates))){f=f.coordinates;for(e=0;e<f.length;e++)vj(this,f[e])&&(b=!0)}}else if(e=="Polygon"){if(v(f.coordinates&&ka(f.coordinates))){var b=f.coordinates,e=0,g=[],f=[],j=[];new O;var k=b.length;if(k==0)b=!1;else{if(k>=1){for(var l=0;l<k;l++)if(l==0)for(var m=0;m<b[l].length;m++)g.push(new ui(b[l][m][0],
b[l][m][1],e)),j.push([b[l][m][0],b[l][m][1]]),e++;else{for(var q=[],m=0;m<b[l].length;m++)q.push(new ui(b[l][m][0],b[l][m][1]),e),j.push([b[l][m][0],b[l][m][1]]),e++;f.push(q)}b=new Wi(g);e=h;for(e in f)for(k in g=b,j=f[e],Xi(g,j),k=h,j)g.d.push(j[k]);e=f=b;g=e.d[0].x;j=e.d[0].x;l=e.d[0].y;k=e.d[0].y;m=h;for(m in e.d){q=e.d[m];if(q.x>g)g=q.x;if(q.x<j)j=q.x;if(q.y>l)l=q.y;if(q.y<k)k=q.y}l=0.3*(l-k);e.Fh=new ui(g+0.3*(g-j),k-l);e.hl=new ui(j-l,k-l);e.d.sort(vi);e=f;k=j=g=h;k=new xi(e.d[0],e.hl,e.Fh);
e.Lc.push(k);g=new Si(k.Ad(1),k);j=new Si(k.Ad(0),k);k=new Si(k.Ad(2));e.Dh=new Ti(g,k);g.next=j;j.next=k;j.F=g;k.F=j;e=f;for(g=1;g<e.d.length;++g){var j=e.Ad(g),k=e,l=j,m=k.Jj(l),q=k,o=l,s=m,t=new xi(o,s.g,s.next.g);t.Zc(s.Xe);q.Lc.push(t);o=new Si(o);o.next=s.next;o.F=s;s.next.F=o;s.next=o;fj(q,t)||Yi(q,t);q=o;l.x<=m.g.x+1.0E-16&&ej(k,m);l=q;m=l.next;for(s=h;m.next!=i;){s=gj(m);if(s>Pi||s<-Pi)break;ej(k,m);m=m.next}for(m=l.F;m.F!=i;){s=gj(m);if(s>Pi||s<-Pi)break;ej(k,m);m=m.F}if(l.next!=i&&l.next.next!=
i&&(s=Math.atan2(l.g.y-l.next.next.g.y,l.g.x-l.next.next.g.x),s<Oi)){k.Y.pe=Qi(l.g,l.next.g,l.next.next.g)==-1?l.next.next:l.next;for(k.Y.gd=k.Y.pe;k.Y.gd.next!=i&&k.Y.gd.g.y>=k.Y.gd.next.g.y;)k.Y.gd=k.Y.gd.next;if(k.Y.gd!=k.Y.pe){for(k.Y.yc=k.Y.gd;k.Y.yc.next!=i&&k.Y.yc.g.y<k.Y.yc.next.g.y;)k.Y.yc=k.Y.yc.next;if(k.Y.yc!=k.Y.gd)k.Y.width=k.Y.yc.g.x-k.Y.pe.g.x,k.Y.Mk=k.Y.pe.g.y>k.Y.yc.g.y,ij(k,k.Y.gd)}}k=q;for(l=0;l<j.Ah.length;++l)$i(e,j.Ah[l],k)}e=f.Dh.Fh.next.Xe;for(g=f.Dh.Fh.next.g;!Ei(e,g);)e=
Di(e,g);Zi(f,e);b=b.Nn;f=[];for(e=0;e<b.length;e++)g=b[e].Ad(1).index,j=b[e].Ad(2).index,f.push(b[e].Ad(0).index),f.push(g),f.push(j)}b=!0}}}else e=="MultiPolygon"?rh("MultiPolygon is not yet supported"):e=="Point"?rh("Point is not yet supported"):e=="MultiPoint"&&rh("MultiPoint is not yet supported")}if(b)this.ab=rj(this).Al(this.yd)};function wj(a,b){for(var c=0;c<a.length;c+=3)a[c+0]-=b[0],a[c+1]-=b[1],a[c+2]-=b[2]}
function qj(a,b){b==i?alert("invalid json-url"):(a.ne=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.ne,!0),a.V.onreadystatechange=function(){a.Xj()},a.V.send())}
function vj(a,b){var c=new O,d=[0,0,0],e=[0,0,0],f=[],g=b.length;if(g>1)for(var j=0;j<g;j++){var k=b[j][0],l=b[j][1];c.n(k,l,a.Rm);c.ma(d);c.n(k,l,a.Sm);c.ma(e);f.push([d[0],d[1],d[2]]);f.push([e[0],e[1],e[2]])}else return!1;g=f.length;for(k=e=d=c=0;k<f.length;k++)c+=f[k][0]/g,d+=f[k][1]/g,e+=f[k][2]/g;a.yd.ga[0]=c;a.yd.ga[1]=d;a.yd.ga[2]=e;var g=[],k=[],m=0.5*a.Km*G,l=0,q,o,s,t,x,A,S,X,Q,ia,T,U,J,Y,Z,$,va,wa,xa;if(f.length==4){j=f[0];q=f[1];o=f[2];s=f[3];var F=o[0]-j[0],ca=o[1]-j[1],qa=o[2]-j[2],
da=q[0]-j[0],ra=q[1]-j[1],ha=q[2]-j[2],f=ca*ha-qa*ra;J=qa*da-F*ha;l=F*ra-ca*da;F=m/Math.sqrt(f*f+J*J+l*l);f*=F;J*=F;l*=F;A=[j[0]+f,j[1]+J,j[2]+l];S=[q[0]+f,q[1]+J,q[2]+l];X=[o[0]+f,o[1]+J,o[2]+l];Q=[s[0]+f,s[1]+J,s[2]+l];ia=[j[0]-f,j[1]-J,j[2]-l];T=[q[0]-f,q[1]-J,q[2]-l];U=[o[0]-f,o[1]-J,o[2]-l];J=[s[0]-f,s[1]-J,s[2]-l];tj(0,A,ia,U,X,S,T,J,Q,k,g);wj(k,[c,d,e]);a.yd.push(uj(a,k,g))}else if(f.length>=6){j=f[0];q=f[1];o=f[2];s=f[3];t=f[4];x=f[5];F=o[0]-j[0];ca=o[1]-j[1];qa=o[2]-j[2];da=q[0]-j[0];ra=
q[1]-j[1];ha=q[2]-j[2];Y=ca*ha-qa*ra;Z=qa*da-F*ha;$=F*ra-ca*da;F=m/Math.sqrt(Y*Y+Z*Z+$*$);Y*=F;Z*=F;$*=F;A=[j[0]+Y,j[1]+Z,j[2]+$];S=[q[0]+Y,q[1]+Z,q[2]+$];ia=[j[0]-Y,j[1]-Z,j[2]-$];T=[q[0]-Y,q[1]-Z,q[2]-$];for(j=4;j<f.length;j+=2)t=f[j],x=f[j+1],F=t[0]-o[0],ca=t[1]-o[1],qa=t[2]-o[2],da=s[0]-o[0],ra=s[1]-o[1],ha=s[2]-o[2],va=ca*ha-qa*ra,wa=qa*da-F*ha,xa=F*ra-ca*da,F=m/Math.sqrt(va*va+wa*wa+xa*xa),va*=F,wa*=F,xa*=F,da=s[0]-q[0],ra=s[1]-q[1],ha=s[2]-q[2],Q=Math.sqrt(da*da+ra*ra+ha*ha),da/=Q,ra/=Q,ha/=
Q,F=s[0]-x[0],ca=s[1]-x[1],qa=s[2]-x[2],Q=Math.sqrt(F*F+ca*ca+qa*qa),F/=Q,ca/=Q,U=[x[0]+va,x[1]+wa,x[2]+xa],q=[x[0]-va,x[1]-wa,x[2]-xa],J=[t[0]+va,t[1]+wa,t[2]+xa],X=[t[0]-va,t[1]-wa,t[2]-xa],Q=sj([S[0],S[1],S[2]],[S[0]+da,S[1]+ra,S[2]+ha],[U[0],U[1],U[2]],[U[0]+F,U[1]+ca,U[2]+ha]),U=sj([T[0],T[1],T[2]],[T[0]+da,T[1]+ra,T[2]+ha],[q[0],q[1],U[2]],[q[0]+F,q[1]+ca,q[2]+ha]),q=sj([A[0],A[1],A[2]],[A[0]+da,A[1]+ra,A[2]+ha],[J[0],J[1],J[2]],[J[0]+F,J[1]+ca,J[2]+ha]),F=sj([ia[0],ia[1],ia[2]],[ia[0]+da,ia[1]+
ra,ia[2]+ha],[X[0],X[1],X[2]],[X[0]+F,X[1]+ca,X[2]+ha]),!Q.Mh&&!U.Mh&&!q.Mh&&!F.Mh?(Q=[Q.tc[0],Q.tc[1],Q.tc[2]],J=[U.tc[0],U.tc[1],U.tc[2]],X=[q.tc[0],q.tc[1],q.tc[2]],U=[F.tc[0],F.tc[1],F.tc[2]]):(Q=[s[0]+Y,s[1]+Z,s[2]+$],J=[s[0]-Y,s[1]-Z,s[2]-$],X=[o[0]+Y,o[1]+Z,o[2]+$],U=[o[0]-Y,o[1]-Z,o[2]-$]),l=tj(l,A,ia,U,X,S,T,J,Q,k,g),Y=va,Z=wa,$=xa,q=s,o=t,s=x,S=Q,T=J,A=X,ia=U;f=[x[0]+Y,x[1]+Z,x[2]+$];m=[x[0]-Y,x[1]-Z,x[2]-$];j=[t[0]+Y,t[1]+Z,t[2]+$];o=[t[0]-Y,t[1]-Z,t[2]-$];tj(l,X,U,o,j,Q,J,m,f,k,g);wj(k,
[c,d,e]);a.yd.push(uj(a,k,g))}else return!1;return!0};function xj(){this.name="ogAoeImageLayer";this.type=Za;this.M=!1;this.Kb=[];this.oe=""}xj.prototype=new C;r=xj.prototype;r.Ka=function(a){if(a.name)this.oe=a.name};r.jb=function(){for(var a=0;a<this.Kb.length;a++){for(var b=a;b<this.Kb.length;b++)this.Kb[a].ab-=1;D(this.Kb[a])}};r.ka=function(){this.M=!0;for(var a=0;a<this.Kb.length;a++)this.Kb[a].ka()};r.la=function(){this.M=!1;for(var a=0;a<this.Kb.length;a++)this.Kb[a].la()};r.vj=function(a){this.Kb.push(a);a.Jf=this.id};
r.Mj=function(a){for(var b=0;b<this.Kb.length;b++)if(this.Kb[b]==a){for(var c=b+1;c<this.Kb.length;c++)this.Kb[c].ab-=1;D(this.Kb[b]);this.Kb.splice(b,1)}};function yj(){this.name="ogVectorLayer";this.type=Ja;this.M=!1;this.ja=[];this.oe=""}yj.prototype=new C;r=yj.prototype;r.Ka=function(a){if(a.name)this.oe=a.name};function zj(a,b){var c=V(Qa,a.parent.parent,b);a.ja.push(c);c.yq=a;return c}r.pi=function(a){for(var b=0;b<this.ja.length;b++)this.ja[b]==a&&(D(this.ja[b]),this.ja.splice(b,1))};r.jb=function(){Aj(this)};r.ka=function(){this.M=!0;for(var a=0;a<this.ja.length;a++)this.ja[a].ka()};r.la=function(){this.M=!1;for(var a=0;a<this.ja.length;a++)this.ja[a].la()};
function Aj(a){for(var b=0;b<a.ja.length;b++){for(var c=b;c<a.ja.length;c++)a.ja[b].ab-=1;D(a.ja[b])}}r.Al=function(a){this.ja.push(a);a.Jf=this.id};r.pi=function(a){for(var b=0;b<this.ja.length;b++)if(this.ja[b]==a){for(var c=b+1;c<this.ja.length;c++)this.ja[c].ab-=1;D(this.ja[b]);this.ja.splice(b,1)}};function Bj(){this.name="ogImageLayer";this.type=Da;this.Kf=-1}Bj.prototype=new C;Bj.prototype.Lg=function(){var a=i,b=this.parent.parent.parent.c;if(b.e&&b.e.q)a=b.e.q.Aa;return a};Bj.prototype.yj=function(a){var b=this.Lg();if(b)this.Kf=b.yj(a)};Bj.prototype.Qj=function(){var a=this.Lg();a&&this.Kf!=-1&&a.Qj(this.Kf)};Bj.prototype.Ka=function(a){this.yj(a)};function Cj(){this.name="ogBillboardLayer";this.type=Ya;this.M=!1;this.Ta=[];this.oe=""}Cj.prototype=new C;r=Cj.prototype;r.Ka=function(a){if(a.name)this.oe=a.name};r.jb=function(){for(var a=0;a<this.Ta.length;a++)D(this.Ta[a])};r.ka=function(){this.M=!0;for(var a=0;a<this.Ta.length;a++)this.Ta[a].ka()};r.la=function(){this.M=!1;for(var a=0;a<this.Ta.length;a++)this.Ta[a].la()};r.Nj=function(a){for(var b=0;b<this.Ta.length;b++)this.Ta[b]==a&&(D(this.Ta[b]),this.Ta.splice(b,1))};r.wj=function(a){this.Ta.push(a)};function Dj(){this.name="ogPointSpriteObject";this.type=ab;this.ve=this.options=this.ud=i;this.Xi=this.Ii=0}Dj.prototype=new C;r=Dj.prototype;r.Ka=function(a){this.options=a;this.ud=new Xc(this.parent.parent.parent.c);a.Vertices&&this.ud.qi(a.Vertices);if(a.PointUrl)Ej(this,a.PointUrl),this.jp=a.NumberOfPoints,this.ud.pj=this.jp;this.ud.Wg(a.Center[0],a.Center[1],a.Center[2])};r.jb=function(){if(this.ud)this.ud.o(),this.ud=i,this.status=3};r.ka=function(){this.ud.M=!0};r.Ge=n();
r.la=function(){this.ud.M=!1};function Ej(a,b){b==i?alert("invalid xyzurl"):(a.Mp=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.Mp,!0),a.V.onreadystatechange=function(){a.V.readyState==4&&(a.V.status==404?alert("xyz-file not found..."):Fj(a))},a.V.onprogress=function(){Fj(a)},a.V.send(),a.Ii=0,a.Xi=0)}
function Fj(a){var b=a.V.responseText;a.Ii=b.lastIndexOf("\n");for(var b=b.substr(a.Xi,a.Ii-a.Xi-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}a.ud.qi(c);a.Xi=a.Ii};function Gj(){this.name="ogGeometryLayer";this.type=Ha;this.M=!1;this.qa=[];this.oe=""}Gj.prototype=new C;r=Gj.prototype;r.Ka=function(a){if(a.name)this.oe=a.name};r.jb=function(){for(var a=0;a<this.qa.length;a++){for(var b=a;b<this.qa.length;b++)this.qa[a].ab-=1;D(this.qa[a])}};r.ka=function(){this.M=!0;for(var a=0;a<this.qa.length;a++)this.qa[a].ka()};r.la=function(){this.M=!1;for(var a=0;a<this.qa.length;a++)this.qa[a].la()};r.zd=function(a){this.qa.push(a);a.Jf=this.id};
r.Pj=function(a){for(var b=0;b<this.qa.length;b++)if(this.qa[b]==a){for(var c=b+1;c<this.qa.length;c++)this.qa[c].ab-=1;D(this.qa[b]);this.qa.splice(b,1)}};function Hj(){this.name="ogSurface";this.type=Pa;this.wq=this.mq=!1;this.elevation=this.latitude=this.longitude=0;this.status=ib;this.u=i;this.elevation=this.latitude=this.longitude=0}Hj.prototype=new C;r=Hj.prototype;r.Ge=function(a,b,c,d,e,f){this.longitude=a;this.latitude=b;this.elevation=c;this.u.Wg(a,b,c,d,e,f)};
r.Zg=function(a,b,c,d){this.longitude=a;this.latitude=b;this.elevation=c;var e=this.u;e.Yb=a;e.Xb=b;e.Vb=c;var f=new O(a,b,c),c=Array(3);f.ma(c);f=new K;f.Od(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new K;c.Fe(a);a=new K;a.Fe([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.eg();b=new K;b.Zf(d[0],d[1],d[2],d[3]);b.eg();f=new K;f.P(a,b);d=new K;d.P(a,f);b=new K;
b.Fe([0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.eg();a=new K;a.P(b,d);d=new K;d.P(c,a);c=new K;c.Vd(G,G,G);a=new K;a.P(d,c);e.ha=a;Pc(e)};r.Ab=function(a,b,c){this.u.Ab(a,b,c)};r.lf=function(a,b,c){this.u.lf(a,b,c)};
r.Ka=function(a){if(a==i)fc(E("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==i)fc(E("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=Oa)fc(E("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.u=new L(this.parent.parent.parent.parent.c);this.u.M=!1;this.u.kp=this.id;var b=this;this.u.dc(a.jsonobject,function(){b.longitude!=0&&b.latitude!=0&&b.Ge(b.longitude,b.latitude,b.elevation);b.status=hb;b.O&&b.O(b.id)},function(){b.status=
3;b.N&&b.N(b.id)});this.ne=a.url;this.u.Sn=a.jsonobject.VisibilityDistance?a.jsonobject.VisibilityDistance*G:5E4*G}this.longitude=a.jsonobject.Center[0];this.latitude=a.jsonobject.Center[1];this.elevation=a.jsonobject.Center[2]}};r.jb=function(){if(this.u)this.u.o(),this.u=i,this.status=3};r.la=function(){if(this.u)this.u.M=!1};r.ka=function(){if(this.u)this.u.M=!0};r.kf=function(a,b,c,d){this.u&&this.u.kf(a,b,c,d)};var Ij=-1;function V(a,b,c){var d=i;a==y?d=new Eh:a==z?d=new Gh:a==Ca?d=new Fh:a==Da?d=new Bj:a==Ea?d=new Mh:a!=Fa&&(a==Ga?d=new Kh:a==Ha?d=new Gj:a!=Ia&&a!=Ka&&(a==La?d=new jc:a==Wa?d=new Ih:a!=Ma&&(a==Na?d=new Zf:a==Oa?d=new Sh:a==Pa?d=new Hj:a==Ra?d=new pc:a!=Sa&&a!=Ta&&a!=Ua&&a!=Va&&(a==Xa?d=new Qh:a==Ya?d=new Cj:a==Za?d=new xj:a==$a?d=new Oe:a==ab?d=new Dj:a==bb?d=new Oh:a==Ja?d=new yj:a==Qa&&(d=new pj)))));if(d!=i)Ij++,d.id=Ij,d.parent=b,jb.push(d),d.Ka(c);return d}w("_CreateObject",V);
w("ogGetObjectType",function(a){return(a=B(a))?a.type:cb});w("ogGetObjectName",function(a){return(a=B(a))?a.name:""});w("ogGetObjectPosition",function(a){var a=B(a),b={};if(a)switch(a.type){case Na:b={};if(v(a.options.jsonobject)&&v(a.options.jsonobject.Center))b.longitude=a.options.jsonobject.Center[0],b.latitude=a.options.jsonobject.Center[1],b.elevation=a.options.jsonobject.Center[2];break;case Wa:var c=new O;c.ec(a.sa.Re,a.sa.Se,a.sa.Te);b={};b.longitude=c.G[0];b.latitude=c.G[1];b.elevation=c.G[2]}return b});
w("ogGetNumObjects",function(){return jb.length});w("ogGetObjectAt",function(a){a=a<0||a>jb.length-1?i:jb[a];return a==i?-1:a.id});w("ogGetParentObject",function(a){if((a=B(a))&&a.parent)return a.parent.id;return-1});w("ogSetObjectName",function(a,b){var c=B(a);if(c)c.name=b});w("ogGetObjectByName",function(a){a:{for(var b=0;b<jb.length;b++)if(jb[b].name==a){a=jb[b];break a}a=i}if(a)return a.id;return-1});w("ogGetObjectStatus",function(a){if(a=B(a))return a.status;return 3});
w("ogOnLoad",function(a,b){var c=B(a);if(c)c.status==hb?b(a):c.O=b});w("ogOnFailure",function(a,b){var c=B(a);if(c)c.status==3?b(a):c.N=b});function Jj(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=V(y,i,a);if(a!=i)return a.id;return-1}w("ogCreateContext",Jj);w("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?!0:!1;f.canvas=a;return Jj(f,c,d,e)});w("ogDestroyContext",function(a){(a=B(a))&&a.type==y&&D(a)});w("ogGetGL",function(a){if((a=B(a))&&a.type==y)return a.c.b;return i});
w("ogGetWidth",function(a){if((a=B(a))&&a.type==y)return a=a.c?a.c.width:0,a;return 0});w("ogGetHeight",function(a){if((a=B(a))&&a.type==y)return a=a.c?a.c.height:0,a;return 0});w("ogGetScene",function(a){if((a=B(a))&&a.type==y&&a.e)return a.e.id;return-1});w("ogSetBackgroundColor",function(a,b,c,d,e){(a=B(a))&&a.type==y&&a.c&&a.c.Xl(b,c,d,e)});w("ogSetTextColor",function(a,b,c,d){(a=B(a))&&a.type==y&&a.fontcolor.n(b,c,d,1)});w("ogDrawText",function(a,b,c,d){(a=B(a))&&a.type==y&&a.ye(b,c,d)});
w("ogGetTextSize",function(a,b){var c=B(a);if(c&&c.type==y&&(c=c.Ej(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});w("ogSetMouseDownFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.Cd=b});w("ogSetMouseUpFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.Dd=b});w("ogSetMouseMoveFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.Af=b});w("ogSetMouseWheelFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.jd=b});w("ogSetKeyDownFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.ok=b});
w("ogSetKeyUpFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.pk=b});w("ogSetResizeFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.Je=b});w("ogSetRenderFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.fe=b});w("ogSetTimerFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.ge=b});w("ogSetRenderGeometryFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.$p=b});w("ogSetBeginRenderFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.Yp=b});
w("ogSetEndRenderFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.Zp=b});w("ogSetFlyToStartedFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.yf=b});w("ogSetInPositionFunction",function(a,b){var c=B(a);if(c&&c.type==y)c.zf=b});w("ogSetNumRenderPasses",function(a,b){var c=B(a);if(c&&c.type==y)c.ip=b});w("ogExec",n());w("ogSetArtworkDirectory",function(a){Uc=a});
function Kj(a,b,c){v(c)||(c={});if((a=B(a))&&a.type==y)return c.type=b,b==db||b==eb||b==fb||b==gb?(b=V(z,a,c),a.e=b,b.id):(fc(E("owg.og"),"** WARNING: wrong scene type"),-1);fc(E("owg.og"),"** WARNING: context is not valid");return-1}w("ogCreateScene",Kj);w("ogGetContext",function(a){if((a=B(a))&&a.type==z)if(a=a.parent)return a.id;return-1});w("ogGetWorld",function(a){if((a=B(a))&&a.type==z)if(a=a.Cg)return a.id;return-1});
w("ogPickGlobe",function(a,b,c){if((a=B(a))&&a.type==z&&a.Rc==db)return a.Rg(b,c);return[!1,0,0,0,0,0,0]});w("ogToCartesian",function(a,b,c,d){if((a=B(a))&&a.type==z&&a.Rc==db){var e=[];(new O(b,c,d)).ma(e)}return e||i});w("ogToWGS84",function(a,b,c,d){if((a=B(a))&&a.type==z&&a.Rc==db){var e=new O;e.ec(b,c,d);e=[e.G[0],e.G[1],e.G[2]]}return e||i});w("ogCreateCamera",function(a){if((a=B(a))&&a.type==z){var b=V(Ra,a,i);a.Ci.push(b);return b.id}return-1});
w("ogDestroyCamera",function(a){(a=B(a))&&a.type==Ra&&D(a)});w("ogSetPosition",function(a,b,c,d){(a=B(a))&&a.type==Ra&&a.ya(b,c,d)});function Lj(a){if((a=B(a))&&a.type==z)return a=a.wf,rc(a),a.df();return i}w("ogGetPosition",Lj);function Mj(a,b,c,d){if((a=B(a))&&a.type==Ra)return b>360&&(b-=360),b<0&&(b=360+b),a.Ab(b,c,d);return i}w("ogSetOrientation",Mj);w("ogSetOrientationFromQuaternion",function(a,b,c,d,e){if((a=B(a))&&a.type==Ra)return a.Yg(b,c,d,e);return i});
function Nj(a){if((a=B(a))&&a.type==z)return a=a.wf,rc(a),a.Mg();return i}w("ogGetOrientation",Nj);function Oj(a){if((a=B(a))&&a.type==z)return a.wf.id;return-1}w("ogGetActiveCamera",Oj);w("ogSetActiveCamera",function(a){(a=B(a))&&a.type==Ra&&Hh(a.parent,a.id)});w("ogGetNumCameras",function(a){if((a=B(a))&&a.type==z)return a.Ci.length});w("ogGetCameraAt",function(a,b){var c=B(a);if(c&&c.type==z)return c.Ci[b].id;return-1});
w("ogLookAt",function(a,b,c,d){var e=Oj(a);rc(B(e));var f=Lj(a),g=[];(new O(f.longitude,f.latitude,f.elevation)).ma(g);var j=new I(g[0],g[1],g[2]),k=[];(new O(b,c,d)).ma(k);b=(new I(k[0],k[1],k[2])).bf();b.Uj(j);j=new K;j.Od(f.longitude,f.latitude);f=new K;f.cd(g[0],g[1],g[2]);g=new K;g.P(f,j);g.eg();g=g.Ya(b);g.Bc();g=g.a;f=g[0];j=g[1];b=g[2];g=Math.acos(f/Math.sqrt(1-b*b))*57.29577951308232;j<0&&f>0&&(g=360-g);j<0&&f<0&&(g=360-g);f=-(90-Math.acos(b)*57.29577951308232);b<-0.9&&(g=180+g,f=-f);a=Nj(a);
Mj(e,g,f,a.roll)});w("ogSetNavigationMode",function(a,b,c){v(c)||(c={});(a=B(a))&&a.type==z&&a.Sj(b,c)});function Pj(a){if((a=B(a))&&a.type==z){var b={};b.scenetype=a.Rc;b=V(Ca,a,b);a.Cg=b;var c=V(Ra,a,i);rc(c);Hh(a,c.id);a.Ci.push(c);return b.id}return-1}w("ogCreateWorld",Pj);w("ogCreateGlobe",function(a){a=Kj(a,db);return Pj(a)});w("ogSetNorthpoleColor",function(a,b,c,d){if((a=B(a))&&a.type==Ca)a.parent.parent.c.e.q.Aa.Pf=[b,c,d]});
w("ogSetSouthpoleColor",function(a,b,c,d){if((a=B(a))&&a.type==Ca)a.parent.parent.c.e.q.Aa.Uf=[b,c,d]});w("ogSetRenderQuality",function(a,b){var c=B(a);if(c&&c.type==Ca&&(c=c.parent.parent.c.e.q.Aa,b>0&&b<=3))c.sn=b});w("ogSetRenderEffect",function(a,b,c){(a=B(a))&&a.type==Ca&&a.ri(b,c)});w("ogGetElevationAt",function(a,b,c){var d={hasvalue:!1,elevation:0,lod:0};(a=B(a))&&a.type==Ca&&(d=a.parent.parent.c.$f(b,c));return d});
w("ogLoadTextureAsync",function(a,b){var c=B(a);if(c&&c.type==z){var d={};d.url=b;return V(La,c,d).id}return-1});w("ogDestroyTexture",function(a){(a=B(a))&&a.type==La&&D(a)});w("ogBlitTexture",function(a,b,c,d){(a=B(a))&&a.type==La&&a.U(b,c,d)});w("ogAddImageLayer",function(a,b){var c=B(a);if(c&&c.type==Ca)return V(Da,c,b).id;return-1});w("ogRemoveImageLayer",function(a){if((a=B(a))&&a.type==Da)a.Qj(),D(a)});w("ogAddElevationLayer",function(a,b){var c=B(a);if(c&&c.type==Ca)return V(Ea,c,b).id;return-1});
w("ogRemoveElevationLayer",function(a){if((a=B(a))&&a.type==Ea)a.Oj(),D(a)});w("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;if((a=B(a))&&a.type==Ca)return V(Ga,a,e).id;return-1});w("ogRemovePOILayer",function(a){(a=B(a))&&a.type==Ga&&D(a)});w("ogHidePOILayer",function(a){(a=B(a))&&a.type==Ga&&a.ka()});w("ogShowPOILayer",function(a){(a=B(a))&&a.type==Ga&&a.la()});w("ogAddVectorLayer",function(a,b){var c=B(a);if(c&&c.type==Ca)return V(Ja,c,b).id;return-1});
w("ogRemoveVectorLayer",function(a){if((a=B(a))&&a.type==Ja)Aj(a),D(a)});w("ogLoadVectorAsync",function(a,b){var c=B(a);if(c&&c.type==Ja)return zj(c,{url:b,dynamic:!1,type:"GeoJSON"}).id;return-1});w("ogDestroyVector",function(a){if((a=B(a))&&a.type==Qa)if(a.l){var b=a.l;b&&b.type==Ja&&b.pi(a)}else D(a);return-1});w("ogAddGeoJSON",function(a,b){var c=B(a);if(c&&c.type==Ja)return zj(c,{dynamic:!0,type:"GeoJSON",data:b}).id;return-1});
w("ogCreatePOI",function(a,b){var c=B(a);if(c&&c.type==Ga){b.textstyle=c.Yf;b.iconstyle=c.Gf;var d=V(Wa,c.parent.parent,b);c.Ra.push(d);d.qq=c;return d.id}return-1});w("ogDestroyPOI",function(a){if((a=B(a))&&a.type==Wa)if(a.l){var b=a.l;if(b&&b.type==Ga)for(var c=0;c<b.Ra.length;c++)b.Ra[c]==a&&(D(b.Ra[c]),b.Ra.splice(c,1))}else D(a);return-1});w("ogChangePOIText",function(a,b){var c=B(a);if(c&&c.type==Wa){var d=c.parent.parent;c.Yf&&d.c.wg.Dl(c.sa,b,c.Yf)}});
w("ogChangePOIIcon",function(a,b){var c=B(a);if(c&&c.type==Wa){var d=c.parent.parent;c.Gf&&d.c.wg.Cl(c.sa,b,c.Gf)}});w("ogChangePOISize",function(a,b){var c=B(a);c&&c.type==Wa&&c.sa.si(b)});w("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=B(a))&&a.type==Wa){var e=[];(new O(b,c,d)).ma(e);b=e[0];c=e[1];e=e[2];a.sa.Qf?a.sa.ya(b,c,e,0):a.sa.ya(b,c,e,i)}});w("ogChangePOIPosition",function(a,b,c,d){(a=B(a))&&a.type==Wa&&(a.sa.Qf?a.sa.ya(b,c,d,0):a.sa.ya(b,c,d,i))});
w("ogHidePOI",function(a){(a=B(a))&&a.type==Wa&&a.ka()});w("ogShowPOI",function(a){(a=B(a))&&a.type==Wa&&a.la()});w("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=B(a))&&a.type==Wa)a.sa.Zk=new Dc(b,c,d,e)});w("ogPickPOI",function(a,b,c){if((a=B(a))&&a.type==z&&a.Rc==db)return a.Tg(b,c);return-1});w("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=B(a);if(d&&d.type==Ca)return V(Ha,d,c).id;return-1});
w("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=B(a);if(d&&d.type==Ca)return V(Za,d,c).id;return-1});w("ogCreateAoeImage",function(a,b){var c=B(a);if(c&&c.type==Za){var d=V($a,c.parent.parent,b);c.vj(d);return d.id}return-1});w("ogDestroyAoeImage",function(a){if((a=B(a))&&a.type==$a){var b=B(a.Jf);b&&b.type==Za&&b.Mj(a)}return-1});w("ogHideGeometryLayer",function(a){(a=B(a))&&a.type==Ha&&a.ka()});w("ogShowGeometryLayer",function(a){(a=B(a))&&a.type==Ha&&a.la()});
w("ogRemoveGeometryLayer",function(a){(a=B(a))&&a.type==Ha&&D(a);return-1});w("ogCreateGeometry",function(a,b){var c={};v(b.type)?c=b:c.jsonobject=b;var d=B(a);if(d&&d.type==Ha)return c=V(Na,d.parent.parent,c),d.zd(c),c.id;return-1});w("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=B(a);if(d&&d.type==Ha)return c=V(Na,d.parent.parent,c),d.zd(c),c.id;return-1});w("ogDestroyGeometry",function(a){if((a=B(a))&&a.type==Na){var b=B(a.Jf);b&&b.type==Ha&&b.Pj(a)}return-1});
w("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){if((a=B(a))&&a.type==Na)return a.Ge(b,c,d,e,f,g);return-1});w("ogSetGeometryOrientation",function(a,b,c,d){if((a=B(a))&&a.type==Na)return a.Ab(b,c,d);return-1});w("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){if((a=B(a))&&a.type==Na)return a.Zg(b,c,d,e);return-1});w("ogSetGeometryScale",function(a,b,c,d){(a=B(a))&&a.type==Na&&a.lf(b,c,d)});w("ogGetNumMeshes",function(a){if((a=B(a))&&a.type==Na)return a.cb.length;return-1});
w("ogGetMeshAt",function(a,b){var c=B(a);if(c&&c.type==Na)return c.cb[b].id;return-1});w("ogHideGeometry",function(a){(a=B(a))&&a.type==Na&&a.ka()});w("ogShowGeometry",function(a){(a=B(a))&&a.type==Na&&a.la()});w("ogHighlightGeometry",function(a,b,c,d,e){(a=B(a))&&a.type==Na&&a.kf(b,c,d,e)});w("ogPickGeometry",function(a,b,c){if((a=B(a))&&a.type==z&&a.Rc==db)if(b=a.hf(b,c),b=B(b))return b.parent.parent.id;return-1});
w("ogCreatePolylineWGS84",function(a,b,c){if((a=B(a))&&a.type==Ha)return c.coords=b,c.type="EarthPolyline",b=V(Na,a.parent.parent,c),a.zd(b),b.id;return-1});w("ogGetSurfaceAt",function(a,b){var c=B(a);if(c&&c.type==Oa)return c.gb[b].id;return-1});w("ogHideMesh",function(a){(a=B(a))&&a.type==Oa&&a.ka()});w("ogShowMesh",function(a){(a=B(a))&&a.type==Oa&&a.la()});w("ogPickMesh",function(a,b,c){if((a=B(a))&&a.type==z&&a.Rc==db)if(b=a.hf(b,c),b=B(b))return b.parent.id;return-1});
w("ogHideSurface",function(a){(a=B(a))&&a.type==Pa&&a.ka()});w("ogShowSurface",function(a){(a=B(a))&&a.type==Pa&&a.la()});w("ogPickSurface",function(a,b,c){if((a=B(a))&&a.type==z&&a.Rc==db)return a.hf(b,c);return-1});w("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=B(a);if(d&&d.type==Ca)return V(Ya,d,c).id;return-1});w("ogRemoveBillboardLayer",function(a){(a=B(a))&&a.type==Ya&&D(a)});w("ogHideBillboardLayer",function(a){(a=B(a))&&a.type==Ya&&a.ka()});
w("ogShowBillboardLayer",function(a){(a=B(a))&&a.type==Ya&&a.la()});w("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=B(a))&&a.type==Ya){var f={};f.canvas=b;f.position=[c,d,e];b=V(Xa,a.parent.parent,f);a.wj(b);b.l=a.id;return b.id}return-1});w("ogDestroyBillboard",function(a){if((a=B(a))&&a.type==Xa)if(a.l){var b=B(a.l);b&&b.type==Ya&&b.Nj(a)}else D(a);return-1});w("ogHideBillboard",function(a){(a=B(a))&&a.type==Xa&&a.ka();return-1});
w("ogShowBillboard",function(a){(a=B(a))&&a.type==Xa&&a.la();return-1});w("ogPickBillboard",function(a,b,c){if((a=B(a))&&a.type==z&&a.Rc==db)return a.Sg(b,c);return-1});w("ogUpdateBillboard",function(a,b){var c=B(a);if(c&&c.type==Xa)c.Ic.canvas=b,c.Ic.bh();else return-1});w("ogFlyTo",function(a,b,c,d,e,f,g){(a=B(a).parent.c)&&Ne(a.pa,b,c,d,e,f,g)});w("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=B(a).parent.c)&&a.Dj(b,c,d,e,f,g,j)});
w("ogSetFlightDuration",function(a,b){var c=B(a).parent.c;c&&c.Xg(b)});w("ogStopFlyTo",function(a){(a=B(a).parent.c)&&a.ah()});w("ogLockNavigation",function(a){(a=B(a).parent.c)&&a.e.S.Og(!0)});w("ogUnlockNavigation",function(a){(a=B(a).parent.c)&&a.e.S.Og(!1)});w("ogSetCanvasSizeOffset",function(a,b,c){a=B(a).parent.c;a.xl=b;a.Jk=c;jh()});w("ogDebug",function(){var a=new ri;ei(a);a.Gd()});w("ogWarning",function(a){fc(E("warning"),a)});function rh(a){E("error").log(Yb,a,h)}w("ogError",rh);
function ph(a){E("message").info(a)}w("ogLog",ph);w("ogWorldToWindow",function(a,b,c,d){var e;if((a=B(a))&&a.type==z&&a.Rc==db)e=a.parent.c,a=new K,a.P(e.rd,e.Ih),b=new I(b,c,d),d=a.Ya(b),b=d.a[0],c=-d.a[1],d=d.a[2],b=Math.floor((b+1)*0.5*e.width+0.5),c=Math.floor((c+1)*0.5*e.height-1+0.5),e=[b,c,(d+1)*0.5];return e||i});w("ogCalcDistanceWGS84",function(a,b,c,d){a=kc*Math.acos(Math.sin(H(b))*Math.sin(H(d))+Math.cos(H(b))*Math.cos(H(d))*Math.cos(H(c-a)));isNaN(a)&&(a=0);return a});
w("ogSetMinAltitude",function(a,b){var c=B(a);c&&c.type==z&&c.Rc==db&&c.parent.c.e.S.am(b)});
