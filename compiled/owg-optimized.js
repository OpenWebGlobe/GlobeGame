function aa(a){throw a;}var h=void 0,i=null;function m(){return function(){}}function ba(a){return function(b){this[a]=b}}function ca(a){return function(){return this[a]}}function p(a){return function(){return a}}var r,u=this;function da(a){for(var a=a.split("."),b=u,c;c=a.shift();)if(b[c]!=i)b=b[c];else return i;return b}function ga(){}
function ia(a){var b=typeof a;if(b=="object")if(a){if(a instanceof Array)return"array";else if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if(c=="[object Window]")return"object";if(c=="[object Array]"||typeof a.length=="number"&&typeof a.splice!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("splice"))return"array";if(c=="[object Function]"||typeof a.call!="undefined"&&typeof a.propertyIsEnumerable!="undefined"&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if(b=="function"&&typeof a.call=="undefined")return"object";return b}function v(a){return a!==h}function ka(a){return ia(a)=="array"}function la(a){var b=ia(a);return b=="array"||b=="object"&&typeof a.length=="number"}function ma(a){return typeof a=="string"}function na(a){return ia(a)=="function"}function oa(a){a=ia(a);return a=="object"||a=="array"||a=="function"}function pa(a){return a[sa]||(a[sa]=++ta)}var sa="closure_uid_"+Math.floor(Math.random()*2147483648).toString(36),ta=0;
function ua(a){return a.call.apply(a.bind,arguments)}function ya(a,b){var c=b||u;if(arguments.length>2){var d=Array.prototype.slice.call(arguments,2);return function(){var b=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(b,d);return a.apply(c,b)}}else return function(){return a.apply(c,arguments)}}function za(){za=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?ua:ya;return za.apply(i,arguments)}var Aa=Date.now||function(){return+new Date};
function w(a,b){var c=a.split("."),d=u;!(c[0]in d)&&d.execScript&&d.execScript("var "+c[0]);for(var e;c.length&&(e=c.shift());)!c.length&&v(b)?d[e]=b:d=d[e]?d[e]:d[e]={}}function Ba(a,b){function c(){}c.prototype=b.prototype;a.cg=b.prototype;a.prototype=new c;a.prototype.constructor=a};var y=0,z=1,Ca=2,Da=3,Ea=4,Fa=5,Ga=6,Ha=7,Ia=8,Ja=9,Ka=10,La=11,Ma=12,Na=13,Oa=14,Pa=15,Qa=16,Ra=17,Sa=18,Ta=19,Ua=20,Va=21,Wa=22,Xa=23,Ya=24,Za=65533,$a=65534,ab=25,bb=26,cb=65535;w("OG_OBJECT_CONTEXT",y);w("OG_OBJECT_SCENE",z);w("OG_OBJECT_WORLD",Ca);w("OG_OBJECT_IMAGELAYER",Da);w("OG_OBJECT_ELEVATIONLAYER",Ea);w("OG_OBJECT_WAYPOINTLAYER",Fa);w("OG_OBJECT_GEOMETRYLAYER",Ha);w("OG_OBJECT_POILAYER",Ga);w("OG_OBJECT_VOXELLAYER",Ia);w("OG_OBJECT_VECTORLAYER",Ja);w("OG_OBJECT_IMAGE",Ka);
w("OG_OBJECT_TEXTURE",La);w("OG_OBJECT_PIXELBUFFER",Ma);w("OG_OBJECT_GEOMETRY",Na);w("OG_OBJECT_MESH",Oa);w("OG_OBJECT_SURFACE",Pa);w("OG_OBJECT_VECTOR",Qa);w("OG_OBJECT_CAMERA",Ra);w("OG_OBJECT_TEXT",Sa);w("OG_OBJECT_BINARYDATA",Ta);w("OG_OBJECT_LIGHT",Ua);w("OG_OBJECT_NAVIGATIONCONTROLLER",Va);w("OG_OBJECT_POI",Wa);w("OG_OBJECT_BILLBOARD",Xa);w("OG_OBJECT_BILLBOARDLAYER",Ya);w("OG_OBJECT_AOEIMAGELAYER",Za);w("OG_OBJECT_AOEIMAGE",$a);w("OG_OBJECT_POINTSPRITE",ab);w("OG_OBJECT_EARTHPOLYLINE",bb);
w("OG_OBJECT_INVALID",cb);w("OG_RENDEREFFECT_RGB",0);w("OG_RENDEREFFECT_CHROMADEPTH",1);var db=1,eb=2,fb=3,gb=4;w("OG_SCENE_3D_ELLIPSOID_WGS84",db);w("OG_SCENE_3D_FLAT_CARTESIAN",eb);w("OG_SCENE_2D_SCREEN",fb);w("OG_SCENE_CUSTOM",gb);w("OG_NAVIGATIONMODE_GLOBE",0);w("OG_NAVIGATIONMODE_FLIGHT",1);w("OG_NAVIGATIONMODE_CONSTRAINED",2);w("OG_NAVIGATIONMODE_DYNAMIC",3);var hb=1,ib=2;w("OG_OBJECT_READY",hb);w("OG_OBJECT_BUSY",ib);w("OG_OBJECT_FAILED",3);var jb=[];function A(a){if(a==-1)return i;for(var b=0;b<jb.length;b++)if(jb[b].id==a)return jb[b];return i}function C(){this.parent=i;this.name="ogObject";this.type=cb;this.id=-1;this.status=hb;this.J=this.K=i}C.prototype.lb=m();function D(a){for(var a=a.id,b=0;b<jb.length;b++)if(jb[b].id==a){jb[b].lb();jb.splice(b,1);break}}C.prototype.Na=m();function kb(a,b){for(var c in a)b.call(h,a[c],c,a)}function lb(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}var mb=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"];function nb(a){for(var b,c,d=1;d<arguments.length;d++){c=arguments[d];for(b in c)a[b]=c[b];for(var e=0;e<mb.length;e++)b=mb[e],Object.prototype.hasOwnProperty.call(c,b)&&(a[b]=c[b])}};function ob(a){this.stack=Error().stack||"";if(a)this.message=String(a)}Ba(ob,Error);ob.prototype.name="CustomError";function pb(a){for(var b=1;b<arguments.length;b++)var c=String(arguments[b]).replace(/\$/g,"$$$$"),a=a.replace(/\%s/,c);return a}function qb(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function rb(a){if(!sb.test(a))return a;a.indexOf("&")!=-1&&(a=a.replace(tb,"&amp;"));a.indexOf("<")!=-1&&(a=a.replace(ub,"&lt;"));a.indexOf(">")!=-1&&(a=a.replace(vb,"&gt;"));a.indexOf('"')!=-1&&(a=a.replace(wb,"&quot;"));return a}var tb=/&/g,ub=/</g,vb=/>/g,wb=/\"/g,sb=/[&<>\"]/;
function xb(a){return qb(a.replace(/  /g," &#160;"),h)}
function yb(a,b){for(var c=0,d=String(a).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),e=String(b).replace(/^[\s\xa0]+|[\s\xa0]+$/g,"").split("."),f=Math.max(d.length,e.length),g=0;c==0&&g<f;g++){var j=d[g]||"",k=e[g]||"",l=RegExp("(\\d*)(\\D*)","g"),n=RegExp("(\\d*)(\\D*)","g");do{var q=l.exec(j)||["","",""],o=n.exec(k)||["","",""];if(q[0].length==0&&o[0].length==0)break;c=zb(q[1].length==0?0:parseInt(q[1],10),o[1].length==0?0:parseInt(o[1],10))||zb(q[2].length==0,o[2].length==0)||zb(q[2],o[2])}while(c==
0)}return c}function zb(a,b){if(a<b)return-1;else if(a>b)return 1;return 0};function Ab(a,b){b.unshift(a);ob.call(this,pb.apply(i,b));b.shift();this.uq=a}Ba(Ab,ob);Ab.prototype.name="AssertionError";function Bb(a){aa(new Ab("Failure"+(a?": "+a:""),Array.prototype.slice.call(arguments,1)))};var Cb=Array.prototype,Db=Cb.indexOf?function(a,b,c){return Cb.indexOf.call(a,b,c)}:function(a,b,c){c=c==i?0:c<0?Math.max(0,a.length+c):c;if(ma(a)){if(!ma(b)||b.length!=1)return-1;return a.indexOf(b,c)}for(;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},Eb=Cb.forEach?function(a,b,c){Cb.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ma(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};function Fb(){return Cb.concat.apply(Cb,arguments)}
function Gb(a){if(ka(a))return Fb(a);else{for(var b=[],c=0,d=a.length;c<d;c++)b[c]=a[c];return b}}function Hb(a,b,c){return arguments.length<=2?Cb.slice.call(a,b):Cb.slice.call(a,b,c)};var Ib="StopIteration"in u?u.StopIteration:Error("StopIteration");function Jb(){}Jb.prototype.next=function(){aa(Ib)};Jb.prototype.Zj=function(){return this};function Kb(a){if(a instanceof Jb)return a;if(typeof a.Zj=="function")return a.Zj(!1);if(la(a)){var b=0,c=new Jb;c.next=function(){for(;;)if(b>=a.length&&aa(Ib),b in a)return a[b++];else b++};return c}aa(Error("Not implemented"))}
function Lb(a,b){if(la(a))try{Eb(a,b,h)}catch(c){c!==Ib&&aa(c)}else{a=Kb(a);try{for(;;)b.call(h,a.next(),h,a)}catch(d){d!==Ib&&aa(d)}}};function Mb(a){this.Tc={};this.wb=[];var b=arguments.length;if(b>1){b%2&&aa(Error("Uneven number of arguments"));for(var c=0;c<b;c+=2)this.set(arguments[c],arguments[c+1])}else if(a){if(a instanceof Mb)b=a.Ti(),c=a.Mk();else{var b=lb(a),d=[],e=0;for(c in a)d[e++]=a[c];c=d}for(d=0;d<b.length;d++)this.set(b[d],c[d])}}r=Mb.prototype;r.Ra=0;r.xj=0;r.Kf=ca("Ra");r.Mk=function(){Nb(this);for(var a=[],b=0;b<this.wb.length;b++)a.push(this.Tc[this.wb[b]]);return a};r.Ti=function(){Nb(this);return this.wb.concat()};
r.i=function(a,b){if(this===a)return!0;if(this.Ra!=a.Kf())return!1;var c=b||Ob;Nb(this);for(var d,e=0;d=this.wb[e];e++)if(!c(this.get(d),a.get(d)))return!1;return!0};function Ob(a,b){return a===b}r.clear=function(){this.Tc={};this.xj=this.Ra=this.wb.length=0};
function Nb(a){if(a.Ra!=a.wb.length){for(var b=0,c=0;b<a.wb.length;){var d=a.wb[b];Object.prototype.hasOwnProperty.call(a.Tc,d)&&(a.wb[c++]=d);b++}a.wb.length=c}if(a.Ra!=a.wb.length){for(var e={},c=b=0;b<a.wb.length;)d=a.wb[b],Object.prototype.hasOwnProperty.call(e,d)||(a.wb[c++]=d,e[d]=1),b++;a.wb.length=c}}r.get=function(a,b){if(Object.prototype.hasOwnProperty.call(this.Tc,a))return this.Tc[a];return b};
r.set=function(a,b){Object.prototype.hasOwnProperty.call(this.Tc,a)||(this.Ra++,this.wb.push(a),this.xj++);this.Tc[a]=b};r.Zj=function(a){Nb(this);var b=0,c=this.wb,d=this.Tc,e=this.xj,f=this,g=new Jb;g.next=function(){for(;;){e!=f.xj&&aa(Error("The map has changed since the iterator was created"));b>=c.length&&aa(Ib);var g=c[b++];return a?g:d[g]}};return g};function Pb(a){return Qb(a||arguments.callee.caller,[])}
function Qb(a,b){var c=[];if(Db(b,a)>=0)c.push("[...circular reference...]");else if(a&&b.length<50){c.push(Rb(a)+"(");for(var d=a.arguments,e=0;e<d.length;e++){e>0&&c.push(", ");var f;f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Rb(f))?f:"[fn]";break;default:f=typeof f}f.length>40&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Qb(a.caller,b))}catch(g){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Rb(a){a=String(a);if(!Sb[a]){var b=/function ([^\(]+)/.exec(a);Sb[a]=b?b[1]:"[Anonymous]"}return Sb[a]}var Sb={};function Tb(a,b,c,d,e){this.reset(a,b,c,d,e)}Tb.prototype.Dp=0;Tb.prototype.Ak=i;Tb.prototype.zk=i;var Ub=0;Tb.prototype.reset=function(a,b,c,d,e){this.Dp=typeof e=="number"?e:Ub++;this.Nn=d||Aa();this.ue=a;this.$m=b;this.Tm=c;delete this.Ak;delete this.zk};Tb.prototype.ej=ba("ue");function Vb(a){this.np=a}Vb.prototype.bj=i;Vb.prototype.ue=i;Vb.prototype.uk=i;Vb.prototype.Ih=i;function Wb(a,b){this.name=a;this.value=b}Wb.prototype.toString=ca("name");var Xb=new Wb("SHOUT",1200),Yb=new Wb("SEVERE",1E3),Zb=new Wb("WARNING",900),$b=new Wb("INFO",800),ac=new Wb("CONFIG",700),bc=[new Wb("OFF",Infinity),Xb,Yb,Zb,$b,ac,new Wb("FINE",500),new Wb("FINER",400),new Wb("FINEST",300),new Wb("ALL",0)],cc=i;
function dc(a){if(!cc){cc={};for(var b=0,c;c=bc[b];b++)cc[c.value]=c,cc[c.name]=c}return cc[a]||i}r=Vb.prototype;r.getParent=ca("bj");r.ej=ba("ue");function ec(a){if(a.ue)return a.ue;if(a.bj)return ec(a.bj);Bb("Root logger has no level set.");return i}r.log=function(a,b,c){if(a.value>=ec(this).value){a=this.gp(a,b,c);this.Sm("log:"+a.$m);for(b=this;b;){var c=b,d=a;if(c.Ih)for(var e=0,f=h;f=c.Ih[e];e++)f(d);b=b.getParent()}}};
r.gp=function(a,b,c){var d=new Tb(a,String(b),this.np);if(c){d.Ak=c;var e;var f=arguments.callee.caller;try{var g;var j=da("window.location.href");if(ma(c))g={message:c,name:"Unknown error",lineNumber:"Not available",fileName:j,stack:"Not available"};else{var k,l,n=!1;try{k=c.lineNumber||c.rq||"Not available"}catch(q){k="Not available",n=!0}try{l=c.fileName||c.filename||c.sourceURL||j}catch(o){l="Not available",n=!0}g=n||!c.lineNumber||!c.fileName||!c.stack?{message:c.message,name:c.name,lineNumber:k,
fileName:l,stack:c.stack||"Not available"}:c}e="Message: "+rb(g.message)+'\nUrl: <a href="view-source:'+g.fileName+'" target="_new">'+g.fileName+"</a>\nLine: "+g.lineNumber+"\n\nBrowser stack:\n"+rb(g.stack+"-> ")+"[end]\n\nJS stack traversal:\n"+rb(Pb(f)+"-> ")}catch(s){e="Exception trying to expose exception! You win, we lose. "+s}d.zk=e}return d};function fc(a,b){a.log(Zb,b,h)}r.info=function(a,b){this.log($b,a,b)};r.Sm=function(a){u.console&&u.console.markTimeline&&u.console.markTimeline(a)};
var gc={},hc=i;function ic(){hc||(hc=new Vb(""),gc[""]=hc,hc.ej(ac))}function E(a){ic();var b;if(!(b=gc[a])){b=new Vb(a);var c=a.lastIndexOf("."),d=a.substr(c+1),c=E(a.substr(0,c));if(!c.uk)c.uk={};c.uk[d]=b;b.bj=c;gc[a]=b}return b};function jc(){this.name="ogTexture";this.type=La;this.l=i;this.Ln="";this.status=ib}jc.prototype=new C;
jc.prototype.Na=function(a){if(a==i)fc(E("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(this.parent==i)fc(E("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=z)fc(E("owg.ogTexture"),"** ERROR: parent is not scene!");else if(a.url){var b=this;this.l=this.parent.parent.c.rj.Ll(a.url,function(){b.status=hb;b.K&&b.K(b.id)},function(){b.status=3;b.J&&b.J(b.id)},!1);this.Ln=a.url}};
jc.prototype.lb=function(){if(this.l)this.parent.parent.c.rj.Nl(this.Ln),this.l=i,this.status=3};jc.prototype.T=function(a,b,c){this.status==hb&&this.l&&(c!=i?this.l.T(a,b,c.z,c.angle,c.scalex,c.scaley,c.blend,c.invtexcoord,c.alpha):this.l.T(a,b))};var kc=6378137,lc=0.006694379990197,mc=0.006739496742,G=1.1920930376163766E-7,nc=8388607;function H(a){return a*0.017453292519943295}function oc(a){return a*57.29577951308232}function pc(a){for(var b=1;a>b;)b*=2;return b};function qc(){this.name="ogCamera";this.type=Ra;this.fc=this.pitch=this.Va=this.$b=this.bc=this.cc=0}qc.prototype=new C;r=qc.prototype;r.lb=function(){this.fc=this.pitch=this.Va=this.$b=this.bc=this.cc=0};r.Ba=function(a,b,c){this.cc=a;this.bc=b;this.$b=c;this.parent.Bf==this&&rc(this).Ba(a,b,c)};r.lf=function(){var a={};a.longitude=this.cc;a.latitude=this.bc;a.elevation=this.$b;return a};r.Cb=function(a,b,c){this.Va=a;this.pitch=b;this.fc=c;this==this.parent.Bf&&rc(this).Cb(H(a),H(b),H(c))};
r.Rg=function(){var a={};a.yaw=this.Va;a.pitch=this.pitch;a.roll=this.fc;return a};r.dh=function(a,b,c,d){this==this.parent.Bf&&rc(this).dh(a,b,c,d)};function rc(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.P)b=a.e.P;return b}function sc(a){var b=rc(a),c=b.lf(),b=b.Rg();a.cc=c.longitude;a.bc=c.latitude;a.$b=c.elevation;a.Va=oc(b.Va);a.pitch=oc(b.pitch);a.fc=oc(b.fc)};function I(a,b,c){a=a||0;b=b||0;c=c||0;this.a=[a,b,c];this.rc=new Float32Array([a,b,c])}r=I.prototype;r.p=function(a,b,c){this.a[0]=a;this.a[1]=b;this.a[2]=c};r.za=function(){this.rc[0]=this.a[0];this.rc[1]=this.a[1];this.rc[2]=this.a[2];return this.rc};r.Pg=ca("a");r.jf=function(){var a=new I;a.p(this.a[0],this.a[1],this.a[2]);return a};r.fo=function(a){this.a[0]+=a.a[0];this.a[1]+=a.a[1];this.a[2]+=a.a[2];return this};r.Yj=function(a){this.a[0]-=a.a[0];this.a[1]-=a.a[1];this.a[2]-=a.a[2];return this};
r.zo=function(a,b){this.a[0]=a.a[0]-b.a[0];this.a[1]=a.a[1]-b.a[1];this.a[2]=a.a[2]-b.a[2]};r.ko=function(a){var b=this.a[0],c=this.a[1],d=this.a[2],e=a.a[0],f=a.a[1],a=a.a[2];this.a[0]=c*a-f*d;this.a[1]=d*e-a*b;this.a[2]=b*f-e*c;return this};function tc(a,b,c){var d=b.a[0],e=b.a[1],b=b.a[2],f=c.a[0],g=c.a[1],c=c.a[2];a.a[0]=e*c-g*b;a.a[1]=b*f-c*d;a.a[2]=d*g-f*e}r.lo=function(a){return this.a[0]*a.a[0]+this.a[1]*a.a[1]+this.a[2]*a.a[2]};
r.Mj=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return Math.sqrt(a+b+c)};r.yo=function(){var a=this.a[0];a*=a;var b=this.a[1];b*=b;var c=this.a[2];c*=c;return a+b+c};r.Kc=function(){var a=this.Mj();a!=0&&(this.a[0]/=a,this.a[1]/=a,this.a[2]/=a);return this};r.vo=function(){this.a[0]=-this.a[0];this.a[1]=-this.a[1];this.a[2]=-this.a[2];return this};r.mg=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+"]"};w("Cross",tc);w("vec3",I);I.prototype.Add=I.prototype.fo;
I.prototype.Cross=I.prototype.ko;I.prototype.Dot=I.prototype.lo;I.prototype.Get=I.prototype.Pg;I.prototype.Length=I.prototype.Mj;I.prototype.Neg=I.prototype.vo;I.prototype.Normalize=I.prototype.Kc;I.prototype.Set=I.prototype.p;I.prototype.SquaredLength=I.prototype.yo;I.prototype.Subtract=I.prototype.zo;I.prototype.Sub=I.prototype.Yj;I.prototype.ToString=I.prototype.mg;function J(){this.a=Array(16);this.mi();this.rc=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}r=J.prototype;r.Le=function(a){if(a.length==16)for(var b=0;b<16;b++)this.a[b]=a[b]};r.za=function(){for(var a=0;a<16;a++)this.rc[a]=this.a[a];return this.rc};r.Pg=ca("a");r.jf=function(){for(var a=new J,b=0;b<16;b++)a.a[b]=this.a[b];return a};r.ba=function(a){for(var b=0;b<16;b++)this.a[b]=a.a[b]};
r.mi=function(){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.Ao=function(){this.a[0]=0;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.gd=function(a,b,c){this.a[0]=1;this.a[4]=0;this.a[8]=0;this.a[12]=a;this.a[1]=0;this.a[5]=1;this.a[9]=0;this.a[13]=b;this.a[2]=0;this.a[6]=0;this.a[10]=1;this.a[14]=c;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.Yl=function(a,b,c,d){a.a[12]=b;a.a[13]=c;a.a[14]=d};r.Yd=function(a,b,c){this.a[0]=a;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=b;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=c;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1;return!0};
r.Vj=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=1;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=a;this.a[6]=b;this.a[7]=0;this.a[8]=0;this.a[9]=-b;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};r.bm=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=0;this.a[2]=-b;this.a[3]=0;this.a[4]=0;this.a[5]=1;this.a[6]=0;this.a[7]=0;this.a[8]=b;this.a[9]=0;this.a[10]=a;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
r.cm=function(a){var b=Math.sin(a),a=Math.cos(a);this.a[0]=a;this.a[1]=b;this.a[2]=0;this.a[3]=0;this.a[4]=-b;this.a[5]=a;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=1;this.a[11]=0;this.a[12]=0;this.a[13]=0;this.a[14]=0;this.a[15]=1};
r.uo=function(a,b,c,d,e,f,g,j,k){var l,n,q,o,d=a-d,e=b-e,f=c-f;o=1/Math.sqrt(d*d+e*e+f*f);d*=o;e*=o;f*=o;l=j*f-k*e;k=k*d-g*f;g=g*e-j*d;(o=Math.sqrt(l*l+k*k+g*g))?(o=1/o,l*=o,k*=o,g*=o):g=k=l=0;j=e*g-f*k;n=f*l-d*g;q=d*k-e*l;(o=Math.sqrt(j*j+n*n+q*q))?(o=1/o,j*=o,n*=o,q*=o):q=n=j=0;this.a[0]=l;this.a[4]=k;this.a[8]=g;this.a[12]=-(l*a+k*b+g*c);this.a[1]=j;this.a[5]=n;this.a[9]=q;this.a[13]=-(j*a+n*b+q*c);this.a[2]=d;this.a[6]=e;this.a[10]=f;this.a[14]=-(d*a+e*b+f*c);this.a[3]=0;this.a[7]=0;this.a[11]=
0;this.a[15]=1};
r.U=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=a.a[3],g=a.a[4],j=a.a[5],k=a.a[6],l=a.a[7],n=a.a[8],q=a.a[9],o=a.a[10],s=a.a[11],t=a.a[12],x=a.a[13],B=a.a[14],S=a.a[15],X=b.a[0],Q=b.a[1],ja=b.a[2],T=b.a[3],U=b.a[4],L=b.a[5],Y=b.a[6],Z=b.a[7],$=b.a[8],va=b.a[9],wa=b.a[10],xa=b.a[11],F=b.a[12],ea=b.a[13],qa=b.a[14],fa=b.a[15];this.a[0]=X*c+Q*g+ja*n+T*t;this.a[1]=X*d+Q*j+ja*q+T*x;this.a[2]=X*e+Q*k+ja*o+T*B;this.a[3]=X*f+Q*l+ja*s+T*S;this.a[4]=U*c+L*g+Y*n+Z*t;this.a[5]=U*d+L*j+Y*q+Z*x;this.a[6]=U*
e+L*k+Y*o+Z*B;this.a[7]=U*f+L*l+Y*s+Z*S;this.a[8]=$*c+va*g+wa*n+xa*t;this.a[9]=$*d+va*j+wa*q+xa*x;this.a[10]=$*e+va*k+wa*o+xa*B;this.a[11]=$*f+va*l+wa*s+xa*S;this.a[12]=F*c+ea*g+qa*n+fa*t;this.a[13]=F*d+ea*j+qa*q+fa*x;this.a[14]=F*e+ea*k+qa*o+fa*B;this.a[15]=F*f+ea*l+qa*s+fa*S};r.Oe=function(){for(var a=this.jf(),b=0;b<4;b++)for(var c=0;c<4;c++)this.a[4*b+c]=a.a[4*c+b]};
r.Ma=function(a){var b=new I;b.a[0]=this.a[0]*a.a[0]+this.a[4]*a.a[1]+this.a[8]*a.a[2]+this.a[12];b.a[1]=this.a[1]*a.a[0]+this.a[5]*a.a[1]+this.a[9]*a.a[2]+this.a[13];b.a[2]=this.a[2]*a.a[0]+this.a[6]*a.a[1]+this.a[10]*a.a[2]+this.a[14];a=this.a[3]*a.a[0]+this.a[7]*a.a[1]+this.a[11]*a.a[2]+this.a[15];b.a[0]/=a;b.a[1]/=a;b.a[2]/=a;return b};
r.oo=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=e*2/g;this.a[4]=0;this.a[8]=(b+a)/g;this.a[12]=0;this.a[1]=0;this.a[5]=e*2/j;this.a[9]=(d+c)/j;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-(f+e)/k;this.a[14]=-(f*e*2)/k;this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
r.Zl=function(a,b,c,d){a=1/Math.tan(a*Math.PI/360);this.a[0]=a/b;this.a[4]=0;this.a[8]=0;this.a[12]=0;this.a[1]=0;this.a[5]=a;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=(d+c)/(c-d);this.a[14]=2*d*c/(c-d);this.a[3]=0;this.a[7]=0;this.a[11]=-1;this.a[15]=0};
r.Wl=function(a,b,c,d,e,f){var g=b-a,j=d-c,k=f-e;this.a[0]=2/g;this.a[1]=0;this.a[2]=0;this.a[3]=0;this.a[4]=0;this.a[5]=2/j;this.a[6]=0;this.a[7]=0;this.a[8]=0;this.a[9]=0;this.a[10]=-2/k;this.a[11]=0;this.a[12]=-(a+b)/g;this.a[13]=-(d+c)/j;this.a[14]=-(f+e)/k;this.a[15]=1};r.Xl=function(a,b,c,d){this.Wl(a,b,c,d,-1,1)};
r.Sd=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-e*c;this.a[4]=-f;this.a[8]=-d*c;this.a[12]=0;this.a[1]=-e*f;this.a[5]=c;this.a[9]=-d*f;this.a[13]=0;this.a[2]=d;this.a[6]=0;this.a[10]=-e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.jo=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=c;this.a[8]=0;this.a[12]=0;this.a[1]=-e*c;this.a[5]=-e*f;this.a[9]=-d;this.a[13]=0;this.a[2]=d*c;this.a[6]=d*f;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Hl=function(a,b){var c=a*0.017453292519943295,d=b*0.017453292519943295,e=Math.sin(d),f=Math.sin(c),d=Math.cos(d),c=Math.cos(c);this.a[0]=-f;this.a[4]=-e*c;this.a[8]=d*c;this.a[12]=0;this.a[1]=c;this.a[5]=-e*f;this.a[9]=d*f;this.a[13]=0;this.a[2]=0;this.a[6]=d;this.a[10]=e;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.Kg=function(a,b,c){var d=Math.cos(b),e=Math.cos(c),f=Math.cos(a),b=Math.sin(b),c=Math.sin(c),a=Math.sin(a);this.a[0]=d*f;this.a[4]=-e*a+c*b*f;this.a[8]=c*a+e*b*f;this.a[12]=0;this.a[1]=d*a;this.a[5]=e*f+c*b*a;this.a[9]=-c*f+e*b*a;this.a[13]=0;this.a[2]=-b;this.a[6]=c*d;this.a[10]=e*d;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.mo=function(a){var b=this.a[0],c=this.a[4],d=this.a[1],e=this.a[5],f=this.a[2],g=this.a[6],j=this.a[10];Math.abs(b)<1.0E-6&&Math.abs(d)<1.0E-6?(a.pitch=-Math.PI/2,a.roll=0,a.yaw=Math.atan2(c,e)):(a.pitch=Math.atan2(-f,Math.sqrt(b*b+d*d)),a.roll=Math.atan2(d,b),a.yaw=Math.atan2(g,j))};
r.hf=function(){this.a[0]=0;this.a[4]=0;this.a[8]=-1;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=-1;this.a[10]=0;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};r.Dj=function(){this.a[0]=0;this.a[4]=1;this.a[8]=0;this.a[12]=0;this.a[1]=1;this.a[5]=0;this.a[9]=0;this.a[13]=0;this.a[2]=0;this.a[6]=0;this.a[10]=-1;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.no=function(a){var b=a[0],c=a[1],d=a[2],a=a[3],e=a*a,f=b*b,g=c*c,j=d*d;this.a[0]=e+f-g-j;this.a[4]=2*(b*c-a*d);this.a[8]=2*(b*d+a*c);this.a[12]=0;this.a[1]=2*(b*c+a*d);this.a[5]=e-f+g-j;this.a[9]=2*(c*d-a*b);this.a[13]=0;this.a[2]=2*(b*d-a*c);this.a[6]=2*(c*d+a*b);this.a[10]=e-f-g+j;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.gg=function(a,b,c,d){var e=a*a,f=b*b,g=c*c,j=a*b,k=a*c,l=b*c;a*=d;b*=d;c*=d;this.a[0]=1-2*f-2*g;this.a[4]=2*j+2*c;this.a[8]=2*k-2*b;this.a[12]=0;this.a[1]=2*j-2*c;this.a[5]=1-2*e-2*g;this.a[9]=2*l+2*a;this.a[13]=0;this.a[2]=2*k+2*b;this.a[6]=2*l-2*a;this.a[10]=1-2*e-2*f;this.a[14]=0;this.a[3]=0;this.a[7]=0;this.a[11]=0;this.a[15]=1};
r.wo=function(){var a=this.a[0],b=this.a[4],c=this.a[8],d=this.a[1],e=this.a[5],f=this.a[9],g=this.a[2],j=this.a[6],k=this.a[10],l=a+e+k;l>0?(l=Math.sqrt(l+1)*2,a=0.25*l,e=(j-f)/l,k=(c-g)/l,b=(d-b)/l):a>e&a>k?(l=Math.sqrt(1+a-e-k)*2,a=(j-f)/l,e=0.25*l,k=(b+d)/l,b=(c+g)/l):e>k?(l=Math.sqrt(1+e-a-k)*2,a=(c-g)/l,e=(b+d)/l,k=0.25*l,b=(f+j)/l):(l=Math.sqrt(1+k-a-e)*2,a=(d-b)/l,e=(c+g)/l,k=(f+j)/l,b=0.25*l);return[e,k,b,a]};
r.ig=function(a){var b=a.a[0],c=a.a[1],d=a.a[2],e=a.a[3],f=a.a[4],g=a.a[5],j=a.a[6],k=a.a[7],l=a.a[8],n=a.a[9],q=a.a[10],o=a.a[11],s=a.a[12],t=a.a[13],x=a.a[14],a=a.a[15],B=1/(b*g*q*a+b*j*o*t+b*k*n*x+c*f*o*x+c*j*l*a+c*k*q*s+d*f*n*a+d*g*o*s+d*k*l*t+e*f*q*t+e*g*l*x+e*j*n*s-b*g*o*x-b*j*n*a-b*k*q*t-c*f*q*a-c*j*o*s-c*k*l*x-d*f*o*t-d*g*l*a-d*k*n*s-e*f*n*x-e*g*q*s-e*j*l*t);this.a[0]=(g*q*a+j*o*t+k*n*x-g*o*x-j*n*a-k*q*t)*B;this.a[4]=(f*o*x+j*l*a+k*q*s-f*q*a-j*o*s-k*l*x)*B;this.a[8]=(f*n*a+g*o*s+k*l*t-f*o*
t-g*l*a-k*n*s)*B;this.a[12]=(f*q*t+g*l*x+j*n*s-f*n*x-g*q*s-j*l*t)*B;this.a[1]=(c*o*x+d*n*a+e*q*t-c*q*a-d*o*t-e*n*x)*B;this.a[5]=(b*q*a+d*o*s+e*l*x-b*o*x-d*l*a-e*q*s)*B;this.a[9]=(b*o*t+c*l*a+e*n*s-b*n*a-c*o*s-e*l*t)*B;this.a[13]=(b*n*x+c*q*s+d*l*t-b*q*t-c*l*x-d*n*s)*B;this.a[2]=(c*j*a+d*k*t+e*g*x-c*k*x-d*g*a-e*j*t)*B;this.a[6]=(b*k*x+d*f*a+e*j*s-b*j*a-d*k*s-e*f*x)*B;this.a[10]=(b*g*a+c*k*s+e*f*t-b*k*t-c*f*a-e*g*s)*B;this.a[14]=(b*j*t+c*f*x+d*g*s-b*g*x-c*j*s-d*f*t)*B;this.a[3]=(c*k*q+d*g*o+e*j*n-c*
j*o-d*k*n-e*g*q)*B;this.a[7]=(b*j*o+d*k*l+e*f*q-b*k*q-d*f*o-e*j*l)*B;this.a[11]=(b*k*n+c*f*o+e*g*l-b*g*o-c*k*l-e*f*n)*B;this.a[15]=(b*g*q+c*j*l+d*f*n-b*j*n-c*f*q-d*g*l)*B};r.mg=function(){return"[ "+this.a[0]+" "+this.a[4]+" "+this.a[8]+" "+this.a[12]+"\n  "+this.a[1]+" "+this.a[5]+" "+this.a[9]+" "+this.a[13]+"\n  "+this.a[2]+" "+this.a[6]+" "+this.a[10]+" "+this.a[14]+"\n  "+this.a[3]+" "+this.a[7]+" "+this.a[11]+" "+this.a[15]+" ]"};w("mat4",J);J.prototype.CalcBodyFrame=J.prototype.Kg;
J.prototype.CalcNavigationFrame=J.prototype.Sd;J.prototype.Cami3d=J.prototype.hf;J.prototype.CopyFrom=J.prototype.ba;J.prototype.Copy=J.prototype.jf;J.prototype.Frustum=J.prototype.oo;J.prototype.Get=J.prototype.Pg;J.prototype.Identity=J.prototype.mi;J.prototype.Inverse=J.prototype.ig;J.prototype.LookAt=J.prototype.uo;J.prototype.Multiply=J.prototype.U;J.prototype.MultiplyVec3=J.prototype.Ma;J.prototype.Ortho2D=J.prototype.Xl;J.prototype.Ortho=J.prototype.Wl;J.prototype.OverwriteTranslation=J.prototype.Yl;
J.prototype.Perspective=J.prototype.Zl;J.prototype.RotationX=J.prototype.Vj;J.prototype.RotationY=J.prototype.bm;J.prototype.RotationZ=J.prototype.cm;J.prototype.Scale=J.prototype.Yd;J.prototype.SetFromArray=J.prototype.Le;J.prototype.ToString=J.prototype.mg;J.prototype.Translation=J.prototype.gd;J.prototype.Transpose=J.prototype.Oe;J.prototype.Zero=J.prototype.Ao;J.prototype.CalcNavigationFrame2=J.prototype.jo;J.prototype.CalcNavigationFrameZUp=J.prototype.Hl;J.prototype.ExtractEulerAngles=J.prototype.mo;
J.prototype.CamViewFrustum=J.prototype.Dj;J.prototype.FromQuaternion=J.prototype.no;J.prototype.FromQuaternionComponents=J.prototype.gg;J.prototype.Rot2Quat=J.prototype.wo;function uc(){this.oi=[];this.ni=[];this.jg=[];this.Kb={};this.Kb.x=0;this.Kb.y=0;this.Kb.h=0;this.Id={};this.Id.longitude=0;this.Id.latitude=0;this.Id.elevation=0;this.od=!1;this.Za=[0,0];this.Uc=-1;this.Wk=0;this.Aa=vc;this.va=0}var vc=0,wc=1,xc=2,yc=3,zc=4,Ac=5;uc.prototype.Ba=function(a,b,c){this.Kb.x=a;this.Kb.y=b;this.Kb.h=c};uc.prototype.lf=ca("Kb");function Bc(a,b,c,d){a.Id.longitude=b;a.Id.latitude=c;a.Id.elevation=d};function Cc(){this.result={};this.result.L=0;this.result.bd=0;this.result.Rd=0;this.Lb={};this.Lb.x=0;this.Lb.y=0;this.Lb.h=0;this.Mb={};this.Mb.x=0;this.Mb.y=0;this.Mb.h=0;this.ob={};this.ob.x=0;this.ob.y=0;this.ob.h=0;this.Ub={};this.Ub.x=0;this.Ub.y=0;this.Ub.h=0;this.Vb={};this.Vb.x=0;this.Vb.y=0;this.Wi=this.Re=this.Vb.h=0;this.Ol=2.220446049250313E-16}
Cc.prototype.Kj=function(a,b,c,d,e,f,g,j,k,l,n,q,o,s,t){this.Lb.x=l-g;this.Lb.y=n-j;this.Lb.h=q-k;this.Mb.x=o-g;this.Mb.y=s-j;this.Mb.h=t-k;this.Ub.x=e*this.Mb.h-f*this.Mb.y;this.Ub.y=f*this.Mb.x-d*this.Mb.h;this.Ub.h=d*this.Mb.y-e*this.Mb.x;this.Re=this.Lb.x*this.Ub.x+this.Lb.y*this.Ub.y+this.Lb.h*this.Ub.h;this.ob.x=a-g;this.ob.y=b-j;this.ob.h=c-k;this.Wi=1/this.Re;this.Vb.x=this.ob.y*this.Lb.h-this.ob.h*this.Lb.y;this.Vb.y=this.ob.h*this.Lb.x-this.ob.x*this.Lb.h;this.Vb.h=this.ob.x*this.Lb.y-this.ob.y*
this.Lb.x;if(this.Re>this.Ol){this.result.bd=this.ob.x*this.Ub.x+this.ob.y*this.Ub.y+this.ob.h*this.Ub.h;if(this.result.bd<0||this.result.bd>this.Re)return i;this.result.Rd=d*this.Vb.x+e*this.Vb.y+f*this.Vb.h;if(this.result.Rd<0||this.result.bd+this.result.Rd>this.Re)return i}else if(this.Re<-this.Ol){this.result.bd=this.ob.x*this.Ub.x+this.ob.y*this.Ub.y+this.ob.h*this.Ub.h;if(this.result.bd>0||this.result.bd<this.Re)return i;this.result.Rd=d*this.Vb.x+e*this.Vb.y+f*this.Vb.h;if(this.result.Rd>0||
this.result.bd+this.result.Rd<this.Re)return i}else return i;this.result.L=this.Mb.x*this.Vb.x+this.Mb.y*this.Vb.y+this.Mb.h*this.Vb.h;this.result.bd*=this.Wi;this.result.Rd*=this.Wi;this.result.L*=this.Wi;return this.result};w("TriangleIntersector",Cc);Cc.prototype.IntersectTriangle=Cc.prototype.Kj;function Dc(){this.ci=this.di=this.ai=this.bi=0;this.Ri=1;this.result={cf:0,bf:0}}
Dc.prototype.Sg=function(a,b,c,d,e,f,g,j,k,l,n,q){this.Ri=1;d>=0?(this.result.cf=(g-a)/d,this.result.bf=(l-a)/d):(this.result.cf=(l-a)/d,this.result.bf=(g-a)/d);e>=0?(this.bi=(j-b)/e,this.ai=(n-b)/e):(this.bi=(n-b)/e,this.ai=(j-b)/e);if(this.result.cf>this.ai||this.bi>this.result.bf)this.Ri=-1;if(this.bi>this.result.cf)this.result.cf=this.bi;if(this.ai<this.result.bf)this.result.bf=this.ai;f>=0?(this.di=(k-c)/f,this.ci=(q-c)/f):(this.di=(q-c)/f,this.ci=(k-c)/f);if(this.result.cf>this.ci||this.di>
this.result.bf)this.Ri=-1;if(this.di>this.result.cf)this.result.cf=this.di;if(this.ci<this.result.bf)this.result.bf=this.ci;return this.Ri>0?this.result:i};w("AABB",Dc);Dc.prototype.HitBox=Dc.prototype.Sg;function Ec(a,b,c,d){a=a||0;b=b||0;c=c||0;d=d||0;this.a=[a,b,c,d];this.rc=new Float32Array([a,b,c,d])}Ec.prototype.p=function(a,b,c,d){this.a[0]=a;this.a[1]=b;this.a[2]=c;this.a[3]=d};Ec.prototype.za=function(){this.rc[0]=this.a[0];this.rc[1]=this.a[1];this.rc[2]=this.a[2];this.rc[3]=this.a[3];return this.rc};Ec.prototype.Pg=ca("a");Ec.prototype.mg=function(){return"["+this.a[0]+","+this.a[1]+","+this.a[2]+","+this.a[3]+"]"};w("vec4",Ec);Ec.prototype.Get=Ec.prototype.Pg;Ec.prototype.Set=Ec.prototype.p;function Fc(a){var a=String(a),b;b=/^\s*$/.test(a)?!1:/^[\],:{}\s\u2028\u2029]*$/.test(a.replace(/\\["\\\/bfnrtu]/g,"@").replace(/"[^"\\\n\r\u2028\u2029\x00-\x08\x10-\x1f\x80-\x9f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,""));if(b)try{return eval("("+a+")")}catch(c){}aa(Error("Invalid JSON string: "+a))};function K(a){this.c=a;this.b=a.b;this.A=this.l=this.Nb=this.fa=i;this.mode="";this.ib=this.Xf=0;this.qe=this.R=i;this.Ea=!1;this.wm=this.re=this.V=i;this.Cm=new Ec;this.Cm.p(1,1,1,1);this.Dm=new Ec;this.Dm.p(1,1,1,1);this.xc=new Ec;this.xc.p(1,1,1,1);this.hc=new Ec;this.hc.p(1,0,0,1);this.Lm=new Cc;this.Ia=this.xa=this.Z=i;this.Wo=0;this.Bi=new Dc;this.ka=i;this.Oh=this.S=0;this.C={};this.ge=Array(3);this.fe=Array(3);this.ye=new J;this.Zi=!1;this.xb=-1}r=K.prototype;
r.pf=function(a,b,c,d){this.xc.p(a,b,c,d)};function Gc(a,b){if(b.length%3==0)a.A=new Float32Array(b),a.mode="p",a.S=3}function Hc(a,b){if(b.length%8==0)a.A=new Float32Array(b),a.mode="pnt",a.S=8}function Ic(a,b){if(b.length%7==0)a.A=new Float32Array(b),a.mode="pc",a.S=7}function Jc(a,b){if(b.length%10==0)a.A=new Float32Array(b),a.mode="pnc",a.S=10}function Kc(a,b){if(b.length%5==0)a.A=new Float32Array(b),a.mode="pt",a.S=5}
function Lc(a,b){if(b.length%12==0)a.A=new Float32Array(b),a.mode="pnct",a.S=12}function Mc(a,b){if(b.length%5==0)a.A=new Float32Array(b),a.mode="poi",a.S=5}function Nc(a,b,c){a.R=new Uint16Array(b);a.qe=c;a.ib=b.length;a.Ea=!0;switch(c){case "TRIANGLES":a.Oh=b.length/3;break;case "TRIANGLESTRIP":a.Oh=b.length-2}}r.Oc=ba("l");
r.Pe=function(){this.fa=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa);this.b.bufferData(this.b.ARRAY_BUFFER,this.A,this.b.STATIC_DRAW);this.Nb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Nb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.R,this.b.STATIC_DRAW)};
r.o=function(){if(this.fa)this.b.deleteBuffer(this.fa),this.fa=i;if(this.Nb)this.b.deleteBuffer(this.Nb),this.Nb=i;this.Zi?this.l.o():this.l=i;this.A=i;this.mode="";this.ib=this.Xf=0;this.qe=this.R=i};
r.ra=function(a,b,c,d,e){if(this.Ea){b=b||0;c=c||0;this.fa==i&&this.Pe();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa);this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Nb);this.ka&&(this.c.Mc(),this.ye.U(this.ka,this.c.Qb),this.c.Nc(this.ye));switch(this.mode){case "p":this.b.enableVertexAttribArray(0);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,12,0);Oc(this.c.Ua,this.c.qa,this.hc);break;case "pnt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,32,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,32,12);this.b.vertexAttribPointer(2,2,this.b.FLOAT,!1,32,24);var d=this.c.Ua,e=this.c.Mh,f=this.c.Sf,g=this.c.vd;d.Tb&&(d.b.useProgram(d.Tb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Tb,"matModelView"),!1,f.za()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Tb,"matProjection"),!1,g.za()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Tb,"matNormal"),!1,e.za()),d.b.uniform1i(d.b.getUniformLocation(d.Tb,
"uTexture"),0));break;case "pc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);Pc(this.c.Ua,this.c.qa,this.xc);break;case "pnc":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,40,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,40,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,
!1,40,24);Qc(this.c.Ua,this.c.Mh,this.c.Sf,this.c.qa,this.xc);break;case "pt":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.Ua;e=this.c.qa;f=this.xc;d.Ec&&(d.b.useProgram(d.Ec),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Ec,"matMVP"),!1,e.za()),d.b.uniform1i(d.b.getUniformLocation(d.Ec,"uTexture"),0),d.b.uniform4fv(d.b.getUniformLocation(d.Ec,"uColor"),f.za()));
break;case "pnct":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.enableVertexAttribArray(2);this.b.enableVertexAttribArray(3);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,48,0);this.b.vertexAttribPointer(1,3,this.b.FLOAT,!1,48,12);this.b.vertexAttribPointer(2,4,this.b.FLOAT,!1,48,24);this.b.vertexAttribPointer(3,2,this.b.FLOAT,!1,48,40);d=this.c.Ua;e=this.c.qa;d.Dc&&(d.b.useProgram(d.Dc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Dc,"matMVP"),!1,e.za()));break;case "font":this.b.enableVertexAttribArray(0);
this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);if(d==i)d=this.Cm;e=this.c.Ua;f=this.c.qa;e.Vc&&(e.b.useProgram(e.Vc),e.b.uniformMatrix4fv(e.b.getUniformLocation(e.Vc,"matMVP"),!1,f.za()),e.b.uniform4fv(e.b.getUniformLocation(e.Vc,"uColor"),d.za()));break;case "poi":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,
2,this.b.FLOAT,!1,20,12);if(e==i)e=this.Dm;d=this.c.Ua;f=this.c.qa;d.Xc&&(d.b.useProgram(d.Xc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Xc,"matMVP"),!1,f.za()),d.b.uniform4fv(d.b.getUniformLocation(d.Xc,"uColor"),e.za()));break;case "blur":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);var d=this.c.Ua,e=this.c.qa,g=this.l.width,j=this.l.height;d.Sb&&(f=new Float32Array([-1,
-1,0,-1,1,-1,-1,0,0,0,1,0,-1,1,0,1,1,1]),g=new Float32Array([1/g,1/j]),j=new Float32Array([1,2,1,2,4,2,1,2,1]),d.b.useProgram(d.Sb),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Sb,"matMVP"),!1,e.za()),d.b.uniform2fv(d.b.getUniformLocation(d.Sb,"uInvTexSize"),g),d.b.uniform1fv(d.b.getUniformLocation(d.Sb,"uKernel"),j),d.b.uniform1i(d.b.getUniformLocation(d.Sb,"uTexture"),0),d.b.uniform2fv(d.b.getUniformLocation(d.Sb,"uOffset"),f));break;case "pt_chroma":this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);
this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,20,0);this.b.vertexAttribPointer(1,2,this.b.FLOAT,!1,20,12);d=this.c.Ua;e=this.c.qa;f=this.c.Qb;d.Fc&&(d.b.useProgram(d.Fc),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Fc,"matM"),!1,f.za()),d.b.uniformMatrix4fv(d.b.getUniformLocation(d.Fc,"matMVP"),!1,e.za()),d.b.uniform1i(d.b.getUniformLocation(d.Fc,"uTexture"),0));break;default:alert("Draw: unknown surface mode!!")}if(this.l)d=this.l,d.Wb&&(d.b.activeTexture(d.b.TEXTURE0),d.b.bindTexture(d.b.TEXTURE_2D,
d.l));switch(this.qe){case "TRIANGLES":a?this.b.drawElements(this.b.TRIANGLES,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLES,this.ib,this.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a?this.b.drawElements(this.b.TRIANGLE_STRIP,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_STRIP,this.ib,this.b.UNSIGNED_SHORT,0);break;case "LINES":this.b.drawElements(this.b.LINES,this.ib,this.b.UNSIGNED_SHORT,0);break;case "POINTS":this.b.drawElements(this.b.POINTS,this.ib,this.b.UNSIGNED_SHORT,
0);break;case "TRIANGLEFAN":a?this.b.drawElements(this.b.TRIANGLE_FAN,b,this.b.UNSIGNED_SHORT,c):this.b.drawElements(this.b.TRIANGLE_FAN,this.ib,this.b.UNSIGNED_SHORT,0);break;default:alert("unknown indexsemantic")}this.ka&&this.c.Ed();if(this.l)a=this.l,a.Wb&&a.b.bindTexture(a.b.TEXTURE_2D,i);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.b.disableVertexAttribArray(2);this.b.disableVertexAttribArray(3)}};
r.kc=function(a,b,c,d){d||(d=this);if(c)this.md=c;if(b)this.ke=b;if(a.BoundingBox)d.Z=a.BoundingBox[0],d.xa=a.BoundingBox[1];if(a.Offset)d.Ia=a.Offset;if(a.CurtainIndex)d.Wo=a.CurtainIndex;switch(a.VertexSemantic){case "p":d.Xf=a.Vertices.length/3;Gc(d,a.Vertices);d.mode="p";Nc(d,a.Indices,a.IndexSemantic);d.ib=a.Indices.length;break;case "pnt":d.Xf=a.Vertices.length/8;Hc(d,a.Vertices);d.mode="pnt";Nc(d,a.Indices,a.IndexSemantic);d.ib=a.Indices.length;break;case "pc":d.Xf=a.Vertices.length/7;d.mode=
"pc";Ic(d,a.Vertices);Nc(d,a.Indices,a.IndexSemantic);d.ib=a.Indices.length;break;case "pnc":d.Xf=a.Vertices.length/10;d.mode="pnc";Jc(d,a.Vertices);Nc(d,a.Indices,a.IndexSemantic);d.ib=a.Indices.length;break;case "pt":d.Xf=a.Vertices.length/5;d.mode="pt";Kc(d,a.Vertices);Nc(d,a.Indices,a.IndexSemantic);d.ib=a.Indices.length;break;case "pnct":d.Xf=a.Vertices.length/12;d.mode="p";Lc(d,a.Vertices);Nc(d,a.Indices,a.IndexSemantic);d.ib=a.Indices.length;break;default:alert("CreateFromJSONObject: unknown surface mode!!")}if(a.DiffuseMap)d.l=
new M(d.c),d.l.repeat=!0,N(d.l,a.DiffuseMap,function(){var a=d;a.Wb=!0;a.ke&&a.ke(a)},function(){var a=d;fc(E("owg.Mesh"),"Downloading Error: Texture not found...");a.md&&a.md(a)},!0),d.Zi=!0;a.Center&&d.ah(a.Center[0],a.Center[1],a.Center[2]);if(!d.Zi)d.Wb=!0;d.wm&&d.wm();d.ke&&!d.Zi&&d.ke(d)};
function Rc(a,b,c,d){b==i?alert("invalid json-url"):(a.re=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.re,!0),a.ke=c,a.md=d,a.V.onreadystatechange=function(){if(a.V.readyState==4)if(a.V.status==404)a.md&&a.md(a);else{var b=Fc(a.V.responseText);a.kc(b,i,i,a)}},a.V.send())}
r.Ne=function(a,b,c,d,e,f){var g=!1,j,k,l,n;k=j=0;l=1.0E20;for(var q=0;q<this.Oh;q++){var o;o=q;switch(this.qe){case "TRIANGLES":this.C.ei=this.A[this.R[o*3]*this.S];this.C.fi=this.A[this.R[o*3]*this.S+1];this.C.gi=this.A[this.R[o*3]*this.S+2];this.C.hi=this.A[this.R[o*3+1]*this.S];this.C.ii=this.A[this.R[o*3+1]*this.S+1];this.C.ji=this.A[this.R[o*3+1]*this.S+2];this.C.uj=this.A[this.R[o*3+2]*this.S];this.C.vj=this.A[this.R[o*3+2]*this.S+1];this.C.wj=this.A[this.R[o*3+2]*this.S+2];break;case "TRIANGLESTRIP":o%
2==0?(this.C.ei=this.A[this.R[o]*this.S],this.C.fi=this.A[this.R[o]*this.S+1],this.C.gi=this.A[this.R[o]*this.S+2],this.C.hi=this.A[this.R[o+1]*this.S],this.C.ii=this.A[this.R[o+1]*this.S+1],this.C.ji=this.A[this.R[o+1]*this.S+2]):(this.C.ei=this.A[this.R[o+1]*this.S],this.C.fi=this.A[this.R[o+1]*this.S+1],this.C.gi=this.A[this.R[o+1]*this.S+2],this.C.hi=this.A[this.R[o]*this.S],this.C.ii=this.A[this.R[o]*this.S+1],this.C.ji=this.A[this.R[o]*this.S+2]);this.C.uj=this.A[this.R[o+2]*this.S];this.C.vj=
this.A[this.R[o+2]*this.S+1];this.C.wj=this.A[this.R[o+2]*this.S+2];break;default:fc(E("owg.Surface"),"This indexsemantic is not supported for function: Surface.ReadTriangleFromBuffer() ")}this.Ia&&(this.C.ei+=this.Ia[0],this.C.fi+=this.Ia[1],this.C.gi+=this.Ia[2],this.C.hi+=this.Ia[0],this.C.ii+=this.Ia[1],this.C.ji+=this.Ia[2],this.C.uj+=this.Ia[0],this.C.vj+=this.Ia[1],this.C.wj+=this.Ia[2]);o=this.R[o]==this.R[o+1]||this.R[o]==this.R[o+2]||this.R[o+1]==this.R[o+2]?!1:!0;if(o){if(this.ka){o=new J;
o.ba(this.ye);var s=new I;s.p(this.C.ei,this.C.fi,this.C.gi);var t=new I;t.p(this.C.hi,this.C.ii,this.C.ji);var x=new I;x.p(this.C.uj,this.C.vj,this.C.wj);s=o.Ma(s);t=o.Ma(t);o=o.Ma(x);o=this.Lm.Kj(a,b,c,d,e,f,s.a[0],s.a[1],s.a[2],t.a[0],t.a[1],t.a[2],o.a[0],o.a[1],o.a[2])}else o=this.Lm.Kj(a,b,c,d,e,f,this.C.ei,this.C.fi,this.C.gi,this.C.hi,this.C.ii,this.C.ji,this.C.uj,this.C.vj,this.C.wj);if(o&&(g=!0,o.L<l&&o.L>0))l=o.L,j=o.bd,k=o.Rd,n=q}}if(g)return a={},a.L=l,a.bd=j,a.Rd=k,a.Tn=n,a;return i};
function Sc(a){for(var b=1.0E20,c=1.0E20,d=1.0E20,e=-1.0E20,f=-1.0E20,g=-1.0E20,j,k,l,n=0;n<a.A.length;n++)j=a.A[n*a.S],k=a.A[n*a.S+1],l=a.A[n*a.S+2],j>e&&(e=j),k>f&&(f=k),l>g&&(g=l),j<b&&(b=j),k<c&&(c=k),l<d&&(d=l);a.ka&&(n=new I(b,c,d),l=new I(e,c,d),j=new I(e,f,d),d=new I(b,f,d),k=new I(b,c,g),c=new I(b,f,g),e=new I(e,f,g),g=new I(b,f,g),b=a.ka.Ma(n),f=a.ka.Ma(l),j=a.ka.Ma(j),d=a.ka.Ma(d),k=a.ka.Ma(k),c=a.ka.Ma(c),l=a.ka.Ma(e),n=a.ka.Ma(g),e=[b.a[0],f.a[0],j.a[0],d.a[0],k.a[0],c.a[0],l.a[0],n.a[0]],
g=[b.a[1],f.a[1],j.a[1],d.a[1],k.a[1],c.a[1],l.a[1],n.a[1]],j=[b.a[2],f.a[2],j.a[2],d.a[2],k.a[2],c.a[2],l.a[2],n.a[2]],e.sort(),g.sort(),j.sort(),b=e[0],e=e[e.length-1],c=g[0],f=g[g.length-1],d=j[0],g=j[j.length-1]);a.Ia&&(b+=a.Ia[0],c+=a.Ia[1],d+=a.Ia[2],e+=a.Ia[0],f+=a.Ia[1],g+=a.Ia[2]);if(a.Z===i)a.Z=Array(3);if(a.xa===i)a.xa=Array(3);a.Z[0]=b;a.Z[1]=c;a.Z[2]=d;a.xa[0]=e;a.xa[1]=f;a.xa[2]=g}
r.qm=function(a,b,c,d,e,f){return this.Bi.Sg(a,b,c,d,e,f,this.Z[0],this.Z[1],this.Z[2],this.xa[0],this.xa[1],this.xa[2])};r.$g=function(a,b,c,d,e,f){var g=this.c.$.a,j=new J;this.ge[0]=a;this.ge[1]=b;this.ge[2]=c;this.fe[0]=d||0;this.fe[1]=e||0;this.fe[2]=f||0;j.Le([g[0],g[4],g[8],0,g[1],g[5],g[9],0,g[2],g[6],g[10],0,this.ge[0],this.ge[1],this.ge[2],1]);a=new J;a.gd(this.fe[0],this.fe[1],this.fe[2]);b=new J;b.U(j,a);this.ka=b};function Tc(a){a.$g(a.ge[0],a.ge[1],a.ge[2],a.fe[0],a.fe[1],a.fe[2])}
r.ah=function(a,b,c,d,e,f){this.cc=a;this.bc=b;this.$b=c;var g=new O(a,b,c),c=Array(3);g.pa(c);(new J).gd(c[0],c[1],c[2]);g=new J;g.Sd(a,b);a=Array(16);b=g.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new J;b.Le(a);a=new J;a.Yd(G,G,G);c=new J;c.U(b,a);b=new J;g=new J;a=new J;d?b.Vj(e*Math.PI/180):b.Vj(-1.57079633);e&&g.bm(d*Math.PI/180+1.57079633);f&&a.cm(f*Math.PI/180);d=new J;
d.U(b,g);e=new J;e.U(d,a);d=new J;d.U(c,e);this.ka=d;Sc(this)};r.qf=function(a,b,c){var d=new J;d.Yd(a,b,c);a=new J;b=this.ka.jf();a.U(b,d);this.ka=a};
r.Cb=function(a,b,c){var d=H(a),e=H(b),f=H(c),c=new J,b=Math.cos(d),a=Math.cos(e),g=Math.cos(f),d=Math.sin(d),e=Math.sin(e),f=Math.sin(f);c.a[0]=a*g;c.a[1]=d*e*g+b*f;c.a[2]=-b*e*g+d*f;c.a[3]=0;c.a[4]=-a*f;c.a[5]=-d*e*f+b*g;c.a[6]=b*e*f+d*g;c.a[7]=0;c.a[8]=e;c.a[9]=-d*a;c.a[10]=b*a;c.a[11]=0;c.a[12]=0;c.a[13]=0;c.a[14]=0;c.a[15]=1;b=this.ka.jf();a=new J;a.U(b,c);this.ka=a};
r.ba=function(a){this.Oc(a.l);this.A=a.A;this.mode=a.mode;this.S=a.S;this.R=a.R;this.qe=a.qe;this.ib=a.ib;this.Ea=a.Ea;this.Oh=a.Oh;this.fa=a.fa;this.Nb=a.Nb;this.ka=a.ka;this.qe=a.qe};
function Uc(a,b,c,d){var e=b[0],f=b[1],b=b[2],g=c[0],j=c[1],c=c[2],k={VertexSemantic:"",Vertices:i,IndexSemantic:"",Indices:i,VertexSemantic:"p"};k.Vertices=[-0.5*g+e,-0.5*j+f,-0.5*c+b,-0.5*g+e,-0.5*j+f,0.5*c+b,0.5*g+e,-0.5*j+f,-0.5*c+b,0.5*g+e,-0.5*j+f,0.5*c+b,0.5*g+e,0.5*j+f,-0.5*c+b,0.5*g+e,0.5*j+f,0.5*c+b,-0.5*g+e,0.5*j+f,-0.5*c+b,-0.5*g+e,0.5*j+f,0.5*c+b];k.IndexSemantic="TRIANGLES";k.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];v(d)&&(d.length==4?a.hc.p(d[0],
d[1],d[2],d[3]):d.length==3&&a.hc.p(d[0],d[1],d[2],1));a.kc(k,i,i);Sc(a)}function Vc(a){var b=[],c=a[0],d=a[1],a=a[2],e=c*c+d*d;e/=0.578106683090441;e+=a*a/0.5742366172789609;e=Math.sqrt(e);e=1/e;b.push(e*c);b.push(e*d);b.push(e*a);return b}
function Wc(a,b,c){var d=Math.sqrt(0.578106683090441),e={VertexSemantic:"",Vertices:i,IndexSemantic:"",Indices:i,VertexSemantic:"p"};e.Vertices=[-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0,0.5*d+0,-0.5*d+0,0.5*d+0,-0.5*d+0,-0.5*d+0,0.5*d+0,0.5*d+0];e.IndexSemantic="TRIANGLES";e.Indices=[3,1,0,5,3,2,7,5,4,1,7,6,5,7,1,2,0,6,2,3,0,4,5,2,6,7,4,0,1,6,3,5,1,4,2,6];v(b)&&(b.length==4?a.hc.p(b[0],b[1],b[2],
b[3]):b.length==3&&a.hc.p(b[0],b[1],b[2],1));b=e.Vertices;for(d=0;d<c;d++){for(var f=[],g=e.Indices,j=0;j<g.length;j+=3){for(var k=g[j],l=g[j+1],n=g[j+2],q=[(b[k*3+0]+b[l*3+0])/2,(b[k*3+1]+b[l*3+1])/2,(b[k*3+2]+b[l*3+2])/2],q=Vc(q),o=[(b[l*3+0]+b[n*3+0])/2,(b[l*3+1]+b[n*3+1])/2,(b[l*3+2]+b[n*3+2])/2],o=Vc(o),s=[(b[n*3+0]+b[k*3+0])/2,(b[n*3+1]+b[k*3+1])/2,(b[n*3+2]+b[k*3+2])/2],s=Vc(s),t=-1,x=-1,B=-1,S=0;S<b.length/3;S+=3){for(var X=!0,Q=!0,ja=!0,T=0;T<3;T++)Math.abs(b[S+T]-q[T])>1.0E-7&&(X&=0),Math.abs(b[S+
T]-o[T])>1.0E-7&&(Q&=0),Math.abs(b[S+T]-s[T])>1.0E-7&&(ja&=0);X&&(t=S/3);Q&&(x=S/3);ja&&(B=S/3)}t==-1&&(t=b.length/3,b.push(q[0]),b.push(q[1]),b.push(q[2]));x==-1&&(x=b.length/3,b.push(o[0]),b.push(o[1]),b.push(o[2]));B==-1&&(B=b.length/3,b.push(s[0]),b.push(s[1]),b.push(s[2]));f.push(k);f.push(t);f.push(B);f.push(l);f.push(x);f.push(t);f.push(n);f.push(B);f.push(x);f.push(t);f.push(x);f.push(B)}e.Indices=f}a.kc(e,i,i);Sc(a)}w("Surface",K);K.prototype.Draw=K.prototype.ra;K.prototype.CopyFrom=K.prototype.ba;
K.prototype.SetAsBillboard=K.prototype.$g;K.prototype.SetTexture=K.prototype.Oc;K.prototype.TestBoundingBoxIntersection=K.prototype.qm;K.prototype.TestRayIntersection=K.prototype.Ne;var Xc="art/";function M(a,b,c,d,e){this.c=a;this.b=a.b;this.l=i;this.Qi=this.Wb=!1;this.Ya=i;this.height=this.width=0;this.zq=i;this.Hm=this.Vn=!1;b&&Yc(this,c||0,d||0,e||!1);this.repeat=!1}
function Yc(a,b,c,d){Zc(a);a.Hc=a.b.createFramebuffer();a.b.bindFramebuffer(a.b.FRAMEBUFFER,a.Hc);a.Hc.width=b;a.Hc.height=c;a.l=a.b.createTexture();a.b.bindTexture(a.b.TEXTURE_2D,a.l);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MAG_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_MIN_FILTER,a.b.LINEAR);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_S,a.b.CLAMP_TO_EDGE);a.b.texParameteri(a.b.TEXTURE_2D,a.b.TEXTURE_WRAP_T,a.b.CLAMP_TO_EDGE);a.b.texImage2D(a.b.TEXTURE_2D,0,a.b.RGBA,
a.Hc.width,a.Hc.height,0,a.b.RGBA,a.b.UNSIGNED_BYTE,i);a.cj=a.b.createRenderbuffer();a.b.bindRenderbuffer(a.b.RENDERBUFFER,a.cj);d&&a.b.renderbufferStorage(a.b.RENDERBUFFER,a.b.DEPTH_STENCIL,a.Hc.width,a.Hc.height);a.b.framebufferTexture2D(a.b.FRAMEBUFFER,a.b.COLOR_ATTACHMENT0,a.b.TEXTURE_2D,a.l,0);d&&a.b.framebufferRenderbuffer(a.b.FRAMEBUFFER,a.b.DEPTH_STENCIL_ATTACHMENT,a.b.RENDERBUFFER,a.cj);a.b.bindTexture(a.b.TEXTURE_2D,i);a.b.bindRenderbuffer(a.b.RENDERBUFFER,i);a.b.bindFramebuffer(a.b.FRAMEBUFFER,
i);a.Wb=!0;a.Vn=!0;a.width=b;a.height=c}function Zc(a){if(a.Hc!=i&&(a.b.deleteRenderbuffer(a.cj),a.cj=i,a.b.deleteFramebuffer(a.Hc),a.Hc=i,a.b.deleteTexture(a.l),a.l=i,a.Ya))a.Ya.o(),a.Ya=i}
function N(a,b,c,d,e){a.Hm=v(e)?e:!1;a.l=a.b.createTexture();var f=a.l,g=a.b;a.l.We=new Image;a.l.We.crossOrigin="anonymous";a.l.We.onload=function(){g.bindTexture(g.TEXTURE_2D,f);g.pixelStorei(g.UNPACK_FLIP_Y_WEBGL,a.Hm);g.texImage2D(g.TEXTURE_2D,0,g.RGBA,g.RGBA,g.UNSIGNED_BYTE,f.We);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MAG_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_MIN_FILTER,g.LINEAR);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_S,g.CLAMP_TO_EDGE);g.texParameteri(g.TEXTURE_2D,g.TEXTURE_WRAP_T,
g.CLAMP_TO_EDGE);g.bindTexture(g.TEXTURE_2D,i);a.width=f.We.width;a.height=f.We.height;c!=i&&c(a);a.Wb=!0};a.l.We.onerror=function(){fc(E("owg.Texture"),"***FAILED DOWNLOADING: "+b);this.Qi=!0;d&&d(a)};a.l.We.src=b}r=M.prototype;
r.T=function(a,b,c,d,e,f,g,j,k,l){c=c||0;d=d||0;e=e||1;f=f||1;g=g||!1;j=j||!1;k=k||1;if(this.Wb){var n=this.width,q=this.height,o=this.width/2,s=this.height/2;this.c.Mc();this.c.Xj();var d=H(d),t=new J;d>0?t.Le([Math.cos(d)*e,Math.sin(d)*f,0,0,-Math.sin(d)*e,Math.cos(d)*f,0,0,0,0,1,0,-Math.cos(d)*e*o+Math.sin(d)*e*s+e*o+a,-Math.cos(d)*f*s-Math.sin(d)*f*o+f*s+b,c,1]):(t.gd(a,b,c),a=new J,a.Yd(e,f,1),t.U(t,a));this.c.Nc(t);if(this.Ya===i)this.Ya=new K(this.c),j?Mc(this.Ya,[0,0,0,0,0,n,0,0,1,0,n,q,0,
1,1,0,q,0,0,1]):Mc(this.Ya,[0,0,0,0,1,n,0,0,1,1,n,q,0,1,0,0,q,0,0,0]),Nc(this.Ya,[0,1,2,0,2,3],"TRIANGLES"),this.Ya.Oc(this);g?(this.c.b.enable(this.c.b.BLEND),this.c.b.disable(this.c.b.DEPTH_TEST),this.c.b.depthFunc(this.c.b.LEQUAL),this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA)):this.c.b.disable(this.c.b.BLEND);k<1&&(this.c.b.blendColor(0,0,0,k),this.c.b.blendFunc(this.c.b.CONSTANT_ALPHA,this.c.b.ONE_MINUS_CONSTANT_ALPHA));this.Ya.ra(i,i,i,i,l);g&&(this.c.b.disable(this.c.b.BLEND),
this.c.b.enable(this.c.b.DEPTH_TEST));this.c.Ed()}};r.o=function(){this.l.We=i;this.c.b.deleteTexture(this.l);this.l=i;this.Qi=this.Wb=!1;if(this.Ya)this.Ya.o(),this.Ya=i;Zc(this)};r.ih=function(){this.Vn&&(this.b.bindFramebuffer(this.b.FRAMEBUFFER,this.Hc),this.b.viewport(0,0,this.Hc.width,this.Hc.height))};r.rm=function(){this.b.bindTexture(this.b.TEXTURE_2D,i);this.b.bindFramebuffer(this.b.FRAMEBUFFER,i);this.b.viewport(0,0,this.c.width,this.c.height)};
r.ba=function(a){this.l=a.l;this.Wb=a.Wb;this.Qi=a.Qi;this.height=this.width=this.Ya=a.Ya};w("Texture",M);M.prototype.CopyFrom=M.prototype.ba;M.prototype.Blit=M.prototype.T;M.prototype._EnableRenderToTexture=M.prototype.ih;M.prototype._DisableRenderToTexture=M.prototype.rm;function O(a,b,c){this.G=new Float32Array([a,b,c])}O.prototype.p=function(a,b,c){this.G[0]=a;this.G[1]=b;this.G[2]=c};O.prototype.pa=function(a){var b=Math.sin(H(this.G[1])),c=Math.cos(H(this.G[1])),d=Math.sin(H(this.G[0])),e=kc/Math.sqrt(1-lc*b*b);a[0]=(e+this.G[2])*c*Math.cos(H(this.G[0]));a[1]=(e+this.G[2])*c*d;a[2]=(0.993305620011365*e+this.G[2])*b;a[0]*=G;a[1]*=G;a[2]*=G};
O.prototype.lc=function(a,b,c){var d=Math.atan2(b,a),e=Math.atan2(c,Math.sqrt(a*a+b*b)),f=0,g=0,j=0,g=0;a*=nc;b*=nc;c*=nc;for(var k=0;k<10;k++)g=Math.sin(e),g*=g,j=Math.cos(e),g=kc/Math.sqrt(1-lc*g),f=Math.sqrt(a*a+b*b)/j-g,e=Math.atan2(c/Math.sqrt(a*a+b*b),1-g*lc/(g+f));this.G[0]=oc(d);this.G[1]=oc(e);this.G[2]=f};O.prototype.mg=function(){return" Longitude: "+this.G[0].toPrecision(17)+" Latitude: "+this.G[1].toPrecision(17)+" Elevation: "+this.G[2].toPrecision(17)};w("GeoCoord",O);
O.prototype.FromCartesian=O.prototype.lc;O.prototype.ToCartesian=O.prototype.pa;O.prototype.ToString=O.prototype.mg;function $c(a){this.c=a;this.b=a.b;this.ka=this.fa=this.Ae=i;this.ye=new J;this.dl=[];this.tj=this.$i=this.Ia=0}r=$c.prototype;r.ui=function(a){this.$i+=a.length/7;if(this.tj==0)this.tj=this.$i*70;this.Ae=i;this.Ae=new Float32Array(a);this.Pe()};r.o=function(){if(this.fa)this.b.deleteBuffer(this.fa),this.fa=i;this.fa=this.Ae=i};
r.ah=function(a,b,c){var d=new O(a,b,c),c=Array(3);d.pa(c);(new J).gd(c[0],c[1],c[2]);d=new J;d.Hl(a,b);a=Array(16);b=d.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;b=new J;b.Le(a);a=new J;a.Yd(G,G,G);c=new J;c.U(b,a);a=new J;b=new J;b.U(c,a);this.ka=b};
r.ra=function(){if(this.Ae!=i){this.fa||this.Pe();this.ka&&(this.c.Mc(),this.ye.U(this.ka,this.c.Qb),this.c.Nc(this.ye));this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa);this.b.enableVertexAttribArray(0);this.b.enableVertexAttribArray(1);this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0);this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12);var a=new J;a.ig(this.c.qa);var b=this.c.Ua,c=this.c.qa;b.Yc&&(b.b.useProgram(b.Yc),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Yc,"matMVP"),!1,c.za()),b.b.uniformMatrix4fv(b.b.getUniformLocation(b.Yc,
"matInvMVP"),!1,a.za()));this.b.drawArrays(this.b.POINTS,0,this.$i);this.b.disableVertexAttribArray(0);this.b.disableVertexAttribArray(1);this.ka&&this.c.Ed()}};
r.Pe=function(){this.fa===i?(this.fa=this.b.createBuffer(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa),this.b.bufferData(this.b.ARRAY_BUFFER,this.tj,this.b.STATIC_DRAW),this.b.bufferSubData(this.b.ARRAY_BUFFER,0,this.Ae)):(this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa),this.b.bufferSubData(this.b.ARRAY_BUFFER,this.Ia,this.Ae));this.Ia+=this.Ae.length*4};var ad,bd,cd,dd,ed;function fd(){return u.navigator?u.navigator.userAgent:i}dd=cd=bd=ad=!1;var gd;if(gd=fd()){var hd=u.navigator;ad=gd.indexOf("Opera")==0;bd=!ad&&gd.indexOf("MSIE")!=-1;cd=!ad&&gd.indexOf("WebKit")!=-1;dd=!ad&&!cd&&hd.product=="Gecko"}var id=ad,jd=bd,kd=dd,ld=cd,md,nd=u.navigator;md=nd&&nd.platform||"";ed=md.indexOf("Mac")!=-1;var od=md.indexOf("Win")!=-1,pd;
a:{var qd="",rd;if(id&&u.opera)var sd=u.opera.version,qd=typeof sd=="function"?sd():sd;else if(kd?rd=/rv\:([^\);]+)(\)|;)/:jd?rd=/MSIE\s+([^\);]+)(\)|;)/:ld&&(rd=/WebKit\/(\S+)/),rd)var td=rd.exec(fd()),qd=td?td[1]:"";if(jd){var ud,vd=u.document;ud=vd?vd.documentMode:h;if(ud>parseFloat(qd)){pd=String(ud);break a}}pd=qd}var wd={};function xd(a){return wd[a]||(wd[a]=yb(pd,a)>=0)};var yd;var zd="dblclick",Ad="mousedown",Bd="mouseup",Cd="mousemove",Dd="keydown",Ed="keyup";var Fd=!jd||xd("9"),Gd=jd&&!xd("8");function Hd(){Id&&(Jd[pa(this)]=this)}var Id=!1,Jd={};Hd.prototype.Fm=!1;Hd.prototype.Bh=function(){if(!this.Fm&&(this.Fm=!0,this.Hd(),Id)){var a=pa(this);Jd.hasOwnProperty(a)||aa(Error(this+" did not call the goog.Disposable base constructor or was disposed of after a clearUndisposedObjects call"));delete Jd[a]}};Hd.prototype.Hd=m();function Kd(a,b){Hd.call(this);this.type=a;this.currentTarget=this.target=b}Ba(Kd,Hd);r=Kd.prototype;r.Hd=function(){delete this.type;delete this.target;delete this.currentTarget};r.Zf=!1;r.Yh=!0;r.stopPropagation=function(){this.Zf=!0};r.preventDefault=function(){this.Yh=!1};var Ld=new Function("a","return a");function Md(a,b){a&&this.Jd(a,b)}Ba(Md,Kd);var Nd=0,Od=1,Pd=2,Qd=[1,4,2];r=Md.prototype;r.target=i;r.relatedTarget=i;r.offsetX=0;r.offsetY=0;r.clientX=0;r.clientY=0;r.screenX=0;r.screenY=0;r.button=0;r.keyCode=0;r.charCode=0;r.ctrlKey=!1;r.altKey=!1;r.shiftKey=!1;r.metaKey=!1;r.up=!1;r.oe=i;
r.Jd=function(a,b){var c=this.type=a.type;Kd.call(this,c);this.target=a.target||a.srcElement;this.currentTarget=b;var d=a.relatedTarget;if(d){if(kd)try{Ld(d.nodeName)}catch(e){d=i}}else if(c=="mouseover")d=a.fromElement;else if(c=="mouseout")d=a.toElement;this.relatedTarget=d;this.offsetX=a.offsetX!==h?a.offsetX:a.layerX;this.offsetY=a.offsetY!==h?a.offsetY:a.layerY;this.clientX=a.clientX!==h?a.clientX:a.pageX;this.clientY=a.clientY!==h?a.clientY:a.pageY;this.screenX=a.screenX||0;this.screenY=a.screenY||
0;this.button=a.button;this.keyCode=a.keyCode||0;this.charCode=a.charCode||(c=="keypress"?a.keyCode:0);this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.up=ed?a.metaKey:a.ctrlKey;this.state=a.state;this.oe=a;delete this.Yh;delete this.Zf};function Rd(a,b){return Fd?a.oe.button==b:a.type=="click"?b==Nd:!!(a.oe.button&Qd[b])}
r.stopPropagation=function(){Md.cg.stopPropagation.call(this);this.oe.stopPropagation?this.oe.stopPropagation():this.oe.cancelBubble=!0};r.preventDefault=function(){Md.cg.preventDefault.call(this);var a=this.oe;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Gd)try{if(a.ctrlKey||a.keyCode>=112&&a.keyCode<=123)a.keyCode=-1}catch(b){}};r.Hd=function(){Md.cg.Hd.call(this);this.relatedTarget=this.currentTarget=this.target=this.oe=i};function Sd(){}var Td=0;r=Sd.prototype;r.key=0;r.Cg=!1;r.vm=!1;r.Jd=function(a,b,c,d,e,f){na(a)?this.Nm=!0:a&&a.handleEvent&&na(a.handleEvent)?this.Nm=!1:aa(Error("Invalid listener argument"));this.Lh=a;this.wn=b;this.src=c;this.type=d;this.capture=!!e;this.Nk=f;this.vm=!1;this.key=++Td;this.Cg=!1};r.handleEvent=function(a){if(this.Nm)return this.Lh.call(this.Nk||this.src,a);return this.Lh.handleEvent.call(this.Lh,a)};var Ud,Vd=(Ud="ScriptEngine"in u&&u.ScriptEngine()=="JScript")?u.ScriptEngineMajorVersion()+"."+u.ScriptEngineMinorVersion()+"."+u.ScriptEngineBuildVersion():"0";function Wd(a,b){Hd.call(this);this.Um=b;this.If=[];a>this.Um&&aa(Error("[goog.structs.SimplePool] Initial cannot be greater than max"));for(var c=0;c<a;c++)this.If.push(this.xh())}Ba(Wd,Hd);r=Wd.prototype;r.Gf=i;r.Em=i;r.getObject=function(){if(this.If.length)return this.If.pop();return this.xh()};function Xd(a,b){a.If.length<a.Um?a.If.push(b):a.wk(b)}r.xh=function(){return this.Gf?this.Gf():{}};r.wk=function(a){if(this.Em)this.Em(a);else if(oa(a))if(na(a.Bh))a.Bh();else for(var b in a)delete a[b]};
r.Hd=function(){Wd.cg.Hd.call(this);for(var a=this.If;a.length;)this.wk(a.pop());delete this.If};var Yd,Zd,$d,ae,be,ce,de,ee,fe,ge,he;
(function(){function a(){return{Ra:0,zd:0}}function b(){return[]}function c(){function a(b){return g.call(a.src,a.key,b)}return a}function d(){return new Sd}function e(){return new Md}var f=Ud&&!(yb(Vd,"5.7")>=0),g;ce=function(a){g=a};if(f){Yd=function(){return j.getObject()};Zd=function(a){Xd(j,a)};$d=function(){return k.getObject()};ae=function(a){Xd(k,a)};be=function(){return l.getObject()};de=function(){Xd(l,c())};ee=function(){return n.getObject()};fe=function(a){Xd(n,a)};ge=function(){return q.getObject()};
he=function(a){Xd(q,a)};var j=new Wd(0,600);j.Gf=a;var k=new Wd(0,600);k.Gf=b;var l=new Wd(0,600);l.Gf=c;var n=new Wd(0,600);n.Gf=d;var q=new Wd(0,600);q.Gf=e}else Yd=a,Zd=ga,$d=b,ae=ga,be=c,de=ga,ee=d,fe=ga,ge=e,he=ga})();var ie={},je={},ke={},le={};
function P(a,b,c,d,e){if(b)if(ka(b)){for(var f=0;f<b.length;f++)P(a,b[f],c,d,e);return i}else{var d=!!d,g=je;b in g||(g[b]=Yd());g=g[b];d in g||(g[d]=Yd(),g.Ra++);var g=g[d],j=pa(a),k;g.zd++;if(g[j]){k=g[j];for(f=0;f<k.length;f++)if(g=k[f],g.Lh==c&&g.Nk==e){if(g.Cg)break;return k[f].key}}else k=g[j]=$d(),g.Ra++;f=be();f.src=a;g=ee();g.Jd(c,f,a,b,d,e);c=g.key;f.key=c;k.push(g);ie[c]=g;ke[j]||(ke[j]=$d());ke[j].push(g);a.addEventListener?(a==u||!a.Bm)&&a.addEventListener(b,f,d):a.attachEvent(me(b),
f);return c}else aa(Error("Invalid event type"))}function ne(a,b,c,d,e){if(ka(b))for(var f=0;f<b.length;f++)ne(a,b[f],c,d,e);else{d=!!d;a:{f=je;if(b in f&&(f=f[b],d in f&&(f=f[d],a=pa(a),f[a]))){a=f[a];break a}a=i}if(a)for(f=0;f<a.length;f++)if(a[f].Lh==c&&a[f].capture==d&&a[f].Nk==e){R(a[f].key);break}}}
function R(a){if(ie[a]){var b=ie[a];if(!b.Cg){var c=b.src,d=b.type,e=b.wn,f=b.capture;c.removeEventListener?(c==u||!c.Bm)&&c.removeEventListener(d,e,f):c.detachEvent&&c.detachEvent(me(d),e);c=pa(c);e=je[d][f][c];if(ke[c]){var g=ke[c],j=Db(g,b);j>=0&&Cb.splice.call(g,j,1);g.length==0&&delete ke[c]}b.Cg=!0;e.on=!0;oe(d,f,c,e);delete ie[a]}}}
function oe(a,b,c,d){if(!d.Yi&&d.on){for(var e=0,f=0;e<d.length;e++)if(d[e].Cg){var g=d[e].wn;g.src=i;de(g);fe(d[e])}else e!=f&&(d[f]=d[e]),f++;d.length=f;d.on=!1;f==0&&(ae(d),delete je[a][b][c],je[a][b].Ra--,je[a][b].Ra==0&&(Zd(je[a][b]),delete je[a][b],je[a].Ra--),je[a].Ra==0&&(Zd(je[a]),delete je[a]))}}
function pe(a){var b,c=0,d=b==i;b=!!b;if(a==i)kb(ke,function(a){for(var e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)R(f.key),c++}});else if(a=pa(a),ke[a])for(var a=ke[a],e=a.length-1;e>=0;e--){var f=a[e];if(d||b==f.capture)R(f.key),c++}}function me(a){if(a in le)return le[a];return le[a]="on"+a}
function qe(a,b,c,d,e){var f=1,b=pa(b);if(a[b]){a.zd--;a=a[b];a.Yi?a.Yi++:a.Yi=1;try{for(var g=a.length,j=0;j<g;j++){var k=a[j];k&&!k.Cg&&(f&=re(k,e)!==!1)}}finally{a.Yi--,oe(c,d,b,a)}}return Boolean(f)}function re(a,b){var c=a.handleEvent(b);a.vm&&R(a.key);return c}
ce(function(a,b){if(!ie[a])return!0;var c=ie[a],d=c.type,e=je;if(!(d in e))return!0;var e=e[d],f,g;yd===h&&(yd=jd&&!u.addEventListener);if(yd){f=b||da("window.event");var j=!0 in e,k=!1 in e;if(j){if(f.keyCode<0||f.returnValue!=h)return!0;a:{var l=!1;if(f.keyCode==0)try{f.keyCode=-1;break a}catch(n){l=!0}if(l||f.returnValue==h)f.returnValue=!0}}l=ge();l.Jd(f,this);f=!0;try{if(j){for(var q=$d(),o=l.currentTarget;o;o=o.parentNode)q.push(o);g=e[!0];g.zd=g.Ra;for(var s=q.length-1;!l.Zf&&s>=0&&g.zd;s--)l.currentTarget=
q[s],f&=qe(g,q[s],d,!0,l);if(k){g=e[!1];g.zd=g.Ra;for(s=0;!l.Zf&&s<q.length&&g.zd;s++)l.currentTarget=q[s],f&=qe(g,q[s],d,!1,l)}}else f=re(c,l)}finally{if(q)q.length=0,ae(q);l.Bh();he(l)}return f}d=new Md(b,this);try{f=re(c,d)}finally{d.Bh()}return f});function se(){this.Gh=[];this.Yk=new Mb;this.Pn=this.Qn=this.Rn=this.Gn=0;this.Od=new Mb;this.xm=this.On=0;this.op=1;this.xk=new Wd(0,4E3);this.xk.xh=function(){return new te};this.Hn=new Wd(0,50);this.Hn.xh=function(){return new ue};var a=this;this.Pk=new Wd(0,2E3);this.Pk.xh=function(){return String(a.op++)};this.Pk.wk=m();this.$o=3}function ue(){this.nl=this.Mn=this.count=0}
ue.prototype.toString=function(){var a=[];a.push(this.type," ",this.count," (",Math.round(this.Mn*10)/10," ms)");this.nl&&a.push(" [VarAlloc = ",this.nl,"]");return a.join("")};function te(){}function ve(a,b,c,d){var e=[];c==-1?e.push("    "):e.push(we(a.Gm-c));e.push(" ",xe(a.Gm-b));a.yk==0?e.push(" Start        "):a.yk==1?(e.push(" Done "),e.push(we(a.Cq-a.startTime)," ms ")):e.push(" Comment      ");e.push(d,a);a.Mp>0&&e.push("[VarAlloc ",a.Mp,"] ");return e.join("")}
te.prototype.toString=function(){return this.type==i?this.Vo:"["+this.type+"] "+this.Vo};se.prototype.reset=function(a){this.$o=a;for(a=0;a<this.Gh.length;a++){var b=this.xk.id;b&&Xd(this.Pk,b);Xd(this.xk,this.Gh[a])}this.Gh.length=0;this.Yk.clear();this.Gn=Aa();this.xm=this.On=this.Pn=this.Qn=this.Rn=0;b=this.Od.Ti();for(a=0;a<b.length;a++){var c=this.Od.get(b[a]);c.count=0;c.Mn=0;c.nl=0;Xd(this.Hn,c)}this.Od.clear()};
se.prototype.toString=function(){for(var a=[],b=-1,c=[],d=0;d<this.Gh.length;d++){var e=this.Gh[d];e.yk==1&&c.pop();a.push(" ",ve(e,this.Gn,b,c.join("")));b=e.Gm;a.push("\n");e.yk==0&&c.push("|  ")}if(this.Yk.Kf()!=0){var f=Aa();a.push(" Unstopped timers:\n");Lb(this.Yk,function(b){a.push("  ",b," (",f-b.startTime," ms, started at ",xe(b.startTime),")\n")})}b=this.Od.Ti();for(d=0;d<b.length;d++)c=this.Od.get(b[d]),c.count>1&&a.push(" TOTAL ",c,"\n");a.push("Total tracers created ",this.On,"\n","Total comments created ",
this.xm,"\n","Overhead start: ",this.Rn," ms\n","Overhead end: ",this.Qn," ms\n","Overhead comment: ",this.Pn," ms\n");return a.join("")};se.prototype.Sm=function(a){u.console&&u.console.markTimeline&&u.console.markTimeline(a)};function we(a){var a=Math.round(a),b="";a<1E3&&(b=" ");a<100&&(b="  ");a<10&&(b="   ");return b+a}function xe(a){a=Math.round(a);return String(100+a/1E3%60).substring(1,3)+"."+String(1E3+a%1E3).substring(1,4)}new se;new Wd(0,100);var ye=0;function ze(){this.Wp=ye;ye++;this.ed=m();this.fd=m();this.dd=m();this.Ge=m();this.Fe=m();this.Je=m();this.kg=m();this.Ke=m();this.Xp=this.c=i;this.Eq=[]}function Ae(a){a.Je(a.c.H);a.Ge()}ze.prototype.Lc=function(){this.kg();this.Fe()};function Be(){Hd.call(this)}Ba(Be,Hd);r=Be.prototype;r.Bm=!0;r.Zk=i;r.addEventListener=function(a,b,c,d){P(this,a,b,c,d)};r.removeEventListener=function(a,b,c,d){ne(this,a,b,c,d)};
r.dispatchEvent=function(a){var b=a.type||a,c=je;if(b in c){if(ma(a))a=new Kd(a,this);else if(a instanceof Kd)a.target=a.target||this;else{var d=a,a=new Kd(b,this);nb(a,d)}var d=1,e,c=c[b],b=!0 in c,f;if(b){e=[];for(f=this;f;f=f.Zk)e.push(f);f=c[!0];f.zd=f.Ra;for(var g=e.length-1;!a.Zf&&g>=0&&f.zd;g--)a.currentTarget=e[g],d&=qe(f,e[g],a.type,!0,a)&&a.Yh!=!1}if(!1 in c)if(f=c[!1],f.zd=f.Ra,b)for(g=0;!a.Zf&&g<e.length&&f.zd;g++)a.currentTarget=e[g],d&=qe(f,e[g],a.type,!1,a)&&a.Yh!=!1;else for(e=this;!a.Zf&&
e&&f.zd;e=e.Zk)a.currentTarget=e,d&=qe(f,e,a.type,!1,a)&&a.Yh!=!1;a=Boolean(d)}else a=!0;return a};r.Hd=function(){Be.cg.Hd.call(this);pe(this);this.Zk=i};function Ce(){this.Ph=this.gj=this.qj=this.oj=this.pj=this.nj=this.lj=this.mj=this.kj=this.ij=this.jj=this.hj=this.Fg=this.Gg=this.eg=this.Eg=this.Li=this.Ji=this.sq=i;this.Vk=this.Uk=0;this.tc=!1;this.elevation=this.latitude=this.longitude=this.Va=0;this.Uc=-1;this.hb=this.mb=0;this.aa=De;this.Lf=0;this.Sc=48;this.Zc=this.fj=this.Be=this.ic=this.Ig=this.Yb=this.zc=this.zb=0;this.sm=!1;this.zm=this.ym=0;this.xc=new Ec(0.7,0.9,1,1);this.Fn=!0;this.dd=m();this.nc=function(a){for(;a>360;)a-=360;for(;a<
0;)a+=360;return a};this.ed=function(){if(this.Uc==0)this.tc&&(this.Li.T(this.Uk-64,this.Vk-64,0,this.Va,1,1,!0,!1),this.Ji.T(this.Uk-64,this.Vk-64,0,0,1,1,!0,!1)),this.c.De("Current position: ("+this.longitude.toFixed(6)+", "+this.latitude.toFixed(6)+","+this.elevation.toFixed(2)+")",0,0,0.5);else if(this.Uc==1){this.sm&&this.gj.T(this.ym-16,this.zm-16,0,0,1,1,!0,!1,0.75);var a=this.c.width-1-64-this.Lf,b=this.c.height-1-this.Sc,c=this.nc(this.Ig+this.fj);this.aa==Ee?this.Fg.T(a-64,b-64,0,c,1,1,
!0,!1,1,this.xc):this.aa==Fe?this.Fg.T(a-64,b-64,0,c,1,1,!0,!1,1,this.xc):this.Fg.T(a-64,b-64,0,c,1,1,!0,!1);this.aa==Ge?(this.Gg.T(a-32,b-32,0,0,1,1,!0,!1),this.eg.T(a-32,b-32,0,this.Yb,1,1,!0,!1,0.5)):this.aa==He?(this.Gg.T(a-32,b-32,0,0,1,1,!0,!1),this.eg.T(a-32,b-32,0,this.Yb,1,1,!0,!1,0.5)):this.Gg.T(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-this.Sc;this.aa==Ie?(this.Eg.T(a-32,b-32,0,0,1,1,!0),this.eg.T(a-32,b-32,0,this.zb,1,1,!0,!1,0.5)):this.aa==Je?(this.Eg.T(a-32,b-32,0,0,1,1,!0),this.eg.T(a-
32,b-32,0,this.zb,1,1,!0,!1,0.5)):this.Eg.T(a-32,b-32,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.Sc;this.qj.T(a-8,b-64,0,0,1,1,!0,!1);b=this.c.height-1-82-64-this.Sc;this.aa==Ke?this.mj.T(a-16,b-16,0,0,1,1,!0,!1):this.aa==Le?this.lj.T(a-16,b-16,0,0,1,1,!0,!1):this.kj.T(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-64-this.Sc;this.aa==Me?this.jj.T(a-16,b-16,0,0,1,1,!0,!1):this.aa==Ne?this.ij.T(a-16,b-16,0,0,1,1,!0,!1):this.hj.T(a-16,b-16,0,0,1,1,!0,!1);b=this.c.height-1-82-128-this.Zc-this.Sc;
this.aa==Oe?this.pj.T(a-16,b-16,0,0,1,1,!0,!1):this.aa==Pe?this.oj.T(a-16,b-16,0,0,1,1,!0,!1):this.nj.T(a-16,b-16,0,0,1,1,!0,!1);this.Ph&&this.Fn&&(a=this.c.width-1-170-this.Lf,b=this.Sc-25,this.Ph.T(a-16,b-16,0,0,1,1,!0,!1))}};this.fd=function(a){this.Uc=a.Uc;this.Va=a.Ki*57.29577951308232;this.longitude=a.Id.longitude;this.latitude=a.Id.latitude;this.elevation=a.Id.elevation;this.sm=a.od;this.ym=a.Za[0];this.zm=this.c.height-a.Za[1]-1;if(this.aa!=Ee)this.fj=this.Va,this.Ig=0;if(this.aa==Le)a.Aa=
wc,a.va=1;else if(this.aa==Ne)a.Aa=xc,a.va=1;else if(this.aa==Pe)if(this.Zc>0)a.Aa=xc,a.va=Math.sqrt(this.Zc)/4;else{if(this.Zc<0)a.va=Math.sqrt(-this.Zc)/4,a.Aa=wc}else this.aa==Je?(a.Aa=yc,a.va=this.zc):this.aa==Ee?(a.Aa=zc,a.va=this.fj+this.Ig,a.va=this.nc(a.va),a.va*=Math.PI/180):this.aa==Ge?(a.Aa=Ac,a.va=Math.PI*this.Yb/180):a.Aa=vc;a.Wk=this.aa==De?0:1};this.Ge=function(){this.Ji=new M(this.c);N(this.Ji,Xc+"flightnavigation/cmpbg.png");this.Li=new M(this.c);N(this.Li,Xc+"flightnavigation/cmpr.png");
this.Eg=new M(this.c);N(this.Eg,Xc+"globenavigation/MoveWheel.png");this.Gg=new M(this.c);N(this.Gg,Xc+"globenavigation/YawPitchWheel.png");this.Fg=new M(this.c);N(this.Fg,Xc+"globenavigation/yaw_pitch_adjust.png");this.eg=new M(this.c);N(this.eg,Xc+"globenavigation/movewheel_marker.png",i,i,!0);this.hj=new M(this.c);N(this.hj,Xc+"globenavigation/minus.png");this.jj=new M(this.c);N(this.jj,Xc+"globenavigation/minus_over.png");this.ij=new M(this.c);N(this.ij,Xc+"globenavigation/minus_clicked.png");
this.kj=new M(this.c);N(this.kj,Xc+"globenavigation/plus.png");this.mj=new M(this.c);N(this.mj,Xc+"globenavigation/plus_over.png");this.lj=new M(this.c);N(this.lj,Xc+"globenavigation/plus_clicked.png");this.nj=new M(this.c);N(this.nj,Xc+"globenavigation/slider.png");this.pj=new M(this.c);N(this.pj,Xc+"globenavigation/slider_over.png");this.oj=new M(this.c);N(this.oj,Xc+"globenavigation/slider_clicked.png");this.qj=new M(this.c);N(this.qj,Xc+"globenavigation/slider_rail.png");this.gj=new M(this.c);
N(this.gj,Xc+"globenavigation/crosshair.png");this.Ph=new M(this.c);N(this.Ph,Xc+"owg.png")};this.Fe=function(){this.Ji.o();this.Li.o();this.Eg.o();this.Gg.o();this.Fg.o();this.eg.o();this.hj.o();this.jj.o();this.ij.o();this.kj.o();this.mj.o();this.lj.o();this.nj.o();this.pj.o();this.oj.o();this.qj.o();this.gj.o();this.Ph.o()};this.kg=function(){R(this.uc);R(this.wc);R(this.vc);R(this.rd)};this.Je=function(a){this.uc=P(a,Ad,this.Td,!1,this);this.wc=P(a,Bd,this.Vd,!1,this);this.vc=P(a,Cd,this.Ud,!1,
this);this.rd=P(a,zd,this.Vg,!1,this)};this.Td=function(a){if(Rd(a,Nd)){var b=a.offsetX-this.c.H.offsetLeft,a=a.offsetY-this.c.H.offsetTop;this.Uk=b;this.Vk=this.c.height-a-1;this.mb=b;this.hb=this.c.height-a-1;this.tc=!0;this.Uc==1&&this.Jj(0)}};this.Vd=function(a){if(Rd(a,Nd)){var b=a.offsetY-this.c.H.offsetTop;this.mb=a.offsetX-this.c.H.offsetLeft;this.hb=this.c.height-b-1;this.tc=!1;this.Uc==1&&this.Jj(0);this.Zc=0}};this.Ud=function(a){if(this.c&&this.c.H){var b=a.offsetY-this.c.H.offsetTop,
c=this.c.height-b-1-this.hb;this.mb=a.offsetX-this.c.H.offsetLeft;this.hb=this.c.height-b-1;this.Uc==1&&this.Jj(c)}};this.Vg=function(){this.aa==Fe&&Qe(this.c.sa,this.longitude,this.latitude,this.elevation,0,-90,0)};this.Jj=function(a){var b=this.c.width-1-64-this.Lf-8,c=this.c.height-1-82-64-this.Sc+8,d=this.c.width-1-64-this.Lf-8,e=this.c.height-1-82-128-64-this.Sc+8,f=this.c.width-1-64-this.Lf-8,g=this.c.height-1-82-128-this.Zc-this.Sc+8,j=this.c.width-1-64-this.Lf,k=this.c.height-1-82-this.Sc,
l=Math.abs(this.mb-j);l*=l;var n=Math.abs(this.hb-k);n*=n;var q=this.c.width-1-64-this.Lf,o=this.c.height-1-this.Sc,s=Math.abs(this.mb-q);s*=s;var t=Math.abs(this.hb-o);t*=t;if(this.tc&&this.aa==Pe)if(this.Zc-=a,this.Zc<-40)this.Zc=-40;else{if(this.Zc>40)this.Zc=40}else if(this.tc&&this.aa==Je)a=this.mb-j,k=this.hb-k,this.zc=this.zb=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.zb=360-this.zb:this.zc=360-this.zc,this.zb+=90,this.zc+=90,this.zb=this.nc(this.zb),this.zc=this.nc(this.zc);else if(this.tc&&
this.aa==Ee){a=this.mb-q;k=this.hb-o;this.ic=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.ic=360-this.ic;this.ic-=90;this.ic=this.nc(this.ic);this.Ig=this.nc(this.ic-this.Be)}else if(this.tc&&this.aa==Ge){a=this.mb-q;k=this.hb-o;this.Yb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.Yb=360-this.Yb;this.Yb+=90;this.Yb=this.nc(this.Yb)}else{this.aa=0;if(this.mb>b&&this.hb>c-16&&this.mb<b+16&&this.hb<c)this.aa=this.tc?Le:Ke;if(this.mb>d&&this.hb>e-16&&this.mb<d+16&&this.hb<e)this.aa=this.tc?
Ne:Me;if(this.mb>f&&this.hb>g-16&&this.mb<f+16&&this.hb<g)this.aa=this.tc?Pe:Oe;l+n<=729?this.tc?this.aa=Je:(this.aa=Ie,a=this.mb-j,k=this.hb-k,this.zc=this.zb=180*Math.atan2(Math.abs(k),a)/Math.PI,k<0?this.zb=360-this.zb:this.zc=360-this.zc,this.zb+=90,this.zc+=90,this.zb=this.nc(this.zb),this.zc=this.nc(this.zc)):this.zb=0;if(s+t<=625){this.aa=this.tc?Ge:He;a=this.mb-q;k=this.hb-o;this.Yb=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.Yb=360-this.Yb;this.Yb+=90;this.Yb=this.nc(this.Yb)}else if(s+
t<=1600)if(this.tc){this.aa=Ee;a=this.mb-q;k=this.hb-o;this.ic=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.ic=360-this.ic;this.ic-=90;this.ic=this.nc(this.ic);this.Ig=this.nc(this.ic-this.Be);this.fj=this.Va}else{this.aa=Fe;a=this.mb-q;k=this.hb-o;this.Be=180*Math.atan2(Math.abs(k),a)/Math.PI;if(k<0)this.Be=360-this.Be;this.Be-=90;this.Be-=this.Ig;this.Be=this.nc(this.Be)}this.Ql=ba("Fn")}}}var De=0,Ke=1,Le=2,Me=3,Ne=4,Oe=5,Pe=6,Ie=7,Je=8,Fe=9,Ee=10,He=11,Ge=12;Ce.prototype=new ze;function Re(){this.name="ogAoeImage";this.type=$a;this.fb=-1;this.O=!1;this.options=i;this.Pf=-1;this.Rf=-180;this.Of=-90;this.ug=180;this.tg=90;this.qq="";this.Wb=!1;this.l=this.jp=i;this.vg=[];this.qg=[]}Re.prototype=new C;r=Re.prototype;r.Na=function(a){this.options=a;this.Rf=a.longitude0;this.Of=a.latitude0;this.ug=a.longitude1;this.tg=a.latitude1;this.hp=a.url;a=this.parent.parent.c;this.jp=new M(a,!0,256,256);this.l=new M(a);this.l.parent=this;N(this.l,this.hp,Se,Te,!0);this.fb=Ue(this).zj(this)};
r.lb=function(){Ue(this).Qj(this.fb)};function Ue(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.r)b=a.e.r.kk;return b}r.na=m();r.oa=m();
r.rb=function(){var a=this.parent.parent.c;if(this.Wb!=!1){var b=a.e.r.Da.M.length,c,d,e,f,g=i;this.qg=i;this.qg=[];for(var j=0;j<b;j++)if(g=a.e.r.Da.M[j],!(g.j.length<1)&&!g.pq&&(c=g.Rf,d=g.Of,e=g.ug,f=g.tg,!(this.Rf>e|this.ug<c|this.Of>f|this.tg<d)&&(this.qg[g.j]=this.vg[g.j],!this.vg[g.j]))){var k=new K(g.c);k.ba(g.v);var l=g.l,n=new M(g.c,!0,256,256),q=n;a.of.push(q);q.ih();l.T(0,0,0,0,1,1,!0,!0,1);this.l.T((this.Rf-c)*256/(e-c),(this.Of-d)*256/(f-d),0,0,(this.ug-this.Rf)/this.l.width/((e-c)/
256),(this.tg-this.Of)/this.l.height/((f-d)/256),!0,!0,1);Ve(a);k.Oc(n);k.Pp=g.ja[0];k.Qp=g.ja[1];k.Rp=g.ja[2];this.vg[g.j]=k;this.qg[g.j]=k}}for(var o in this.qg)a=this.qg[o],b=new J,b.ba(a.c.Qb),b.a[12]+=a.Pp,b.a[13]+=a.Qp,b.a[14]+=a.Rp,a.c.Mc(),a.c.Nc(b),a.ra(),a.c.Ed()};function Se(a){a.parent.Wb=!0;a.K&&a.K(a.j,a,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}function Te(a){a.J&&a.J(a.j,a.caller,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i};function We(a){this.c=a;this.rh=[]}We.prototype.rb=function(){for(var a=0;a<this.rh.length;a++)this.rh[a].rb()};We.prototype.zj=function(a){this.rh.push(a);return this.rh.length-1};We.prototype.Qj=function(a){this.rh.splice(a,1)};function Xe(a){this.c=a;this.Ta=[];this.Te=new Ye}Xe.prototype.rb=function(a,b){var c=a.a[0],d=a.a[1],e=a.a[2],f=0,g=0,j=0;this.Te.zi(b);for(var k=0;k<this.Ta.length;k++){var l=this.Ta[k];l.O||(this.Te.yi(l.Ye,l.Ze,l.$e,l.Ye+0.001,l.Ze+0.001,l.$e+0.001),f=l.Ye-c,g=l.Ze-d,j=l.$e-e,f=f*f+g*g+j*j,g=l.rl*l.rl,l.ql*l.ql>f&&g<f&&l.ra())}};Xe.prototype.Yg=function(a,b){for(var c=0;c<this.Ta.length;c++)if(this.Ta[c].Wg(a,b))return this.Ta[c];return i};function Ze(a){this.c=a;this.Xa=[]}Ze.prototype.rb=function(){for(var a=0;a<this.Xa.length;a++){var b=this.Xa[a];b.O||b.ra()}};Ze.prototype.Aj=function(a){this.Xa.push(a)};Ze.prototype.Rj=function(a){for(var b=0;b<this.Xa.length;b++)if(this.Xa[b]==a){this.Xa.splice(b,1);break}};Ze.prototype.Xg=function(a,b){for(var c=0;c<this.Xa.length;c++){var d=this.Xa[c].Wg(a,b);if(d)return d}return i};function $e(){}r=$e.prototype;r.Zg=function(a,b){this.Pj(a,b);b[0]=2*b[0]-1;b[1]=2*b[1]-1;b[2]=2*b[2]-1;b[3]=2*b[3]-1};r.Pj=function(a,b){for(var c=a.length,d=0,e=0,f=1,g=0;g<c;g++)switch(f/=2,a[g]){case "0":e+=f;break;case "1":d+=f,e+=f;case "2":break;case "3":d+=f;break;default:alert("Wrong quadKey: "+a)}b[0]=d;b[1]=e+f;b[2]=d+f;b[3]=e};
r.mc=function(a,b){b.x=0;b.y=0;b.xb=a.length;for(var c,d=b.xb;d>0;d--)switch(c=1<<d-1,a[b.xb-d]){case "1":b.x|=c;break;case "2":b.y|=c;break;case "3":b.x|=c,b.y|=c}};r.$l=function(a,b){var c={x:i,y:i,xb:i};this.mc(a,c);var d=4.007501668E7/Math.pow(2,c.xb);b[0]=-2.003750834E7+d*c.x;b[1]=2.003750834E7-d*(c.y+1);b[2]=-2.003750834E7+d*(c.x+1);b[3]=2.003750834E7-d*c.y};
r.am=function(a,b){var c=a.length,d=[],e=256*Math.pow(2,c);this.Pj(a,d);var f=d[0]*256*Math.pow(2,c),g=(1-d[1])*256*Math.pow(2,c),c=Math.min(Math.max(f,0),e-1)/e-0.5,j=0.5-Math.min(Math.max(g,0),e-1)/e,d=90-360*Math.atan(Math.exp(-j*2*Math.PI))/Math.PI,k=360*c,c=Math.min(Math.max(f,0),e-1)/e-0.5,j=0.5-Math.min(Math.max(g,0),e-1)/e,e=90-360*Math.atan(Math.exp(-j*2*Math.PI))/Math.PI;b[0]=d;b[1]=k;b[2]=e;b[3]=360*c};w("MercatorQuadtree",$e);$e.prototype.QuadKeyToMercatorCoord=$e.prototype.Zg;
$e.prototype.QuadKeyToNormalizedCoord=$e.prototype.Pj;$e.prototype.QuadKeyToTileCoord=$e.prototype.mc;$e.prototype.QuadKeyToMercator=$e.prototype.$l;$e.prototype.QuadKeyToWGS84=$e.prototype.am;var af={Oj:function(a){for(var b="",c=0;c<a.length;c++)c%2==0&&c>0&&c<a.length-4&&(b=b.concat("/")),b=b.concat(a[c]);return b}};w("GlobeUtils",af);w("GlobeUtils.MakeHierarchicalFilename",af.Oj);function bf(){this.Ea=p(!1);this.Jc=p(!1);this.Hb=m();this.Cd=p(0);this.Zb=p(0);this.ef=this.ff=-1;this.Ic=p(!1)};function cf(){this.k=this.nb=i;this.ia=new $e;this.Ca=0;this.Ea=p(!0);this.Jc=p(!1);this.Hb=function(a,b,c,d,e,f){var g={};this.ia.mc(b,g);g=this.nb[this.Ca]+"/"+g.xb+"/"+g.x+"/"+g.y+".png";a=new M(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;N(a,g,df,ef,!0);this.Ca++;if(this.Ca>=this.nb.length)this.Ca=0};this.Cd=p(0);this.Zb=p(18);this.Ic=function(a){if(a.length<19)return!0;return!1};this.Wa=ba("nb")}cf.prototype=new bf;function df(a){a.K(a.j,a,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}
function ef(a){a.J(a.j,a.caller,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i};function ff(){this.version=this.style=this.td=this.k=this.Xb=i;this.bb=1;this.ca=i;this.ia=new $e;this.Ea=p(!0);this.Jc=p(!1);this.Hb=function(a,b,c,d,e,f){var g={};this.ia.mc(b,g);g=this.Xb+"?SERVICE=WMTS&REQUEST=GetTile&VERSION=1.0.0&LAYER="+this.k+"&STYLE=default&TILEMATRIXSET=EPSG:900913&TILEMATRIX=EPSG%3A900913:"+g.xb+"&TILEROW="+g.y+"&TILECOL="+g.x+"&FORMAT=image%2Fpng";a=new M(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;a.bb=this.bb;N(a,g,gf,hf,!0)};this.Cd=p(0);this.Zb=p(19);this.Ic=p(!0);this.Wa=
function(a,b,c,d,e,f,g){this.Xb=a;this.k=b;this.td=d;this.style=e;this.version=f;this.bb=g;this.ca=c;if(this.td==i)this.td="image/png";if(this.style==i)this.style="";if(this.version==i)this.version="1.0.0";if(this.ca==i)this.ca="EPSG%3A900913";if(this.ca=="EPSG:900913")this.ca="EPSG%3A900913";if(this.ca=="ESRI:102100")this.ca="ESRI%3A102100";if(this.ca=="ESRI:102113")this.ca="ESRI%3A102113";if(this.ca=="EPSG:3785")this.ca="EPSG%3A3785";if(this.ca=="EPSG:3857")this.ca="EPSG%3A3857";if(this.ca=="EPSG:4326")this.ca=
"EPSG%3A4326"}}ff.prototype=new bf;function gf(a){a.K(a.j,a,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}function hf(a){a.J(a.j,a.caller,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i};function jf(){this.h=this.y=this.x=0}function Ye(){this.N=Array(6);this.N[0]=new kf;this.N[1]=new kf;this.N[2]=new kf;this.N[3]=new kf;this.N[4]=new kf;this.N[5]=new kf;this.X=Array(8);this.X[0]=new jf;this.X[1]=new jf;this.X[2]=new jf;this.X[3]=new jf;this.X[4]=new jf;this.X[5]=new jf;this.X[6]=new jf;this.X[7]=new jf}function kf(){this.Nd=this.Md=this.Ld=this.Ce=0}
kf.prototype.Kc=function(){var a=Math.sqrt(this.Ld*this.Ld+this.Md*this.Md+this.Nd*this.Nd);this.Ld/=a;this.Md/=a;this.Nd/=a;this.Ce/=a};
Ye.prototype.yi=function(a,b,c,d,e,f){this.X[0].x=a;this.X[0].y=b;this.X[0].h=c;this.X[1].x=d;this.X[1].y=b;this.X[1].h=c;this.X[2].x=d;this.X[2].y=e;this.X[2].h=c;this.X[3].x=a;this.X[3].y=e;this.X[3].h=c;this.X[4].x=a;this.X[4].y=b;this.X[4].h=f;this.X[5].x=a;this.X[5].y=e;this.X[5].h=f;this.X[6].x=d;this.X[6].y=e;this.X[6].h=f;this.X[7].x=d;this.X[7].y=b;this.X[7].h=f;for(a=0;a<6;a++){b=8;for(c=0;c<8;c++)this.N[a].Ld*this.X[c].x+this.N[a].Md*this.X[c].y+this.N[a].Nd*this.X[c].h+this.N[a].Ce<0&&
--b;if(b==0)return!1}return!0};
Ye.prototype.zi=function(a){this.wq=a;this.Eb=a.a;this.an=this.Eb[0];this.en=this.Eb[1];this.jn=this.Eb[2];this.wg=this.Eb[3];this.bn=this.Eb[4];this.fn=this.Eb[5];this.kn=this.Eb[6];this.xg=this.Eb[7];this.cn=this.Eb[8];this.gn=this.Eb[9];this.ln=this.Eb[10];this.yg=this.Eb[11];this.dn=this.Eb[12];this.hn=this.Eb[13];this.mn=this.Eb[14];this.zg=this.Eb[15];this.N[0].Ld=this.wg+this.an;this.N[0].Md=this.xg+this.bn;this.N[0].Nd=this.yg+this.cn;this.N[0].Ce=this.zg+this.dn;this.N[0].Kc();this.N[1].Ld=
this.wg-this.an;this.N[1].Md=this.xg-this.bn;this.N[1].Nd=this.yg-this.cn;this.N[1].Ce=this.zg-this.dn;this.N[1].Kc();this.N[2].Ld=this.wg-this.en;this.N[2].Md=this.xg-this.fn;this.N[2].Nd=this.yg-this.gn;this.N[2].Ce=this.zg-this.hn;this.N[2].Kc();this.N[3].Ld=this.wg+this.en;this.N[3].Md=this.xg+this.fn;this.N[3].Nd=this.yg+this.gn;this.N[3].Ce=this.zg+this.hn;this.N[3].Kc();this.N[4].Ld=this.wg+this.jn;this.N[4].Md=this.xg+this.kn;this.N[4].Nd=this.yg+this.ln;this.N[4].Ce=this.zg+this.mn;this.N[4].Kc();
this.N[5].Ld=this.wg-this.jn;this.N[5].Md=this.xg-this.kn;this.N[5].Nd=this.yg-this.ln;this.N[5].Ce=this.zg-this.mn;this.N[5].Kc()};w("ViewFrustum",Ye);Ye.prototype.TestBox=Ye.prototype.yi;Ye.prototype.Update=Ye.prototype.zi;function lf(){this.sh=this.th=!1;this.version=this.af=this.Op=this.Wn=this.$f=this.Sp=this.nn=this.kp=this.lp=this.Ab=this.pb=this.mp=this.Ap=this.Bp=i}
lf.prototype.Og=function(a){this.V=new XMLHttpRequest;this.V.open("GET",a,!0);var b=this;this.V.onreadystatechange=function(){a:if(b.V.readyState==4)if(b.V.status==200){var a=b.V.responseText,d;try{d=Fc(a)}catch(e){alert(e);break a}if(d.extent)if(b.version=1,b.Aq=d.name,b.Ab=d.maxlod,b.nn=256,a=d.extent,b.pb=a,b.Wn=[b.Ab,a[0],a[1],a[2],a[3]],d.type=="image")d.format=="png"?(b.$f="image/png",b.af=".png"):d.format=="jpg"?(b.$f="image/jpg",b.af=".jpg"):b.$f="image/png";else{if(d.type=="elevation")b.af=
".json"}else if(b.version=0,b.Bp=d.layer,b.Ap=d.copyright,b.mp=d.srs,b.pb=d.boundingbox,b.Ab=d.levelofdetail,b.lp=d.imagewidth,b.kp=d.imageheight,b.nn=d.tilesize,b.Sp=d.tilelayout,b.$f=d.tileformat,b.Wn=d.bounds,b.Op=d.center,b.$f=="image/png")b.af=".png";else if(b.$f=="image/jpg")b.af=".jpg";else if(b.$f=="elevation/json")b.af=".json";b.th=!0}else fc(E("owg.Datasetinfo"),"DATASET DOWNLOAD FAILED"),b.sh=!0};this.V.send()};w("DatasetInfo",lf);lf.prototype.Download=lf.prototype.Og;function mf(){this.I=new lf;this.k=this.Xb=i;this.ia=new $e;this.coords=Array(4);this.bb=1;this.Ea=function(){return this.I.th};this.Jc=function(){return this.I.sh};this.Hb=function(a,b,c,d,e,f){if(this.Ea()){var g=this.Xb+"/"+this.k+"/"+af.Oj(b+this.I.af),a=new M(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;a.bb=this.bb;N(a,g,nf,of,!0)}};this.Cd=p(0);this.Zb=function(){return this.I.Ab?this.I.Ab:0};this.Ic=function(a){if(a.length>this.I.Ab)return!1;this.ia.Zg(a,this.coords);var a=this.coords[0],b=this.coords[1],
c=this.coords[2],d=this.coords[3],e=this.I.pb[0],f=this.I.pb[1],g=this.I.pb[2],j=this.I.pb[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.Wa=function(a,b,c){this.bb=c==i?1:c;this.Xb=a;this.k=b;this.I.Og(a+"/"+b+".json")}}mf.prototype=new bf;function nf(a){a.K(a.j,a,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}function of(a){a.J(a.j,a.caller,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}w("i3dImageLayer",mf);mf.prototype.Failed=mf.prototype.Jc;mf.prototype.Ready=mf.prototype.Ea;
mf.prototype.RequestTile=mf.prototype.Hb;mf.prototype.Setup=mf.prototype.Wa;function pf(){this.Ea=p(!1);this.Jc=p(!1);this.Hb=m();this.Cd=p(0);this.Zb=p(0);this.Ic=p(!1)};function qf(){this.I=new lf;this.k=this.Xb=i;this.ia=new $e;this.coords=Array(4);this.Ea=function(){return this.I.th};this.Jc=function(){return this.I.sh};this.Hb=function(a,b,c,d,e,f){if(this.Ea()){var g=this.Xb+"/"+this.k+"_JSON/"+(af.Oj(b+".jso")+"n"),a=new K(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;Rc(a,g,rf,sf)}};this.Cd=p(0);this.Zb=function(){return this.I.Ab?this.I.Ab:0};this.Ic=function(a){if(a.length>this.I.Ab)return!1;this.ia.Zg(a,this.coords);var a=this.coords[0],b=this.coords[1],c=this.coords[2],
d=this.coords[3],e=this.I.pb[0],f=this.I.pb[1],g=this.I.pb[2],j=this.I.pb[3];if(d>f||d>f||b<j||b<j||a>g||a>g||c<e||c<e)return!1;return!0};this.Wa=function(a,b){this.Xb=a;this.k=b;this.I.Og(a+"/"+b+".json")}}qf.prototype=new pf;function rf(a){a.K(a.j,a,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}function sf(a){a.J(a.j,a.caller,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i};function tf(){this.version=this.style=this.td=this.k=this.Xb=i;this.bb=1;this.ca=i;this.ia=new $e;this.Ea=p(!0);this.Jc=p(!1);this.Hb=function(a,b,c,d,e,f){this.Xb.indexOf("?",this.Xb.length-1)==-1&&(this.Xb+="?");var g=Array(4);this.ca=="EPSG%3A4326"?this.ia.am(b,g):this.ia.$l(b,g);g=g[0]+","+g[1]+","+g[2]+","+g[3];g=this.Xb+"service=WMS&request=GetMap&WIDTH=256&HEIGHT=256&TILED=TRUE&SRS="+this.ca+"&LAYERS="+this.k+"&STYLES="+this.style+"&FORMAT="+this.td+"&VERSION="+this.version+"&BBOX="+g;a=new M(a);
a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;if(this.td=="image/png")a.bb=this.bb;N(a,g,uf,vf,!0)};this.Cd=p(0);this.Zb=p(30);this.Ic=function(a){if(a.length<31)return!0;return!1};this.Wa=function(a,b,c,d,e,f,g){this.Xb=a;this.k=b;this.td=d;this.style=e;this.version=f;this.bb=g;this.ca=c;if(this.td==i)this.td="image/png";if(this.style==i)this.style="";if(this.version==i)this.version="1.1.1";if(this.ca==i)this.ca="EPSG%3A900913";if(this.ca=="EPSG:900913")this.ca="EPSG%3A900913";if(this.ca=="ESRI:102100")this.ca=
"ESRI%3A102100";if(this.ca=="ESRI:102113")this.ca="ESRI%3A102113";if(this.ca=="EPSG:3785")this.ca="EPSG%3A3785";if(this.ca=="EPSG:3857")this.ca="EPSG%3A3857";if(this.ca=="EPSG:4326")this.ca="EPSG%3A4326"}}tf.prototype=new bf;function uf(a){a.K(a.j,a,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}function vf(a){a.J(a.j,a.caller,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i};function wf(){this.k=this.nb=i;this.ia=new $e;this.Ca=0;this.Ea=p(!0);this.Jc=p(!1);this.Hb=function(a,b,c,d,e,f){var g={};this.ia.mc(b,g);var j=Math.pow(2,g.xb),g=this.nb[this.Ca]+"/oym?f=m&ft=jpeg_sat_256&x="+(g.x-j/2)+"&y="+(j-g.y-j/2-1)+"&z="+(18-g.xb)+"&key=[KEY]",a=new M(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;N(a,g,xf,yf,!0);this.Ca++;if(this.Ca>=this.nb.length)this.Ca=0};this.Cd=p(0);this.Zb=p(16);this.Ic=function(a){if(a.length<17)return!0;return!1};this.Wa=ba("nb")}cf.prototype=new bf;
function xf(a){a.K(a.j,a,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}function yf(a){a.J(a.j,a.caller,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i};function zf(){this.I=new lf;this.k=this.Xb=i;this.ia=new $e;this.coords=Array(4);this.Ca=0;this.Ea=function(){return this.I.th};this.Jc=function(){return this.I.sh};this.Hb=function(a,b,c,d,e,f){if(this.Ea()){var g={};this.ia.mc(b,g);g=this.nb[this.Ca]+"/"+this.k+"/tiles/"+g.xb+"/"+g.x+"/"+g.y+".json";a=new K(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;Rc(a,g,Af,Bf);this.Ca++;if(this.Ca>=this.nb.length)this.Ca=0}};this.Cd=p(0);this.Zb=function(){return this.I.Ab?this.I.Ab:0};this.Ic=function(a){if(a.length>
this.I.Ab)return!1;for(var b=a,c=a,d=0;d<this.I.Ab-a.length;d++)b+="0",c+="3";d={};this.ia.mc(b,d);b=d.x;a=d.y;this.ia.mc(c,d);var c=d.x,d=d.y,e=this.I.pb[0],f=this.I.pb[1],g=this.I.pb[3];return!(b>this.I.pb[2]||c<e||a>g||d<f)};this.Wa=function(a,b){this.nb=a;this.k=b;this.I.Og(a[0]+"/"+b+"/layersettings.json")}}zf.prototype=new pf;function Af(a){a.K(a.j,a,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}function Bf(a){a.J(a.j,a.caller,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i};function Cf(){this.k=this.nb=i;this.ia=new $e;this.sub=this.Ca=0;this.Lp=["Galile","Galil","Gali","Gal","Ga","G"];this.Ea=p(!0);this.Jc=p(!1);this.Hb=function(a,b,c,d,e,f){var g={};this.ia.mc(b,g);g=this.nb[this.Ca]+"/kh/v=101&x="+g.x+"&y="+g.y+"&z="+g.xb+"&s="+this.Lp[this.sub];this.sub++;if(this.sub==5)this.sub=0;a=new M(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;N(a,g,df,ef,!0);this.Ca++;if(this.Ca>=this.nb.length)this.Ca=0};this.Cd=p(0);this.Zb=p(19);this.Ic=function(a){if(a.length<20)return!0;return!1};
this.Wa=ba("nb")}Cf.prototype=new cf;function Df(a,b){this.Tf=a||-1;this.Xo=b||!1;this.Xe={};this.Ra=0;this.xn=Math.round(this.Tf*0.75);this.Od={};this.Od.hits=0;this.Od.misses=0;Ef(this,"Initialized cache with size "+a)}Df.prototype.getItem=function(a){var b=this.Xe[a];if(b!=i)Ff(b)?(Gf(this,a),b=i):b.Xi=(new Date).getTime();(b=b?b.value:i)?(this.Od.hits++,Ef(this,"Cache HIT for key "+a)):(this.Od.misses++,Ef(this,"Cache MISS for key "+a));return b};
Df.prototype.setItem=function(a,b,c){this.Xe[a]!=i&&Gf(this,a);Hf(this,new function(a,b,c){(a==i||a=="")&&aa(Error("key cannot be null or empty"));this.key=a;this.value=b;c==i&&(c={});if(c.Pi!=i)c.Pi=c.Pi.getTime();if(c.Wh==i)c.Wh=2;this.options=c;this.Xi=(new Date).getTime()}(a,b,c));Ef(this,"Setting key "+a);if(this.Tf>0&&this.Ra>this.Tf){var d=this;setTimeout(function(){d.zp.call(d)},0)}};Df.prototype.clear=function(){for(var a in this.Xe)Gf(this,a);Ef(this,"Cache cleared")};
Df.prototype.zp=function(){var a=[],b;for(b in this.Xe){var c=this.Xe[b];Ff(c)?Gf(this,b):a.push(c)}if(a.length>this.xn)for(a=a.sort(function(a,b){return a.options.Wh!=b.options.Wh?b.options.Wh-a.options.Wh:b.Xi-a.Xi});a.length>this.xn;)Gf(this,a.pop().key);Ef(this,"Purged cached")};function Hf(a,b){a.Xe[b.key]=b;a.Ra++}
function Gf(a,b){var c=a.Xe[b];delete a.Xe[b];a.Ra--;Ef(a,"removed key "+b);c.options.Ro!=i&&setTimeout(function(){c.options.Ro.call(i,c.key,c.value)},0);c.o!=i&&setTimeout(function(){c.o()},0)}function Ff(a){var b=(new Date).getTime(),c=!1;a.options.Pi&&a.options.Pi<b&&(c=!0);!c&&a.options.cp&&a.Xi+a.options.cp*1E3<b&&(c=!0);return c}function Ef(a,b){a.Xo&&E("owg.Cache").info(b)};function If(a,b,c){a=H(a)-0;b=Math.log(Math.tan(Math.PI/4+H(b)/2));a/=Math.PI;b/=Math.PI;c[0]=a;c[1]=b}function Jf(a,b,c){a*=Math.PI;b*=Math.PI;b=Math.PI/2-2*Math.atan(Math.exp(-b));b=oc(b);for(a=oc(a/1+0);a>180;)a-=180;for(;a<-180;)a+=180;for(;b>90;)b-=180;for(;b<-90;)b+=180;c[0]=a;c[1]=b};function Kf(a,b,c){this.c=a;this.j=b;this.ia=c;this.l=i;this.Pc=!1;this.v=i;this.Jm=!0;this.ja=[];this.kb=Array(5);this.kb[0]=new I;this.kb[1]=new I;this.kb[2]=new I;this.kb[3]=new I;this.kb[4]=new I;this.rg=0;this.images=i;this.nk=!1;this.Ni=0;this.Ai=new I;this.Pd=new J;this.Rf=-180;this.Of=-90;this.ug=180;this.tg=90;var d=Array(4),e=Array(2);this.ia.Zg(this.j,d);var a=Array(3),b=Array(3),c=Array(3),f,g,j=new O;f=d[0];g=d[1];Jf(f,g,e);f=e[0];g=e[1];this.Rf=f;this.tg=g;j.p(f,g,0);j.pa(a);f=d[2];
g=d[1];Jf(f,g,e);f=e[0];g=e[1];j.p(f,g,0);j.pa(b);f=d[2];g=d[3];Jf(f,g,e);f=e[0];g=e[1];this.ug=f;this.Of=g;j.p(f,g,0);j.pa(c);d=new I;e=new I;d.p(b[0]-a[0],b[1]-a[1],b[2]-a[2]);e.p(c[0]-a[0],c[1]-a[1],c[2]-a[2]);tc(this.Ai,d,e);this.Ai.Kc()}var Lf=0;
function Mf(a){if(a.rg==0&&a.Ni==0){var b=0,c=0;if(a.images!==i)for(var d=0;d<a.images.length;d++)a.images[d]!=i&&(b++,c=d);b==0?(a.l=a.c.Xk,a.v===i&&Nf(a),a.v.Oc(a.l),a.Pc=!0,a.images=i):b==1?(a.l=a.images[c],a.v===i&&Nf(a),a.v.Oc(a.l),a.Pc=!0,a.images=i):(a.nk=!0,a.v===i&&Nf(a),a.Pc=!0)}}function Of(a,b,c){a=b.caller;a.images[c]=b;a.rg-=1;Mf(a);Lf--}function Pf(a,b,c){c>=0?(b.images[c]=i,b.rg-=1):(b.images=i,b.rg=0);Mf(b);Lf--}
function Qf(a,b){var c=b.caller;c.v=b;c.v.xb=c.j.length;c.ja=b.Ia;c.kb[0].p(b.Z[0],b.Z[1],b.Z[2]);c.kb[1].p(b.xa[0],b.Z[1],b.Z[2]);c.kb[2].p(b.xa[0],b.xa[1],b.Z[2]);c.kb[3].p(b.Z[0],b.xa[1],b.Z[2]);c.kb[4].p(0.5*(b.xa[0]-b.Z[0]),0.5*(b.xa[1]-b.Z[1]),0.5*(b.xa[2]-b.Z[2]));c.Ni-=1;Mf(c);Lf--}function Rf(a,b){b.v=i;b.Ni-=1;Mf(b);Lf--}Kf.prototype.o=function(){this.l&&this.l.o();this.v&&this.v.o()};
function Nf(a){a.Jm=!1;a.v=new K(a.c);a.v.xb=a.j.length;var b;b=a.j.length<3?2:a.j.length<6?9:5;for(var c=Array(2*b*b),d=1/(b-1),e=0;e<b;e++)for(var f=0;f<b;f++)c[2*(e*b+f)+0]=f*d,c[2*(e*b+f)+1]=1-e*d;var f=[],g,j,d=Array(4),k=Array(2),l=Array(3);a.ia.Zg(a.j,d);g=d[0];j=d[1];for(var n=(d[3]-j)/(b-1),q=(d[2]-g)/(b-1),o,s,t,x=new O,d=0;d<b;d++)for(e=0;e<b;e++){o=g+e*q;s=j+d*n;Jf(o,s,k);x.p(k[0],k[1],0);x.pa(l);o=l[0];s=l[1];t=l[2];if(e==0&&d==0)a.ja=[o,s,t];e==0&&d==0?a.kb[0].p(o,s,t):e==b-1&&d==0?
a.kb[1].p(o,s,t):e==b-1&&d==b-1?a.kb[2].p(o,s,t):e==0&&d==b-1?a.kb[3].p(o,s,t):e==(b-1)/2&&d==(b-1)/2&&a.kb[4].p(o,s,t);f.push(o-a.ja[0]);f.push(s-a.ja[1]);f.push(t-a.ja[2])}g=Array(5*b*b);for(d=0;d<b*b;d++)g[5*d+0]=f[3*d+0],g[5*d+1]=f[3*d+1],g[5*d+2]=f[3*d+2],g[5*d+3]=c[2*d+0],g[5*d+4]=c[2*d+1];for(var c=[],B,e=j=f=0;e<=b-2;e+=1){for(d=0;d<=b-1;d+=1)k=e,B=e+1,n=j%2==0?l=b-1-d:l=d,B+=n*b,c[f++]=k+l*b,c[f++]=B;c[f++]=B;j+=1}Kc(a.v,g);Nc(a.v,c,"TRIANGLESTRIP");a.v.Oc(a.l);a.v.Ia=a.ja;Sc(a.v)}
Kf.prototype.rb=function(a){if(!(this.j.length<3)){if(a){if(this.Pd.ba(this.c.Qb),this.Pd.a[12]+=this.ja[0],this.Pd.a[13]+=this.ja[1],this.Pd.a[14]+=this.ja[2],this.c.Mc(),this.c.Nc(this.Pd),a=this.v,a.Ea){a.fa==i&&a.Pe();a.b.bindBuffer(a.b.ARRAY_BUFFER,a.fa);a.b.bindBuffer(a.b.ELEMENT_ARRAY_BUFFER,a.Nb);a.ka&&(a.c.Mc(),a.ye.U(a.ka,a.c.Qb),a.c.Nc(a.ye));switch(a.mode){case "p":a.b.enableVertexAttribArray(0);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,12,0);Oc(a.c.Ua,a.c.qa,a.hc);break;case "pnt":a.b.enableVertexAttribArray(0);
a.b.enableVertexAttribArray(1);a.b.enableVertexAttribArray(2);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,32,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,!1,32,12);a.b.vertexAttribPointer(2,2,a.b.FLOAT,!1,32,24);Oc(a.c.Ua,a.c.qa,a.hc);break;case "pc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,28,0);a.b.vertexAttribPointer(1,4,a.b.FLOAT,!1,28,12);Oc(a.c.Ua,a.c.qa,a.hc);break;case "pnc":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);
a.b.enableVertexAttribArray(2);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,40,0);a.b.vertexAttribPointer(1,3,a.b.FLOAT,!1,40,12);a.b.vertexAttribPointer(2,4,a.b.FLOAT,!1,40,24);Qc(a.c.Ua,a.c.Mh,a.c.Sf,a.c.qa,a.hc);break;case "pt":a.b.enableVertexAttribArray(0);a.b.enableVertexAttribArray(1);a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,20,0);a.b.vertexAttribPointer(1,2,a.b.FLOAT,!1,20,12);Oc(a.c.Ua,a.c.qa,a.hc);break;case "pnct":a.b.enableVertexAttribArray(0),a.b.enableVertexAttribArray(1),a.b.enableVertexAttribArray(2),
a.b.enableVertexAttribArray(3),a.b.vertexAttribPointer(0,3,a.b.FLOAT,!1,48,0),a.b.vertexAttribPointer(1,3,a.b.FLOAT,!1,48,12),a.b.vertexAttribPointer(2,4,a.b.FLOAT,!1,48,24),a.b.vertexAttribPointer(3,2,a.b.FLOAT,!1,48,40),Oc(a.c.Ua,a.c.qa,a.hc)}switch(a.qe){case "TRIANGLES":a.b.drawElements(a.b.TRIANGLES,a.ib,a.b.UNSIGNED_SHORT,0);break;case "TRIANGLESTRIP":a.b.drawElements(a.b.TRIANGLE_STRIP,a.ib,a.b.UNSIGNED_SHORT,0)}a.b.disableVertexAttribArray(0);a.b.disableVertexAttribArray(1);a.b.disableVertexAttribArray(2);
a.b.disableVertexAttribArray(3)}}else{if(this.nk){this.nk=!1;a=this.l=new M(this.c,!0,256,256);this.c.of.push(a);a.ih();for(a=0;a<this.images.length;a++)this.images[a]!=i&&(this.images[a].bb<1?this.images[a].T(0,0,0,0,1,1,!0,!0,this.images[a].bb):this.images[a].T(0,0,0,0,1,1,!0,!0,1));Ve(this.c);for(a=0;a<this.images.length;a++)this.images[a]!=i&&this.images[a].o();this.images=i;this.v.Oc(this.l)}this.Pd.ba(this.c.Qb);this.Pd.a[12]+=this.ja[0];this.Pd.a[13]+=this.ja[1];this.Pd.a[14]+=this.ja[2];this.c.Mc();
this.c.Nc(this.Pd);if(this.c.e.r.Da.gl==Sf)this.v.mode="pt";else if(this.c.e.r.Da.gl==Tf)this.v.mode="pt_chroma";this.v.ra()}this.c.Ed()}};function Uf(a,b,c,d,e){this.c=a;this.ua=b;this.vb=c;this.ia=d;this.Fi=new Df(e,!1);this.kl={};this.kl.pn=0}Uf.prototype.o=function(){this.ia=this.vb=this.ua=this.c=i;this.Fi.clear();this.Fi=i};Uf.prototype.Tl=function(){if(!this.ua)return!1;if(this.ua.length==0)return!1;for(var a=0;a<this.ua.length;a++)if(!this.ua[a].Ea())return!1;if(this.vb)for(a=0;a<this.vb.length;a++)if(!this.vb[a].Ea())return!1;return!0};
Uf.prototype.Xd=function(a){var b=this.Fi.getItem(a);if(b==i){this.kl.pn++;var c=b=new Kf(this.c,a,this.ia),d=this.ua,e=this.vb;if(c.j.length<3)Pf(0,c,-1);else{if(d.length>0){c.rg=d.length;c.images=Array(c.rg);for(var f=0;f<d.length;f++){c.images[f]=i;var g=c.j.length,g=(g<=d[f].ef||d[f].ef==-1)&&(g>=d[f].ff||d[f].ff==-1);d[f].Ic(c.j)&&g?(d[f].Hb(c.c,c.j,f,Of,Pf,c),Lf++):Pf(0,c,f)}}if(e&&e.length>0&&c.j.length>8&&e[0].Ic(c.j))c.Ni=1,e[0].Hb(c.c,c.j,0,Qf,Rf,c),Lf++}this.Fi.setItem(a,b)}return b};
Uf.prototype.Zb=function(){var a=0,b=0;if(this.vb.length>0)for(var c=0;c<this.vb.length;c++)b=Math.max(b,this.vb[c].Zb());for(c=0;c<this.ua.length;c++)a=Math.max(a,this.ua[c].Zb());if(b>0)return Math.min(b,a);return a};w("GlobeCache",Uf);Uf.prototype.IsReady=Uf.prototype.Tl;Uf.prototype.RequestBlock=Uf.prototype.Xd;function Vf(){this.I=new lf;this.k=i;this.ia=new $e;this.coords=Array(4);this.bb=1;this.Ca=0;this.Ea=function(){return this.I.th};this.Jc=function(){return this.I.sh};this.Hb=function(a,b,c,d,e,f){if(this.Ea()){var g={};this.ia.mc(b,g);g=this.nb[this.Ca]+"/"+this.k+"/tiles/"+g.xb+"/"+g.x+"/"+g.y+this.I.af;a=new M(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;a.bb=this.bb;N(a,g,Wf,Xf,!0);this.Ca++;if(this.Ca>=this.nb.length)this.Ca=0}};this.Cd=p(0);this.Zb=function(){return this.I.Ab?this.I.Ab:0};this.Ic=
function(a){if(a.length>this.I.Ab)return!1;for(var b=a,c=a,d=0;d<this.I.Ab-a.length;d++)b+="0",c+="3";d={};this.ia.mc(b,d);b=d.x;a=d.y;this.ia.mc(c,d);var c=d.x,d=d.y,e=this.I.pb[0],f=this.I.pb[1],g=this.I.pb[3];return!(b>this.I.pb[2]||c<e||a>g||d<f)};this.Wa=function(a,b,c){this.bb=c==i?1:c;this.nb=a;this.k=b;this.I.Og(a[0]+"/"+b+"/layersettings.json")}}Vf.prototype=new bf;function Wf(a){a.K(a.j,a,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}
function Xf(a){a.J(a.j,a.caller,a.k);a.K=i;a.J=i;a.j=i;a.caller=i;a.k=i}w("owgImageLayer",Vf);Vf.prototype.Failed=Vf.prototype.Jc;Vf.prototype.Ready=Vf.prototype.Ea;Vf.prototype.RequestTile=Vf.prototype.Hb;Vf.prototype.Setup=Vf.prototype.Wa;function Yf(){this.bb=1;this.Hb=function(a,b,c,d,e,f){var g={};this.ia.mc(b,g);g.y=Math.pow(2,g.xb)-1-g.y;g=this.nb[this.Ca]+"/"+g.xb+"/"+g.x+"/"+g.y+".png";a=new M(a);a.j=b;a.k=c;a.K=d;a.J=e;a.caller=f;a.bb=this.bb;N(a,g,df,ef,!0)}}Yf.prototype=new cf;function Zf(a){this.c=a;this.ua=[];this.vb=[];this.ia=new $e;this.Qo=1E3;this.eb=i;this.M=[];this.Pm=0;this.Kh={};this.Kh.Ii=0;this.vh=i;this.Tk=0;this.yn=1;this.Te=new Ye;this.ya=Array(3);this.Sk=new J;this.Vf=new K(this.c);this.ag=new K(this.c);this.Wf=[8/255,24/255,58/255];this.bg=[1,1,1];this.fl=1;this.gl=Sf;this.An={}}r=Zf.prototype;r.o=function(){if(this.eb)this.eb.o(),this.eb=i;if(this.Vf)this.Vf.o(),this.Vf=i;if(this.ag)this.ag.o(),this.ag=i};
r.Cj=function(a){var b=-1;if(v(a.service))if(a.service=="i3d"){if(v(a.url)&&v(a.layer)&&a.url.length>0){var b=a.url[0],c=a.layer,d=new mf;if(v(a.minlod))d.ff=a.minlod;if(v(a.maxlod))d.ef=a.maxlod;d.Wa(b,c,a.transparency);b=this.ua.length;this.ua.push(d);$f(this)}}else if(a.service=="osm"){if(v(a.url)&&a.url.length>0){d=new cf;if(v(a.minlod))d.ff=a.minlod;if(v(a.maxlod))d.ef=a.maxlod;d.Wa(a.url);b=this.ua.length;this.ua.push(d);$f(this)}}else if(a.service=="tms"){if(v(a.url)&&a.url.length>0){d=new Yf;
if(v(a.minlod))d.ff=a.minlod;if(v(a.maxlod))d.ef=a.maxlod;d.Wa(a.url);b=this.ua.length;this.ua.push(d);$f(this)}}else if(a.service=="wmts"){if(v(a.url)&&a.url.length>0&&v(a.layer)&&a.layer.length>0){d=new ff;if(v(a.format))d.td=a.format;if(v(a.style))d.style=a.style;if(v(a.version))d.version=a.version;d.Wa(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency);b=this.ua.length;this.ua.push(d);$f(this)}}else if(a.service=="wms"){if(v(a.url)&&a.url.length>0&&v(a.layer)&&a.layer.length>0){d=
new tf;if(v(a.format))d.td=a.format;if(v(a.style))d.style=a.style;if(v(a.version))d.version=a.version;d.Wa(a.url,a.layer,a.SRS,a.format,a.style,a.version,a.transparency);b=this.ua.length;this.ua.push(d);$f(this)}}else if(a.service=="owg"){if(v(a.url)&&a.url.length>0){c=a.layer;d=new Vf;if(v(a.minlod))d.ff=a.minlod;if(v(a.maxlod))d.ef=a.maxlod;d.Wa(a.url,c,a.transparency);b=this.ua.length;this.ua.push(d);$f(this)}}else if(a.service=="goo"){if(v(a.url)&&a.url.length>0){d=new Cf;if(v(a.minlod))d.ff=
a.minlod;if(v(a.maxlod))d.ef=a.maxlod;d.Wa(a.url);b=this.ua.length;this.ua.push(d);$f(this)}}else if(a.service=="oym"&&v(a.url)&&a.url.length>0){d=new wf;if(v(a.minlod))d.ff=a.minlod;if(v(a.maxlod))d.ef=a.maxlod;d.Wa(a.url);b=this.ua.length;this.ua.push(d);$f(this)}return b};
r.Bj=function(a){var b=-1;if(a.service=="i3d"){if(a.url&&a.layer&&a.url.length>0){var b=a.layer,c=new qf;c.Wa(a.url[0],b);b=this.vb.length;this.vb.push(c);$f(this)}}else if(a.service=="owg"&&a.url&&a.layer&&a.url.length>0){var d=a.url,b=a.layer,c=new zf;c.Wa(d,b);b=this.vb.length;this.vb.push(c);$f(this)}return b};r.Uj=function(a){a<0||a>=this.ua.length||(this.ua.splice(a,1),$f(this))};r.Sj=function(a){a<0||a>=this.vb.length||(this.vb.splice(a,1),$f(this))};
function $f(a){if(a.eb)a.eb.o(),a.eb=i;a.eb=new Uf(a.c,a.ua,a.vb,a.ia,a.Qo)}
r.rb=function(a,b){this.eb.kl.pn=0;this.Sk.ba(b);this.Te.zi(b);this.vh=a;if(this.eb&&this.eb.Tl()){this.Tk=this.eb.Zb();var c=this.eb.Xd("0"),d=this.eb.Xd("1"),e=this.eb.Xd("2"),f=this.eb.Xd("3");if(c.Pc&&d.Pc&&e.Pc&&f.Pc){this.M=[];this.M.push(c);this.M.push(d);this.M.push(e);this.M.push(f);for(this.Kh.Ii=0;this.Kh.Ii!=this.M.length;)a:{c=this.Kh.Ii;if(this.M[c].j.length!=this.Tk&&this.M[c].Pc&&ag(this,c)){var g=this.M[c].j,d=this.eb.Xd(g+"0"),e=this.eb.Xd(g+"1"),f=this.eb.Xd(g+"2"),g=this.eb.Xd(g+
"3");if(d.Pc&&e.Pc&&f.Pc&&g.Pc){this.M.splice(c,1);this.M.push(d);this.M.push(e);this.M.push(f);this.M.push(g);break a}}this.Kh.Ii++}for(c=0;c<this.M.length;)e=this.M[c],d=e.kb[4].a,e=e.Ai.a,f=this.vh.a,this.ya[0]=f[0]-d[0],this.ya[1]=f[1]-d[1],this.ya[2]=f[2]-d[2],(this.ya[0]*e[0]+this.ya[1]*e[1]+this.ya[2]*e[2])/Math.sqrt(this.ya[0]*this.ya[0]+this.ya[1]*this.ya[1]+this.ya[2]*this.ya[2])>=0.4?this.M.splice(c,1):c++;for(c=0;c<this.M.length;c++)this.M[c].rb(!1);d=[];e=[];for(c=0;c<this.M.length;c++){var f=
this.M[c].j,g=0,j=f.charAt(0);if(j=="0"||j=="1")g=1;if(j=="2"||j=="3")g=2;for(var k=1;k<f.length;k++){j=f.charAt(k);if((j=="0"||j=="1")&&g=="2"){g=0;break}if((j=="2"||j=="3")&&g=="1"){g=0;break}}g==1&&d.push(this.M[c]);g==2&&e.push(this.M[c])}d.length>3&&bg(this,d);e.length>3&&cg(this,e)}}};
function ag(a,b){var c=!0,d=a.M[b],e=d.j.length;if(e>a.Tk)return!1;if(e<3)return!0;c=a.Te.yi(d.v.Z[0],d.v.Z[1],d.v.Z[2],d.v.xa[0],d.v.xa[1],d.v.xa[2]);if(!c)return!1;var f=d.kb[4].a,g=d.Ai.a,e=a.vh.a;a.ya[0]=e[0]-f[0];a.ya[1]=e[1]-f[1];a.ya[2]=e[2]-f[2];f=Math.sqrt(a.ya[0]*a.ya[0]+a.ya[1]*a.ya[1]+a.ya[2]*a.ya[2]);f>0&&(a.ya[0]/=f,a.ya[1]/=f,a.ya[2]/=f);a.ya[0]*g[0]+a.ya[1]*g[1]+a.ya[2]*g[2]>0.4&&(c=!1);if(!c)return!1;for(var c=[0,0,0],g=0,f=1.0E20,j=d.v.A.length/d.v.S,k=0;k<j;k++)c[0]=e[0]-(d.v.A[5*
k]+d.ja[0]),c[1]=e[1]-(d.v.A[5*k+1]+d.ja[1]),c[2]=e[2]-(d.v.A[5*k+2]+d.ja[2]),g=c[0]*c[0]+c[1]*c[1]+c[2]*c[2],g<f&&(f=g);e=Math.sqrt(f);c=a.yn;g=d.kb[0].jf();g.Yj(d.kb[1]);return c*g.Mj()/e>1}
r.Wd=function(a,b,c){for(var b=this.c.kf(a,b,this.Sk,!0),d=[],e=a=0;e<this.M.length;e++){var f=this.M[e].v.Z,g=this.M[e].v.xa;this.M[e].v.Bi.Sg(b.x,b.y,b.h,b.le,b.me,b.ne,f[0],f[1],f[2],g[0],g[1],g[2])&&d.push(this.M[e])}f=1.0E20;c.hit=!1;c.numhits=d.length;for(e=0;e<d.length;e++)if((g=d[e].v.Ne(b.x,b.y,b.h,b.le,b.me,b.ne))&&g.L<f)c.hit=!0,f=g.L,a=d[e].Jm?0:1;c.tmin=f;if(c.hit)c.x=b.x+f*b.le,c.y=b.y+f*b.me,c.z=b.h+f*b.ne,b=new O(0,0,0),b.lc(c.x,c.y,c.z),c.lng=b.G[0],c.lat=b.G[1],c.elv=b.G[2],a==1&&
(c.elv=0)};r.lg=function(a,b,c,d){if(d)if(d={},this.Wd(a,b,d),d.hit)this.fl=Math.sqrt(d.x*d.x+d.y*d.y+d.z*d.z);else return;var e=this.c.kf(a,b,this.Sk,!0);c.hit=!1;var f=e.x,b=e.y,a=e.h,g=e.le,d=e.me,e=e.ne,j=g*g+d*d+e*e,k=f*g+b*d+a*e,l=k*k-j*(f*f+b*b+a*a-this.fl*this.fl);if(!(l<=0))j=(0-k-Math.sqrt(l))/j,f+=g*j,b+=d*j,a+=e*j,d=1/Math.sqrt(f*f+b*b+a*a),c.hit=!0,c.x=f*d,c.y=b*d,c.z=a*d,a=new O(0,0,0),a.lc(c.x,c.y,c.z),c.lng=a.G[0],c.lat=a.G[1],c.elv=a.G[2]};
r.hg=function(a,b){var c={hasvalue:!1,elevation:0,lod:-1},d=[0,0,0],e=[0,0,0],f=new O(a,b,0);f.pa(e);f.p(a,b,-1);f.pa(d);var g,j,f=d[0];g=d[1];j=d[2];var k=e[0]-d[0],l=e[1]-d[1],d=e[2]-d[2],e=Math.sqrt(k*k+l*l+d*d);k/=e;l/=e;d/=e;for(var e=[],n=0;n<this.M.length;n++){var q=this.M[n].v.Z,o=this.M[n].v.xa;this.M[n].v.Bi.Sg(f,g,j,k,l,d,q[0],q[1],q[2],o[0],o[1],o[2])&&e.push(this.M[n])}q=1.0E20;for(n=0;n<e.length;n++)if((o=e[n].v.Ne(f,g,j,k,l,d))&&o.L<q)c.hasvalue=!0,c.lod=e[n].v.xb,q=o.L;if(c.hasvalue)c.x=
f+q*k,c.y=g+q*l,c.z=j+q*d,f=new O(0,0,0),f.lc(c.x,c.y,c.z),c.lng=f.G[0],c.lat=f.G[1],c.elevation=f.G[2];return c};
function bg(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].j.length>c)c=b[d].j.length;for(d=0;d<b.length;d++)for(b[d].Ac=b[d].j;b[d].Ac.length<c;)b[d].Ac+="0";b.sort(function(a,b){return parseInt(a.Ac,2)-parseInt(b.Ac,2)});for(var d=[0,0,0.7577840175609609],c=[d[0],d[1],d[2],a.Wf[0],a.Wf[1],a.Wf[2],1],e=[],d=0;d<b.length;d++)for(var f=2;b[d].v.A[f]==0;)c.push(b[d].ja[0]+b[d].v.A[f-2]),c.push(b[d].ja[1]+b[d].v.A[f-1]),c.push(b[d].ja[2]+b[d].v.A[f]),c.push(a.Wf[0]),c.push(a.Wf[1]),c.push(a.Wf[2]),c.push(1),
f+=5;for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);e.push(2);e.push(3);a.Vf.o();a.Vf=new K(a.c);a.Vf.kc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},i,i);a.Vf.ra()}
function cg(a,b){for(var c=0,d=0;d<b.length;d++)if(b[d].j.length>c)c=b[d].j.length;for(d=0;d<b.length;d++){b[d].Ac=b[d].j;b[d].Ac=b[d].Ac.replace(/2/g,"0");for(b[d].Ac=b[d].Ac.replace(/3/g,"1");b[d].Ac.length<c;)b[d].Ac+="0"}b.sort(function(a,b){return parseInt(b.Ac,2)-parseInt(a.Ac,2)});for(var d=[0,0,-0.7577840175609609],c=[d[0],d[1],d[2],a.bg[0],a.bg[1],a.bg[2],1],e=[],d=0;d<b.length;d++){var f=b[d].v.A.length;for(f-=1;b[d].v.A[f]==0;)c.push(b[d].ja[0]+b[d].v.A[f-4]),c.push(b[d].ja[1]+b[d].v.A[f-
3]),c.push(b[d].ja[2]+b[d].v.A[f-2]),c.push(a.bg[0]),c.push(a.bg[1]),c.push(a.bg[2]),c.push(1),f-=5}for(d=0;d<c.length/7-2;d++)e.push(d);e.push(1);a.ag.o();a.ag=new K(a.c);a.ag.kc({VertexSemantic:"pc",Vertices:c,IndexSemantic:"TRIANGLEFAN",Indices:e},i,i);a.ag.ra()}
r.Jg=function(){if(!this.vh)return NaN;var a=[],b=this.vh.a,c=new I;if(this.vb.length==0)return c=new O,c.lc(b[0],b[1],b[2]),c.G[2];c.p(-b[0],-b[1],-b[2]);for(var c=c.a,d=0;d<this.M.length;d++){var e=this.M[d].v.Z,f=this.M[d].v.xa;this.M[d].v.Bi.Sg(b[0],b[1],b[2],c[0],c[1],c[2],e[0],e[1],e[2],f[0],f[1],f[2])&&a.push(this.M[d])}e=1.0E20;f=!1;for(d=0;d<a.length;d++){var g=a[d].v.Ne(b[0],b[1],b[2],c[0],c[1],c[2]);if(g&&g.L<e)f=!0,e=g.L}if(f)return b=e*c[0],a=e*c[1],c=e*c[2],b=Math.sqrt(b*b+a*a+c*c)*
nc,e<0&&(b=-b),this.Pm=b;return this.Pm};r.vi=ba("gl");var Sf=0,Tf=1;function dg(a){this.c=a;this.ma=[]}
dg.prototype.rb=function(){for(var a=0;a<this.ma.length;a++){var b=new J;b.ba(this.c.Qb);b.a[12]+=this.ma[a].ja[0];b.a[13]+=this.ma[a].ja[1];b.a[14]+=this.ma[a].ja[2];this.c.Mc();this.c.Nc(b);var b=this.ma[a],c=this.ma[a],d=this.c.b;d.colorMask(!1,!1,!1,!1);d.enable(d.CULL_FACE);d.enable(d.DEPTH_TEST);d.depthMask(!1);d.depthFunc(d.GEQUAL);d.enable(d.STENCIL_TEST);d.stencilFunc(d.ALWAYS,0,0);d.stencilOp(d.KEEP,d.KEEP,d.INCR);d.cullFace(d.FRONT);for(var e=0;e<b.length;e++)b[e].ra();d.stencilOp(d.KEEP,
d.KEEP,d.DECR);d.cullFace(d.BACK);for(e=0;e<b.length;e++)b[e].ra();d.depthMask(!0);d.colorMask(!0,!0,!0,!0);d.cullFace(d.FRONT);d.stencilFunc(d.NOTEQUAL,0,1);d.stencilOp(d.KEEP,d.KEEP,d.KEEP);d.enable(d.BLEND);d.depthMask(!0);for(e=0;e<c.length;e++)c[e].ra();d.stencilFunc(d.NOTEQUAL,0,2);for(e=0;e<c.length;e++)c[e].ra();d.disable(d.BLEND);d.enable(d.DEPTH_TEST);d.enable(d.CULL_FACE);d.cullFace(d.BACK);d.depthFunc(d.LESS);d.disable(d.STENCIL_TEST);this.c.Ed()}};
dg.prototype.Gl=function(a){this.ma.push(a);return this.ma.length-1};dg.prototype.ti=function(a){this.ma.splice(a,1)};function eg(){this.name="ogGeometry";this.type=Na;this.gb=[];this.vg=[];this.fb=-1;this.O=!1;this.re="";this.options=this.md=this.ke=i;this.Pf=-1;this.rn=this.ze=i}eg.prototype=new C;r=eg.prototype;
r.Na=function(a){this.options=a;a.url&&fg(this,a.url);a.jsonobject&&this.kc(a.jsonobject);if(a.type=="EarthPolyline")this.rn=V(bb,this,this.options),this.fb=gg(this).Bd(this.rn.Se);else if(a.type=="solidcube"){v(a.srs)||(a.srs="EPSG:4326");v(a.position)||(a.position=[0,0,0]);v(a.color)||(a.color=[1,1,1]);var b=this.parent.parent.c,c=i;if(b.e&&b.e.r)c=b.e.r.Jf;if(c){var b=new K(b),d=a.position,e=a.length,f=a.color;if(a.srs=="EPSG:4326")Uc(b,[0,0,0],[e,e,e],f),b.ah(d[0],d[1],d[2],0,0,0),this.fb=c.Bd([[b]]);
else if(a.srs=="cartesian")Uc(b,d,[e,e,e],f),this.fb=c.Bd([[b]])}}else if(a.type=="solidgeosphere"){v(a.color)||(a.color=[1,1,1]);v(a.subdivisions)||(a.subdivisions=1);b=this.parent.parent.c;c=i;if(b.e&&b.e.r)c=b.e.r.Jf;if(c)b=new K(b),Wc(b,a.color,a.subdivisions),this.fb=c.Bd([[b]])}};r.lb=function(){gg(this).Tj(this.fb);if(this.ze!=i)D(this.ze);else{for(var a=0;a<this.gb.length;a++)D(this.gb[a]);this.ta=i}};function gg(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.r)b=a.e.r.Jf;return b}
r.Me=function(a,b,c,d,e,f){for(var g=0;g<this.gb.length;g++)this.gb[g].Me(a,b,c,d,e,f)};r.eh=function(a,b,c,d){for(var e=0;e<this.gb.length;e++)this.gb[e].eh(a,b,c,d)};r.Cb=function(a,b,c){for(var d=0;d<this.gb.length;d++)this.gb[d].Cb(a,b,c)};r.qf=function(a,b,c){for(var d=0;d<this.gb.length;d++)this.gb[d].qf(a,b,c)};r.na=function(){if(this.ze!=i)this.ze.na();else for(var a=0;a<this.gb.length;a++)this.gb[a].na()};r.oa=function(){if(this.ze!=i)this.ze.oa();else for(var a=0;a<this.gb.length;a++)this.gb[a].oa()};
r.pf=function(a,b,c,d){if(this.ze==i)for(var e=0;e<this.gb.length;e++)this.gb[e].pf(a,b,c,d)};r.ak=function(){this.V.readyState==4&&(this.V.status==404?this.md&&this.md(this.id):this.kc(Fc(this.V.responseText)))};
r.kc=function(a){if(a.Type=="pointcloud")this.options=a,this.ze=V(ab,this,this.options),a=gg(this),this.fb=a.Bd(this.ze.wd);else{for(var b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=V(Oa,this,this.options);this.gb.push(c);this.vg.push(c.Ad)}this.ke&&this.ke(this.id);a=gg(this);this.fb=a.Bd(this.vg)}};function fg(a,b){b==i?alert("invalid json-url"):(a.re=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.re,!0),a.V.onreadystatechange=function(){a.ak()},a.V.send())};function hg(a){this.c=a;this.ta=[];this.Te=new Ye;this.Gq=1E5*G*1E5*G}
hg.prototype.rb=function(a,b){this.Te.zi(b);for(var c=a.a[0],d=a.a[1],e=a.a[2],f=0;f<this.ta.length;f++)if(this.ta[f]instanceof $c){var g=this.ta[f];g.O||g.ra()}else if(this.ta[f]instanceof ig)g=this.ta[f],g.O||g.ra();else for(var g=this.ta[f],j=0;j<g.length;j++)for(var k=g[j],l=0;l<k.length;l++){var n=k[l];if(!n.O){var q=n.Z[0]-c,o=n.Z[1]-d,s=n.Z[2]-e,q=q*q+o*o+s*s,o=n.Zn*n.Zn;this.Te.yi(n.Z[0],n.Z[1],n.Z[2],n.xa[0],n.xa[1],n.xa[2])&&!(q>o)&&(this.c.b.enable(this.c.b.BLEND),this.c.b.depthFunc(this.c.b.LEQUAL),
this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA),n.ra(),this.c.b.disable(this.c.b.BLEND))}}};hg.prototype.Bd=function(a){this.ta.push(a);return this.ta.length-1};hg.prototype.Tj=function(a){this.ta.splice(a,1)};
hg.prototype.nf=function(a,b){for(var c=this.c.kf(a,b,this.c.qa,!0),d=1E4,e=i,f=0;f<this.ta.length;f++)for(var g=this.ta[f],j=0;j<g.length;j++)for(var k=g[j],l=0;l<k.length;l++){var n=k[l];if(!n.O){n.qm(c.x,c.y,c.h,c.le,c.me,c.ne);var q=n.Ne(c.x,c.y,c.h,c.le,c.me,c.ne);if(q&&q.L<d)d=q.L,e=n}}if(e)return e.rp;return-1};function jg(a){this.Da=i;this.Kb=new I;this.ol=this.kk=this.uh=this.Jf=this.Vh=i;this.Ei=a.rendertotexture;this.l=i;this.elevation=this.Jp=0;this.Am=!1;this.Ue=i;this.xp=!0;if(a.type=="custom")this.Am=!0;this.dd=m();this.ed=function(){if(this.Ei){var a=this.l;this.c.of.push(a);a.ih();a=this.c.b;a.clearColor(0,0,0,0);a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT|a.STENCIL_BUFFER_BIT);a.enable(a.DEPTH_TEST);a.disable(a.CULL_FACE)}if(this.Da){if(this.Ue)a=this.c,a.b.disable(a.b.DEPTH_TEST),this.Ue.ra(),
a=this.c,a.b.enable(a.b.DEPTH_TEST);this.Da.rb(this.Kb,this.c.qa)}this.ol.rb(this.Kb,this.c.qa);this.Vh.rb(this.Kb,this.c.qa);this.Jf.rb(this.Kb,this.c.qa);this.uh.rb(this.Kb,this.c.qa);this.kk.rb(this.Kb,this.c.qa);if(this.Ei&&(Ve(this.c),this.Jp==0)){if(v(this.l.Ya)&&this.l.Ya!==i)this.l.Ya.mode=this.xp?"blur":"pt";this.l.T(0,0,0,0,1,1,!0,!0,1)}};this.fd=function(a){var c=a.lf();this.Kb.p(c.x,c.y,c.h);this.elevation=a.Id.elevation};this.Ge=function(){if(!this.Am)this.Ue=new K(this.c),this.Ei?Wc(this.Ue,
[1,0,1,0],3):Wc(this.Ue,[0,0,0,1],2),this.Da=new Zf(this.c);this.ol=new dg(this.c);this.Vh=new Xe(this.c);this.Jf=new hg(this.c);this.uh=new Ze(this.c);this.kk=new We(this.c)};this.Fe=function(){if(this.Ue)this.Ue.o(),this.Ue=i;if(this.Da)this.Da.o(),this.Da=i};this.Gj=function(a,c){if(this.Ei)this.l==i?this.l=new M(this.c,!0,a,c,!0):Yc(this.l,a,c,!0)};this.Je=m()}jg.prototype=new ze;function kg(a){Hd.call(this);this.ap=a;this.Rm=P(this.ap,kd?"DOMMouseScroll":"mousewheel",this)}Ba(kg,Be);var lg="mousewheel";
kg.prototype.handleEvent=function(a){var b=0,c=0,d=0,a=a.oe;if(a.type=="mousewheel"){c=1;if(jd||ld&&(od||xd("532.0")))c=40;d=ld&&ed&&-a.wheelDelta%c!=0?-a.wheelDelta:-a.wheelDelta/c;v(a.wheelDeltaX)?(b=ld&&ed&&-a.wheelDeltaX%c!=0?-a.wheelDeltaX:-a.wheelDeltaX/c,c=ld&&ed&&-a.wheelDeltaY%c!=0?-a.wheelDeltaY:-a.wheelDeltaY/c):c=d}else d=a.detail,d>100?d=3:d<-100&&(d=-3),v(a.axis)&&a.axis===a.HORIZONTAL_AXIS?b=d:c=d;typeof this.Vm=="number"&&(b=Math.min(Math.max(b,-this.Vm),this.Vm));typeof this.Wm==
"number"&&(c=Math.min(Math.max(c,-this.Wm),this.Wm));b=new mg(d,a,b,c);try{this.dispatchEvent(b)}finally{b.Bh()}};kg.prototype.Hd=function(){kg.cg.Hd.call(this);R(this.Rm);delete this.Rm};function mg(a,b,c,d){b&&this.Jd(b,h);this.type=lg;this.detail=a;this.mq=c;this.Hf=d}Ba(mg,Md);function ng(){this.vk=this.Nf=0;this.$=new J;this.kd=new I;this.kd.p(1,0,0);this.B=0;this.D=-0.03;this.Ja=0;this.q=7.616;this.m=45.9088;this.g=17E3;this.qc=this.pc=this.gk=this.ce=this.de=0;this.Fo=!1;this.fk=this.hk=0;this.tf=this.ck=this.jd=this.mh=this.lh=this.cb=1;this.ik=this.jk=this.Oa=this.Pa=0;this.$j=!1;this.Bo=0.001;this.Ho=-0.4;this.Jb=!1;this.ea=this.da=this.bk=0;this.kh=!1;this.sc=new I;this.Af=this.zf=0;this.$d=this.Ib=!1;this.n=Array(3);this.Rb=new O(0,0,0);this.yc=new J;this.we=new J;
this.ud=new J;this.Pb=new J;this.$=new J;this.yb=new J;this.ve=new J;this.Pb.hf();this.Ha=100;this.la=i;this.sd=this.rd=this.wc=this.vc=this.uc=this.qd=this.pd=0;this.Tg=ba("$d");this.dd=function(){this.c.fh(this.$)};this.ed=m();this.fd=function(a){a.Uc=0;this.Rb.p(this.q,this.m,this.g);this.Rb.pa(this.n);this.kd.p(this.n[0],this.n[1],this.n[2]);this.we.gd(this.n[0],this.n[1],this.n[2]);this.ud.Sd(this.q,this.m);this.yc.Kg(this.B,this.D,this.Ja);this.yb.U(this.we,this.ud);this.ve.U(this.yb,this.yc);
this.yb.U(this.ve,this.Pb);this.$.ig(this.yb);a.Ki=this.B;a.Ba(this.n[0],this.n[1],this.n[2]);Bc(a,this.q,this.m,this.g);if(this.la)this.la.cc=this.q,this.la.bc=this.m,this.la.$b=this.g,this.la.pitch=this.D*57.29577951308232,this.la.Va=this.B*57.29577951308232,this.la.fc=this.Ja*57.29577951308232};this.Ge=m();this.Fe=m();this.kg=function(){R(this.pd);R(this.qd);R(this.uc);R(this.vc);R(this.wc);R(this.rd);R(this.sd)};this.Je=function(a){this.pd=P(window,Dd,this.He,!1,this);this.qd=P(window,Ed,this.Ie,
!1,this);this.uc=P(a,Ad,this.Td,!1,this);this.wc=P(a,Bd,this.Vd,!1,this);this.vc=P(a,Cd,this.Ud,!1,this);a=new kg(a);this.sd=P(a,lg,this.mf,!1,this)};this.mf=function(a){a.Hf>0?this.Oa>0?this.Pa=this.Oa=0:this.Pa+=0.05:this.Pa>0?this.Oa=this.Pa=0:this.Oa+=0.05};this.He=function(a){if(a.keyCode==81)this.qc=this.cb*this.tf;else if(a.keyCode==65)this.qc=-this.cb*this.tf;else if(a.keyCode==83)this.pc=0.5*this.jd;else if(a.keyCode==88)this.pc=-0.5*this.jd;this.Nf=a.keyCode};this.Ie=function(a){if(a.keyCode==
81)this.qc=0;else if(a.keyCode==65)this.qc=0;else if(a.keyCode==83)this.pc=0;else if(a.keyCode==88)this.pc=0;this.Nf=0};this.Td=function(a){if(Rd(a,Nd))this.uf=0,this.sc.p(0,0,0),this.zf=a.offsetX,this.Af=a.offsetY,this.kh=this.Ib=!0;this.da=a.offsetX;this.ea=a.offsetY;if(Rd(a,Od))return!1};this.Vd=function(a){if(Rd(a,Nd))this.Ib=this.kh=!1;this.da=a.offsetX;this.ea=a.offsetY;this.de=this.ce=this.uf=0;if(Rd(a,Od))return!1};this.Ud=function(a){this.da=a.offsetX;this.ea=a.offsetY;if(this.Ib){var b=
(this.zf-a.offsetX)/this.c.width,c=(this.Af-a.offsetY)/this.c.height;b*=b;c*=c;this.uf=Math.sqrt(b+c);this.sc.p(a.offsetX-this.zf,this.c.height-1-a.offsetY-(this.c.height-1-this.Af),0);this.sc.Kc();var a=this.sc.a[0],d=this.sc.a[1],e=0,f=0;a>0?e=1:a<0&&(e=-1);d>0?f=1:d<0&&(f=-1);this.ce=this.cb*this.lh*c*f;this.de=this.mh*b*e}};this.Ke=function(a){var b=this.pc*a/500,c=this.de*a/500,d=this.qc*a,e=0,e=0,f=this.g/5E5*(this.g/5E5);f>10?f=10:f<0.001&&(f=0.001);var g=f*this.ce*a/250;if(this.Pa>0){var j=
0.5*this.jd*a/1E3;this.D+=j;this.Pa-=j;if(this.Pa<0)this.D+=this.Pa,this.Pa=0;this.Jb=!0}if(this.Oa>0){j=0.5*this.jd*a/1E3;this.D-=j;this.Oa-=j;if(this.Oa<0)this.D-=this.Oa,this.Oa=0;this.Jb=!0}if(b)this.D+=b,this.Jb=!0;if(c){this.B+=c;this.B>2*Math.PI&&(this.B-=2*Math.PI);if(this.B<0)this.B=2*Math.PI-this.B;this.Jb=!0}if(this.Jb&&(e=this.c.Jg(),isNaN(e)))e=this.Ha;if(d&&(a=1E3*d*f,this.g+=a,e+=a,this.g>7E6))this.g=7E6;if(g){a=this.m*0.017453292519943295;d=Math.sin(a);f=Math.cos(a);c=this.B;b=this.q*
0.017453292519943295;d=kc/Math.sqrt(1-lc*d*d);f=kc/(d/(1+mc*f*f))*g*Math.cos(c);j=kc/d*g*Math.sin(c)/Math.cos(a);g=kc/d*g*Math.sin(c)*Math.tan(a)+c;this.q=57.29577951308232*(j+b);this.m=57.29577951308232*(f+a);for(this.B=g;this.q>180;)this.q-=360;for(;this.q<-180;)this.q+=360;for(;this.m>90;)this.m=180-this.m;for(;this.m<-90;)this.m=-180-this.m;this.Jb=!0}e<this.Ha&&this.Jb&&(this.g+=this.Ha-e);if(this.la)this.la.cc=this.q,this.la.bc=this.m,this.la.$b=this.g,this.la.pitch=this.D*57.29577951308232,
this.la.Va=this.B*57.29577951308232,this.la.fc=this.Ja*57.29577951308232}}ng.prototype=new ze;r=ng.prototype;r.Ba=function(a,b,c){this.q=a;this.m=b;this.g=c};r.lf=function(){return{longitude:this.q,latitude:this.m,elevation:this.g}};r.Cb=function(a,b,c){this.B=a;this.D=b;this.Ja=c};r.dh=m();r.Rg=function(){return{Va:this.B,pitch:this.D,fc:this.Ja}};function og(){this.vk=this.Nf=0;this.$=new J;this.$d=this.sb=!1;this.kd=new I;this.kd.p(1,0,0);this.B=0;this.D=-1.5707963267948966;this.Ja=0;this.q=7.77442050946391;this.m=47.472720418012834;this.g=75E5;this.tb=pg;this.wf=this.vf=this.s=0;this.Go=!0;this.fk=this.hk=this.qc=this.pc=this.gk=this.ce=this.de=this.xf=this.yf=0;this.tf=this.ck=this.jd=this.mh=this.lh=this.cb=1;this.ik=this.jk=this.Oa=this.Pa=0;this.$j=!1;this.bk=0;this.Ko=new J;this.ek=this.dk=this.ea=this.da=0;this.sc=new I;this.sf=this.ae=
this.Ib=!1;this.Io=this.Jo=this.uf=0;this.n=Array(3);this.Rb=new O(0,0,0);this.yc=new J;this.we=new J;this.ud=new J;this.Pb=new J;this.$=new J;this.yb=new J;this.ve=new J;this.Pb.hf();this.be=!1;this.qh=this.ph=this.oh=0;this.nh=1;this.oc=!1;this.Co=this.Do=this.Eo=0;this.ha={};this.ga={};this.rf=new J;this.jh=new J;this.Zd=new J;this.Lo=new J;this.Mo=new J;this.Ha=50;this.xe=1E7;this.Aa=vc;this.va=0;this.od=!1;this.Za=[0,0];this.ub=0;this.ee=this.Qa=!1;this.sd=this.rd=this.wc=this.vc=this.uc=this.qd=
this.pd=this.Po=0;this.Tg=function(a){if(!a)this.sb=!1;this.$d=a};this.dd=function(){this.c.fh(this.$)};this.ed=m();this.fd=function(a){nc==1?(this.Fb=1,this.Db=1E4):(this.Fb=1.0E-5,this.Db=10);this.Aa=a.Aa;this.va=a.va;a.od=this.od;a.Za[0]=this.Za[0];a.Za[1]=this.Za[1];a.Uc=1;this.sb=this.$d?!0:a.Wk!=0?!0:!1;if(this.tb==qg&&!this.sb&&!this.c.sa.ac){if(this.ae)this.ae=!1,this.mk(this.da,this.ea);if(this.Ib&&this.sf)this.sf=!1,this.lk(this.da,this.ea)}this.Rb.p(this.q,this.m,this.g);this.Rb.pa(this.n);
this.kd.p(this.n[0],this.n[1],this.n[2]);this.we.gd(this.n[0],this.n[1],this.n[2]);this.ud.Sd(this.q,this.m);this.be?(this.yc.gg(this.oh,this.ph,this.qh,this.nh),this.Pb.Dj()):this.yc.Kg(this.B,this.D,this.Ja);this.yb.U(this.ud,this.yc);this.$.U(this.yb,this.Pb);this.$.Oe();this.ml=new I(this.n[0],this.n[1],this.n[2]);var b=this.$.Ma(this.ml);this.$.a[12]=-b.a[0];this.$.a[13]=-b.a[1];this.$.a[14]=-b.a[2];a.Ki=this.B;a.Ba(this.n[0],this.n[1],this.n[2]);Bc(a,this.q,this.m,this.g)};this.Ge=m();this.Fe=
m();this.kg=function(){R(this.pd);R(this.qd);R(this.uc);R(this.vc);R(this.wc);R(this.rd);R(this.sd)};this.Je=function(a){this.pd=P(window,Dd,this.He,!1,this);this.qd=P(window,Ed,this.Ie,!1,this);this.uc=P(a,Ad,this.Td,!1,this);this.vc=P(a,Cd,this.Ud,!1,this);this.wc=P(a,Bd,this.Vd,!1,this);this.rd=P(a,zd,this.Vg,!1,this);a=new kg(a);this.sd=P(a,lg,this.mf,!1,this)};this.hd=function(){var a=pg;(this.s&rg)==sg&&((this.s&tg)==0?a=qg:(this.s&tg)==ug?a=vg:(this.s&tg)==wg&&(a=xg));(this.s&rg)==yg&&(a=xg);
if(a!=this.tb){if(this.tb==xg)this.B=this.yf+45*Math.PI*this.cb*(this.da-this.vf)/(180*this.c.height),this.D=this.xf+45*Math.PI*this.cb*(this.wf-this.ea)/(180*this.c.height);this.tb=a;if(this.tb==xg)this.vf=this.da,this.wf=this.ea,this.yf=this.B,this.xf=this.D}if(this.tb==xg)this.B=this.yf+45*Math.PI*this.cb*(this.da-this.vf)/(180*this.c.height),this.D=this.xf+45*Math.PI*this.cb*(this.wf-this.ea)/(180*this.c.height)};this.mf=function(a){if(this.sb||this.c.sa.ac)this.ub=0;else{if(this.tb==pg)if((this.s&
tg)==0){var b={},c,d;this.ub>0?(c=this.Za[0],d=this.Za[1]):(c=this.da,d=this.ea);this.c.Wd(c,d,b);if(b.hit){this.Za=[c,d];this.ub=500;this.Rb.p(this.q,this.m,this.g);this.Rb.pa(this.n);c=this.n[0]-b.x;d=this.n[1]-b.y;b=this.n[2]-b.z;a.Hf>0?(c*=0.2,d*=0.2,b*=0.2):(c*=-0.2,d*=-0.2,b*=-0.2);var e=new O(0,0,0);e.lc(this.n[0]+c,this.n[1]+d,this.n[2]+b);this.q=e.G[0];this.m=e.G[1];if(this.ee){if(e.G[2]>this.g)this.g=e.G[2]}else this.g=e.G[2];this.Qa=!0;if(this.g<this.Ha)this.g=this.Ha,this.Qa=!0;else if(this.g>
this.xe)this.g=this.xe,this.Qa=!0}}else(this.s&tg)==ug&&(this.D+=5*a.Hf*Math.PI*this.cb/180);return this.W(a)}};this.He=function(a){if(!this.sb&&!this.c.sa.ac){if(a.keyCode==66)this.be=!1;if(a.keyCode==16)return this.s|=ug,this.W(a);else if(a.keyCode==17)return this.s|=wg,this.W(a);else if(a.keyCode==37||a.keyCode==65)return this.s|=zg,this.W(a);else if(a.keyCode==38||a.keyCode==87)return this.s|=Ag,this.W(a);else if(a.keyCode==39||a.keyCode==68)return this.s|=Bg,this.W(a);else if(a.keyCode==40||
a.keyCode==83)return this.s|=Cg,this.W(a);this.hd();return!0}};this.Ie=function(a){if(a.keyCode==16)return this.s&=~ug,this.W(a);else if(a.keyCode==17)return this.s&=~wg,this.W(a);else if(a.keyCode==37||a.keyCode==65)return this.s&=~zg,this.W(a);else if(a.keyCode==38||a.keyCode==87)return this.s&=~Ag,this.W(a);else if(a.keyCode==39||a.keyCode==68)return this.s&=~Bg,this.W(a);else if(a.keyCode==40||a.keyCode==83)return this.s&=~Cg,this.W(a);this.hd();return!0};this.Vg=function(a){if(!this.sb&&!this.c.sa.ac){var b=
{};this.c.Wd(this.da,this.ea,b);if(b.hit){this.c.bh(2E3);var c=this.g;c>1E6?Qe(this.c.sa,b.lng,b.lat,1E6,h,h,h):c>25E4?Qe(this.c.sa,b.lng,b.lat,25E4,h,h,h):c>5E4?Qe(this.c.sa,b.lng,b.lat,5E4,h,h,h):(c=b.elv+5E3,Qe(this.c.sa,b.lng,b.lat,c,0,-90,0));this.Za=[this.da,this.ea];this.ub=2500}return this.W(a)}};this.Td=function(a){if(this.c&&this.c.H&&!this.sb&&!this.c.sa.ac){this.da=a.offsetX-this.c.H.offsetLeft;this.ea=a.offsetY-this.c.H.offsetTop;if(Rd(a,Nd))this.s|=sg,document.body.style.cursor="move",
this.ae=!0;else if(Rd(a,Od))return!1;else Rd(a,Pd)&&(this.s|=yg);this.hd();return this.W(a)}};this.Vd=function(a){if(this.c&&this.c.H){this.Ib=!0;this.da=a.offsetX-this.c.H.offsetLeft;this.ea=a.offsetY-this.c.H.offsetTop;if(Rd(a,Nd))this.s&=~sg,this.oc=!1,document.body.style.cursor="default",this.ae=!1;else if(Rd(a,Od))return!1;else Rd(a,Pd)&&(this.s&=~yg);this.hd();return this.W(a)}};this.Ud=function(a){if(this.c&&this.c.H&&!this.sb&&!this.c.sa.ac)return this.Ib=this.tb==qg,this.sf=!0,this.dk=a.offsetX-
this.c.H.offsetLeft-this.da,this.ek=a.offsetY-this.c.H.offsetTop-this.ea,this.da=a.offsetX-this.c.H.offsetLeft,this.ea=a.offsetY-this.c.H.offsetTop,this.hd(),this.W(a)};this.Ke=function(a){if(this.Aa==wc){var b=this.va*this.g/5E3;this.ee||(this.g-=a*b);if(this.g<this.Ha)this.g=this.Ha;this.Qa=!0}else if(this.Aa==xc){b=this.va*this.g/5E3;this.g+=a*b;if(this.g>this.xe)this.g=this.xe;this.Qa=!0}else if(this.Aa==zc)this.B=this.va;else if(this.Aa==Ac)if(b=Math.sin(this.va),this.D+=a/5E3*-Math.cos(this.va),
this.B+=a/5E3*b,this.D<-Math.PI/2)this.D=-Math.PI/2;else if(this.D>0)this.D=0;if(this.ub>0&&(this.od=!0,this.ub-=a,this.ub<=0))this.ub=0,this.od=!1;if((this.s&Dg||this.Aa==yc)&&(this.s&tg)==0){b=0;this.s&Ag&&(b+=1);this.s&Cg&&(b-=1);var c=0;this.s&zg&&(c-=1);this.s&Bg&&(c+=1);var d;d=this.Aa==yc?Math.PI*this.va/180:Math.atan2(c,b);b=this.g/5E5;b>10?b=10:b<0.001&&(b=0.001);var a=b*a/5E4,b=Math.PI*this.m/180,e=Math.sin(b),c=Math.cos(b),f=this.B+d;d=Math.PI*this.q/180;var g=kc/Math.sqrt(1-lc*e*e),e=
kc/g*a*Math.sin(f)/Math.cos(b),a=kc/(g/(1+mc*c*c))*a*Math.cos(f)+b;this.q=180*(e+d)/Math.PI;this.m=180*a/Math.PI}for(;this.q>180;)this.q-=180;for(;this.q<-180;)this.q+=180;for(;this.m>90;)this.m-=180;for(;this.m<-90;)this.m+=180;if(this.Qa)if(this.Qa=!1,a=this.c.hg(this.q,this.m),a.hasvalue){if(this.g-this.Ha<a.elevation)this.g=a.elevation+this.Ha,this.Qa=!0;this.ee=!1}else if(this.g<5E3)this.Qa=this.ee=!0};this.Cb=function(a,b,c){this.be=!1;this.Pb.hf();this.B=a;this.D=b;this.Ja=c};this.dh=function(a,
b,c,d){this.be=!0;this.oh=a;this.ph=b;this.qh=c;this.nh=d;var e=a,a=b,b=e,e=a*b+c*d;if(e>0.499)this.B=2*Math.atan2(a,d),this.D=Math.PI/2,this.Ja=0;else if(e<-0.499)this.B=-2*Math.atan2(a,d),this.D=-Math.PI/2,this.Ja=0;else{var f=c*c;this.B=Math.atan2(2*b*d-2*a*c,1-2*b*b-2*f);this.D=Math.asin(2*e);this.Ja=Math.atan2(2*a*d-2*b*c,1-2*a*a-2*f)}};this.No=function(a,b,c){a.a[0]=b.a[0]*c.a[0]+b.a[1]*c.a[4]+b.a[2]*c.a[8];a.a[1]=b.a[0]*c.a[1]+b.a[1]*c.a[5]+b.a[2]*c.a[9];a.a[2]=b.a[0]*c.a[2]+b.a[1]*c.a[6]+
b.a[2]*c.a[10];a.a[4]=b.a[4]*c.a[0]+b.a[5]*c.a[4]+b.a[6]*c.a[8];a.a[5]=b.a[4]*c.a[1]+b.a[5]*c.a[5]+b.a[6]*c.a[9];a.a[6]=b.a[4]*c.a[2]+b.a[5]*c.a[6]+b.a[6]*c.a[10];a.a[8]=b.a[8]*c.a[0]+b.a[9]*c.a[4]+b.a[10]*c.a[8];a.a[9]=b.a[8]*c.a[1]+b.a[9]*c.a[5]+b.a[10]*c.a[9];a.a[10]=b.a[8]*c.a[2]+b.a[9]*c.a[6]+b.a[10]*c.a[10]};this.mk=function(a,b){this.rf.ba(this.Zd);var c={};this.c.lg(a,b,c,!0);c.hit?(this.ha.x=c.x,this.ha.y=c.y,this.ha.h=c.z,this.oc=!0):this.oc=!1};this.lk=function(a,b){if(this.oc){var c={};
this.c.lg(a,b,c,!1);if(c.hit)if(this.ga.x=c.x,this.ga.y=c.y,this.ga.h=c.z,this.oc=!0,this.ga.x==this.ha.x&&this.ga.y==this.ha.y&&this.ga.h==this.ha.h)this.Zd.ba(this.rf);else{var d=this.ha.x*this.ga.x+this.ha.y*this.ga.y+this.ha.h*this.ga.h,c=Math.sqrt((1-d)*0.5),d=Math.sqrt((1+d)*0.5),e={};e.x=this.ha.y*this.ga.h-this.ha.h*this.ga.y;e.y=this.ga.x*this.ha.h-this.ha.x*this.ga.h;e.h=this.ha.x*this.ga.y-this.ha.y*this.ga.x;c/=Math.sqrt(e.x*e.x+e.y*e.y+e.h*e.h);e.x*=c;e.y*=c;e.h*=c;this.jh.gg(e.x,e.y,
e.h,d);this.Zd.U(this.rf,this.jh);c=[];(new O(this.q,this.m,this.g)).pa(c);c=this.Zd.Ma(new I(c[0],c[1],c[2]));d=new O(0,0,0);d.lc(c.a[0],c.a[1],c.a[2]);this.q=d.G[0];this.m=d.G[1];this.Qa=!0}else this.oc=!1}};this.W=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1};this.hm=ba("Ha")}Ba(og,ng);var sg=1,yg=4,rg=7,zg=16,Ag=32,Bg=64,Cg=128,Dg=240,ug=256,wg=512,tg=768,pg=0,qg=1,xg=2,vg=3;function Eg(){this.vd=new J;this.Fb=1.0E-5;this.Db=10;this.pe=45;this.Vp=ca("pe");this.dd=function(){this.c.mm(this.vd)};this.ed=m();this.fd=function(a){this.vd.Zl(this.pe,this.c.width/this.c.height,this.Fb,this.Db);a.jg[a.jg.length-1].ba(this.vd)};this.Ge=m();this.Fe=m();this.Je=m()}Eg.prototype=new ze;function Fg(a){this.vk=this.Nf=0;this.$=new J;this.$d=this.sb=!1;this.kd=new I;this.kd.p(1,0,0);this.B=0;this.D=-1.5707963267948966;this.Ja=0;this.q=7.77442050946391;this.m=47.472720418012834;this.g=75E5;this.tb=Gg;this.wf=this.vf=this.s=0;this.Go=!0;this.fk=this.hk=this.qc=this.pc=this.gk=this.ce=this.de=this.xf=this.yf=0;this.tf=this.ck=this.jd=this.mh=this.lh=this.cb=1;this.ik=this.jk=this.Oa=this.Pa=0;this.$j=!1;this.bk=0;this.Ko=new J;this.ek=this.dk=this.ea=this.da=0;this.sc=new I;this.sf=this.ae=
this.Ib=!1;this.Io=this.Jo=this.uf=0;this.n=Array(3);this.Rb=new O(0,0,0);this.yc=new J;this.we=new J;this.ud=new J;this.Pb=new J;this.$=new J;this.yb=new J;this.ve=new J;this.Pb.hf();this.be=!1;this.qh=this.ph=this.oh=0;this.nh=1;this.oc=!1;this.Co=this.Do=this.Eo=0;this.ha={};this.ga={};this.rf=new J;this.jh=new J;this.Zd=new J;this.Lo=new J;this.Mo=new J;this.Ha=50;this.xe=1E7;this.Aa=vc;this.va=0;this.od=!1;this.Za=[0,0];this.ub=0;this.ee=this.Qa=!1;this.Po=0;this.pe=this.Db=this.Fb=-1;if(v(a)){if(v(a.Near))this.Fb=
a.Near;if(v(a.Far))this.Db=a.Far;if(v(a.Fov))this.pe=a.Fov}this.sd=this.rd=this.wc=this.vc=this.uc=this.qd=this.pd=0;this.Fb=1.0E-7;this.Db=1.2;this.Tg=function(a){if(!a)this.sb=!1;this.$d=a};this.dd=function(){this.c.fh(this.$)};this.ed=m();this.fd=function(a){nc==1?(this.Fb=1,this.Db=1E4):this.g<3E3?(this.Fb=1.0E-7,this.Db=1):(this.Fb=1.0E-5,this.Db=10);if(this.pe>=0)this.c.e.dc.pe=this.pe;if(this.Fb>=0)this.c.e.dc.Fb=this.Fb;if(this.Db>=0)this.c.e.dc.Db=this.Db;this.Aa=a.Aa;this.va=a.va;a.od=this.od;
a.Za[0]=this.Za[0];a.Za[1]=this.Za[1];a.Uc=1;this.sb=this.$d?!0:a.Wk!=0?!0:!1;if(this.tb==Hg&&!this.sb&&!this.c.sa.ac){if(this.ae)this.ae=!1,this.mk(this.da,this.ea);if(this.Ib&&this.sf)this.sf=!1,this.lk(this.da,this.ea)}this.Rb.p(this.q,this.m,this.g);this.Rb.pa(this.n);this.kd.p(this.n[0],this.n[1],this.n[2]);this.we.gd(this.n[0],this.n[1],this.n[2]);this.ud.Sd(this.q,this.m);this.be?(this.yc.gg(this.oh,this.ph,this.qh,this.nh),this.Pb.Dj()):this.yc.Kg(this.B,this.D,this.Ja);this.yb.ba(this.ud);
this.ve.U(this.yb,this.yc);this.yb.U(this.ve,this.Pb);this.$.ba(this.yb);this.$.Oe();this.ml=new I(this.n[0],this.n[1],this.n[2]);var c=this.$.Ma(this.ml);this.$.a[12]=-c.a[0];this.$.a[13]=-c.a[1];this.$.a[14]=-c.a[2];a.Ki=this.B;a.Ba(this.n[0],this.n[1],this.n[2]);Bc(a,this.q,this.m,this.g)};this.Ge=m();this.Fe=m();this.kg=function(){R(this.pd);R(this.qd);R(this.uc);R(this.vc);R(this.wc);R(this.rd);R(this.sd)};this.Je=function(a){this.pd=P(window,Dd,this.He,!1,this);this.qd=P(window,Ed,this.Ie,!1,
this);this.uc=P(a,Ad,this.Td,!1,this);this.vc=P(a,Cd,this.Ud,!1,this);this.wc=P(a,Bd,this.Vd,!1,this);this.rd=P(a,zd,this.Vg,!1,this);a=new kg(a);this.sd=P(a,lg,this.mf,!1,this)};this.hd=function(){var a=Gg;(this.s&Ig)==Jg&&((this.s&Kg)==0?a=Hg:(this.s&Kg)==Lg?a=Mg:(this.s&Kg)==Ng&&(a=Og));(this.s&Ig)==Pg&&(a=Og);if(a!=this.tb){if(this.tb==Og)this.B=this.yf+45*Math.PI*this.cb*(this.da-this.vf)/(180*this.c.height),this.D=this.xf+45*Math.PI*this.cb*(this.wf-this.ea)/(180*this.c.height);this.tb=a;if(this.tb==
Og)this.vf=this.da,this.wf=this.ea,this.yf=this.B,this.xf=this.D}if(this.tb==Og)this.B=this.yf+45*Math.PI*this.cb*(this.da-this.vf)/(180*this.c.height),this.D=this.xf+45*Math.PI*this.cb*(this.wf-this.ea)/(180*this.c.height)};this.mf=function(a){if(this.sb||this.c.sa.ac)this.ub=0;else{if(this.tb==Gg)if((this.s&Kg)==0){var c={},d,e;this.ub>0?(d=this.Za[0],e=this.Za[1]):(d=this.da,e=this.ea);this.c.Wd(d,e,c);if(c.hit){this.Za=[d,e];this.ub=500;this.Rb.p(this.q,this.m,this.g);this.Rb.pa(this.n);d=this.n[0]-
c.x;e=this.n[1]-c.y;c=this.n[2]-c.z;a.Hf>0?(d*=0.2,e*=0.2,c*=0.2):(d*=-0.2,e*=-0.2,c*=-0.2);var f=new O(0,0,0);f.lc(this.n[0]+d,this.n[1]+e,this.n[2]+c);this.q=f.G[0];this.m=f.G[1];if(this.ee){if(f.G[2]>this.g)this.g=f.G[2]}else this.g=f.G[2];this.Qa=!0;if(this.g<this.Ha)this.g=this.Ha,this.Qa=!0;else if(this.g>this.xe)this.g=this.xe,this.Qa=!0}}else(this.s&Kg)==Lg&&(this.D+=5*a.Hf*Math.PI*this.cb/180);return this.W(a)}};this.He=function(a){if(!this.sb&&!this.c.sa.ac){if(a.keyCode==66)this.be=!1;
if(a.keyCode==16)return this.s|=Lg,this.W(a);else if(a.keyCode==17)return this.s|=Ng,this.W(a);else if(a.keyCode==37||a.keyCode==65)return this.s|=Qg,this.W(a);else if(a.keyCode==38||a.keyCode==87)return this.s|=Rg,this.W(a);else if(a.keyCode==39||a.keyCode==68)return this.s|=Sg,this.W(a);else if(a.keyCode==40||a.keyCode==83)return this.s|=Tg,this.W(a);this.hd();return!0}};this.Ie=function(a){if(a.keyCode==16)return this.s&=~Lg,this.W(a);else if(a.keyCode==17)return this.s&=~Ng,this.W(a);else if(a.keyCode==
37||a.keyCode==65)return this.s&=~Qg,this.W(a);else if(a.keyCode==38||a.keyCode==87)return this.s&=~Rg,this.W(a);else if(a.keyCode==39||a.keyCode==68)return this.s&=~Sg,this.W(a);else if(a.keyCode==40||a.keyCode==83)return this.s&=~Tg,this.W(a);this.hd();return!0};this.Vg=function(a){if(!this.sb&&!this.c.sa.ac){var c={};this.c.Wd(this.da,this.ea,c);if(c.hit){this.c.bh(2E3);var d=this.g;d>1E6?Qe(this.c.sa,c.lng,c.lat,1E6,h,h,h):d>25E4?Qe(this.c.sa,c.lng,c.lat,25E4,h,h,h):d>5E4?Qe(this.c.sa,c.lng,c.lat,
5E4,h,h,h):(d=c.elv+5E3,Qe(this.c.sa,c.lng,c.lat,d,0,-90,0));this.Za=[this.da,this.ea];this.ub=2500}return this.W(a)}};this.Td=function(a){if(this.c&&this.c.H&&!this.sb&&!this.c.sa.ac){this.da=a.offsetX-this.c.H.offsetLeft;this.ea=a.offsetY-this.c.H.offsetTop;if(Rd(a,Nd))this.s|=Jg,document.body.style.cursor="move",this.ae=!0;else if(Rd(a,Od))return!1;else Rd(a,Pd)&&(this.s|=Pg);this.hd();return this.W(a)}};this.Vd=function(a){if(this.c&&this.c.H){this.Ib=!0;this.da=a.offsetX-this.c.H.offsetLeft;
this.ea=a.offsetY-this.c.H.offsetTop;if(Rd(a,Nd))this.s&=~Jg,this.oc=!1,document.body.style.cursor="default",this.ae=!1;else if(Rd(a,Od))return!1;else Rd(a,Pd)&&(this.s&=~Pg);this.hd();return this.W(a)}};this.Ud=function(a){if(this.c&&this.c.H&&!this.sb&&!this.c.sa.ac)return this.Ib=this.tb==Hg,this.sf=!0,this.dk=a.offsetX-this.c.H.offsetLeft-this.da,this.ek=a.offsetY-this.c.H.offsetTop-this.ea,this.da=a.offsetX-this.c.H.offsetLeft,this.ea=a.offsetY-this.c.H.offsetTop,this.hd(),this.W(a)};this.Ke=
function(a){if(this.Aa==wc){var c=this.va*this.g/5E3;this.ee||(this.g-=a*c);if(this.g<this.Ha)this.g=this.Ha;this.Qa=!0}else if(this.Aa==xc){c=this.va*this.g/5E3;this.g+=a*c;if(this.g>this.xe)this.g=this.xe;this.Qa=!0}else if(this.Aa==zc)this.B=this.va;else if(this.Aa==Ac)if(c=Math.sin(this.va),this.D+=a/5E3*-Math.cos(this.va),this.B+=a/5E3*c,this.D<-Math.PI/2)this.D=-Math.PI/2;else if(this.D>0)this.D=0;if(this.ub>0&&(this.od=!0,this.ub-=a,this.ub<=0))this.ub=0,this.od=!1;if((this.s&Ug||this.Aa==
yc)&&(this.s&Kg)==0){c=0;this.s&Rg&&(c+=1);this.s&Tg&&(c-=1);var d=0;this.s&Qg&&(d-=1);this.s&Sg&&(d+=1);var e;e=this.Aa==yc?Math.PI*this.va/180:Math.atan2(d,c);c=this.g/5E5;c>10?c=10:c<0.001&&(c=0.001);var a=c*a/5E4,c=Math.PI*this.m/180,f=Math.sin(c),d=Math.cos(c),g=this.B+e;e=Math.PI*this.q/180;var j=kc/Math.sqrt(1-lc*f*f),f=kc/j*a*Math.sin(g)/Math.cos(c),a=kc/(j/(1+mc*d*d))*a*Math.cos(g)*0.05+c;this.q=180*(f*0.05+e)/Math.PI;this.m=180*a/Math.PI}for(;this.q>180;)this.q-=180;for(;this.q<-180;)this.q+=
180;for(;this.m>90;)this.m-=180;for(;this.m<-90;)this.m+=180;if(this.Qa)if(this.Qa=!1,a=this.c.hg(this.q,this.m),a.hasvalue){if(this.g-this.Ha<a.elevation)this.g=a.elevation+this.Ha,this.Qa=!0;this.ee=!1}else if(this.g<5E3)this.Qa=this.ee=!0};this.Cb=function(a,c,d){this.be=!1;this.Pb.hf();this.B=a;this.D=c;this.Ja=d};this.dh=function(a,c,d,e){this.be=!0;this.oh=a;this.ph=c;this.qh=d;this.nh=e;var f=a,a=c,c=f,f=a*c+d*e;if(f>0.499)this.B=2*Math.atan2(a,e),this.D=Math.PI/2,this.Ja=0;else if(f<-0.499)this.B=
-2*Math.atan2(a,e),this.D=-Math.PI/2,this.Ja=0;else{var g=d*d;this.B=Math.atan2(2*c*e-2*a*d,1-2*c*c-2*g);this.D=Math.asin(2*f);this.Ja=Math.atan2(2*a*e-2*c*d,1-2*a*a-2*g)}};this.No=function(a,c,d){a.a[0]=c.a[0]*d.a[0]+c.a[1]*d.a[4]+c.a[2]*d.a[8];a.a[1]=c.a[0]*d.a[1]+c.a[1]*d.a[5]+c.a[2]*d.a[9];a.a[2]=c.a[0]*d.a[2]+c.a[1]*d.a[6]+c.a[2]*d.a[10];a.a[4]=c.a[4]*d.a[0]+c.a[5]*d.a[4]+c.a[6]*d.a[8];a.a[5]=c.a[4]*d.a[1]+c.a[5]*d.a[5]+c.a[6]*d.a[9];a.a[6]=c.a[4]*d.a[2]+c.a[5]*d.a[6]+c.a[6]*d.a[10];a.a[8]=c.a[8]*
d.a[0]+c.a[9]*d.a[4]+c.a[10]*d.a[8];a.a[9]=c.a[8]*d.a[1]+c.a[9]*d.a[5]+c.a[10]*d.a[9];a.a[10]=c.a[8]*d.a[2]+c.a[9]*d.a[6]+c.a[10]*d.a[10]};this.mk=function(a,c){this.rf.ba(this.Zd);var d={};this.c.lg(a,c,d,!0);d.hit?(this.ha.x=d.x,this.ha.y=d.y,this.ha.h=d.z,this.oc=!0):this.oc=!1};this.lk=function(a,c){if(this.oc){var d={};this.c.lg(a,c,d,!1);if(d.hit)if(this.ga.x=d.x,this.ga.y=d.y,this.ga.h=d.z,this.oc=!0,this.ga.x==this.ha.x&&this.ga.y==this.ha.y&&this.ga.h==this.ha.h)this.Zd.ba(this.rf);else{var e=
this.ha.x*this.ga.x+this.ha.y*this.ga.y+this.ha.h*this.ga.h,d=Math.sqrt((1-e)*0.5),e=Math.sqrt((1+e)*0.5),f={};f.x=this.ha.y*this.ga.h-this.ha.h*this.ga.y;f.y=this.ga.x*this.ha.h-this.ha.x*this.ga.h;f.h=this.ha.x*this.ga.y-this.ha.y*this.ga.x;d/=Math.sqrt(f.x*f.x+f.y*f.y+f.h*f.h);f.x*=d;f.y*=d;f.h*=d;this.jh.gg(f.x,f.y,f.h,e);this.Zd.U(this.rf,this.jh);d=[];(new O(this.q,this.m,this.g)).pa(d);d=this.Zd.Ma(new I(d[0],d[1],d[2]));e=new O(0,0,0);e.lc(d.a[0],d.a[1],d.a[2]);this.q=e.G[0];this.m=e.G[1];
this.Qa=!0}else this.oc=!1}};this.W=function(a){a=a?a:window.event;a.stopPropagation&&a.stopPropagation();a.preventDefault&&a.preventDefault();a.cancelBubble=!0;a.cancel=!0;return a.returnValue=!1};this.hm=ba("Ha")}Ba(Fg,ng);var Jg=1,Pg=4,Ig=7,Qg=16,Rg=32,Sg=64,Tg=128,Ug=240,Lg=256,Ng=512,Kg=768,Gg=0,Hg=1,Og=2,Mg=3;function Vg(a){this.vk=this.Nf=0;this.$=new J;this.kd=new I;this.kd.p(1,0,0);this.B=0;this.D=-0.03;this.Ja=0;this.q=7.616;this.m=45.9088;this.g=17E3;this.qc=this.pc=this.gk=this.ce=this.de=0;this.Fo=!1;this.fk=this.hk=0;this.tf=this.ck=this.jd=this.mh=this.lh=this.cb=1;this.ik=this.jk=this.Oa=this.Pa=0;this.$j=!1;this.Bo=0.001;this.Ho=-0.4;this.Jb=!1;this.ea=this.da=this.bk=0;this.kh=!1;this.sc=new I;this.Af=this.zf=0;this.$d=this.Ib=!1;this.n=Array(3);this.Rb=new O(0,0,0);this.yc=new J;this.we=new J;
this.ud=new J;this.Pb=new J;this.$=new J;this.yb=new J;this.ve=new J;this.Pb.hf();this.Ha=100;this.la=i;this.Fb=1.0E-6;this.Db=15;this.pe=45;this.sd=this.rd=this.wc=this.vc=this.uc=this.qd=this.pd=0;this.Ci=this.Di=!1;this.Ee=[];if(v(a.ElevationSteps))this.Ee=a.ElevationSteps;if(v(a.Near))this.Fb=a.Near;if(v(a.Far))this.Db=a.Far;if(v(a.Fov))this.pe=a.Fov;this.Vl=0;this.Ul=7E6;this.jc=[];if(v(a.BoundingRect))this.jc=a.BoundingRect;this.io=[];if(v(a.BoundingPolygon))this.jc=[],this.io=a.BoundingPolygon;
this.Tg=ba("$d");this.dd=function(){this.c.fh(this.$)};this.ed=m();this.fd=function(a){a.Uc=0;this.Rb.p(this.q,this.m,this.g);this.Rb.pa(this.n);this.kd.p(this.n[0],this.n[1],this.n[2]);this.we.gd(this.n[0],this.n[1],this.n[2]);this.ud.Sd(this.q,this.m);this.yc.Kg(this.B,this.D,this.Ja);this.yb.U(this.we,this.ud);this.ve.U(this.yb,this.yc);this.yb.U(this.ve,this.Pb);this.$.ig(this.yb);a.Ki=this.B;a.Ba(this.n[0],this.n[1],this.n[2]);Bc(a,this.q,this.m,this.g);if(this.la)this.la.cc=this.q,this.la.bc=
this.m,this.la.$b=this.g,this.la.pitch=this.D*57.29577951308232,this.la.Va=this.B*57.29577951308232,this.la.fc=this.Ja*57.29577951308232;this.c.e.dc.Fb=this.Fb;this.c.e.dc.Db=this.Db};this.Ge=m();this.Fe=m();this.kg=function(){R(this.pd);R(this.qd);R(this.uc);R(this.vc);R(this.wc);R(this.rd);R(this.sd)};this.Je=function(a){this.pd=P(window,Dd,this.He,!1,this);this.qd=P(window,Ed,this.Ie,!1,this);this.uc=P(a,Ad,this.Td,!1,this);this.wc=P(a,Bd,this.Vd,!1,this);this.vc=P(a,Cd,this.Ud,!1,this);a=new kg(a);
this.sd=P(a,lg,this.mf,!1,this)};this.mf=function(a){a.Hf>0?this.Oa>0?this.Pa=this.Oa=0:this.Pa+=0.05:this.Pa>0?this.Oa=this.Pa=0:this.Oa+=0.05};this.He=function(a){if(a.keyCode==81)this.qc=this.cb*this.tf,this.Di=!0;else if(a.keyCode==65)this.qc=-this.cb*this.tf,this.Ci=!0;else if(a.keyCode==83)this.pc=0.5*this.jd;else if(a.keyCode==88)this.pc=-0.5*this.jd;this.Nf=a.keyCode};this.Ie=function(a){if(a.keyCode==81)this.qc=0,this.Di=!1;else if(a.keyCode==65)this.qc=0,this.Ci=!1;else if(a.keyCode==83)this.pc=
0;else if(a.keyCode==88)this.pc=0;this.Nf=0};this.Td=function(a){if(Rd(a,Nd))this.uf=0,this.sc.p(0,0,0),this.zf=a.offsetX,this.Af=a.offsetY,this.kh=this.Ib=!0;this.da=a.offsetX;this.ea=a.offsetY;if(Rd(a,Od))return!1};this.Vd=function(a){if(Rd(a,Nd))this.Ib=this.kh=!1;this.da=a.offsetX;this.ea=a.offsetY;this.de=this.ce=this.uf=0;if(Rd(a,Od))return!1};this.Ud=function(a){this.da=a.offsetX;this.ea=a.offsetY;if(this.Ib){var c=(this.zf-a.offsetX)/this.c.width,d=(this.Af-a.offsetY)/this.c.height;c*=c;d*=
d;this.uf=Math.sqrt(c+d);this.sc.p(a.offsetX-this.zf,this.c.height-1-a.offsetY-(this.c.height-1-this.Af),0);this.sc.Kc();var a=this.sc.a[0],e=this.sc.a[1],f=0,g=0;a>0?f=1:a<0&&(f=-1);e>0?g=1:e<0&&(g=-1);this.ce=this.cb*this.lh*d*g;this.de=this.mh*c*f}};this.Ke=function(a){var c=this.pc*a/500,d=this.de*a/500,e=this.qc*a,f=0,f=0,g=this.g/5E5*(this.g/5E5);g>10?g=10:g<0.001&&(g=0.001);var j=g*this.ce*a/250;if(this.Pa>0){var k=0.5*this.jd*a/1E3;this.D+=k;this.Pa-=k;if(this.Pa<0)this.D+=this.Pa,this.Pa=
0;this.Jb=!0}if(this.Oa>0){k=0.5*this.jd*a/1E3;this.D-=k;this.Oa-=k;if(this.Oa<0)this.D-=this.Oa,this.Oa=0;this.Jb=!0}if(c)this.D+=c,this.Jb=!0;if(d){this.B+=d;this.B>2*Math.PI&&(this.B-=2*Math.PI);if(this.B<0)this.B=2*Math.PI-this.B;this.Jb=!0}if(this.Jb&&(f=this.c.Jg(),isNaN(f)))f=this.Ha;if(e){if(this.Ee.length==0)a=1E3*e*g,this.g+=a,f+=a;else if(this.Di){this.Di=!1;for(a=0;a<this.Ee.length;a++)if(this.Ee[a]>this.g){this.g=this.Ee[a];break}}else if(this.Ci){this.Ci=!1;for(a=this.Ee.length-1;a>=
0;a--)if(this.Ee[a]<this.g){this.g=this.Ee[a];break}}if(this.g>this.Ul)this.g=this.Ul;else if(this.g<this.Vl)this.g=this.Vl}if(j){a=this.m*0.017453292519943295;e=Math.sin(a);g=Math.cos(a);d=this.B;c=this.q*0.017453292519943295;e=kc/Math.sqrt(1-lc*e*e);g=kc/(e/(1+mc*g*g))*j*Math.cos(d);k=kc/e*j*Math.sin(d)/Math.cos(a);j=kc/e*j*Math.sin(d)*Math.tan(a)+d;this.q=57.29577951308232*(k+c);this.m=57.29577951308232*(g+a);for(this.B=j;this.q>180;)this.q-=360;for(;this.q<-180;)this.q+=360;for(;this.m>90;)this.m=
180-this.m;for(;this.m<-90;)this.m=-180-this.m;this.Jb=!0}f<this.Ha&&this.Jb&&(this.g+=this.Ha-f);if(this.jc.length==2&&this.jc[0].length==2&&this.jc[1].length==2){if(this.jc[0][0]>this.q)this.q=this.jc[0][0];if(this.jc[1][0]<this.q)this.q=this.jc[1][0];if(this.jc[0][1]>this.m)this.m=this.jc[0][1];if(this.jc[1][1]<this.m)this.m=this.jc[1][1]}if(this.la)this.la.cc=this.q,this.la.bc=this.m,this.la.$b=this.g,this.la.pitch=this.D*57.29577951308232,this.la.Va=this.B*57.29577951308232,this.la.fc=this.Ja*
57.29577951308232}}Ba(Vg,ng);function Wg(a,b){this.c=a;this.P=new og;this.P.c=a;Ae(this.P);this.dc=new Eg;this.r=new jg(b);this.Kd=new Ce;this.dc.c=a;Ae(this.dc);this.r.c=a;Ae(this.r);this.Kd.c=a;Ae(this.Kd);this.Qd=new uc;this.Qb=new J;this.$=new J;this.ip=new J}Wg.prototype.rb=function(){this.P.dd();this.P.ed();this.dc.dd();this.dc.ed();this.r.dd();this.r.ed();this.Kd.dd();this.Kd.ed()};
Wg.prototype.o=function(){if(this.P)this.P.Lc(),this.P=i;if(this.dc)this.dc.Lc(),this.dc=i;if(this.r)this.r.Lc(),this.r=i;if(this.Kd)this.Kd.Lc(),this.Kd=i};
Wg.prototype.Wj=function(a){var b,c,d,e,f,g;if(v(a.type)){if(a.type=="globe")this.P.Lc(),this.P=new og,this.P.c=this.c;else if(a.type=="fly")this.P.Lc(),this.P=new ng,this.P.c=this.c;else if(a.type=="constrained")this.P.Lc(),this.P=new Vg(a),this.P.c=this.c;else if(a.type=="dynamic")this.P.Lc(),this.P=new Fg(a),this.P.c=this.c;b=this.P.q;c=this.P.m;d=this.P.g;e=this.P.B;f=this.P.D;g=this.P.Ja;v(a.Longitude)&&(b=a.Longitude);v(a.Latitude)&&(c=a.Latitude);v(a.Elevation)&&(d=a.Elevation);v(a.Yaw)&&(e=
H(a.Yaw));v(a.Pitch)&&(f=H(a.Pitch));v(a.Roll)&&(g=H(a.Roll));this.P.Ba(b,c,d);this.P.Cb(e,f,g);Ae(this.P)}};function Xg(a){this.b=a;this.Jd=!1;this.Bk=this.sl=this.Sb=this.Lk=this.Cl=this.Fc=this.Jk=this.Al=this.Yc=this.Ik=this.zl=this.Xc=this.Ck=this.tl=this.Vc=this.Gk=this.xl=this.Dc=this.Kk=this.Bl=this.Ec=this.Fk=this.wl=this.Gb=this.Ek=this.vl=this.Wc=this.Hk=this.yl=this.Tb=this.Dk=this.ul=this.xd=i}function Oc(a,b,c){a.xd&&(a.b.useProgram(a.xd),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.xd,"matMVP"),!1,b.za()),a.b.uniform4fv(a.b.getUniformLocation(a.xd,"uColor"),c.za()))}
function Pc(a,b,c){a.Wc&&(a.b.useProgram(a.Wc),a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Wc,"matMVP"),!1,b.za()),a.b.uniform4fv(a.b.getUniformLocation(a.Wc,"uColor"),c.za()))}
function Qc(a,b,c,d,e){if(a.Gb){var f=new Ec(0.1,0.1,0.1,0);a.b.useProgram(a.Gb);a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Gb,"matMVP"),!1,d.za());a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Gb,"matNormal"),!1,b.za());a.b.uniformMatrix4fv(a.b.getUniformLocation(a.Gb,"matModelView"),!1,c.za());a.b.uniform4fv(a.b.getUniformLocation(a.Gb,"uAmbientColor"),f.za());a.b.uniform4fv(a.b.getUniformLocation(a.Gb,"uColor"),e.za())}}
function Yg(a){a.Jd=!0;a.ul=Zg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n}\n");a.Dk=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uColor;\n\nvoid main()\n{\n   gl_FragColor = uColor;\n}");if(a.ul&&a.Dk)a.xd=a.b.createProgram(),a.b.attachShader(a.xd,a.ul),a.b.attachShader(a.xd,a.Dk),a.b.bindAttribLocation(a.xd,0,"aPosition"),a.b.linkProgram(a.xd),!a.b.getProgramParameter(a.xd,
a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert("Shader Link: "+a.b.getProgramInfoLog(a.xd));a.yl=Zg(a,a.b.VERTEX_SHADER,"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 matModelView;\nuniform mat4 matProjection;\nuniform mat4 matNormal;\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\n\nvoid main(void)\n{\nvPosition = matModelView * vec4(aPosition, 1.0);\ngl_Position = matProjection * vPosition;\nvTexCoord = aTexCoord;\nvNormal = (matNormal * vec4(aNormal,1.0)).xyz;\n}\n");
a.Hk=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nuniform sampler2D uTexture;\nvoid main(void)\n{\nvec3 L = normalize(-vPosition.xyz);\nfloat lamb = 2.0*max(dot(normalize(vNormal), L), 0.0);\nvec3 diff = vec3(1.0,0.0,0.0) * lamb;\ngl_FragColor = vec4(diff.xyz, 1.0);\n}\n");if(a.yl&&a.Hk)a.Tb=a.b.createProgram(),a.b.attachShader(a.Tb,a.yl),a.b.attachShader(a.Tb,a.Hk),a.b.bindAttribLocation(a.Tb,0,
"aPosition"),a.b.bindAttribLocation(a.Tb,1,"aNormal"),a.b.bindAttribLocation(a.Tb,2,"aTexCoord"),a.b.linkProgram(a.Tb),!a.b.getProgramParameter(a.Tb,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Tb));a.vl=Zg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize = 1.0;}\n");a.Ek=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = vColor * uColor;\n}\n\n");
if(a.vl&&a.Ek)a.Wc=a.b.createProgram(),a.b.attachShader(a.Wc,a.vl),a.b.attachShader(a.Wc,a.Ek),a.b.bindAttribLocation(a.Wc,0,"aPosition"),a.b.bindAttribLocation(a.Wc,1,"aColor"),a.b.linkProgram(a.Wc),!a.b.getProgramParameter(a.Wc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Wc));a.Bl=Zg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Kk=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec4 uColor;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = texture2D(uTexture, vTexCoord)*uColor;\n}\n\n");if(a.Bl&&a.Kk)a.Ec=a.b.createProgram(),a.b.attachShader(a.Ec,a.Bl),a.b.attachShader(a.Ec,a.Kk),a.b.bindAttribLocation(a.Ec,0,"aPosition"),a.b.bindAttribLocation(a.Ec,1,"aTexCoord"),a.b.linkProgram(a.Ec),!a.b.getProgramParameter(a.Ec,a.b.LINK_STATUS)&&!a.b.isContextLost()&&
alert(a.b.getProgramInfoLog(a.Ec));a.xl=Zg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\nattribute vec4 aColor;\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n   vNormal = aNormal;\n   vColor = aColor;\n}\n");a.Gk=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec3 vNormal;\nvarying vec2 vTexCoord;\nvarying vec4 vColor;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   gl_FragColor = vColor * texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.xl&&a.Gk)a.Dc=a.b.createProgram(),a.b.attachShader(a.Dc,a.xl),a.b.attachShader(a.Dc,a.Gk),a.b.bindAttribLocation(a.Dc,0,"aPosition"),a.b.bindAttribLocation(a.Dc,1,"aNormal"),a.b.bindAttribLocation(a.Dc,2,"aTexCoord"),a.b.bindAttribLocation(a.Dc,3,"aColor"),a.b.linkProgram(a.Dc),!a.b.getProgramParameter(a.Dc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Dc));a.tl=Zg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Ck=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");if(a.tl&&a.Ck)a.Vc=a.b.createProgram(),a.b.attachShader(a.Vc,a.tl),a.b.attachShader(a.Vc,a.Ck),a.b.bindAttribLocation(a.Vc,0,"aPosition"),a.b.bindAttribLocation(a.Vc,1,"aTexCoord"),a.b.linkProgram(a.Vc),!a.b.getProgramParameter(a.Vc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&
alert("font shader: "+a.b.getProgramInfoLog(a.Vc));a.zl=Zg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");a.Ik=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\n\nuniform vec4 uColor;\nvoid main()\n{\n   if(texture2D(uTexture, vTexCoord)[3]<0.1){discard;}\n gl_FragColor = uColor*texture2D(uTexture, vTexCoord);\n}\n\n");
if(a.zl&&a.Ik)a.Xc=a.b.createProgram(),a.b.attachShader(a.Xc,a.zl),a.b.attachShader(a.Xc,a.Ik),a.b.bindAttribLocation(a.Xc,0,"aPosition"),a.b.bindAttribLocation(a.Xc,1,"aTexCoord"),a.b.linkProgram(a.Xc),!a.b.getProgramParameter(a.Xc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert("poi shader: "+a.b.getProgramInfoLog(a.Xc));a.Al=Zg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nuniform mat4 matInvMVP;\nattribute vec3 aPosition;\nattribute vec4 aColor;\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vColor = aColor;\n   gl_PointSize=4.0; \n}\n");
a.Jk=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying vec4 vColor;\n\nvoid main()\n{\n   gl_FragColor = vColor;\n}\n\n");if(a.Al&&a.Jk)a.Yc=a.b.createProgram(),a.b.attachShader(a.Yc,a.Al),a.b.attachShader(a.Yc,a.Jk),a.b.bindAttribLocation(a.Yc,0,"aPosition"),a.b.bindAttribLocation(a.Yc,1,"aColor"),a.b.linkProgram(a.Yc),!a.b.getProgramParameter(a.Yc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Yc));a.Cl=Zg(a,a.b.VERTEX_SHADER,"uniform mat4 matM;uniform mat4 matMVP;\nvarying float w_val;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{gl_Position = matMVP * vec4(aPosition,1.0);\nvec4 xyz = matM * vec4(aPosition,1.0);\nfloat x = xyz.x*8388607.0;\nfloat y = xyz.y*8388607.0;\nfloat z = xyz.z*8388607.0;\nfloat sq, lat, sinlat, coslat, sinlat2, Rn, elevation;\nsq = sqrt(x*x+y*y);\n lat = atan(z,sq);\n      for (int i=0;i<2;i++)\n{\nsinlat = sin(lat);\ncoslat = cos(lat);\nsinlat2 = sinlat*sinlat;\nRn = 6378137.0 / sqrt(1.0-0.0066943799*sinlat2);\n   elevation = sq / coslat - Rn;\nlat = atan(z/sq, 1.0-(Rn*0.0066943799)/(Rn+elevation));\n}\nw_val = 1.0-clamp(abs(elevation)/4000.0,0.0,1.0); vTexCoord = aTexCoord;\n}\n");
a.Lk=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nvarying float w_val;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float depth = w_val;\nfloat depth2 = depth*depth;\nvec4 rgb;\n if (depth < 0.5) { rgb.g = 1.6*depth2+1.2*depth; } else { rgb.g = 3.2*depth2-6.8*depth+3.6; rgb.b = depth2*-4.8+9.2*depth-3.4; }\nrgb.a=1.0;\ndepth = depth/0.9;\ndepth2 = depth2/0.81;\nrgb.r = -2.14*depth2*depth2 -1.07*depth2*depth + 0.133*depth2 +0.0667*depth +1.0;\ngl_FragColor = texture2D(uTexture, vTexCoord)*rgb;\n\n}\n\n");
if(a.Cl&&a.Lk)a.Fc=a.b.createProgram(),a.b.attachShader(a.Fc,a.Cl),a.b.attachShader(a.Fc,a.Lk),a.b.bindAttribLocation(a.Fc,0,"aPosition"),a.b.bindAttribLocation(a.Fc,1,"aTexCoord"),a.b.linkProgram(a.Fc),!a.b.getProgramParameter(a.Fc,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Fc));a.sl=Zg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec2 aTexCoord;\nvarying vec2 vTexCoord;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition,1.0);\n   vTexCoord = aTexCoord;\n}\n");
a.Bk=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\nuniform vec2 uInvTexSize;\nvarying vec2 vTexCoord;\nuniform sampler2D uTexture;\n\nvoid main()\n{\n   float weight=0.0; vec4 colorsum = vec4(0.0,0.0,0.0,0.0);\n   vec4 mid = texture2D(uTexture, vTexCoord);\n   if (mid.r == 1.0 && mid.g == 0.0 && mid.b == 1.0 && mid.a < 0.5)\n   {   for (int i=-3;i<3;i++) {\n       \n          for (int j=-3;j<3;j++) {\n          \n             vec4 val = texture2D(uTexture, vTexCoord + uInvTexSize * vec2(i,j));\n             if (val.r == 1.0 && val.g == 0.0 && val.b == 1.0 && val.a < 0.5) \n             {}\n             else \n             {                gl_FragColor = val; return;\n             }\n           }\n        }\n        gl_FragColor = vec4(0,1,0.5,0); return;\n   }\n   gl_FragColor = mid;\n}\n");
if(a.sl&&a.Bk)a.Sb=a.b.createProgram(),a.b.attachShader(a.Sb,a.sl),a.b.attachShader(a.Sb,a.Bk),a.b.bindAttribLocation(a.Sb,0,"aPosition"),a.b.bindAttribLocation(a.Sb,1,"aTexCoord"),a.b.linkProgram(a.Sb),!a.b.getProgramParameter(a.Sb,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Sb));a.wl=Zg(a,a.b.VERTEX_SHADER,"uniform mat4 matMVP;\nattribute vec3 aPosition;\nattribute vec3 aNormal;attribute vec4 aColor;\nvarying vec4 vColor;\n\nuniform mat4 matNormal;\nuniform mat4 matModelView;\nvarying vec2 vTexCoord;\nvarying vec4 vPosition;varying vec3 vNormal;\n\nvoid main()\n{\n   gl_Position = matMVP * vec4(aPosition, 1.0);\n   vPosition = matModelView * vec4(aPosition, 1.0);\n   vNormal = normalize((matNormal * vec4(aNormal,1.0)).xyz);   vColor = aColor;\n}\n");
a.Fk=Zg(a,a.b.FRAGMENT_SHADER,"#ifdef GL_ES\nprecision highp float;\n#endif\n\nuniform vec4 uAmbientColor;\nuniform vec4 uColor;\nvarying vec4 vColor;\nvarying vec3 vNormal;\nvarying vec4 vPosition;\nvoid main()\n{\n   vec3 L = normalize(-vPosition.xyz);\n   float lamb1 = dot(normalize(vNormal), L);\n   float lamb2 = dot(normalize(vNormal), -L);\n   vec4 diff1 = clamp(vec4(vColor.xyz * lamb1,1.0),0.0,1.0);\n   vec4 diff2 = clamp(vec4(vColor.xyz * lamb2,1.0),0.0,1.0);\n   gl_FragColor = diff1+diff2;\n}\n");
if(a.wl&&a.Fk)a.Gb=a.b.createProgram(),a.b.attachShader(a.Gb,a.wl),a.b.attachShader(a.Gb,a.Fk),a.b.bindAttribLocation(a.Gb,0,"aPosition"),a.b.bindAttribLocation(a.Gb,1,"aNormal"),a.b.bindAttribLocation(a.Gb,2,"aColor"),a.b.linkProgram(a.Gb),!a.b.getProgramParameter(a.Gb,a.b.LINK_STATUS)&&!a.b.isContextLost()&&alert(a.b.getProgramInfoLog(a.Gb))}
function Zg(a,b,c){var d=a.b.createShader(b);if(!d)return i;a.b.shaderSource(d,c);a.b.compileShader(d);if(!a.b.getShaderParameter(d,a.b.COMPILE_STATUS)&&!a.b.isContextLost())return b==a.b.VERTEX_SHADER?alert("Vertex Shader "+a.b.getShaderInfoLog(d)):b==a.b.FRAGMENT_SHADER?alert("Fragment Shader "+a.b.getShaderInfoLog(d)):alert("Unknown Shader "+a.b.getShaderInfoLog(d)),i;return d};function $g(a){this.c=a;this.sj=[];this.yd=[]}w("TextureManager",$g);$g.prototype.Ll=function(a,b,c,d){var e=this.sj[a];e?(this.yd[a]+=1,b(e)):(e=new M(this.c),N(e,a,b,c,d),this.yd[a]=1,this.sj[a]=e);return e};$g.prototype.CreateTexture=$g.prototype.Ll;$g.prototype.Nl=function(a){this.yd[a]-=1;this.yd[a]==0&&(this.sj[a].o(),delete this.sj[a],delete this.yd[a])};$g.prototype.DestroyTexture=$g.prototype.Nl;var ah=[14,28,14,14,14,14,14,14,14,96,0,14,14,0,14,14,14,14,14,14,14,14,14,14,14,14,14,14,0,0,0,0,8,8,10,16,16,25,19,5,9,9,11,16,8,9,8,8,16,16,16,16,16,16,16,16,16,16,8,8,16,16,16,16,28,19,19,20,20,19,17,22,20,8,14,19,16,23,20,22,19,22,20,19,16,20,19,28,19,18,17,8,8,8,14,16,9,15,16,14,16,15,7,16,16,6,6,14,6,24,16,15,16,16,9,14,8,16,13,19,13,13,14,9,6,9,16,8,16,0,6,16,9,28,16,16,9,29,19,9,28,0,17,0,0,6,6,9,9,10,16,28,8,28,14,9,26,0,14,19,8,8,16,16,16,16,6,16,9,21,10,16,16,9,21,15,11,15,9,9,9,16,15,
9,9,9,10,16,23,23,23,17,19,19,19,19,19,19,28,20,19,19,19,19,8,8,8,8,20,20,22,22,22,22,22,16,22,20,20,20,20,19,19,17,16,16,16,16,16,16,25,14,16,16,16,16,8,8,8,8,16,16,16,16,16,16,16,15,17,16,16,16,16,14,16,14];
function bh(a){this.c=a;this.b=a.b;var b=0,c=0;this.Si=new K(this.c);for(var a=[],d=[],e=0;e<16;e++)for(var f=0;f<16;f++){var b=e*0.0625,g=f*0.0625;a.push(0,31,0,g,b+0.001953125);a.push(0,0,0,g,b+0.0625);a.push(31,0,0,g+0.0625,b+0.0625);a.push(31,31,0,g+0.0625,b+0.001953125);b=c*4;d.push(b,b+1,b+2,b,b+2,b+3);c++}c=this.Si;if(a.length%5==0)c.A=new Float32Array(a),c.mode="font",c.S=5;Nc(this.Si,d,"TRIANGLES");a=new M(this.c);N(a,Xc+"font.png");this.Si.Oc(a);this.vq=new J;this.Kp=0}
bh.prototype.De=function(a,b,c,d,e){d==i&&(d=1);this.c.Mc();this.c.Xj();this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);for(var f=new J,g=0,j=0,k=0;k<a.length;k++)g=a.charCodeAt(k),j+=ah[g]/2*d,f.Yd(d,d,1),f.Yl(f,b+j,c,0),this.c.Nc(f),this.Si.ra(!0,6,g*12,e),j+=ah[g]/2*d;this.c.Ed();this.c.b.disable(this.c.b.BLEND);this.Kp=b-b};bh.prototype.Pl=function(a){for(var b=0,c=0;c<a.length;c++)b+=ah[a.charCodeAt(c)];return b};
bh.prototype.qo=p(32);w("Font",bh);bh.prototype.DrawText=bh.prototype.De;bh.prototype.GetStringHeight=bh.prototype.qo;bh.prototype.GetStringWidth=bh.prototype.Pl;function ch(a){this.c=a;this.b=a.b;this.Yf=!1;this.pl=this.Cc=this.u=i;this.w=this.t=0}
ch.prototype.Ng=function(a,b){this.dg=document.createElement("canvas");this.Q=this.dg.getContext("2d");this.$a=new M(this.c);this.$a.l=this.b.createTexture();this.text=a;this.Q.save();this.Q.font=b.fontString;this.Q.textAlign="left";this.Q.textBaseline="top";this.Q.lineWidth=b.lineWidth;this.Q.strokeStyle=b.strokeStyle;var c=this.Q.measureText(this.text),c=Math.round(c.width);this.Q.restore();this.t=c+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetX)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.w=
parseInt(b.fontString,10)+2*parseInt(b.lineWidth,10)+Math.abs(b.shadowOffsetY)+b.shadowBlur;this.ad=pc(this.t);this.$c=pc(this.w);this.$a.width=this.ad;this.$a.height=this.$c;this.Q.canvas.width=this.ad;this.Q.canvas.height=this.$c;this.Q.fillStyle=b.backgroundColor;this.Q.fillRect(0,0,this.t,this.w);this.Q.shadowOffsetX=b.shadowOffsetX;this.Q.shadowOffsetY=b.shadowOffsetY;this.Q.shadowBlur=b.shadowBlur;this.Q.shadowColor=b.shadowColor;this.Q.fillStyle=b.fontColor;this.Q.font=b.fontString;this.Q.textAlign=
"left";this.Q.textBaseline="middle";this.Q.lineWidth=b.lineWidth;this.Q.strokeStyle=b.strokeStyle;this.Q.strokeText(a,b.lineWidth,this.w/2);this.Q.fillText(a,b.lineWidth,this.w/2);this.hh();this.u=new K(this.c);this.u.Oc(this.$a);c=[];c.push(-this.t/2,this.w/2,0,0,0);c.push(-this.t/2,-this.w/2,0,0,1/this.$c*this.w);c.push(this.t/2,-this.w/2,0,1/this.ad*this.t,1/this.$c*this.w);c.push(this.t/2,this.w/2,0,1/this.ad*this.t,0);Mc(this.u,c);Nc(this.u,[0,1,2,0,2,3],"TRIANGLES");this.u.t=this.t;this.u.w=
this.w;return this.u};
ch.prototype.Lg=function(a,b){this.dg=document.createElement("canvas");this.Q=this.dg.getContext("2d");this.$a=new M(this.c);this.$a.l=this.b.createTexture();dh(this,a,b);this.u=new K(this.c);this.u.Oc(this.$a);var c=[];c.push(-this.t/2,this.w/2,0,0,0);c.push(-this.t/2,-this.w/2,0,0,1/this.$c*this.w);c.push(this.t/2,-this.w/2,0,1/this.ad*this.t,1/this.$c*this.w);c.push(this.t/2,this.w/2,0,1/this.ad*this.t,0);Mc(this.u,c);Nc(this.u,[0,1,2,0,2,3],"TRIANGLES");this.u.Z=[-this.t/2,-this.w/2,0];this.u.xa=
[this.t/2,this.w/2,0];this.u.t=this.t;this.u.w=this.w;return this.u};
function dh(a,b,c){a.t=c.iconWidth+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.w=c.iconHeight+2*c.border+Math.abs(c.shadowOffsetX)+Math.abs(c.shadowOffsetY)+c.shadowBlur;a.ad=pc(a.t);a.$c=pc(a.w);a.$a.width=a.ad;a.$a.height=a.$c;a.Q.canvas.width=a.ad;a.Q.canvas.height=a.$c;a.Q.fillStyle=c.backgroundColor;a.Q.fillRect(0,0,a.t,a.w);a.Q.shadowOffsetX=c.shadowOffsetX;a.Q.shadowOffsetY=c.shadowOffsetY;a.Q.shadowBlur=c.shadowBlur;a.Q.shadowColor=c.shadowColor;var d=new Image;
d.crossOrigin="anonymous";d.onload=function(){a.Q.drawImage(d,c.border,c.border,c.iconWidth,c.iconHeight);a.hh()};d.src=b}
ch.prototype.hh=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.$a.l);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.dg);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,i);this.$a.Wb=!0};ch.prototype.o=function(){if(this.u)this.u.o(),this.u=i;if(this.Cc)this.Cc.o(),this.Cc=i;if(this.pl)this.pl.o(),this.pl=i;if(this.$a)this.$a.o(),this.$a=i;if(this.dg)document.removeChild(this.dg),this.dg=i};function eh(a){this.c=a;this.b=a.b;this.$b=this.cc=this.bc=0;this.Bq=i;this.Yf=!1;this.ab=this.Ka=this.Cc=i;this.scale=20;this.text=this.sg="";this.wh=new ch(a);this.Rh=this.Uh=0;this.un=this.vn=1;this.tn=0;this.sn=1;this.rl=0;this.ql=Infinity;this.cl=new Ec(1,1,1,1);this.Vi={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(255, 255, 255, 0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0)"};this.$h={id:1,fontString:"48px bold Arial",backgroundColor:"rgba(0,0,0,0)",
fontColor:"rgba(255,255,255,1.0)",lineWidth:8,strokeStyle:"rgba(0,0,0,1.0)",fontSize:48,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 1.0)"};this.Hi=!1;this.$k=0;this.al=1;this.bl=0}r=eh.prototype;r.xo=function(a,b,c,d){this.sg=c?c:"";if(b)this.$h=b;this.text=a;if(d)this.Vi=d;if(c)this.Ka=this.wh.Lg(this.sg,this.Vi);this.wh=new ch(this.c);if(a)this.ab=this.wh.Ng(a,this.$h)};
r.Ba=function(a,b,c,d){if(this.Ka&&this.ab)this.Uh=this.Ka.t+this.ab.t,this.Rh=this.Ka.w;else if(this.Ka)this.Uh=this.Ka.t,this.Rh=this.Ka.w;else if(this.ab)this.Uh=this.ab.t,this.Rh=this.ab.w;var e=this.Ka?this.Ka.t:0,f=this.Hi?-this.$k*e/2:-this.$k*this.Uh/2;if(this.Ka){var g=this.Uh-e,g=this.Hi?0:-g/2;this.Ka.$g(a,b,c,(g+f)*G*this.scale,this.al*(this.Rh/2)*G*this.scale,this.bl*G*this.scale)}this.ab&&(g=this.Hi?e/2+this.ab.t/2:e/2,this.ab.$g(a,b,c,(g+f)*G*this.scale,this.al*(this.Rh/2)*G*this.scale,
this.bl*G*this.scale));this.Ye=a;this.Ze=b;this.$e=c;if(d!=i){this.Yf=!0;var d=this.wh,e=this.vn,f=this.un,g=this.tn,j=this.sn;d.Cc=new K(d.c);var k=[];k.push(a,b,c,e,f,g,j);k.push(0,0,0,e,f,g,j);Ic(d.Cc,k);Nc(d.Cc,[0,1],"LINES");this.Cc=d.Cc}};
r.ra=function(){this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.Yf&&this.Cc.ra();this.Ka&&Tc(this.Ka);this.ab&&Tc(this.ab);this.c.Mc();var a=new J;a.Yd(G*this.scale,G*this.scale,1);this.c.Nc(a);this.Ka&&this.Ka.ra(!1,0,0,i,this.cl);this.ab&&this.ab.ra(!1,0,0,i,this.cl);this.c.Ed();this.c.b.disable(this.c.b.BLEND)};function fh(a){a.Yf?a.Ba(a.Ye,a.Ze,a.$e,0):a.Ba(a.Ye,a.Ze,a.$e,i)}
r.wi=function(a){this.scale=a;fh(this)};r.Wg=function(a,b){var c=!1,d=!1;if(this.Ka)var e=this.c.kf(a,b,this.c.qa,!0),c=this.Ka.Ne(e.x,e.y,e.h,e.le,e.me,e.ne);this.ab&&(e=this.c.kf(a,b,this.c.qa,!0),d=this.ab.Ne(e.x,e.y,e.h,e.le,e.me,e.ne));return c||d};r.o=function(){this.wh=i;this.$b=this.cc=this.bc=0;this.Ka&&this.Ka.o();this.ab&&this.ab.o();this.Cc&&this.Cc.o();this.Yf=!1;this.Cc=i;this.scale=0};w("Poi",eh);eh.prototype.Draw=eh.prototype.ra;eh.prototype.SetContent=eh.prototype.xo;
eh.prototype.SetPosition=eh.prototype.Ba;eh.prototype.SetSize=eh.prototype.wi;eh.prototype.Destroy=eh.prototype.o;function gh(a){this.c=a;this.Sh=[];this.yd=[];this.og=i;this.Th=[];this.Xh=[]}r=gh.prototype;r.Kl=function(a,b,c,d){var e=new eh(this.c);if(b)e.$h=b;e.text=a;if(d)e.Vi=d;if(c)e.sg=c,e.Ka=this.Lg(c,e.Vi);if(a)e.ab=this.Ng(a,e.$h);return e};r.Ml=function(a){a.Ka&&hh(this,a.sg);a.ab&&ih(this,a.text,a.$h)};r.Lg=function(a,b){var c=this.Sh[a];if(c){this.yd[a]+=1;var d=new K(this.c);d.ba(c);d.t=c.t;d.w=c.w;this.Sh[a]=d}else this.og=new ch(this.c),d=this.og.Lg(a,b),this.yd[a]=1,this.Sh[a]=d,this.og=i;return d};
function hh(a,b){a.yd[b]-=1;a.yd[b]==0&&(a.Sh[b].l.o(),delete a.Sh[b],delete a.yd[b])}r.Ng=function(a,b){var c=this.Th[a+b.id];if(c){this.Xh[a+b.id]+=1;var d=new K(this.c);d.ba(c);d.t=c.t;d.w=c.w;this.Th[a+b.id]=d}else this.og=new ch(this.c),d=this.og.Ng(a,b),this.Xh[a+b.id]=1,this.Th[a+b.id]=d,this.og=i;return d};function ih(a,b,c){a.Xh[b+c.id]-=1;a.Xh[b+c.id]==0&&(a.Th[b+c.id].l.o(),delete a.Th[b+c.id],delete a.Xh[b+c.id])}
r.Il=function(a,b,c){a.Ka=this.Lg(b,c);a.Ba(a.Ye,a.Ze,a.$e,i);hh(this,a.sg);a.sg=b};r.Jl=function(a,b,c){a.ab=this.Ng(b,c);a.Ba(a.Ye,a.Ze,a.$e,i);ih(this,a.text,c);a.text=b};w("PoiManager",gh);gh.prototype.CreatePoi=gh.prototype.Kl;gh.prototype.DestroyPoi=gh.prototype.Ml;gh.prototype.ChangePoiIcon=gh.prototype.Il;gh.prototype.ChangePoiText=gh.prototype.Jl;var jh=new Date,kh=new Date,lh=[],mh=0,nh=i,oh=i;function ph(){for(var a=0;a<lh.length;a++){var b=lh[a];if(b.tm)b.Dl>0&&b.Ok>0?(b.H.width=window.innerWidth-b.Dl,b.H.height=window.innerHeight-b.Ok):(b.H.width=window.innerWidth,b.H.height=window.innerHeight);b.b.isContextLost()||qh(b,b.H.width,b.H.height)}}
function W(){this.Qe=this.iq=this.hq=this.nd=this.kq=this.lq=this.jq=this.ie=this.je=this.he=i;this.Jd=!1;this.dq="";this.height=this.width=0;this.tm=!1;this.Ua=this.H=this.b=i;this.rk=0.670588;this.qk=0.921569;this.ok=this.pk=1;this.$n=this.ao=this.co=this.bo=0;this.li=this.ki=20;this.Qb=new J;this.$=new J;this.vd=new J;this.Sf=new J;this.qa=new J;this.Mh=new J;this.of=[];this.ng=new uc;this.Xn=[];this.Yn=[];lh[mh]=this;mh++;this.Xk=this.e=this.Dg=i;this.gf=1;this.sa=this.rj=this.Bg=i;this.Ok=this.Dl=
0}
function rh(a){function b(b){var c=a.parentNode;c&&(c.innerHTML='<table style="background-color: #8CE; width: 100%; height: 100%;"><tr><td align="center"><div style="display: table-cell; vertical-align: middle;"><div style="">'+b+"</div></div></td></tr></table>")}if(!window.WebGLRenderingContext)return b('This page requires a browser that supports WebGL.<br/><a href="http://get.webgl.org">Click here to upgrade your browser.</a>'),i;var c=sh(a);if(c===i)return b('It doesn\'t appear your browser supports WebGL.<br/><a href="http://get.webgl.org/troubleshooting/">Click here for more information.</a>'),i;
return c}function sh(a){for(var b=["webgl","experimental-webgl","webkit-3d","moz-webgl"],c=i,d=0;d<b.length;++d){try{c=a.getContext(b[d],{bq:!1})}catch(e){}if(c)break}return c}r=W.prototype;
r.Rl=function(a,b){var c=document.getElementById(a);if(this.b=rh(c)){this.H=c;c.addEventListener("webglcontextlost",function(a){a.preventDefault()},!1);c.addEventListener("webglcontextrestored",function(){window.location.reload()},!1);if(b)this.li=this.ki=0,c.width=window.innerWidth-this.ki,c.height=window.innerHeight-this.li,this.tm=!0;for(var d=["webgl","experimental-webgl","moz-webgl","webkit-3d"],e=0;d.length>e;e++)try{if(this.b=c.getContext(d[e]))break}catch(f){}this.b?(qh(this,this.H.width,
this.H.height),this.b.clearColor(0,0,0,1),this.b.enable(this.b.DEPTH_TEST),this.b.frontFace(this.b.CCW),this.b.cullFace(this.b.BACK),this.Ua=new Xg(this.b),Yg(this.Ua),this.Dg=new bh(this),this.Xk=new M(this),N(this.Xk,Xc+"nodata.png"),this.Bg=new gh(this),this.rj=new $g(this),this.sa=new th(this),this.he&&this.he(this),kh=new Date,typeof window!="undefined"&&window.Cn(uh,this.H),this.H.oncontextmenu=function(a){a.preventDefault();a.stopPropagation();return!1},P(window,"resize",ph,!1,this),P(window,
"unload",this.Lc,!1,this)):alert("Can't find webgl context. It seems your browser is not compatible! For example, you can get the latest Firefox or Chrome")}};
r.Lc=function(){if(this.he)this.he=i;if(this.Fd)R(this.Fd),this.Fd=i;if(this.Gd)R(this.Gd),this.Gd=i;if(this.nd)R(this.nd),this.nd=i;if(this.je)this.je=i;if(this.ie)this.ie=i;nh&&(R(nh),oh=i);oh&&(R(oh),oh=i);if(this.e)this.e.o(),this.e=i;this.b.clearColor(0,0,0,0);this.b.clear(this.b.COLOR_BUFFER_BIT|this.b.DEPTH_BUFFER_BIT);this.Ua=this.H=this.b=i;this.Xn=[];this.Yn=[];this.rj=this.Bg=this.e=this.Dg=i;ne(window,"resize",i,!1,this);mh=0;lh=[]};
r.dm=function(a,b,c,d){if(a>=0&&a<=1&&b>=0&&b<=1&&c>=0&&c<=1&&d>=0&&d<=1)this.rk=a,this.qk=b,this.pk=c,this.ok=d};r.po=function(){return{yq:this.rk,nq:this.qk,cq:this.pk,Yp:this.ok}};r.Ej=function(){var a=this.b;a?(a.clearColor(this.rk,this.qk,this.pk,this.ok),a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT)):vh("Warning: no gl context!!")};r.pm=function(a,b,c,d){if(this.b)this.bo=a,this.co=b,this.ao=c,this.$n=d,this.b.viewport(a,b,c,d)};r.ro=function(){return{x:this.bo,y:this.co,Hq:this.ao,oq:this.$n}};
r.mm=function(a){this.vd.ba(a);wh(this)};r.fh=function(a){this.$.ba(a);wh(this)};r.Nc=function(a){this.Qb.ba(a);wh(this)};function wh(a){a.Sf.U(a.$,a.Qb);a.qa.U(a.vd,a.Sf);a.Mh.ig(a.Sf);a.Mh.Oe()}r.to=function(a){var b=new M(this);N(b,a);this.Yn.push(b);return b};r.so=function(a){var b=new K(this);Rc(b,a);this.Xn.push(b);return b};r.Mc=function(){var a=this.ng,b=this.$,c=new J;c.ba(b);a.oi.push(c);a=this.ng;b=this.Qb;c=new J;c.ba(b);a.ni.push(c);a=this.ng;b=this.vd;c=new J;c.ba(b);a.jg.push(c)};
r.Ed=function(){this.Qb.ba(this.ng.ni.pop());this.$.ba(this.ng.oi.pop());this.vd.ba(this.ng.jg.pop());wh(this)};r.Xj=function(){var a=this.b.getParameter(this.b.VIEWPORT),b=a[2]-a[0],a=a[3]-a[1];this.Qb.mi();this.$.mi();this.vd.Xl(0,b,0,a);wh(this)};
r.Mg=function(a){this.gf==0?(a.type="custom",this.e=new Wg(this,a),this.e.r.Gj(this.width,this.height)):this.gf==1?(a.type="ellipsoid",this.e=new Wg(this,a),this.e.r.Gj(this.width,this.height)):this.gf==2?fc(E("owg.engine3d"),"** WARNING: not implemented"):this.gf==3&&fc(E("owg.engine3d"),"** WARNING: not implemented")};r.De=function(a,b,c,d,e){this.Dg&&this.Dg.De(a,b,c,d,e)};r.Ij=function(a){var b=Array(2);b[0]=0;b[1]=0;this.Dg&&(b[0]=this.Dg.Pl(a),b[1]=32);return b};
r.kf=function(a,b,c,d){var e=new J;e.ig(c);var f=this.height-b-1,b=(a-0)*2/this.width-1,c=(f-0)*2/this.height-1,a=(a-0)*2/this.width-1,f=(f-0)*2/this.height-1,g=new I;g.p(b,c,-1);b=e.Ma(g);c=new I;c.p(a,f,1);c=e.Ma(c);e=c.a[0]-b.a[0];a=c.a[1]-b.a[1];c=c.a[2]-b.a[2];d&&(d=Math.sqrt(e*e+a*a+c*c),e/=d,a/=d,c/=d);d=b.a;b={};b.x=d[0];b.y=d[1];b.h=d[2];b.le=e;b.me=a;b.ne=c;return b};
if(typeof window!="undefined")window.Cn=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,30)};
function uh(){jh=new Date;var a=jh.valueOf()-kh.valueOf();kh=jh;for(var b=0;b<lh.length;b++){var c=lh[b];if(!c.b.isContextLost()){if(c.e){var d=c.e,e=a;d.P.Ke(e);d.dc.Ke(e);d.r.Ke(e);d.Kd.Ke(e)}c.je&&c.je(a,c);c.pm(0,0,c.width,c.height);c.Ej();if(c.e){var d=c.e,e=d.Qd,f=d.Qb,g=new J;g.ba(f);e.ni.push(g);e=d.Qd;f=d.$;g=new J;g.ba(f);e.oi.push(g);e=d.Qd;f=d.ip;g=new J;g.ba(f);e.jg.push(g);d.P.fd(d.Qd);d.dc.fd(d.Qd);d.r.fd(d.Qd);d.Kd.fd(d.Qd);d.Qd.ni.pop();d.Qd.oi.pop();d.Qd.jg.pop();c.e.rb()}d=c.b.getError();
d!=c.b.NO_ERROR&&d!=c.b.Up&&vh("WebGL Error: "+d);c.ie&&c.ie(c);typeof window!="undefined"&&window.Cn(uh,c.H)}}}function qh(a,b,c){a.width=b;a.height=c;a.Qe&&a.Qe(b,c,a);a.e&&a.e.r.Gj(b,c)}r=W.prototype;r.em=ba("he");r.xi=ba("je");r.nm=ba("ie");r.im=function(a){if(this.Fd)R(this.Fd),this.Fd=i;if(a)this.Fd=P(this.H,Ad,function(b){a(b.button,b.clientX-this.ki/2,b.clientY-this.li/2,this)},!1,this)};
r.km=function(a){if(this.Gd)R(this.Gd),this.Gd=i;if(a)this.Gd=P(this.H,Bd,function(b){a(b.button,b.clientX-this.ki/2,b.clientY-this.li/2,this)},!1,this)};r.jm=function(a){if(this.Ff)R(this.Ff),this.Ff=i;if(a)this.Ff=P(this.H,Cd,function(b){a(b.clientX-this.ki/2,b.clientY-this.li/2,this)},!1,this)};r.lm=function(a){if(this.nd)R(this.nd),this.nd=i;if(a){var b=new kg(this.H);this.nd=P(b,Cd,function(b){b.preventDefault();a(b.Hf,this)},!1,this)}};r.om=ba("Qe");
r.fm=function(a){nh&&(R(nh),nh=i);a&&(nh=P(window,Dd,function(b){a(b.keyCode,this)},!1,this))};r.gm=function(a){oh&&(R(oh),oh=i);a&&(oh=P(window,Ed,function(b){a(b.keyCode,this)},!1,this))};r.Wd=function(a,b,c){this.e&&this.e.r&&this.e.r.Da&&this.e.r.Da.Wd(a,b,c)};r.lg=function(a,b,c,d){this.e&&this.e.r&&this.e.r.Da&&this.e.r.Da.lg(a,b,c,d)};r.Yg=function(a,b){if(this.e&&this.e.r&&this.e.r.Vh)return this.e.r.Vh.Yg(a,b);return i};
r.nf=function(a,b){if(this.e&&this.e.r&&this.e.r.Jf)return this.e.r.Jf.nf(a,b);return-1};r.Xg=function(a,b){if(this.e&&this.e.r&&this.e.r.uh)return this.e.r.uh.Xg(a,b);return-1};r.Jg=function(){if(this.e&&this.e.r&&this.e.r.Da)return this.e.r.Da.Jg();return 0};r.ho=function(){if(this.e)return this.e.P.lf().elevation;return 0};r.hg=function(a,b){if(this.e&&this.e.r&&this.e.r.Da)return this.e.r.Da.hg(a,b);if(!this.e.r.Da)return{hasvalue:!0,elevation:0,lod:0};return{hasvalue:!1,elevation:0,lod:-1}};
r.Hj=function(a,b,c,d,e,f,g){this.sa.Hj(a,b,c,d,e,f,g)};r.bh=function(a){this.sa.bh(a)};r.gh=function(){this.sa.gh()};function Ve(a){if(a.of.length<1)xh("Fatal error with render target stack. PushRenderTarget/PopRenderTarget do not correspond.");else{var b=a.of.pop(),c=a.of.length;c>0?a.of[c-1].ih():b.rm()}}w("engine3d",W);W.prototype.AltitudeAboveEllipsoid=W.prototype.ho;W.prototype.AltitudeAboveGround=W.prototype.Jg;W.prototype.Clear=W.prototype.Ej;W.prototype.CreateScene=W.prototype.Mg;
W.prototype.DrawText=W.prototype.De;W.prototype.GetClearColor=W.prototype.po;W.prototype.GetDirectionMousePos=W.prototype.kf;W.prototype.GetViewport=W.prototype.ro;W.prototype.InitEngine=W.prototype.Rl;W.prototype.LoadMesh=W.prototype.so;W.prototype.LoadTexture=W.prototype.to;W.prototype.PickGlobe=W.prototype.Wd;W.prototype.PopMatrices=W.prototype.Ed;W.prototype.PushMatrices=W.prototype.Mc;W.prototype.SetClearColor=W.prototype.dm;W.prototype.SetInitCallback=W.prototype.em;
W.prototype.SetKeyDownCallback=W.prototype.fm;W.prototype.SetKeyUpCallback=W.prototype.gm;W.prototype.SetModelMatrix=W.prototype.Nc;W.prototype.SetMouseDownCallback=W.prototype.im;W.prototype.SetMouseMoveCallback=W.prototype.jm;W.prototype.SetMouseUpCallback=W.prototype.km;W.prototype.SetMouseWheelCallback=W.prototype.lm;W.prototype.SetOrtho2D=W.prototype.Xj;W.prototype.SetProjectionMatrix=W.prototype.mm;W.prototype.SetRenderCallback=W.prototype.nm;W.prototype.SetResizeCallback=W.prototype.om;
W.prototype.SetTimerCallback=W.prototype.xi;W.prototype.SetViewMatrix=W.prototype.fh;W.prototype.SetViewport=W.prototype.pm;W.prototype.GetElevationAt=W.prototype.hg;W.prototype.OnDestroy=W.prototype.Lc;function yh(a){a=a.ec;a.he&&a.he(a.id)}function zh(a,b){var c=b.ec;c.je&&c.je(c.id,a)}function Ah(a){a=a.ec;a.ie&&a.ie(a.id)}function Bh(a,b,c,d){d=d.ec;d.Fd&&d.Fd(d.id,a,b,c)}function Ch(a,b,c,d){d=d.ec;d.Gd&&d.Gd(d.id,a,b,c)}function Dh(a,b,c){c=c.ec;c.Ff&&c.Ff(c.id,a,b)}function Eh(a,b){var c=b.ec;c.nd&&c.nd(c.id,a)}function Fh(a,b,c){c=c.ec;c.Qe&&c.Qe(c.id,a,b)}function Gh(a,b){var c=b.ec;c.sk&&c.sk(c.id,a)}function Hh(a,b){var c=b.ec;c.tk&&c.tk(c.id,a)}
function Ih(a){var b=a.ec;b.Df&&b.Df(a.ec.id)}function Jh(a){var b=a.ec;b.Ef&&b.Ef(a.ec.id)}function Kh(){this.name="ogContext";this.type=y;this.Im=!1;this.e=this.c=i;this.fontcolor=new Ec(1,1,1,1);this.pp=1;this.Ef=this.Df=this.So=this.he=this.je=this.ie=this.Qe=this.tk=this.sk=this.Ff=this.nd=this.Gd=this.Fd=i}Kh.prototype=new C;
Kh.prototype.Na=function(a){this.he=a.cbfInit;this.So=a.cbfExit;this.Qe=a.cbfResize;if(a.fullscreen)this.Im=!0;this.c=new W;this.c.ec=this;a.canvas?this.c.Rl(a.canvas,this.Im):fc(E("owg.ogContext"),"**ERROR: auto creating canvas is not supported yet!");this.c.em(yh);this.c.xi(zh);this.c.nm(Ah);this.c.im(Bh);this.c.km(Ch);this.c.jm(Dh);this.c.lm(Eh);this.c.om(Fh);this.c.fm(Gh);this.c.gm(Hh);this.c.sa.Df=Ih;this.c.sa.Ef=Jh};Kh.prototype.De=function(a,b,c){this.c&&this.c.De(a,b,c,1,this.fontcolor)};
Kh.prototype.Ij=function(a){if(this.c)return this.c.Ij(a);return i};Kh.prototype.lb=function(){this.c.Lc();this.c=i};function Lh(){this.name="ogWorld";this.type=Ca}Lh.prototype=new C;Lh.prototype.Na=function(a){if(a==i)fc(E("owg.ogTexture"),"** ERROR: no options for texture creation!");else if(a.scenetype){var b=this.parent.parent.c,c={rendertotexture:this.parent.Bn};if(a.scenetype==db){if(b.gf=1,b.Mg(c),b.e)b.e.Hg=this}else if(a.scenetype==eb){if(b.gf=2,b.Mg(c),b.e)b.e.Hg=this}else if(a.scenetype==fb){if(b.gf=3,b.Mg(c),b.e)b.e.Hg=this}else if(a.scenetype==gb&&(b.gf=0,b.Mg(c),b.e))b.e.Hg=this}};
Lh.prototype.vi=function(a,b){var c=this.parent.parent.c.e.r.Da;switch(a){case 0:c.vi(Sf);c.An=b!=i?b:{};break;case 1:c.vi(Tf),c.An=b!=i?b:{}}};function Mh(){this.name="ogScene";this.type=z;this.Bf=this.Hg=i;this.Gi=[];this.gc=db;this.Bn=!0}Mh.prototype=new C;r=Mh.prototype;r.Na=function(a){if(a==i)fc(E("owg.ogScene"),"** ERROR: no options for scene creation!");else{if(v(a.type))this.gc=a.type;if(v(a.rendertotexture))this.Bn=a.rendertotexture}};r.Wg=function(a,b){var c={};this.parent.c.Wd(a,b,c);var d=Array(4);d[0]=c.hit;d[1]=c.lng;d[2]=c.lat;d[3]=c.elv;d[4]=c.x;d[5]=c.y;d[6]=c.z;return d};
r.Yg=function(a,b){var c=this.parent.c.Yg(a,b);if(c)return c.sp.id;return-1};r.nf=function(a,b){return this.parent.c.nf(a,b)};r.Xg=function(a,b){return this.parent.c.Xg(a,b)};function Nh(a,b){var c=A(b);if(c&&c.type==Ra){var d=rc(c);d.Ba(c.cc,c.bc,c.$b);d.Cb(H(c.Va),H(c.pitch),H(c.fc));d.la=c}a.Bf=c}r.Wj=function(a,b){var c=this.parent.c;if(a==0)b.type="globe";else if(a==1)b.type="fly";else if(a==2)b.type="constrained";else if(a==3)b.type="dynamic";else return;c.e.Wj(b)};r.Ql=function(a){this.parent.c.e.Kd.Ql(a)};function Oh(){this.name="ogPOI";this.type=Wa;this.O=!1;this.k=this.wa=i}Oh.prototype=new C;
Oh.prototype.Na=function(a){var b="",c=40,d=i;a.text&&(b=a.text);if(a.position){var e=a.position,f=[];(new O(e[0],e[1],e[2])).pa(f)}a.size&&(c=a.size);a.icon&&(d=a.icon);if(a.textstyle)this.fg=a.textstyle;if(a.iconstyle)this.Mf=a.iconstyle;this.wa=this.parent.parent.c.Bg.Kl(b,this.fg,d,this.Mf);this.wa.O=!1;if(a.flagpoleColor)b=this.wa,d=a.flagpoleColor,b.vn=d[0],b.un=d[1],b.tn=d[2],b.sn=d[3];a.flagpole==!0?this.wa.Ba(f[0],f[1],f[2],0):this.wa.Ba(f[0],f[1],f[2],i);this.wa.wi(c);if(a.centerOnIcon==
!0)c=this.wa,c.Hi=!0,fh(c);if(a.pivotPoint)c=a.pivotPoint,f=this.wa,b=c[1],d=c[2],f.$k=c[0],f.al=b,f.bl=d,fh(f);this.wa.sp=this;(c=Ph(this))&&c.Ta.push(this.wa);if(a.visibilityRange)c=this.wa,a=a.visibilityRange,c.rl=a[0]*1E3*G,c.ql=a[1]*1E3*G};Oh.prototype.lb=function(){var a=this.parent.parent,b=Ph(this);if(b)for(var c=this.wa,d=0;d<b.Ta.length;d++)if(b.Ta[d]==c){b.Ta.splice(d,1);break}a.c.Bg.Ml(this.wa)};Oh.prototype.na=function(){this.O=!0;this.wa.O=!0};
Oh.prototype.oa=function(){this.O=!1;this.wa.O=!1};function Ph(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.r)b=a.e.r.Vh;return b};function Qh(){this.name="ogPOILayer";this.type=Ga;this.O=!1;this.Ta=[];this.se="";this.Mf=this.fg=i;this.Zo={fontString:"48px Arial",backgroundColor:"rgba(0, 0, 0, 0)",fontColor:"rgba(255, 255, 255, 1.0)",lineWidth:3,strokeStyle:"rgba(0, 0, 0, 1.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.0)"};this.Yo={iconWidth:64,iconHeight:64,border:0,backgroundColor:"rgba(0, 0, 0, 0.0)",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"rgba(255, 0, 0, 0)"}}
Qh.prototype=new C;
function Rh(a){a.font&&a.fontSize&&(a.fontString=a.fontSize+"px "+a.font);if(a.backgroundColor){var b=a.backgroundColor;a.backgroundColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")"}if(a.fontColor)b=a.fontColor,a.fontColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.strokeColor)b=a.strokeColor,a.strokeStyle="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";if(a.shadowColor)b=a.shadowColor,a.shadowColor="rgba("+b[0]*255+","+b[1]*255+","+b[2]*255+","+b[3]+")";a.width&&
(a.iconWidth=a.width);a.height&&(a.iconHeight=a.height)}Qh.prototype.Na=function(a){if(a.name)this.se=a.name;a.textstyle?(Rh(a.textstyle),this.fg=a.textstyle):this.fg=this.Zo;a.iconstyle?(Rh(a.iconstyle),this.Mf=a.iconstyle):this.Mf=this.Yo};Qh.prototype.lb=function(){for(var a=0;a<this.Ta.length;a++)D(this.Ta[a])};Qh.prototype.na=function(){this.O=!0;for(var a=0;a<this.Ta.length;a++)this.Ta[a].na()};Qh.prototype.oa=function(){this.O=!1;for(var a=0;a<this.Ta.length;a++)this.Ta[a].oa()};function Sh(){this.name="ogElevationLayer";this.type=Ea;this.Qf=-1}Sh.prototype=new C;Sh.prototype.Qg=function(){var a=i,b=this.parent.parent.parent.c;if(b.e&&b.e.r)a=b.e.r.Da;return a};Sh.prototype.Bj=function(a){var b=this.Qg();if(b)this.Qf=b.Bj(a)};Sh.prototype.Sj=function(){var a=this.Qg();a&&this.Qf!=-1&&a.Sj(this.Qf)};Sh.prototype.Na=function(a){this.Bj(a)};function th(a){this.c=a;this.b=a.b;this.Uf=i;this.Om=this.ac=!1;this.pi=[];this.qi=[];this.ri=[];this.si=[];this.Sn=2E3;this.fp=new O;this.Ef=this.Df=i}function Th(a,b,c,d){var e=a.Uf.lf(),f=[e.longitude,e.latitude,e.elevation],g=[b,c,d];a.Ch=kc*Math.acos(Math.sin(H(f[1]))*Math.sin(H(g[1]))+Math.cos(H(f[1]))*Math.cos(H(g[1]))*Math.cos(H(g[0]-f[0])));if(isNaN(a.Ch))a.Ch=0;e=[e.longitude,e.latitude,e.elevation+a.Ch/4];b=[b,c,d+a.Ch/4];a.pi=f;a.qi=e;a.ri=b;a.si=g;a.Om=!0}
function Qe(a,b,c,d,e,f,g){a.Uf=a.c.e.P;var j=a.Uf.Rg();a.jl=j.Va;a.hl=j.pitch;a.il=j.fc;e!=i&&f!=i&&g!=i?(a.Kn=H(e),a.In=H(f),a.Jn=H(g)):(a.Kn=a.jl,a.In=a.hl,a.Jn=a.il);a.Ah=a.Kn-a.jl;Math.abs(a.Ah)>Math.PI&&(a.Ah>0?a.Ah-=2*Math.PI:a.Ah+=2*Math.PI);a.yh=a.In-a.hl;Math.abs(a.yh)>Math.PI&&(a.yh>0?a.yh-=2*Math.PI:a.yh+=2*Math.PI);a.zh=a.Jn-a.il;Math.abs(a.zh)>Math.PI&&(a.zh>0?a.zh-=2*Math.PI:a.zh+=2*Math.PI);Th(a,b,c,d);a.Df&&a.Df(a.c);a.c.xi(function(b){if(a.Om){a.Zm+=b;b=a.Zm/a.Sn;a.L=0.5*Math.sin(Math.PI*
b-Math.PI/2)+0.5;if(b>1)a.L=1,a.gh();var b=Math.pow(1-a.L,3)*a.pi[0]+3*a.L*Math.pow(1-a.L,2)*a.qi[0]+3*a.L*a.L*(1-a.L)*a.ri[0]+Math.pow(a.L,3)*a.si[0],c=Math.pow(1-a.L,3)*a.pi[1]+3*a.L*Math.pow(1-a.L,2)*a.qi[1]+3*a.L*a.L*(1-a.L)*a.ri[1]+Math.pow(a.L,3)*a.si[1],d=Math.pow(1-a.L,3)*a.pi[2]+3*a.L*Math.pow(1-a.L,2)*a.qi[2]+3*a.L*a.L*(1-a.L)*a.ri[2]+Math.pow(a.L,3)*a.si[2];a.fp.lc(b,c,d);a.Uf.Ba(b,c,d);a.Uf.Cb(a.jl+a.L*a.Ah,a.hl+a.L*a.yh,a.il+a.L*a.zh);a.L==1&&a.gh()}});a.L=0;a.Zm=0;a.ac=!0}
th.prototype.gh=function(){this.c.xi(i);this.ac=!1;this.Ef&&this.Ef(this.c)};
th.prototype.Hj=function(a,b,c,d,e,f,g){this.Uf=this.c.e.P;d*=G;var j=new O(a,b,c),k=[];j.pa(k);var l=new J;l.Sd(a,b);a=new J;a.gd(k[0],k[1],k[2]);k=new J;k.U(a,l);l={};e!=i&&f!=i&&g!=i?(l.Va=H(e),l.pitch=H(f),l.fc=H(g)):l=this.Uf.Rg();a=l.pitch-Math.PI/2;d=new I(d*Math.sin(a)*Math.cos(l.Va),d*Math.sin(a)*Math.sin(l.Va),d*Math.cos(a));d=k.Ma(d).a;j.lc(d[0],d[1],d[2]);d=j.G[1];k=j.G[0];j=j.G[2];j>c?Qe(this,k,d,j,e,f,g):Qe(this,k,d,-j,l.Va,-oc(l.pitch),l.fc)};th.prototype.bh=ba("Sn");function ig(a,b){this.c=a;this.b=a.b;this.ka=this.Nb=this.fa=this.R=this.A=i;this.ye=new J;this.dl=[];this.options=b;this.xc=new Ec;this.xc.p(1,1,1,1)}
ig.prototype.ui=function(a){this.dl=a;var b=0,c=[],d=[];if(this.options.segmentation)for(var e=0;e<a.length-1;e++){var f=[];If(a[e][0],a[e][1],f);f[2]=a[e][2];var g=[];If(a[e+1][0],a[e+1][1],g);g[2]=a[e+1][2];for(var g=[g[0]-f[0],g[1]-f[1],g[2]-g[2]],j=0;j<this.options.segmentation+1;j++){var k=f[2]+g[2]*j/this.options.segmentation,l=[];Jf(f[0]+g[0]*j/this.options.segmentation,f[1]+g[1]*j/this.options.segmentation,l);l[2]=k;k=new O(l[0],l[1],l[2]);l=[];k.pa(l);c.push(l[0]);c.push(l[1]);c.push(l[2]);
c.push(this.options.color[0]);c.push(this.options.color[1]);c.push(this.options.color[2]);c.push(this.options.color[3]);d.push(b);d.push(b+1);b+=1}}else for(e=0;e<a.length;e++)k=new O(a[e][0],a[e][1],a[e][2]),l=[],k.pa(l),c.push(l[0]),c.push(l[1]),c.push(l[2]),c.push(this.options.color[0]),c.push(this.options.color[1]),c.push(this.options.color[2]),c.push(this.options.color[3]),d.push(e),d.push(e+1);d.pop();d.pop();this.$i=e*this.options.segmentation;this.A=new Float32Array(c);this.R=new Uint16Array(d);
this.ib=d.length;this.Pe()};ig.prototype.o=function(){if(this.fa)this.b.deleteBuffer(this.fa),this.fa=i;if(this.Nb)this.b.deleteBuffer(this.Nb),this.fa=i;this.fa=this.Ae=i};
ig.prototype.ra=function(){this.dl!=i&&(this.fa||this.Pe(),this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa),this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Nb),this.b.enableVertexAttribArray(0),this.b.enableVertexAttribArray(1),this.b.vertexAttribPointer(0,3,this.b.FLOAT,!1,28,0),this.b.vertexAttribPointer(1,4,this.b.FLOAT,!1,28,12),Pc(this.c.Ua,this.c.qa,this.xc),this.b.lineWidth(this.options.linewidth),this.b.enable(this.b.POLYGON_OFFSET_FILL),this.b.polygonOffset(1,1E3),this.b.drawElements(this.b.LINES,
this.ib,this.b.UNSIGNED_SHORT,0),this.b.disable(this.b.POLYGON_OFFSET_FILL),this.b.disableVertexAttribArray(0),this.b.disableVertexAttribArray(1),this.b.lineWidth(1))};ig.prototype.Pe=function(){this.fa=this.b.createBuffer();this.b.bindBuffer(this.b.ARRAY_BUFFER,this.fa);this.b.bufferData(this.b.ARRAY_BUFFER,this.A,this.b.STATIC_DRAW);this.Nb=this.b.createBuffer();this.b.bindBuffer(this.b.ELEMENT_ARRAY_BUFFER,this.Nb);this.b.bufferData(this.b.ELEMENT_ARRAY_BUFFER,this.R,this.b.STATIC_DRAW)};function Uh(){this.name="ogEarthPolylineObject";this.type=bb;this.options=this.Se=i}Uh.prototype=new C;r=Uh.prototype;r.Na=function(a){this.options=a;this.Se=new ig(this.parent.parent.parent.c,a);this.Se.ui(a.coords)};r.lb=function(){if(this.Se)this.Se.o(),this.Se=i,this.status=3};r.na=function(){this.Se.O=!0};r.Me=m();r.oa=function(){this.Se.O=!1};function Vh(a){this.c=a;this.b=a.b;this.$b=this.cc=this.bc=0;this.canvas=i;this.w=this.t=0;this.Q=this.u=i;this.qn=-1}r=Vh.prototype;
r.hh=function(){this.b.enable(this.b.TEXTURE_2D);this.b.bindTexture(this.b.TEXTURE_2D,this.$a.l);this.b.pixelStorei(this.b.UNPACK_FLIP_Y_WEBGL,0);this.b.texImage2D(this.b.TEXTURE_2D,0,this.b.RGBA,this.c.b.RGBA,this.b.UNSIGNED_BYTE,this.canvas);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MAG_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_MIN_FILTER,this.b.LINEAR);this.b.texParameteri(this.b.TEXTURE_2D,this.b.TEXTURE_WRAP_S,this.b.CLAMP_TO_EDGE);this.b.texParameteri(this.b.TEXTURE_2D,
this.b.TEXTURE_WRAP_T,this.b.CLAMP_TO_EDGE);this.b.bindTexture(this.b.TEXTURE_2D,i);this.$a.Wb=!0};r.Ba=function(a,b,c){var d=[];(new O(a,b,c)).pa(d);this.u.$g(d[0],d[1],d[2],0,0,0)};r.ra=function(){this.scale=20;this.c.b.enable(this.c.b.BLEND);this.c.b.depthFunc(this.c.b.LEQUAL);this.c.b.blendFunc(this.c.b.SRC_ALPHA,this.c.b.ONE_MINUS_SRC_ALPHA);this.u&&Tc(this.u);this.c.Mc();var a=new J;a.Yd(G*this.scale,G*this.scale,1);this.c.Nc(a);this.u&&this.u.ra(!1,0,0,i,i);this.c.Ed();this.c.b.disable(this.c.b.BLEND)};
r.wi=ba("scale");r.Wg=function(a,b){if(this.u)var c=this.c.kf(a,b,this.c.qa,!0),d=this.u.Ne(c.x,c.y,c.h,c.le,c.me,c.ne);if(d){var e=c=0,f=d.bd,g=d.Rd,j=1-f-g;d.Tn==0?(c=f*-this.t/2+g*this.t/2+j*-this.t/2/(f+g+j)+this.t/2,e=f*this.w/2+g*this.w/2+j*-this.w/2/(f+g+j)+this.w/2):d.Tn==1&&(c=f*this.t/2+g*this.t/2+j*-this.t/2/(f+g+j)+this.t/2,e=f*this.w/2+g*-this.w/2+j*-this.w/2/(f+g+j)+this.w/2);c/=this.t;e/=this.w;d={};d.id=this.qn;d.x=c;d.y=e;return d}return i};r.o=function(){this.u&&(this.u.o(),this.$a.o())};function Wh(){this.name="ogBillboard";this.type=Xa;this.status=ib;this.k=-1;this.O=!1}Wh.prototype=new C;r=Wh.prototype;
r.Na=function(a){if(a==i)fc(E("owg.ogBillboard"),"** ERROR: no options for billboard creation!");else if(this.parent==i)fc(E("owg.ogBillboard"),"** ERROR: no parent!");else if(this.parent.type!=z)fc(E("owg.ogBillboard"),"** ERROR: parent is not scene!");else if(a.canvas){this.Qc=new Vh(this.parent.parent.c);this.Qc.qn=this.id;var b=this.Qc,c=a.canvas;b.canvas=c;switch(c.constructor.toString()){case "[object HTMLCanvasElement]":b.Q=b.canvas.getContext("2d");b.t=b.Q.canvas.width;b.w=b.Q.canvas.height;
break;case "[object HTMLVideoElement]":b.t=c.videoWidth,b.w=c.videoHeight}b.$a=new M(b.c);b.$a.l=b.b.createTexture();b.u=new K(b.c);b.u.Oc(b.$a);b.ad=b.t;b.$c=b.w;c=[];c.push(-b.t/2,b.w/2,0,0,0);c.push(-b.t/2,-b.w/2,0,0,1/b.$c*b.w);c.push(b.t/2,-b.w/2,0,1/b.ad*b.t,1/b.$c*b.w);c.push(b.t/2,b.w/2,0,1/b.ad*b.t,0);Mc(b.u,c);Nc(b.u,[0,1,2,0,2,3],"TRIANGLES");b.u.Z=[-b.t/2,-b.w/2,0];b.u.xa=[b.t/2,b.w/2,0];b.u.t=b.t;b.u.w=b.w;b.hh();a=a.position;this.Qc.Ba(a[0],a[1],a[2]);Xh(this).Aj(this.Qc)}};
r.lb=function(){if(this.Qc)Xh(this).Rj(this.Qc),this.Qc.o(),this.status=3};r.ra=function(){this.Qc.ra()};function Xh(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.r)b=a.e.r.uh;return b}r.na=function(){this.O=!0;this.Qc.O=!0};r.oa=function(){this.O=!1;this.Qc.O=!1};function Yh(){this.name="ogMeshObject";this.type=Oa;this.jb=[];this.Ad=[]}Yh.prototype=new C;r=Yh.prototype;r.Na=function(a){this.options=a;if(this.options.jsonobject)for(var a=this.options.jsonobject,b=0;b<a.length;b++){this.options.jsonobject=a[b];var c=V(Pa,this,this.options);this.jb.push(c);this.Ad.push(c.u)}};r.lb=function(){for(var a=0;a<this.jb.length;a++)D(this.jb[a]);this.Ad=this.jb=i};r.na=function(){for(var a=0;a<this.jb.length;a++)this.jb[a].na()};
r.pf=function(a,b,c,d){for(var e=0;e<this.jb.length;e++)this.jb[e].pf(a,b,c,d)};r.Me=function(a,b,c,d,e,f){for(var g=0;g<this.jb.length;g++)this.jb[g].Me(a,b,c,d,e,f)};r.eh=function(a,b,c,d){for(var e=0;e<this.jb.length;e++)this.jb[e].eh(a,b,c,d)};r.qf=function(a,b,c){for(var d=0;d<this.jb.length;d++)this.jb[d].qf(a,b,c)};r.Cb=function(a,b,c){for(var d=0;d<this.jb.length;d++)this.jb[d].Cb(a,b,c)};r.oa=function(){for(var a=0;a<this.jb.length;a++)this.jb[a].oa()};function Zh(){this.zn=Aa()}var $h=new Zh;Zh.prototype.set=ba("zn");Zh.prototype.reset=function(){this.set(Aa())};Zh.prototype.get=ca("zn");function ai(a){this.el=a||"";this.Ip=$h}ai.prototype.Ep=!0;ai.prototype.Gp=!0;ai.prototype.Fp=!0;ai.prototype.En=!1;function bi(a){if(a<10)return"0"+a;return String(a)}function ci(a,b){var c=(a.Nn-b)/1E3,d=c.toFixed(3),e=0;if(c<1)e=2;else for(;c<100;)e++,c*=10;for(;e-- >0;)d=" "+d;return d}function di(a){ai.call(this,a)}Ba(di,ai);di.prototype.En=!0;function ei(a){this.Tf=a||100;this.Cf=[]}r=ei.prototype;r.Nh=0;r.add=function(a){this.Cf[this.Nh]=a;this.Nh=(this.Nh+1)%this.Tf};r.get=function(a){a=fi(this,a);return this.Cf[a]};r.set=function(a,b){a=fi(this,a);this.Cf[a]=b};r.Kf=function(){return this.Cf.length};r.clear=function(){this.Nh=this.Cf.length=0};r.Mk=function(){for(var a=this.Kf(),b=[],c=this.Kf()-this.Kf();c<a;c++)b[c]=this.get(c);return b};r.Ti=function(){for(var a=[],b=this.Kf(),c=0;c<b;c++)a[c]=c;return a};
function fi(a,b){b>=a.Cf.length&&aa(Error("Out of bounds exception"));if(a.Cf.length<a.Tf)return b;return(a.Nh+Number(b))%a.Tf};function gi(a,b){this.Ve=a||"";this.el=b||"";this.Ag=[];this.dj=new ei(hi);this.yp=za(this.Oo,this);this.ep=new di(this.el);this.dp={};if(!0!=this.Mm){this.Mm=!0;ic();var c=hc,d=this.yp;if(!c.Ih)c.Ih=[];c.Ih.push(d)}this.Oi=ii(this.Ve,"enabled")=="1";u.setInterval(za(this.Cp,this),7500)}var hi=500;r=gi.prototype;r.eo="LOGGING";r.bp=!1;r.qb=i;r.El=!1;r.Mm=!1;r.um=i;r.Qk=Aa();r.Jd=function(){this.Oi&&ji(this)};function ki(a){a.Oi=!0;a.Oi&&(ji(a),a.qb&&a.yj());li(a,"enabled","1")}
function mi(a){return!!a.qb&&!a.qb.closed}r.To=function(){this.dj.clear();mi(this)&&this.yj()};
r.Oo=function(a){if(!this.dp[a.Tm]){this.bp&&a.ue>=Yb&&ki(this);var b=this.ep,c;switch(a.ue.value){case Xb.value:c="dbg-sh";break;case Yb.value:c="dbg-sev";break;case Zb.value:c="dbg-w";break;case $b.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.el," ");if(b.Ep){var e=new Date(a.Nn);d.push("[",bi(e.getFullYear()-2E3)+bi(e.getMonth()+1)+bi(e.getDate())+" "+bi(e.getHours())+":"+bi(e.getMinutes())+":"+bi(e.getSeconds())+"."+bi(Math.floor(e.getMilliseconds()/10)),"] ")}b.Gp&&d.push("[",xb(ci(a,
b.Ip.get())),"s] ");b.Fp&&d.push("[",rb(a.Tm),"] ");d.push('<span class="',c,'">',qb(xb(rb(a.$m))));b.En&&a.Ak&&d.push("<br>",qb(xb(a.zk||"")));d.push("</span><br>");a=d.join("");this.Oi?(ji(this),this.dj.add(a),ni(this,a)):this.dj.add(a)}};function ni(a,b){a.Ag.push(b);u.clearTimeout(a.um);Aa()-a.Qk>750?a.Fl():a.um=u.setTimeout(za(a.Fl,a),250)}
r.Fl=function(){this.Qk=Aa();if(mi(this)){var a=this.qb.document.body,a=a&&a.scrollHeight-(a.scrollTop+a.clientHeight)<=100;this.qb.document.write(this.Ag.join(""));this.Ag.length=0;a&&this.qb.scrollTo(0,1E6)}};function oi(a){for(var b=a.dj.Mk(),c=0;c<b.length;c++)ni(a,b[c])}
function ji(a){if(!mi(a)&&!a.El){var b=ii(a.Ve,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]),b=Number(b[3]);a.El=!0;a.qb=window.open("",jd?a.Ve.replace(/[\s\-\.\,]/g,"_"):a.Ve,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);if(!a.qb&&!a.Hp)alert("Logger popup was blocked"),a.Hp=!0;a.El=!1;a.qb&&a.yj()}}r.Ui=p("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}");
r.yj=function(){mi(this)||(this.qb.document.open(),ni(this,"<style>"+this.Ui()+'</style><hr><div class="dbg-ev" style="text-align:center">'+this.eo+"<br><small>Logger: "+this.Ve+"</small></div><hr>"),oi(this))};function li(a,b,c){b+=a.Ve;document.cookie=b+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(Aa()+2592E6)).toUTCString()}
function ii(a,b,c){var a=b+a,b=String(document.cookie),d=b.indexOf(a+"=");return d!=-1?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,c==-1?b.length:c))):c||""}r.Cp=function(){mi(this)&&li(this,"dbg",(this.qb.screenX||this.qb.screenLeft||0)+","+(this.qb.screenY||this.qb.screenTop||0)+","+(this.qb.outerWidth||800)+","+(this.qb.outerHeight||500))};function pi(a){var b;b=(b=a.className)&&typeof b.split=="function"?b.split(/\s+/):[];var c=Hb(arguments,1),d;d=b;for(var e=0,f=0;f<c.length;f++)Db(d,c[f])>=0||(d.push(c[f]),e++);d=e==c.length;a.className=b.join(" ");return d};var qi=!jd||xd("9");!kd&&!jd||jd&&xd("9")||kd&&xd("1.9.1");jd&&xd("9");function ri(a,b){kb(b,function(b,d){d=="style"?a.style.cssText=b:d=="class"?a.className=b:d=="for"?a.htmlFor=b:d in si?a.setAttribute(si[d],b):a[d]=b})}var si={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",rowspan:"rowSpan",valign:"vAlign",height:"height",width:"width",usemap:"useMap",frameborder:"frameBorder",maxlength:"maxLength",type:"type"};
function ti(a,b,c){function d(c){c&&b.appendChild(ma(c)?a.createTextNode(c):c)}for(var e=2;e<c.length;e++){var f=c[e];la(f)&&!(oa(f)&&f.nodeType>0)?Eb(ui(f)?Gb(f):f,d):d(f)}}function ui(a){if(a&&typeof a.length=="number")if(oa(a))return typeof a.item=="function"||typeof a.item=="string";else if(na(a))return typeof a.item=="function";return!1}function vi(a){this.Dh=a||u.document||document}function wi(a,b){return ma(b)?a.Dh.getElementById(b):b}
vi.prototype.pg=function(){var a=this.Dh,b=arguments,c=b[0],d=b[1];if(!qi&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',rb(d.name),'"');if(d.type){c.push(' type="',rb(d.type),'"');var e={};nb(e,d);d=e;delete d.type}c.push(">");c=c.join("")}c=a.createElement(c);if(d)ma(d)?c.className=d:ka(d)?pi.apply(i,[c].concat(d)):ri(c,d);b.length>2&&ti(a,c,b);return c};vi.prototype.createElement=function(a){return this.Dh.createElement(a)};vi.prototype.createTextNode=function(a){return this.Dh.createTextNode(a)};
vi.prototype.appendChild=function(a,b){a.appendChild(b)};function xi(a,b){gi.call(this,a,b)}Ba(xi,gi);r=xi.prototype;r.Fl=function(){this.Qk=Aa();if(mi(this)){for(var a=wi(this.Rc,"log"),b=a.scrollHeight-(a.scrollTop+a.offsetHeight)<=100,c=0;c<this.Ag.length;c++){var d=this.Rc.pg("div","logmsg");d.innerHTML=this.Ag[c];a.appendChild(d)}this.Ag.length=0;this.Dn();if(b)a.scrollTop=a.scrollHeight}};
r.yj=function(){if(mi(this)){var a=this.qb.document;a.open();a.write('<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN""http://www.w3.org/TR/html4/loose.dtd"><html><head><title>Logging: '+this.Ve+"</title><style>"+this.Ui()+'</style></head><body><div id="log" style="overflow:auto"></div><div id="head"><p><b>Logging: '+this.Ve+"</b></p><p>"+this.eo+'</p><span id="clearbutton">clear</span><span id="openbutton">options</span></div><div id="options"><big><b>Options:</b></big><div id="optionsarea"></div><span id="closebutton">save and close</span></div></body></html>');
a.close();(jd?a.body:this.qb).onresize=za(this.Dn,this);this.Rc=new vi(a);wi(this.Rc,"openbutton").onclick=za(this.tp,this);wi(this.Rc,"closebutton").onclick=za(this.Uo,this);wi(this.Rc,"clearbutton").onclick=za(this.To,this);oi(this)}};
r.tp=function(){var a=wi(this.Rc,"optionsarea");a.innerHTML="";for(var b=yi(),c=this.Rc,d=0;d<b.length;d++){var e=E(b[d]),e=c.pg("div",{},zi(this,"sel"+b[d],e.ue?e.ue.name:"INHERIT"),c.pg("span",{},b[d]||"(root)"));a.appendChild(e)}wi(this.Rc,"options").style.display="block";return!1};
function zi(a,b,c){for(var a=a.Rc,b=a.pg("select",{id:b}),d=0;d<bc.length;d++){var e=bc[d],f=a.pg("option",{},e.name);if(c==e.name)f.selected=!0;b.appendChild(f)}b.appendChild(a.pg("option",{selected:c=="INHERIT"},"INHERIT"));return b}r.Uo=function(){wi(this.Rc,"options").style.display="none";for(var a=yi(),b=this.Rc,c=0;c<a.length;c++){var d=E(a[c]),e=wi(b,"sel"+a[c]),e=e.options[e.selectedIndex].text;e=="INHERIT"?d.ej(i):d.ej(dc(e))}return!1};
r.Dn=function(){var a=this.Rc,b=wi(a,"log"),c=wi(a,"head");b.style.top=c.offsetHeight+"px";b.style.height=a.Dh.body.offsetHeight-c.offsetHeight-(jd?4:0)+"px"};function yi(){var a=lb(gc);a.sort();return a}r.Ui=function(){return xi.cg.Ui.call(this)+"html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:medium monospace;}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"};function Ai(){this.y=this.x=i;this.index=-1;arguments.length==0?this.y=this.x=0:arguments.length==2?(this.x=arguments[0],this.y=arguments[1]):arguments.length==3?(this.x=arguments[0],this.y=arguments[1],this.index=arguments[2]):alert("Invalid poly2tri.Point constructor call!");this.Fh=[]}r=Ai.prototype;r.set=function(a,b){this.x=a;this.y=b};r.add=function(a){this.x+=a.x;this.y+=a.y};r.sub=function(a){this.x-=a.x;this.y-=a.y};r.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)};
r.i=function(a){return this.x==a.x&&this.y==a.y};function Bi(a,b){return a.y==b.y?a.x-b.x:a.y-b.y}
function Ci(){this.Bb=this.Sa=i;arguments.length==2?arguments[0].y>arguments[1].y?(this.Bb=arguments[0],this.Sa=arguments[1]):arguments[0].y==arguments[1].y?arguments[0].x>arguments[1].x?(this.Bb=arguments[0],this.Sa=arguments[1]):arguments[0].x==arguments[1].x?alert("Invalid poly2tri.edge constructor call: repeated points!"):(this.Sa=arguments[0],this.Bb=arguments[1]):(this.Sa=arguments[0],this.Bb=arguments[1]):alert("Invalid poly2tri.Edge constructor call!");this.Bb.Fh.push(this)}
function Di(a,b,c){this.d=[i,i,i];this.La=[i,i,i];this.Km=!1;this.Fa=[!1,!1,!1];this.Ga=[!1,!1,!1];arguments.length==3&&(this.d[0]=a,this.d[1]=b,this.d[2]=c)}r=Di.prototype;r.Dd=function(a){return this.d[a]};r.Fj=function(){for(var a=!0,b=0;b<arguments.length;++b)a=a&&(arguments[b].i(this.d[0])||arguments[b].i(this.d[1])||arguments[b].i(this.d[2]));return a};r.Sl=function(){if(arguments.length!=0)this.Km=arguments[0];return this.Km};
r.cd=function(){var a;if(arguments.length==3){var b=arguments[0],c=arguments[1];a=arguments[2];b.i(this.d[2])&&c.i(this.d[1])||b.i(this.d[1])&&c.i(this.d[2])?this.La[0]=a:b.i(this.d[0])&&c.i(this.d[2])||b.i(this.d[2])&&c.i(this.d[0])?this.La[1]=a:b.i(this.d[0])&&c.i(this.d[1])||b.i(this.d[1])&&c.i(this.d[0])?this.La[2]=a:alert("Invalid poly2tri.Triangle.MarkNeighbor call (1)!")}else arguments.length==1?(a=arguments[0],a.Fj(this.d[1],this.d[2])?(this.La[0]=a,a.cd(this.d[1],this.d[2],this)):a.Fj(this.d[0],
this.d[2])?(this.La[1]=a,a.cd(this.d[0],this.d[2],this)):a.Fj(this.d[0],this.d[1])&&(this.La[2]=a,a.cd(this.d[0],this.d[1],this))):alert("Invalid poly2tri.Triangle.MarkNeighbor call! (2)")};function Ei(a){a.La[0]=i;a.La[1]=i;a.La[2]=i}function Fi(a){a.Ga[0]=!1;a.Ga[1]=!1;a.Ga[2]=!1}function Gi(a,b){return b.i(a.d[0])?a.d[2]:b.i(a.d[1])?a.d[0]:b.i(a.d[2])?a.d[1]:i}function Hi(a,b){return b.i(a.d[0])?a.d[1]:b.i(a.d[1])?a.d[2]:b.i(a.d[2])?a.d[0]:i}
function Ii(a,b){return b.i(a.d[0])?a.La[1]:b.i(a.d[1])?a.La[2]:a.La[0]}function Ji(a,b){return b.i(a.d[0])?a.La[2]:b.i(a.d[1])?a.La[0]:a.La[1]}function Ki(a,b){return b.i(a.d[0])?a.Fa[1]:b.i(a.d[1])?a.Fa[2]:a.Fa[0]}function Li(a,b){return b.i(a.d[0])?a.Fa[2]:b.i(a.d[1])?a.Fa[0]:a.Fa[1]}function Mi(a,b,c){b.i(a.d[0])?a.Fa[1]=c:b.i(a.d[1])?a.Fa[2]=c:a.Fa[0]=c}function Ni(a,b,c){b.i(a.d[0])?a.Fa[2]=c:b.i(a.d[1])?a.Fa[0]=c:a.Fa[1]=c}
function Oi(a,b){return b.i(a.d[0])?a.Ga[1]:b.i(a.d[1])?a.Ga[2]:a.Ga[0]}function Pi(a,b){return b.i(a.d[0])?a.Ga[2]:b.i(a.d[1])?a.Ga[0]:a.Ga[1]}function Qi(a,b,c){b.i(a.d[0])?a.Ga[1]=c:b.i(a.d[1])?a.Ga[2]=c:a.Ga[0]=c}function Ri(a,b,c){b.i(a.d[0])?a.Ga[2]=c:b.i(a.d[1])?a.Ga[0]=c:a.Ga[1]=c}function Si(a,b){return b.i(a.d[0])?a.La[0]:b.i(a.d[1])?a.La[1]:a.La[2]}
r.Lj=function(){if(arguments.length==1)this.Lj(this.d[0],arguments[0]);else if(arguments.length==2){var a=arguments[0],b=arguments[1];a.i(this.d[0])?(this.d[1]=this.d[0],this.d[0]=this.d[2],this.d[2]=b):a.i(this.d[1])?(this.d[2]=this.d[1],this.d[1]=this.d[0],this.d[0]=b):a.i(this.d[2])?(this.d[0]=this.d[2],this.d[2]=this.d[1],this.d[1]=b):alert("Invalid poly2tri.Triangle.Legalize call!")}else alert("Invalid poly2tri.Triangle.Legalize call!")};
function Ti(a,b,c){if(b.i(a.d[0]))if(c.i(a.d[1]))return 2;else{if(c.i(a.d[2]))return 1}else if(b.i(a.d[1]))if(c.i(a.d[2]))return 0;else{if(c.i(a.d[0]))return 2}else if(b.i(a.d[2]))if(c.i(a.d[0]))return 1;else if(c.i(a.d[1]))return 0;return-1}
r.Ug=function(){if(arguments.length==1)typeof arguments[0]=="number"?this.Fa[arguments[0]]=!0:this.Ug(arguments[0].Sa,arguments[0].Bb);else if(arguments.length==2){var a=arguments[0],b=arguments[1];if(b.i(this.d[0])&&a.i(this.d[1])||b.i(this.d[1])&&a.i(this.d[0]))this.Fa[2]=!0;else if(b.i(this.d[0])&&a.i(this.d[2])||b.i(this.d[2])&&a.i(this.d[0]))this.Fa[1]=!0;else if(b.i(this.d[1])&&a.i(this.d[2])||b.i(this.d[2])&&a.i(this.d[1]))this.Fa[0]=!0}else alert("Invalid poly2tri.Triangle.MarkConstrainedEdge call!")};
var Ui=3*Math.PI/4,Vi=Math.PI/2;function Wi(a,b,c){a=(a.x-c.x)*(b.y-c.y)-(a.y-c.y)*(b.x-c.x);return a>-1.0E-16&&a<1.0E-16?0:a>0?-1:1}function Xi(a,b,c,d){var e=d.x,d=d.y,f=a.x-e,a=a.y-d;if(f*(b.y-d)-(b.x-e)*a<=1.0E-16)return!1;if((c.x-e)*a-f*(c.y-d)<=1.0E-16)return!1;return!0}
function Yi(){this.F=this.next=this.df=this.f=i;this.value=0;arguments.length==1?(this.f=arguments[0],this.value=this.f.x):arguments.length==2?(this.f=arguments[0],this.df=arguments[1],this.value=this.f.x):alert("Invalid poly2tri.Node constructor call!")}function Zi(a,b){this.Jh=a;this.ll=b;this.Zh=a}Zi.prototype.Nj=function(a){var b=this.Zh;if(a<b.value)for(;(b=b.F)!=i;){if(a>=b.value)return this.Zh=b}else for(;(b=b.next)!=i;)if(a<b.value)return this.Zh=b.F;return i};
function $i(){this.Gc=this.ld=this.te=i;this.width=0;this.Rk=!1}$i.prototype.Ej=function(){this.Gc=this.ld=this.te=i;this.width=0;this.Rk=!1};function aj(){this.Fa=i;this.right=!1}function bj(a){this.Un=[];this.Tc=[];this.d=a;this.Fh=[];this.aq=this.$p=this.Zp=this.ll=this.Jh=this.Hh=i;this.Y=new $i;this.Eh=new aj;cj(this,this.d)}function cj(a,b){for(var c=0;c<b.length;++c)a.Fh.push(new Ci(b[c],b[(c+1)%b.length]))}bj.prototype.Dd=function(a){return this.d[a]};bj.prototype.Nj=function(a){return this.Hh.Nj(a.x)};
function dj(a,b){for(var c=0;c<3;++c)if(b.La[c]==i){var d;a:{d=a.Hh;var e=Gi(b,b.Dd(c)),f=e.x,g=d.Zh,j=g.f.x;if(f==j)if(e.i(g.F.f))g=g.F;else if(e.i(g.next.f))g=g.next;else{if(!e.i(g.f)){alert("Invalid poly2tri.AdvancingFront.LocatePoint call!");d=i;break a}}else if(f<j)for(;(g=g.F)!=i;){if(e.i(g.f))break}else for(;(g=g.next)!=i;)if(e.i(g.f))break;if(g!=i)d.Zh=g;d=g}if(d!=i)d.df=b}}function ej(a,b){if(b!=i&&!b.Sl()){b.Sl(!0);a.Un.push(b);for(var c=0;c<3;++c)b.Fa[c]||ej(a,b.La[c])}}
function fj(){var a;if(arguments.length==3){a=arguments[0];var b=arguments[1],c=arguments[2];a.Eh.Fa=b;a.Eh.right=b.Sa.x>b.Bb.x;if(!gj(c.df,b.Sa,b.Bb)){var d=a;if(d.Eh.right)for(var e=c;e.next.f.x<b.Sa.x;)Wi(b.Bb,e.next.f,b.Sa)==-1?hj(d,b,e):e=e.next;else for(e=c;e.F.f.x>b.Sa.x;)Wi(b.Bb,e.F.f,b.Sa)==1?ij(d,b,e):e=e.F;fj(a,b.Sa,b.Bb,c.df,b.Bb)}}else if(arguments.length==5){if(a=arguments[0],b=arguments[1],c=arguments[2],d=arguments[3],e=arguments[4],!gj(d,b,c)){var f=Hi(d,e),f=Wi(c,f,b);if(f==0)alert("poly2tri.sweep.EdgeEvent: Collinear not supported!");
else{var g=Gi(d,e),g=Wi(c,g,b);g==0?alert("poly2tri.sweep.EdgeEvent: Collinear not supported!"):f==g?(d=f==1?Ji(d,e):Ii(d,e),fj(a,b,c,d,e)):jj(a,b,c,d,e)}}}else alert("Invalid poly2tri.sweep.EdgeEvent call!")}function gj(a,b,c){var d=Ti(a,b,c);if(d!=-1)return a.Ug(d),a=a.La[d],a!=i&&a.Ug(b,c),!0;return!1}function kj(a,b){var c=new Di(b.F.f,b.f,b.next.f);c.cd(b.F.df);c.cd(b.df);a.Tc.push(c);b.F.next=b.next;b.next.F=b.F;lj(a,c)||dj(a,c)}
function mj(a){var b=a.next.f.x-a.f.x,c=a.next.f.y-a.f.y,d=a.F.f.x-a.f.x,a=a.F.f.y-a.f.y;return Math.atan2(b*a-c*d,b*d+c*a)}
function lj(a,b){for(var c=0;c<3;++c)if(!b.Ga[c]){var d=b.La[c];if(d!=i){var e=b.Dd(c),f=Gi(d,Gi(b,e)),g=f.i(d.d[0])?0:f.i(d.d[1])?1:f.i(d.d[2])?2:-1;if(d.Fa[g]||d.Ga[g])b.Fa[c]=d.Fa[g];else{var j;var k=Hi(b,e),l=Gi(b,e);j=e.x-f.x;var n=e.y-f.y,q=k.x-f.x,k=k.y-f.y,o=j*k-q*n;if(o<=0)j=!1;else{var s=l.x-f.x,l=l.y-f.y,t=s*n-j*l;j=t<=0?!1:(j*j+n*n)*(q*l-s*k)+(q*q+k*k)*t+(s*s+l*l)*o>0}if(j)return b.Ga[c]=!0,d.Ga[g]=!0,nj(b,e,d,f),(e=!lj(a,b))&&dj(a,b),(e=!lj(a,d))&&dj(a,d),b.Ga[c]=!1,d.Ga[g]=!1,!0}}}return!1}
function nj(a,b,c,d){var e,f,g,j;e=Ji(a,b);f=Ii(a,b);g=Ji(c,d);j=Ii(c,d);var k,l,n,q;k=Li(a,b);l=Ki(a,b);n=Li(c,d);q=Ki(c,d);var o,s,t,x;o=Pi(a,b);s=Oi(a,b);t=Pi(c,d);x=Oi(c,d);a.Lj(b,d);c.Lj(d,b);Ri(c,b,o);Qi(a,b,s);Ri(a,d,t);Qi(c,d,x);Ni(c,b,k);Mi(a,b,l);Ni(a,d,n);Mi(c,d,q);Ei(a);Ei(c);e&&c.cd(e);f&&a.cd(f);g&&a.cd(g);j&&c.cd(j);a.cd(c)}
function oj(a,b){var c;c=a.Y.width>(a.Y.Rk?a.Y.te.f.y-b.f.y:a.Y.Gc.f.y-b.f.y)?!0:!1;if(!c&&(kj(a,b),!(b.F==a.Y.te&&b.next==a.Y.Gc))){if(b.F==a.Y.te){c=Wi(b.f,b.next.f,b.next.next.f);if(c==1)return;b=b.next}else if(b.next==a.Y.Gc){c=Wi(b.f,b.F.f,b.F.F.f);if(c==-1)return;b=b.F}else b=b.F.f.y<b.next.f.y?b.F:b.next;oj(a,b)}}function hj(a,b,c){c.f.x<b.Sa.x&&(Wi(c.f,c.next.f,c.next.next.f)==-1?pj(a,b,c):(qj(a,b,c),hj(a,b,c)))}
function pj(a,b,c){kj(a,c.next);c.next.f!=b.Sa&&Wi(b.Bb,c.next.f,b.Sa)==-1&&Wi(c.f,c.next.f,c.next.next.f)==-1&&pj(a,b,c)}function qj(a,b,c){Wi(c.next.f,c.next.next.f,c.next.next.next.f)==-1?pj(a,b,c.next):Wi(b.Bb,c.next.next.f,b.Sa)==-1&&qj(a,b,c.next)}function ij(a,b,c){c.f.x>b.Sa.x&&(Wi(c.f,c.F.f,c.F.F.f)==1?rj(a,b,c):(sj(a,b,c),ij(a,b,c)))}function sj(a,b,c){Wi(c.F.f,c.F.F.f,c.F.F.F.f)==1?rj(a,b,c.F):Wi(b.Bb,c.F.F.f,b.Sa)==1&&sj(a,b,c.F)}
function rj(a,b,c){kj(a,c.F);c.F.f!=b.Sa&&Wi(b.Bb,c.F.f,b.Sa)==1&&Wi(c.f,c.F.f,c.F.F.f)==1&&rj(a,b,c)}
function jj(a,b,c,d,e){var f=Si(d,e);if(f==i)alert("[BUG:FIXME] FLIP failed due to missing triangle!");else{var g=Gi(f,Gi(d,e));Xi(e,Hi(d,e),Gi(d,e),g)?(nj(d,e,f,g),dj(a,d),dj(a,f),e==c&&g==b?c==a.Eh.Fa.Bb&&b==a.Eh.Fa.Sa&&(d.Ug(b,c),f.Ug(b,c),lj(a,d),lj(a,f)):(Wi(c,g,b)==-1?(g=Ti(f,e,g),f.Ga[g]=!0,lj(a,f),Fi(f)):(g=Ti(d,e,g),d.Ga[g]=!0,lj(a,d),Fi(d),d=f),jj(a,b,c,d,e))):(g=tj(b,c,f,g),uj(a,b,c,d,f,g),fj(a,b,c,d,e))}}
function tj(a,b,c,d){a=Wi(b,d,a);if(a==1)return Hi(c,d);else if(a==-1)return Gi(c,d);else alert("[Unsupported] poly2tri.sweep.NextFlipPoint: opposing point on constrained edge!")}function uj(a,b,c,d,e,f){var g=Si(e,f);g==i?alert("[BUG:FIXME] FLIP failed due to missing triangle"):(e=Gi(g,Gi(e,f)),Xi(c,Hi(d,c),Gi(d,c),e)?jj(a,c,e,g,e):(e=tj(b,c,g,e),uj(a,b,c,d,g,e)))};function vj(){this.name="ogGeometry";this.type=Na;this.re="";this.options=this.md=this.ke=i;this.Ad=[];this.Ad.ja=[0,0,0];this.Pf=this.fb=-1;this.color=[1,1,1,1];this.xc=[1,1,1,1];this.Np="unknown";this.wp=this.Qm=10;this.Ym=-1E3;this.Xm=9E3}vj.prototype=new C;r=vj.prototype;r.Na=function(a){a.dynamic?this.kc(a.data):v(a.url)&&a.type=="GeoJSON"&&wj(this,a.url)};r.lb=function(){xj(this).ti(this.fb)};function xj(a){var b=i,a=a.parent.parent.c;if(a.e&&a.e.r)b=a.e.r.ol;return b}r.na=m();r.oa=m();
r.ak=function(){this.V.readyState==4&&(this.V.status==404?this.md&&this.md(this.id):this.kc(Fc(this.V.responseText)))};
function yj(a,b,c,d){var e={Qh:!1,Ch:0,Bc:[0,0,0],vp:[0,0,0]},b=[b[0]-a[0],b[1]-a[1],b[2]-a[2]],d=[d[0]-c[0],d[1]-c[1],d[2]-c[2]],f=[a[0]-c[0],a[1]-c[1],a[2]-c[2]],g=b[0]*b[0]+b[1]*b[1]+b[2]*b[2],j=b[0]*d[0]+b[1]*d[1]+b[2]*d[2],k=d[0]*d[0]+d[1]*d[1]+d[2]*d[2],l=b[0]*f[0]+b[1]*f[1]+b[2]*f[2],n=d[0]*f[0]+d[1]*f[1]+d[2]*f[2],q=g*k-j*j;q<1.0E-14?(e.Qh=!0,f=0,g=j>k?l/j:n/k):(f=(j*n-k*l)/q,g=(g*n-j*l)/q);e.Bc=[a[0]+f*b[0],a[1]+f*b[1],a[2]+f*b[2]];e.vp=[c[0]+g*d[0],c[1]+g*d[1],c[2]+g*d[2]];return e}
function zj(a,b,c,d,e,f,g,j,k,l,n){l.push(b[0]);l.push(b[1]);l.push(b[2]);b=a;a++;l.push(f[0]);l.push(f[1]);l.push(f[2]);f=a;a++;l.push(e[0]);l.push(e[1]);l.push(e[2]);e=a;a++;l.push(k[0]);l.push(k[1]);l.push(k[2]);k=a;a++;l.push(c[0]);l.push(c[1]);l.push(c[2]);c=a;a++;l.push(g[0]);l.push(g[1]);l.push(g[2]);g=a;a++;l.push(d[0]);l.push(d[1]);l.push(d[2]);d=a;a++;l.push(j[0]);l.push(j[1]);l.push(j[2]);j=a;a++;n.push(c);n.push(g);n.push(d);n.push(g);n.push(j);n.push(d);n.push(b);n.push(e);n.push(f);
n.push(f);n.push(e);n.push(k);n.push(b);n.push(f);n.push(c);n.push(f);n.push(g);n.push(c);n.push(e);n.push(d);n.push(j);n.push(k);n.push(e);n.push(j);n.push(b);n.push(c);n.push(e);n.push(c);n.push(d);n.push(e);n.push(f);n.push(j);n.push(g);n.push(f);n.push(k);n.push(j);return a}
function Aj(a,b,c){var d={VertexSemantic:"",Vertices:i,IndexSemantic:"",Indices:i,VertexSemantic:"p",IndexSemantic:"TRIANGLES"};d.Vertices=b;d.Indices=c;b=new K(a.parent.parent.c);b.kc(d,i,i,b);a.color.length==4?b.hc.p(a.color[0],a.color[1],a.color[2],a.color[3]):a.color.length==3&&b.hc.p(a.color[0],a.color[1],a.color[2],1);return b}
r.kc=function(a){vh("CreateFromJSONObject");var b=!1;if(a.type=="FeatureCollection"&&(vh("[GeoJSON Parser] type = FeatureCollection"),v(a.features)))for(var a=a.features,c=a.length,d=0;d<c;d++)if(v(a[d].type)&&a[d].type=="Feature"&&v(a[d].properties)&&v(a[d].geometry)){var e=a[d].properties,f=a[d].geometry;if(v(e.id))this.Np=e.id;if(v(e.color))this.color=e.color;if(v(e.highlightcolor))this.xc=e.highlightcolor;if(v(e.linewidth))this.Qm=e.linewidth;if(v(e.pointsize))this.wp=e.pointsize;if(v(e.minelv))this.Ym=
e.minelv;if(v(e.maxelv))this.Xm=e.maxelv;if(v(f.type))if(e=f.type,e=="LineString")v(f.coordinates&&ka(f.coordinates))&&(b=Bj(this,f.coordinates));else if(e=="MultiLineString"){if(v(f.coordinates&&ka(f.coordinates))){f=f.coordinates;for(e=0;e<f.length;e++)Bj(this,f[e])&&(b=!0)}}else if(e=="Polygon"){if(v(f.coordinates&&ka(f.coordinates))){var b=f.coordinates,e=0,g=[],f=[],j=[];new O;var k=b.length;if(k==0)b=!1;else{if(k>=1){for(var l=0;l<k;l++)if(l==0)for(var n=0;n<b[l].length;n++)g.push(new Ai(b[l][n][0],
b[l][n][1],e)),j.push([b[l][n][0],b[l][n][1]]),e++;else{for(var q=[],n=0;n<b[l].length;n++)q.push(new Ai(b[l][n][0],b[l][n][1]),e),j.push([b[l][n][0],b[l][n][1]]),e++;f.push(q)}b=new bj(g);e=h;for(e in f)for(k in g=b,j=f[e],cj(g,j),k=h,j)g.d.push(j[k]);e=f=b;g=e.d[0].x;j=e.d[0].x;l=e.d[0].y;k=e.d[0].y;n=h;for(n in e.d){q=e.d[n];if(q.x>g)g=q.x;if(q.x<j)j=q.x;if(q.y>l)l=q.y;if(q.y<k)k=q.y}l=0.3*(l-k);e.Jh=new Ai(g+0.3*(g-j),k-l);e.ll=new Ai(j-l,k-l);e.d.sort(Bi);e=f;k=j=g=h;k=new Di(e.d[0],e.ll,e.Jh);
e.Tc.push(k);g=new Yi(k.Dd(1),k);j=new Yi(k.Dd(0),k);k=new Yi(k.Dd(2));e.Hh=new Zi(g,k);g.next=j;j.next=k;j.F=g;k.F=j;e=f;for(g=1;g<e.d.length;++g){var j=e.Dd(g),k=e,l=j,n=k.Nj(l),q=k,o=l,s=n,t=new Di(o,s.f,s.next.f);t.cd(s.df);q.Tc.push(t);o=new Yi(o);o.next=s.next;o.F=s;s.next.F=o;s.next=o;lj(q,t)||dj(q,t);q=o;l.x<=n.f.x+1.0E-16&&kj(k,n);l=q;n=l.next;for(s=h;n.next!=i;){s=mj(n);if(s>Vi||s<-Vi)break;kj(k,n);n=n.next}for(n=l.F;n.F!=i;){s=mj(n);if(s>Vi||s<-Vi)break;kj(k,n);n=n.F}if(l.next!=i&&l.next.next!=
i&&(s=Math.atan2(l.f.y-l.next.next.f.y,l.f.x-l.next.next.f.x),s<Ui)){k.Y.te=Wi(l.f,l.next.f,l.next.next.f)==-1?l.next.next:l.next;for(k.Y.ld=k.Y.te;k.Y.ld.next!=i&&k.Y.ld.f.y>=k.Y.ld.next.f.y;)k.Y.ld=k.Y.ld.next;if(k.Y.ld!=k.Y.te){for(k.Y.Gc=k.Y.ld;k.Y.Gc.next!=i&&k.Y.Gc.f.y<k.Y.Gc.next.f.y;)k.Y.Gc=k.Y.Gc.next;if(k.Y.Gc!=k.Y.ld)k.Y.width=k.Y.Gc.f.x-k.Y.te.f.x,k.Y.Rk=k.Y.te.f.y>k.Y.Gc.f.y,oj(k,k.Y.ld)}}k=q;for(l=0;l<j.Fh.length;++l)fj(e,j.Fh[l],k)}e=f.Hh.Jh.next.df;for(g=f.Hh.Jh.next.f;!Ki(e,g);)e=
Ji(e,g);ej(f,e);b=b.Un;f=[];for(e=0;e<b.length;e++)g=b[e].Dd(1).index,j=b[e].Dd(2).index,f.push(b[e].Dd(0).index),f.push(g),f.push(j)}b=!0}}}else e=="MultiPolygon"?xh("MultiPolygon is not yet supported"):e=="Point"?xh("Point is not yet supported"):e=="MultiPoint"&&xh("MultiPoint is not yet supported")}if(b)this.fb=xj(this).Gl(this.Ad)};function Cj(a,b){for(var c=0;c<a.length;c+=3)a[c+0]-=b[0],a[c+1]-=b[1],a[c+2]-=b[2]}
function wj(a,b){b==i?alert("invalid json-url"):(a.re=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.re,!0),a.V.onreadystatechange=function(){a.ak()},a.V.send())}
function Bj(a,b){var c=new O,d=[0,0,0],e=[0,0,0],f=[],g=b.length;if(g>1)for(var j=0;j<g;j++){var k=b[j][0],l=b[j][1];c.p(k,l,a.Xm);c.pa(d);c.p(k,l,a.Ym);c.pa(e);f.push([d[0],d[1],d[2]]);f.push([e[0],e[1],e[2]])}else return!1;g=f.length;for(k=e=d=c=0;k<f.length;k++)c+=f[k][0]/g,d+=f[k][1]/g,e+=f[k][2]/g;a.Ad.ja[0]=c;a.Ad.ja[1]=d;a.Ad.ja[2]=e;var g=[],k=[],n=0.5*a.Qm*G,l=0,q,o,s,t,x,B,S,X,Q,ja,T,U,L,Y,Z,$,va,wa,xa;if(f.length==4){j=f[0];q=f[1];o=f[2];s=f[3];var F=o[0]-j[0],ea=o[1]-j[1],qa=o[2]-j[2],
fa=q[0]-j[0],ra=q[1]-j[1],ha=q[2]-j[2],f=ea*ha-qa*ra;L=qa*fa-F*ha;l=F*ra-ea*fa;F=n/Math.sqrt(f*f+L*L+l*l);f*=F;L*=F;l*=F;B=[j[0]+f,j[1]+L,j[2]+l];S=[q[0]+f,q[1]+L,q[2]+l];X=[o[0]+f,o[1]+L,o[2]+l];Q=[s[0]+f,s[1]+L,s[2]+l];ja=[j[0]-f,j[1]-L,j[2]-l];T=[q[0]-f,q[1]-L,q[2]-l];U=[o[0]-f,o[1]-L,o[2]-l];L=[s[0]-f,s[1]-L,s[2]-l];zj(0,B,ja,U,X,S,T,L,Q,k,g);Cj(k,[c,d,e]);a.Ad.push(Aj(a,k,g))}else if(f.length>=6){j=f[0];q=f[1];o=f[2];s=f[3];t=f[4];x=f[5];F=o[0]-j[0];ea=o[1]-j[1];qa=o[2]-j[2];fa=q[0]-j[0];ra=
q[1]-j[1];ha=q[2]-j[2];Y=ea*ha-qa*ra;Z=qa*fa-F*ha;$=F*ra-ea*fa;F=n/Math.sqrt(Y*Y+Z*Z+$*$);Y*=F;Z*=F;$*=F;B=[j[0]+Y,j[1]+Z,j[2]+$];S=[q[0]+Y,q[1]+Z,q[2]+$];ja=[j[0]-Y,j[1]-Z,j[2]-$];T=[q[0]-Y,q[1]-Z,q[2]-$];for(j=4;j<f.length;j+=2)t=f[j],x=f[j+1],F=t[0]-o[0],ea=t[1]-o[1],qa=t[2]-o[2],fa=s[0]-o[0],ra=s[1]-o[1],ha=s[2]-o[2],va=ea*ha-qa*ra,wa=qa*fa-F*ha,xa=F*ra-ea*fa,F=n/Math.sqrt(va*va+wa*wa+xa*xa),va*=F,wa*=F,xa*=F,fa=s[0]-q[0],ra=s[1]-q[1],ha=s[2]-q[2],Q=Math.sqrt(fa*fa+ra*ra+ha*ha),fa/=Q,ra/=Q,ha/=
Q,F=s[0]-x[0],ea=s[1]-x[1],qa=s[2]-x[2],Q=Math.sqrt(F*F+ea*ea+qa*qa),F/=Q,ea/=Q,U=[x[0]+va,x[1]+wa,x[2]+xa],q=[x[0]-va,x[1]-wa,x[2]-xa],L=[t[0]+va,t[1]+wa,t[2]+xa],X=[t[0]-va,t[1]-wa,t[2]-xa],Q=yj([S[0],S[1],S[2]],[S[0]+fa,S[1]+ra,S[2]+ha],[U[0],U[1],U[2]],[U[0]+F,U[1]+ea,U[2]+ha]),U=yj([T[0],T[1],T[2]],[T[0]+fa,T[1]+ra,T[2]+ha],[q[0],q[1],U[2]],[q[0]+F,q[1]+ea,q[2]+ha]),q=yj([B[0],B[1],B[2]],[B[0]+fa,B[1]+ra,B[2]+ha],[L[0],L[1],L[2]],[L[0]+F,L[1]+ea,L[2]+ha]),F=yj([ja[0],ja[1],ja[2]],[ja[0]+fa,ja[1]+
ra,ja[2]+ha],[X[0],X[1],X[2]],[X[0]+F,X[1]+ea,X[2]+ha]),!Q.Qh&&!U.Qh&&!q.Qh&&!F.Qh?(Q=[Q.Bc[0],Q.Bc[1],Q.Bc[2]],L=[U.Bc[0],U.Bc[1],U.Bc[2]],X=[q.Bc[0],q.Bc[1],q.Bc[2]],U=[F.Bc[0],F.Bc[1],F.Bc[2]]):(Q=[s[0]+Y,s[1]+Z,s[2]+$],L=[s[0]-Y,s[1]-Z,s[2]-$],X=[o[0]+Y,o[1]+Z,o[2]+$],U=[o[0]-Y,o[1]-Z,o[2]-$]),l=zj(l,B,ja,U,X,S,T,L,Q,k,g),Y=va,Z=wa,$=xa,q=s,o=t,s=x,S=Q,T=L,B=X,ja=U;f=[x[0]+Y,x[1]+Z,x[2]+$];n=[x[0]-Y,x[1]-Z,x[2]-$];j=[t[0]+Y,t[1]+Z,t[2]+$];o=[t[0]-Y,t[1]-Z,t[2]-$];zj(l,X,U,o,j,Q,L,n,f,k,g);Cj(k,
[c,d,e]);a.Ad.push(Aj(a,k,g))}else return!1;return!0};function Dj(){this.name="ogAoeImageLayer";this.type=Za;this.O=!1;this.Ob=[];this.se=""}Dj.prototype=new C;r=Dj.prototype;r.Na=function(a){if(a.name)this.se=a.name};r.lb=function(){for(var a=0;a<this.Ob.length;a++){for(var b=a;b<this.Ob.length;b++)this.Ob[a].fb-=1;D(this.Ob[a])}};r.na=function(){this.O=!0;for(var a=0;a<this.Ob.length;a++)this.Ob[a].na()};r.oa=function(){this.O=!1;for(var a=0;a<this.Ob.length;a++)this.Ob[a].oa()};r.zj=function(a){this.Ob.push(a);a.Pf=this.id};
r.Qj=function(a){for(var b=0;b<this.Ob.length;b++)if(this.Ob[b]==a){for(var c=b+1;c<this.Ob.length;c++)this.Ob[c].fb-=1;D(this.Ob[b]);this.Ob.splice(b,1)}};function Ej(){this.name="ogVectorLayer";this.type=Ja;this.O=!1;this.ma=[];this.se=""}Ej.prototype=new C;r=Ej.prototype;r.Na=function(a){if(a.name)this.se=a.name};function Fj(a,b){var c=V(Qa,a.parent.parent,b);a.ma.push(c);c.Fq=a;return c}r.ti=function(a){for(var b=0;b<this.ma.length;b++)this.ma[b]==a&&(D(this.ma[b]),this.ma.splice(b,1))};r.lb=function(){Gj(this)};r.na=function(){this.O=!0;for(var a=0;a<this.ma.length;a++)this.ma[a].na()};r.oa=function(){this.O=!1;for(var a=0;a<this.ma.length;a++)this.ma[a].oa()};
function Gj(a){for(var b=0;b<a.ma.length;b++){for(var c=b;c<a.ma.length;c++)a.ma[b].fb-=1;D(a.ma[b])}}r.Gl=function(a){this.ma.push(a);a.Pf=this.id};r.ti=function(a){for(var b=0;b<this.ma.length;b++)if(this.ma[b]==a){for(var c=b+1;c<this.ma.length;c++)this.ma[c].fb-=1;D(this.ma[b]);this.ma.splice(b,1)}};function Hj(){this.name="ogImageLayer";this.type=Da;this.Qf=-1}Hj.prototype=new C;Hj.prototype.Qg=function(){var a=i,b=this.parent.parent.parent.c;if(b.e&&b.e.r)a=b.e.r.Da;return a};Hj.prototype.Cj=function(a){var b=this.Qg();if(b)this.Qf=b.Cj(a)};Hj.prototype.Uj=function(){var a=this.Qg();a&&this.Qf!=-1&&a.Uj(this.Qf)};Hj.prototype.Na=function(a){this.Cj(a)};function Ij(){this.name="ogBillboardLayer";this.type=Ya;this.O=!1;this.Xa=[];this.se=""}Ij.prototype=new C;r=Ij.prototype;r.Na=function(a){if(a.name)this.se=a.name};r.lb=function(){for(var a=0;a<this.Xa.length;a++)D(this.Xa[a])};r.na=function(){this.O=!0;for(var a=0;a<this.Xa.length;a++)this.Xa[a].na()};r.oa=function(){this.O=!1;for(var a=0;a<this.Xa.length;a++)this.Xa[a].oa()};r.Rj=function(a){for(var b=0;b<this.Xa.length;b++)this.Xa[b]==a&&(D(this.Xa[b]),this.Xa.splice(b,1))};r.Aj=function(a){this.Xa.push(a)};function Jj(){this.name="ogPointSpriteObject";this.type=ab;this.Ae=this.options=this.wd=i;this.aj=this.Mi=0}Jj.prototype=new C;r=Jj.prototype;r.Na=function(a){this.options=a;this.wd=new $c(this.parent.parent.parent.c);a.Vertices&&this.wd.ui(a.Vertices);if(a.PointUrl)Kj(this,a.PointUrl),this.qp=a.NumberOfPoints,this.wd.tj=this.qp;this.wd.ah(a.Center[0],a.Center[1],a.Center[2])};r.lb=function(){if(this.wd)this.wd.o(),this.wd=i,this.status=3};r.na=function(){this.wd.O=!0};r.Me=m();
r.oa=function(){this.wd.O=!1};function Kj(a,b){b==i?alert("invalid xyzurl"):(a.Tp=b,a.V=new window.XMLHttpRequest,a.V.open("GET",a.Tp,!0),a.V.onreadystatechange=function(){a.V.readyState==4&&(a.V.status==404?alert("xyz-file not found..."):Lj(a))},a.V.onprogress=function(){Lj(a)},a.V.send(),a.Mi=0,a.aj=0)}
function Lj(a){var b=a.V.responseText;a.Mi=b.lastIndexOf("\n");for(var b=b.substr(a.aj,a.Mi-a.aj-1),c=[],b=b.split(","),d=0;d<b.length;d++){var e=parseFloat(b[d]);isNaN(e)||c.push(e)}a.wd.ui(c);a.aj=a.Mi};function Mj(){this.name="ogGeometryLayer";this.type=Ha;this.O=!1;this.ta=[];this.se=""}Mj.prototype=new C;r=Mj.prototype;r.Na=function(a){if(a.name)this.se=a.name};r.lb=function(){for(var a=0;a<this.ta.length;a++){for(var b=a;b<this.ta.length;b++)this.ta[a].fb-=1;D(this.ta[a])}};r.na=function(){this.O=!0;for(var a=0;a<this.ta.length;a++)this.ta[a].na()};r.oa=function(){this.O=!1;for(var a=0;a<this.ta.length;a++)this.ta[a].oa()};r.Bd=function(a){this.ta.push(a);a.Pf=this.id};
r.Tj=function(a){for(var b=0;b<this.ta.length;b++)if(this.ta[b]==a){for(var c=b+1;c<this.ta.length;c++)this.ta[c].fb-=1;D(this.ta[b]);this.ta.splice(b,1)}};function Nj(){this.name="ogSurface";this.type=Pa;this.Dq=this.tq=!1;this.elevation=this.latitude=this.longitude=0;this.status=ib;this.u=i;this.elevation=this.latitude=this.longitude=0}Nj.prototype=new C;r=Nj.prototype;r.Me=function(a,b,c,d,e,f){this.longitude=a;this.latitude=b;this.elevation=c;this.u.ah(a,b,c,d,e,f)};
r.eh=function(a,b,c,d){this.longitude=a;this.latitude=b;this.elevation=c;var e=this.u;e.cc=a;e.bc=b;e.$b=c;var f=new O(a,b,c),c=Array(3);f.pa(c);f=new J;f.Sd(a,b);a=Array(16);b=f.a;a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=c[0];a[13]=c[1];a[14]=c[2];a[15]=1;c=new J;c.Le(a);a=new J;a.Le([1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1]);a.Oe();b=new J;b.gg(d[0],d[1],d[2],d[3]);b.Oe();f=new J;f.U(a,b);d=new J;d.U(a,f);b=new J;
b.Le([0,-1,0,0,1,0,0,0,0,0,1,0,0,0,0,1]);b.Oe();a=new J;a.U(b,d);d=new J;d.U(c,a);c=new J;c.Yd(G,G,G);a=new J;a.U(d,c);e.ka=a;Sc(e)};r.Cb=function(a,b,c){this.u.Cb(a,b,c)};r.qf=function(a,b,c){this.u.qf(a,b,c)};
r.Na=function(a){if(a==i)fc(E("owg.ogTexture"),"** ERROR: no options for surface creation!");else if(this.parent==i)fc(E("owg.ogTexture"),"** ERROR: no parent!");else if(this.parent.type!=Oa)fc(E("owg.ogTexture"),"** ERROR: parent is not scene!");else{if(a.jsonobject){this.u=new K(this.parent.parent.parent.parent.c);this.u.O=!1;this.u.rp=this.id;var b=this;this.u.kc(a.jsonobject,function(){b.longitude!=0&&b.latitude!=0&&b.Me(b.longitude,b.latitude,b.elevation);b.status=hb;b.K&&b.K(b.id)},function(){b.status=
3;b.J&&b.J(b.id)});this.re=a.url;this.u.Zn=a.jsonobject.VisibilityDistance?a.jsonobject.VisibilityDistance*G:5E4*G}this.longitude=a.jsonobject.Center[0];this.latitude=a.jsonobject.Center[1];this.elevation=a.jsonobject.Center[2]}};r.lb=function(){if(this.u)this.u.o(),this.u=i,this.status=3};r.oa=function(){if(this.u)this.u.O=!1};r.na=function(){if(this.u)this.u.O=!0};r.pf=function(a,b,c,d){this.u&&this.u.pf(a,b,c,d)};var Oj=-1;function V(a,b,c){var d=i;a==y?d=new Kh:a==z?d=new Mh:a==Ca?d=new Lh:a==Da?d=new Hj:a==Ea?d=new Sh:a!=Fa&&(a==Ga?d=new Qh:a==Ha?d=new Mj:a!=Ia&&a!=Ka&&(a==La?d=new jc:a==Wa?d=new Oh:a!=Ma&&(a==Na?d=new eg:a==Oa?d=new Yh:a==Pa?d=new Nj:a==Ra?d=new qc:a!=Sa&&a!=Ta&&a!=Ua&&a!=Va&&(a==Xa?d=new Wh:a==Ya?d=new Ij:a==Za?d=new Dj:a==$a?d=new Re:a==ab?d=new Jj:a==bb?d=new Uh:a==Ja?d=new Ej:a==Qa&&(d=new vj)))));if(d!=i)Oj++,d.id=Oj,d.parent=b,jb.push(d),d.Na(c);return d}w("_CreateObject",V);
w("ogGetObjectType",function(a){return(a=A(a))?a.type:cb});w("ogGetObjectName",function(a){return(a=A(a))?a.name:""});w("ogGetObjectPosition",function(a){var a=A(a),b={};if(a)switch(a.type){case Na:b={};if(v(a.options.jsonobject)&&v(a.options.jsonobject.Center))b.longitude=a.options.jsonobject.Center[0],b.latitude=a.options.jsonobject.Center[1],b.elevation=a.options.jsonobject.Center[2];break;case Wa:var c=new O;c.lc(a.wa.Ye,a.wa.Ze,a.wa.$e);b={};b.longitude=c.G[0];b.latitude=c.G[1];b.elevation=c.G[2]}return b});
w("ogGetNumObjects",function(){return jb.length});w("ogGetObjectAt",function(a){a=a<0||a>jb.length-1?i:jb[a];return a==i?-1:a.id});w("ogGetParentObject",function(a){if((a=A(a))&&a.parent)return a.parent.id;return-1});w("ogSetObjectName",function(a,b){var c=A(a);if(c)c.name=b});w("ogGetObjectByName",function(a){a:{for(var b=0;b<jb.length;b++)if(jb[b].name==a){a=jb[b];break a}a=i}if(a)return a.id;return-1});w("ogGetObjectStatus",function(a){if(a=A(a))return a.status;return 3});
w("ogOnLoad",function(a,b){var c=A(a);if(c)c.status==hb?b(a):c.K=b});w("ogOnFailure",function(a,b){var c=A(a);if(c)c.status==3?b(a):c.J=b});function Pj(a,b,c,d){a.cbfInit=b;a.cbfExit=c;a.cbfResize=d;a=V(y,i,a);if(a!=i)return a.id;return-1}w("ogCreateContext",Pj);w("ogCreateContextFromCanvas",function(a,b,c,d,e){var f={};f.fullscreen=b?!0:!1;f.canvas=a;return Pj(f,c,d,e)});w("ogDestroyContext",function(a){(a=A(a))&&a.type==y&&D(a)});w("ogGetGL",function(a){if((a=A(a))&&a.type==y)return a.c.b;return i});
w("ogGetWidth",function(a){if((a=A(a))&&a.type==y)return a=a.c?a.c.width:0,a;return 0});w("ogGetHeight",function(a){if((a=A(a))&&a.type==y)return a=a.c?a.c.height:0,a;return 0});w("ogGetScene",function(a){if((a=A(a))&&a.type==y&&a.e)return a.e.id;return-1});w("ogSetBackgroundColor",function(a,b,c,d,e){(a=A(a))&&a.type==y&&a.c&&a.c.dm(b,c,d,e)});w("ogSetTextColor",function(a,b,c,d){(a=A(a))&&a.type==y&&a.fontcolor.p(b,c,d,1)});w("ogDrawText",function(a,b,c,d){(a=A(a))&&a.type==y&&a.De(b,c,d)});
w("ogGetTextSize",function(a,b){var c=A(a);if(c&&c.type==y&&(c=c.Ij(b)))return c;c=Array(2);c[0]=0;c[1]=0;return c});w("ogSetMouseDownFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.Fd=b});w("ogSetMouseUpFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.Gd=b});w("ogSetMouseMoveFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.Ff=b});w("ogSetMouseWheelFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.nd=b});w("ogSetKeyDownFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.sk=b});
w("ogSetKeyUpFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.tk=b});w("ogSetResizeFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.Qe=b});w("ogSetRenderFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.ie=b});w("ogSetTimerFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.je=b});w("ogSetRenderGeometryFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.gq=b});w("ogSetBeginRenderFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.eq=b});
w("ogSetEndRenderFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.fq=b});w("ogSetFlyToStartedFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.Df=b});w("ogSetInPositionFunction",function(a,b){var c=A(a);if(c&&c.type==y)c.Ef=b});w("ogSetNumRenderPasses",function(a,b){var c=A(a);if(c&&c.type==y)c.pp=b});w("ogExec",m());w("ogSetArtworkDirectory",function(a){Xc=a});
function Qj(a,b,c){v(c)||(c={});if((a=A(a))&&a.type==y)return c.type=b,b==db||b==fb||b==eb||b==gb?(b==gb?nc=G=1:(G=1.1920930376163766E-7,nc=8388607),b=V(z,a,c),a.e=b,b.id):(fc(E("owg.og"),"** WARNING: wrong scene type"),-1);fc(E("owg.og"),"** WARNING: context is not valid");return-1}w("ogCreateScene",Qj);w("ogGetContext",function(a){if((a=A(a))&&a.type==z)if(a=a.parent)return a.id;return-1});w("ogGetWorld",function(a){if((a=A(a))&&a.type==z)if(a=a.Hg)return a.id;return-1});
w("ogPickGlobe",function(a,b,c){if((a=A(a))&&a.type==z&&a.gc==db)return a.Wg(b,c);return[!1,0,0,0,0,0,0]});w("ogToCartesian",function(a,b,c,d){if((a=A(a))&&a.type==z&&(a.gc==db||a.gc==gb)){var e=[];(new O(b,c,d)).pa(e)}return e||i});w("ogToWGS84",function(a,b,c,d){if((a=A(a))&&a.type==z&&a.gc==db){var e=new O;e.lc(b,c,d);e=[e.G[0],e.G[1],e.G[2]]}return e||i});w("ogCreateCamera",Rj);function Rj(a){if((a=A(a))&&a.type==z){var b=V(Ra,a,i);a.Gi.push(b);return b.id}return-1}w("ogCreateCamera",Rj);
w("ogDestroyCamera",function(a){(a=A(a))&&a.type==Ra&&D(a)});w("ogSetPosition",function(a,b,c,d){(a=A(a))&&a.type==Ra&&a.Ba(b,c,d)});function Sj(a){if((a=A(a))&&a.type==z)return a=a.Bf,sc(a),a.lf();return i}w("ogGetPosition",Sj);function Tj(a,b,c,d){if((a=A(a))&&a.type==Ra)return b>360&&(b-=360),b<0&&(b=360+b),a.Cb(b,c,d);return i}w("ogSetOrientation",Tj);w("ogSetOrientationFromQuaternion",function(a,b,c,d,e){if((a=A(a))&&a.type==Ra)return a.dh(b,c,d,e);return i});
function Uj(a){if((a=A(a))&&a.type==z)return a=a.Bf,sc(a),a.Rg();return i}w("ogGetOrientation",Uj);function Vj(a){if((a=A(a))&&a.type==z)return a.Bf.id;return-1}w("ogGetActiveCamera",Vj);w("ogSetActiveCamera",function(a){(a=A(a))&&a.type==Ra&&Nh(a.parent,a.id)});w("ogGetNumCameras",function(a){if((a=A(a))&&a.type==z)return a.Gi.length});w("ogGetCameraAt",function(a,b){var c=A(a);if(c&&c.type==z)return c.Gi[b].id;return-1});
w("ogLookAt",function(a,b,c,d){var e=Vj(a);sc(A(e));var f=Sj(a),g=[];(new O(f.longitude,f.latitude,f.elevation)).pa(g);var j=new I(g[0],g[1],g[2]),k=[];(new O(b,c,d)).pa(k);b=(new I(k[0],k[1],k[2])).jf();b.Yj(j);j=new J;j.Sd(f.longitude,f.latitude);f=new J;f.gd(g[0],g[1],g[2]);g=new J;g.U(f,j);g.Oe();g=g.Ma(b);g.Kc();g=g.a;f=g[0];j=g[1];b=g[2];g=Math.acos(f/Math.sqrt(1-b*b))*57.29577951308232;j<0&&f>0&&(g=360-g);j<0&&f<0&&(g=360-g);f=-(90-Math.acos(b)*57.29577951308232);b<-0.9&&(g=180+g,f=-f);a=Uj(a);
Tj(e,g,f,a.roll)});w("ogSetNavigationMode",function(a,b,c){v(c)||(c={});(a=A(a))&&a.type==z&&a.Wj(b,c)});function Wj(a){if((a=A(a))&&a.type==z){var b={};b.scenetype=a.gc;b=V(Ca,a,b);a.Hg=b;var c=V(Ra,a,i);sc(c);Nh(a,c.id);a.Gi.push(c);return b.id}return-1}w("ogCreateWorld",Wj);w("ogCreateGlobe",function(a){a=Qj(a,db);return Wj(a)});w("ogSetNorthpoleColor",function(a,b,c,d){if((a=A(a))&&a.type==Ca)a.parent.parent.c.e.r.Da.Wf=[b,c,d]});
w("ogSetSouthpoleColor",function(a,b,c,d){if((a=A(a))&&a.type==Ca)a.parent.parent.c.e.r.Da.bg=[b,c,d]});w("ogSetRenderQuality",function(a,b){var c=A(a);if(c&&c.type==Ca&&(c=c.parent.parent.c.e.r.Da,b>0&&b<=3))c.yn=b});w("ogSetRenderEffect",function(a,b,c){(a=A(a))&&a.type==Ca&&a.vi(b,c)});w("ogGetElevationAt",function(a,b,c){var d={hasvalue:!1,elevation:0,lod:0};(a=A(a))&&a.type==Ca&&(d=a.parent.parent.c.hg(b,c));return d});
w("ogLoadTextureAsync",function(a,b){var c=A(a);if(c&&c.type==z){var d={};d.url=b;return V(La,c,d).id}return-1});w("ogDestroyTexture",function(a){(a=A(a))&&a.type==La&&D(a)});w("ogBlitTexture",function(a,b,c,d){(a=A(a))&&a.type==La&&a.T(b,c,d)});w("ogAddImageLayer",function(a,b){var c=A(a);if(c&&c.type==Ca)return V(Da,c,b).id;return-1});w("ogRemoveImageLayer",function(a){if((a=A(a))&&a.type==Da)a.Uj(),D(a)});w("ogAddElevationLayer",function(a,b){var c=A(a);if(c&&c.type==Ca)return V(Ea,c,b).id;return-1});
w("ogRemoveElevationLayer",function(a){if((a=A(a))&&a.type==Ea)a.Sj(),D(a)});w("ogCreatePOILayer",function(a,b,c,d){var e={};e.name=b;e.textstyle=c;e.iconstyle=d;if((a=A(a))&&a.type==Ca)return V(Ga,a,e).id;return-1});w("ogRemovePOILayer",function(a){(a=A(a))&&a.type==Ga&&D(a)});w("ogHidePOILayer",function(a){(a=A(a))&&a.type==Ga&&a.na()});w("ogShowPOILayer",function(a){(a=A(a))&&a.type==Ga&&a.oa()});w("ogAddVectorLayer",function(a,b){var c=A(a);if(c&&c.type==Ca)return V(Ja,c,b).id;return-1});
w("ogRemoveVectorLayer",function(a){if((a=A(a))&&a.type==Ja)Gj(a),D(a)});w("ogLoadVectorAsync",function(a,b){var c=A(a);if(c&&c.type==Ja)return Fj(c,{url:b,dynamic:!1,type:"GeoJSON"}).id;return-1});w("ogDestroyVector",function(a){if((a=A(a))&&a.type==Qa)if(a.k){var b=a.k;b&&b.type==Ja&&b.ti(a)}else D(a);return-1});w("ogAddGeoJSON",function(a,b){var c=A(a);if(c&&c.type==Ja)return Fj(c,{dynamic:!0,type:"GeoJSON",data:b}).id;return-1});
w("ogCreatePOI",function(a,b){var c=A(a);if(c&&c.type==Ga){b.textstyle=c.fg;b.iconstyle=c.Mf;var d=V(Wa,c.parent.parent,b);c.Ta.push(d);d.xq=c;return d.id}return-1});w("ogDestroyPOI",function(a){if((a=A(a))&&a.type==Wa)if(a.k){var b=a.k;if(b&&b.type==Ga)for(var c=0;c<b.Ta.length;c++)b.Ta[c]==a&&(D(b.Ta[c]),b.Ta.splice(c,1))}else D(a);return-1});w("ogChangePOIText",function(a,b){var c=A(a);if(c&&c.type==Wa){var d=c.parent.parent;c.fg&&d.c.Bg.Jl(c.wa,b,c.fg)}});
w("ogChangePOIIcon",function(a,b){var c=A(a);if(c&&c.type==Wa){var d=c.parent.parent;c.Mf&&d.c.Bg.Il(c.wa,b,c.Mf)}});w("ogChangePOISize",function(a,b){var c=A(a);c&&c.type==Wa&&c.wa.wi(b)});w("ogChangePOIPositionWGS84",function(a,b,c,d){if((a=A(a))&&a.type==Wa){var e=[];(new O(b,c,d)).pa(e);b=e[0];c=e[1];e=e[2];a.wa.Yf?a.wa.Ba(b,c,e,0):a.wa.Ba(b,c,e,i)}});w("ogChangePOIPosition",function(a,b,c,d){(a=A(a))&&a.type==Wa&&(a.wa.Yf?a.wa.Ba(b,c,d,0):a.wa.Ba(b,c,d,i))});
w("ogHidePOI",function(a){(a=A(a))&&a.type==Wa&&a.na()});w("ogShowPOI",function(a){(a=A(a))&&a.type==Wa&&a.oa()});w("ogSetPOIActiveColor",function(a,b,c,d,e){if((a=A(a))&&a.type==Wa)a.wa.cl=new Ec(b,c,d,e)});w("ogPickPOI",function(a,b,c){if((a=A(a))&&a.type==z&&a.gc==db)return a.Yg(b,c);return-1});w("ogCreateGeometryLayer",function(a,b){var c={};c.name=b;var d=A(a);if(d&&d.type==Ca)return V(Ha,d,c).id;return-1});
w("ogCreateAoeImageLayer",function(a,b){var c={};c.name=b;var d=A(a);if(d&&d.type==Ca)return V(Za,d,c).id;return-1});w("ogCreateAoeImage",function(a,b){var c=A(a);if(c&&c.type==Za){var d=V($a,c.parent.parent,b);c.zj(d);return d.id}return-1});w("ogDestroyAoeImage",function(a){if((a=A(a))&&a.type==$a){var b=A(a.Pf);b&&b.type==Za&&b.Qj(a)}return-1});w("ogHideGeometryLayer",function(a){(a=A(a))&&a.type==Ha&&a.na()});w("ogShowGeometryLayer",function(a){(a=A(a))&&a.type==Ha&&a.oa()});
w("ogRemoveGeometryLayer",function(a){(a=A(a))&&a.type==Ha&&D(a);return-1});w("ogCreateGeometry",function(a,b){var c={};v(b.type)?c=b:c.jsonobject=b;var d=A(a);if(d&&d.type==Ha)return c=V(Na,d.parent.parent,c),d.Bd(c),c.id;return-1});w("ogLoadGeometryAsync",function(a,b){var c={};c.url=b;var d=A(a);if(d&&d.type==Ha)return c=V(Na,d.parent.parent,c),d.Bd(c),c.id;return-1});w("ogDestroyGeometry",function(a){if((a=A(a))&&a.type==Na){var b=A(a.Pf);b&&b.type==Ha&&b.Tj(a)}return-1});
w("ogSetGeometryPositionWGS84",function(a,b,c,d,e,f,g){if((a=A(a))&&a.type==Na)return a.Me(b,c,d,e,f,g);return-1});w("ogSetGeometryOrientation",function(a,b,c,d){if((a=A(a))&&a.type==Na)return a.Cb(b,c,d);return-1});w("ogSetGeometryPositionWGS84Quat",function(a,b,c,d,e){if((a=A(a))&&a.type==Na)return a.eh(b,c,d,e);return-1});w("ogSetGeometryScale",function(a,b,c,d){(a=A(a))&&a.type==Na&&a.qf(b,c,d)});w("ogGetNumMeshes",function(a){if((a=A(a))&&a.type==Na)return a.gb.length;return-1});
w("ogGetMeshAt",function(a,b){var c=A(a);if(c&&c.type==Na)return c.gb[b].id;return-1});w("ogHideGeometry",function(a){(a=A(a))&&a.type==Na&&a.na()});w("ogShowGeometry",function(a){(a=A(a))&&a.type==Na&&a.oa()});w("ogHighlightGeometry",function(a,b,c,d,e){(a=A(a))&&a.type==Na&&a.pf(b,c,d,e)});w("ogPickGeometry",function(a,b,c){if((a=A(a))&&a.type==z&&a.gc==db)if(b=a.nf(b,c),b=A(b))return b.parent.parent.id;return-1});
w("ogCreatePolylineWGS84",function(a,b,c){if((a=A(a))&&a.type==Ha)return c.coords=b,c.type="EarthPolyline",b=V(Na,a.parent.parent,c),a.Bd(b),b.id;return-1});w("ogGetSurfaceAt",function(a,b){var c=A(a);if(c&&c.type==Oa)return c.jb[b].id;return-1});w("ogHideMesh",function(a){(a=A(a))&&a.type==Oa&&a.na()});w("ogShowMesh",function(a){(a=A(a))&&a.type==Oa&&a.oa()});w("ogPickMesh",function(a,b,c){if((a=A(a))&&a.type==z&&a.gc==db)if(b=a.nf(b,c),b=A(b))return b.parent.id;return-1});
w("ogHideSurface",function(a){(a=A(a))&&a.type==Pa&&a.na()});w("ogShowSurface",function(a){(a=A(a))&&a.type==Pa&&a.oa()});w("ogPickSurface",function(a,b,c){if((a=A(a))&&a.type==z&&a.gc==db)return a.nf(b,c);return-1});w("ogCreateBillboardLayer",function(a,b){var c={};c.name=b;var d=A(a);if(d&&d.type==Ca)return V(Ya,d,c).id;return-1});w("ogRemoveBillboardLayer",function(a){(a=A(a))&&a.type==Ya&&D(a)});w("ogHideBillboardLayer",function(a){(a=A(a))&&a.type==Ya&&a.na()});
w("ogShowBillboardLayer",function(a){(a=A(a))&&a.type==Ya&&a.oa()});w("ogCreateBillboardFromCanvas",function(a,b,c,d,e){if((a=A(a))&&a.type==Ya){var f={};f.canvas=b;f.position=[c,d,e];b=V(Xa,a.parent.parent,f);a.Aj(b);b.k=a.id;return b.id}return-1});w("ogDestroyBillboard",function(a){if((a=A(a))&&a.type==Xa)if(a.k){var b=A(a.k);b&&b.type==Ya&&b.Rj(a)}else D(a);return-1});w("ogHideBillboard",function(a){(a=A(a))&&a.type==Xa&&a.na();return-1});
w("ogShowBillboard",function(a){(a=A(a))&&a.type==Xa&&a.oa();return-1});w("ogPickBillboard",function(a,b,c){if((a=A(a))&&a.type==z&&a.gc==db)return a.Xg(b,c);return-1});w("ogUpdateBillboard",function(a,b){var c=A(a);if(c&&c.type==Xa)c.Qc.canvas=b,c.Qc.hh();else return-1});w("ogFlyTo",function(a,b,c,d,e,f,g){(a=A(a).parent.c)&&Qe(a.sa,b,c,d,e,f,g)});w("ogFlyToLookAtPosition",function(a,b,c,d,e,f,g,j){(a=A(a).parent.c)&&a.Hj(b,c,d,e,f,g,j)});
w("ogSetFlightDuration",function(a,b){var c=A(a).parent.c;c&&c.bh(b)});w("ogStopFlyTo",function(a){(a=A(a).parent.c)&&a.gh()});w("ogLockNavigation",function(a){(a=A(a).parent.c)&&a.e.P.Tg(!0)});w("ogUnlockNavigation",function(a){(a=A(a).parent.c)&&a.e.P.Tg(!1)});w("ogSetCanvasSizeOffset",function(a,b,c){a=A(a).parent.c;a.Dl=b;a.Ok=c;ph()});w("ogDebug",function(){var a=new xi;ki(a);a.Jd()});w("ogWarning",function(a){fc(E("warning"),a)});function xh(a){E("error").log(Yb,a,h)}w("ogError",xh);
function vh(a){E("message").info(a)}w("ogLog",vh);w("ogWorldToWindow",function(a,b,c,d){var e;if((a=A(a))&&a.type==z&&(a.gc==db||a.gc==gb))e=a.parent.c,a=new J,a.U(e.vd,e.Sf),b=new I(b,c,d),d=a.Ma(b),b=d.a[0],c=-d.a[1],d=d.a[2],b=Math.floor((b+1)*0.5*e.width+0.5),c=Math.floor((c+1)*0.5*e.height-1+0.5),e=[b,c,(d+1)*0.5];return e||i});w("ogCalcDistanceWGS84",function(a,b,c,d){a=kc*Math.acos(Math.sin(H(b))*Math.sin(H(d))+Math.cos(H(b))*Math.cos(H(d))*Math.cos(H(c-a)));isNaN(a)&&(a=0);return a});
w("ogSetMinAltitude",function(a,b){var c=A(a);c&&c.type==z&&c.gc==db&&c.parent.c.e.P.hm(b)});w("ogNavKeyDown",function(a,b){var c=A(a);c&&c.parent.c.e.P.He({keyCode:b,stopPropagation:m(),preventDefault:m(),cancelBubble:!1,cancel:!1,returnValue:!1})});w("ogNavKeyUp",function(a,b){var c=A(a);c&&c.parent.c.e.P.Ie({keyCode:b,stopPropagation:m(),preventDefault:m(),cancelBubble:!1,cancel:!1,returnValue:!1})});
